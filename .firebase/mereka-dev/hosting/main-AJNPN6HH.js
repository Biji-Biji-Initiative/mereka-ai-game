var aO=Object.defineProperty,cO=Object.defineProperties;var lO=Object.getOwnPropertyDescriptors;var Zu=Object.getOwnPropertySymbols,uO=Object.getPrototypeOf,aC=Object.prototype.hasOwnProperty,cC=Object.prototype.propertyIsEnumerable,dO=Reflect.get;var sC=(n,e,t)=>e in n?aO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,j=(n,e)=>{for(var t in e||={})aC.call(e,t)&&sC(n,t,e[t]);if(Zu)for(var t of Zu(e))cC.call(e,t)&&sC(n,t,e[t]);return n},pe=(n,e)=>cO(n,lO(e));var eg=(n,e)=>{var t={};for(var r in n)aC.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Zu)for(var r of Zu(n))e.indexOf(r)<0&&cC.call(n,r)&&(t[r]=n[r]);return t};var Wi=(n,e,t)=>dO(uO(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(u){i(u)}},s=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});var lC=null;var tg=1,ng=Symbol("SIGNAL");function je(n){let e=lC;return lC=n,e}var uC={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function hO(n){if(!(og(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===tg)){if(!n.producerMustRecompute(n)&&!rg(n)){n.dirty=!1,n.lastCleanEpoch=tg;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=tg}}function dC(n){return n&&(n.nextProducerIndex=0),je(n)}function hC(n,e){if(je(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(og(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ig(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function rg(n){ed(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(hO(t),r!==t.version))return!0}return!1}function fC(n){if(ed(n),og(n))for(let e=0;e<n.producerNode.length;e++)ig(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ig(n,e){if(fO(n),ed(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)ig(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];ed(i),i.producerIndexOfThis[r]=e}}function og(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ed(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function fO(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function pO(){throw new Error}var mO=pO;function pC(n){mO=n}function ve(n){return typeof n=="function"}function Ki(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var td=Ki(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ho(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Et=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ve(r))try{r()}catch(o){e=o instanceof td?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{mC(o)}catch(s){e=e??[],s instanceof td?e=[...e,...s.errors]:e.push(s)}}if(e)throw new td(e)}}add(e){var t;if(e&&e!==this)if(this.closed)mC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ho(t,e)}remove(e){let{_finalizers:t}=this;t&&Ho(t,e),e instanceof n&&e._removeParent(this)}};Et.EMPTY=(()=>{let n=new Et;return n.closed=!0,n})();var sg=Et.EMPTY;function nd(n){return n instanceof Et||n&&"closed"in n&&ve(n.remove)&&ve(n.add)&&ve(n.unsubscribe)}function mC(n){ve(n)?n():n.unsubscribe()}var ar={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ws={setTimeout(n,e,...t){let{delegate:r}=Ws;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ws;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function rd(n){Ws.setTimeout(()=>{let{onUnhandledError:e}=ar;if(e)e(n);else throw n})}function qc(){}var gC=ag("C",void 0,void 0);function yC(n){return ag("E",void 0,n)}function vC(n){return ag("N",n,void 0)}function ag(n,e,t){return{kind:n,value:e,error:t}}var Go=null;function Ks(n){if(ar.useDeprecatedSynchronousErrorHandling){let e=!Go;if(e&&(Go={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Go;if(Go=null,t)throw r}}else n()}function _C(n){ar.useDeprecatedSynchronousErrorHandling&&Go&&(Go.errorThrown=!0,Go.error=n)}var Wo=class extends Et{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,nd(e)&&e.add(this)):this.destination=vO}static create(e,t,r){return new Qs(e,t,r)}next(e){this.isStopped?lg(vC(e),this):this._next(e)}error(e){this.isStopped?lg(yC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?lg(gC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},gO=Function.prototype.bind;function cg(n,e){return gO.call(n,e)}var ug=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){id(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){id(r)}else id(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){id(t)}}},Qs=class extends Wo{constructor(e,t,r){super();let i;if(ve(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&ar.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&cg(e.next,o),error:e.error&&cg(e.error,o),complete:e.complete&&cg(e.complete,o)}):i=e}this.destination=new ug(i)}};function id(n){ar.useDeprecatedSynchronousErrorHandling?_C(n):rd(n)}function yO(n){throw n}function lg(n,e){let{onStoppedNotification:t}=ar;t&&Ws.setTimeout(()=>t(n,e))}var vO={closed:!0,next:qc,error:yO,complete:qc};var Ys=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Wt(n){return n}function dg(...n){return hg(n)}function hg(n){return n.length===0?Wt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var De=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=wO(t)?t:new Qs(t,r,i);return Ks(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=wC(r),new r((i,o)=>{let s=new Qs({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ys](){return this}pipe(...t){return hg(t)(this)}toPromise(t){return t=wC(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function wC(n){var e;return(e=n??ar.Promise)!==null&&e!==void 0?e:Promise}function _O(n){return n&&ve(n.next)&&ve(n.error)&&ve(n.complete)}function wO(n){return n&&n instanceof Wo||_O(n)&&nd(n)}function fg(n){return ve(n?.lift)}function _e(n){return e=>{if(fg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function me(n,e,t,r,i){return new pg(n,e,t,r,i)}var pg=class extends Wo{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Js(){return _e((n,e)=>{let t=null;n._refCount++;let r=me(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Xs=class extends De{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,fg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Et;let t=this.getSubject();e.add(this.source.subscribe(me(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Et.EMPTY)}return e}refCount(){return Js()(this)}};var EC=Ki(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nn=(()=>{class n extends De{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new od(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new EC}next(t){Ks(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ks(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ks(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?sg:(this.currentObservers=null,o.push(t),new Et(()=>{this.currentObservers=null,Ho(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new De;return t.source=this,t}}return n.create=(e,t)=>new od(e,t),n})(),od=class extends nn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:sg}};var It=class extends nn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var mg={now(){return(mg.delegate||Date).now()},delegate:void 0};var sd=class extends Et{constructor(e,t){super()}schedule(e,t=0){return this}};var zc={setInterval(n,e,...t){let{delegate:r}=zc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=zc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Zs=class extends sd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return zc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&zc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ho(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ea=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ea.now=mg.now;var ta=class extends ea{constructor(e,t=ea.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Qi=new ta(Zs),gg=Qi;var ad=class extends Zs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var cd=class extends ta{};var yg=new cd(ad);var Pn=new De(n=>n.complete());function ld(n){return n&&ve(n.schedule)}function IC(n){return n[n.length-1]}function ud(n){return ve(IC(n))?n.pop():void 0}function Yi(n){return ld(IC(n))?n.pop():void 0}function dd(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function CC(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(f){s(f)}}function c(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function bC(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ko(n){return this instanceof Ko?(this.v=n,this):new Ko(n)}function SC(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(E){return function(S){return Promise.resolve(S).then(E,f)}}function a(E,S){r[E]&&(i[E]=function(x){return new Promise(function(N,k){o.push([E,x,N,k])>1||c(E,x)})},S&&(i[E]=S(i[E])))}function c(E,S){try{u(r[E](S))}catch(x){w(o[0][3],x)}}function u(E){E.value instanceof Ko?Promise.resolve(E.value.v).then(d,f):w(o[0][2],E)}function d(E){c("next",E)}function f(E){c("throw",E)}function w(E,S){E(S),o.shift(),o.length&&c(o[0][0],o[0][1])}}function TC(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof bC=="function"?bC(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var hd=n=>n&&typeof n.length=="number"&&typeof n!="function";function fd(n){return ve(n?.then)}function pd(n){return ve(n[Ys])}function md(n){return Symbol.asyncIterator&&ve(n?.[Symbol.asyncIterator])}function gd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function EO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yd=EO();function vd(n){return ve(n?.[yd])}function _d(n){return SC(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ko(t.read());if(i)return yield Ko(void 0);yield yield Ko(r)}}finally{t.releaseLock()}})}function wd(n){return ve(n?.getReader)}function st(n){if(n instanceof De)return n;if(n!=null){if(pd(n))return IO(n);if(hd(n))return bO(n);if(fd(n))return CO(n);if(md(n))return DC(n);if(vd(n))return SO(n);if(wd(n))return TO(n)}throw gd(n)}function IO(n){return new De(e=>{let t=n[Ys]();if(ve(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function bO(n){return new De(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function CO(n){return new De(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,rd)})}function SO(n){return new De(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function DC(n){return new De(e=>{DO(n,e).catch(t=>e.error(t))})}function TO(n){return DC(_d(n))}function DO(n,e){var t,r,i,o;return CC(this,void 0,void 0,function*(){try{for(t=TC(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function rn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ji(n,e=0){return _e((t,r)=>{t.subscribe(me(r,i=>rn(r,n,()=>r.next(i),e),()=>rn(r,n,()=>r.complete(),e),i=>rn(r,n,()=>r.error(i),e)))})}function Xi(n,e=0){return _e((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function AC(n,e){return st(n).pipe(Xi(e),Ji(e))}function xC(n,e){return st(n).pipe(Xi(e),Ji(e))}function MC(n,e){return new De(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function RC(n,e){return new De(t=>{let r;return rn(t,e,()=>{r=n[yd](),rn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ve(r?.return)&&r.return()})}function Ed(n,e){if(!n)throw new Error("Iterable cannot be null");return new De(t=>{rn(t,e,()=>{let r=n[Symbol.asyncIterator]();rn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function PC(n,e){return Ed(_d(n),e)}function NC(n,e){if(n!=null){if(pd(n))return AC(n,e);if(hd(n))return MC(n,e);if(fd(n))return xC(n,e);if(md(n))return Ed(n,e);if(vd(n))return RC(n,e);if(wd(n))return PC(n,e)}throw gd(n)}function be(n,e){return e?NC(n,e):st(n)}function oe(...n){let e=Yi(n);return be(n,e)}function Kt(n,e){let t=ve(n)?n:()=>n,r=i=>i.error(t());return new De(e?i=>e.schedule(r,0,i):r)}function vg(n){return!!n&&(n instanceof De||ve(n.lift)&&ve(n.subscribe))}var si=Ki(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Id(n){return n instanceof Date&&!isNaN(n)}var AO=Ki(n=>function(t=null){n(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t});function ai(n,e){let{first:t,each:r,with:i=xO,scheduler:o=e??Qi,meta:s=null}=Id(n)?{first:n}:typeof n=="number"?{each:n}:n;if(t==null&&r==null)throw new TypeError("No timeout provided.");return _e((a,c)=>{let u,d,f=null,w=0,E=S=>{d=rn(c,o,()=>{try{u.unsubscribe(),st(i({meta:s,lastValue:f,seen:w})).subscribe(c)}catch(x){c.error(x)}},S)};u=a.subscribe(me(c,S=>{d?.unsubscribe(),w++,c.next(f=S),r>0&&E(r)},void 0,void 0,()=>{d?.closed||d?.unsubscribe(),f=null})),!w&&E(t!=null?typeof t=="number"?t:+t-o.now():r)})}function xO(n){throw new AO(n)}function ge(n,e){return _e((t,r)=>{let i=0;t.subscribe(me(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:MO}=Array;function RO(n,e){return MO(e)?n(...e):n(e)}function bd(n){return ge(e=>RO(n,e))}var{isArray:PO}=Array,{getPrototypeOf:NO,prototype:OO,keys:kO}=Object;function Cd(n){if(n.length===1){let e=n[0];if(PO(e))return{args:e,keys:null};if(FO(e)){let t=kO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function FO(n){return n&&typeof n=="object"&&NO(n)===OO}function Sd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Hc(...n){let e=Yi(n),t=ud(n),{args:r,keys:i}=Cd(n);if(r.length===0)return be([],e);let o=new De(LO(r,e,i?s=>Sd(i,s):Wt));return t?o.pipe(bd(t)):o}function LO(n,e,t=Wt){return r=>{OC(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)OC(e,()=>{let u=be(n[c],e),d=!1;u.subscribe(me(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function OC(n,e,t){n?rn(t,n,e):e()}function kC(n,e,t,r,i,o,s,a){let c=[],u=0,d=0,f=!1,w=()=>{f&&!c.length&&!u&&e.complete()},E=x=>u<r?S(x):c.push(x),S=x=>{o&&e.next(x),u++;let N=!1;st(t(x,d++)).subscribe(me(e,k=>{i?.(k),o?E(k):e.next(k)},()=>{N=!0},void 0,()=>{if(N)try{for(u--;c.length&&u<r;){let k=c.shift();s?rn(e,s,()=>S(k)):S(k)}w()}catch(k){e.error(k)}}))};return n.subscribe(me(e,E,()=>{f=!0,w()})),()=>{a?.()}}function Dt(n,e,t=1/0){return ve(e)?Dt((r,i)=>ge((o,s)=>e(r,o,i,s))(st(n(r,i))),t):(typeof e=="number"&&(t=e),_e((r,i)=>kC(r,i,n,t)))}function na(n=1/0){return Dt(Wt,n)}function FC(){return na(1)}function ra(...n){return FC()(be(n,Yi(n)))}function Td(n){return new De(e=>{st(n()).subscribe(e)})}function _g(...n){let e=ud(n),{args:t,keys:r}=Cd(n),i=new De(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let f=!1;st(t[d]).subscribe(me(o,w=>{f||(f=!0,u--),a[d]=w},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(r?Sd(r,a):a),o.complete())}))}});return e?i.pipe(bd(e)):i}function LC(n=0,e,t=gg){let r=-1;return e!=null&&(ld(e)?t=e:r=e),new De(i=>{let o=Id(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Ft(n,e){return _e((t,r)=>{let i=0;t.subscribe(me(r,o=>n.call(e,o,i++)&&r.next(o)))})}function on(n){return _e((e,t)=>{let r=null,i=!1,o;r=e.subscribe(me(t,void 0,void 0,s=>{o=st(n(s,on(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function VC(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(me(s,d=>{let f=u++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ci(n,e){return ve(e)?Dt(n,e,1):Dt(n,1)}function wg(n,e=Qi){return _e((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let u=o;o=null,r.next(u)}};function c(){let u=s+n,d=e.now();if(d<u){i=this.schedule(void 0,u-d),r.add(i);return}a()}t.subscribe(me(r,u=>{o=u,s=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Zi(n){return _e((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function li(n){return n<=0?()=>Pn:_e((e,t)=>{let r=0;e.subscribe(me(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Eg(n){return ge(()=>n)}function Ig(n,e=Wt){return n=n??VO,_e((t,r)=>{let i,o=!0;t.subscribe(me(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function VO(n,e){return n===e}function Dd(n=UO){return _e((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function UO(){return new si}function Qo(n){return _e((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Mr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ft((i,o)=>n(i,o,r)):Wt,li(1),t?Zi(e):Dd(()=>new si))}function ia(n){return n<=0?()=>Pn:_e((e,t)=>{let r=[];e.subscribe(me(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function bg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ft((i,o)=>n(i,o,r)):Wt,ia(1),t?Zi(e):Dd(()=>new si))}function Gc(n=1/0){let e;n&&typeof n=="object"?e=n:e={count:n};let{count:t=1/0,delay:r,resetOnSuccess:i=!1}=e;return t<=0?Wt:_e((o,s)=>{let a=0,c,u=()=>{let d=!1;c=o.subscribe(me(s,f=>{i&&(a=0),s.next(f)},void 0,f=>{if(a++<t){let w=()=>{c?(c.unsubscribe(),c=null,u()):d=!0};if(r!=null){let E=typeof r=="number"?LC(r):st(r(f,a)),S=me(s,()=>{S.unsubscribe(),w()},()=>{s.complete()});E.subscribe(S)}else w()}else s.error(f)})),d&&(c.unsubscribe(),c=null,u())};u()})}function Cg(n,e){return _e(VC(n,e,arguments.length>=2,!0))}function Sg(...n){let e=Yi(n);return _e((t,r)=>{(e?ra(n,t,e):ra(n,t)).subscribe(r)})}function ot(n,e){return _e((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(me(r,c=>{i?.unsubscribe();let u=0,d=o++;st(n(c,d)).subscribe(i=me(r,f=>r.next(e?e(c,f,d,u++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Tg(n){return _e((e,t)=>{st(n).subscribe(me(t,()=>t.complete(),qc)),!t.closed&&e.subscribe(t)})}function At(n,e,t){let r=ve(n)||e||t?{next:n,error:e,complete:t}:n;return r?_e((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(me(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Wt}var ES="https://g.co/ng/security#xss",B=class extends Error{constructor(e,t){super(ih(e,t)),this.code=e}};function ih(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function rl(n){return{toString:n}.toString()}var Ad="__parameters__";function jO(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function IS(n,e,t){return rl(()=>{let r=jO(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,d){let f=c.hasOwnProperty(Ad)?c[Ad]:Object.defineProperty(c,Ad,{value:[]})[Ad];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var ur=globalThis;function Je(n){for(let e in n)if(n[e]===Je)return e;throw Error("Could not find renamed property on target object.")}function BO(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function gn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(gn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function qg(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var $O=Je({__forward_ref__:Je});function Wn(n){return n.__forward_ref__=Wn,n.toString=function(){return gn(this())},n}function mn(n){return bS(n)?n():n}function bS(n){return typeof n=="function"&&n.hasOwnProperty($O)&&n.__forward_ref__===Wn}function $(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Lt(n){return{providers:n.providers||[],imports:n.imports||[]}}function oh(n){return UC(n,SS)||UC(n,TS)}function CS(n){return oh(n)!==null}function UC(n,e){return n.hasOwnProperty(e)?n[e]:null}function qO(n){let e=n&&(n[SS]||n[TS]);return e||null}function jC(n){return n&&(n.hasOwnProperty(BC)||n.hasOwnProperty(zO))?n[BC]:null}var SS=Je({\u0275prov:Je}),BC=Je({\u0275inj:Je}),TS=Je({ngInjectableDef:Je}),zO=Je({ngInjectorDef:Je}),te=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=$({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function DS(n){return n&&!!n.\u0275providers}var HO=Je({\u0275cmp:Je}),GO=Je({\u0275dir:Je}),WO=Je({\u0275pipe:Je}),KO=Je({\u0275mod:Je}),Ld=Je({\u0275fac:Je}),Wc=Je({__NG_ELEMENT_ID__:Je}),$C=Je({__NG_ENV_ID__:Je});function da(n){return typeof n=="string"?n:n==null?"":String(n)}function QO(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():da(n)}function YO(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new B(-200,n)}function Ry(n,e){throw new B(-201,!1)}var Ae=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ae||{}),zg;function AS(){return zg}function Cn(n){let e=zg;return zg=n,e}function xS(n,e,t){let r=oh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Ae.Optional)return null;if(e!==void 0)return e;Ry(n,"Injector")}var JO={},Kc=JO,Hg="__NG_DI_FLAG__",Vd="ngTempTokenPath",XO="ngTokenPath",ZO=/\n/gm,ek="\u0275",qC="__source",la;function tk(){return la}function eo(n){let e=la;return la=n,e}function nk(n,e=Ae.Default){if(la===void 0)throw new B(-203,!1);return la===null?xS(n,void 0,e):la.get(n,e&Ae.Optional?null:void 0,e)}function U(n,e=Ae.Default){return(AS()||nk)(mn(n),e)}function W(n,e=Ae.Default){return U(n,sh(e))}function sh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Gg(n){let e=[];for(let t=0;t<n.length;t++){let r=mn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new B(900,!1);let i,o=Ae.Default;for(let s=0;s<r.length;s++){let a=r[s],c=rk(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(U(i,o))}else e.push(U(r))}return e}function MS(n,e){return n[Hg]=e,n.prototype[Hg]=e,n}function rk(n){return n[Hg]}function ik(n,e,t,r){let i=n[Vd];throw e[qC]&&i.unshift(e[qC]),n.message=ok(`
`+n.message,i,t,r),n[XO]=i,n[Vd]=null,n}function ok(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==ek?n.slice(2):n;let i=gn(e);if(Array.isArray(e))i=e.map(gn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):gn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(ZO,`
  `)}`}var Ct=MS(IS("Optional"),8);var Py=MS(IS("SkipSelf"),4);function Zo(n,e){let t=n.hasOwnProperty(Ld);return t?n[Ld]:null}function Ny(n,e){n.forEach(t=>Array.isArray(t)?Ny(t,e):e(t))}function RS(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ud(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function sk(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Oy(n,e,t){let r=il(n,e);return r>=0?n[r|1]=t:(r=~r,sk(n,r,e,t)),r}function Dg(n,e){let t=il(n,e);if(t>=0)return n[t|1]}function il(n,e){return ak(n,e,1)}function ak(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ha={},Sn=[],fa=new te(""),PS=new te("",-1),NS=new te(""),jd=class{get(e,t=Kc){if(t===Kc){let r=new Error(`NullInjectorError: No provider for ${gn(e)}!`);throw r.name="NullInjectorError",r}return t}},OS=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(OS||{}),Nr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Nr||{}),xt=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(xt||{});function ck(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Wg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];lk(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function kS(n){return n===3||n===4||n===6}function lk(n){return n.charCodeAt(0)===64}function Qc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?zC(n,t,i,null,e[++r]):zC(n,t,i,null,null))}}return n}function zC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var FS="ng-template";function uk(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&ck(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(ky(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function ky(n){return n.type===4&&n.value!==FS}function dk(n,e,t){let r=n.type===4&&!t?FS:n.value;return e===r}function hk(n,e,t){let r=4,i=n.attrs,o=i!==null?mk(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!cr(r)&&!cr(c))return!1;if(s&&cr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!dk(n,c,t)||c===""&&e.length===1){if(cr(r))return!1;s=!0}}else if(r&8){if(i===null||!uk(n,i,c,t)){if(cr(r))return!1;s=!0}}else{let u=e[++a],d=fk(c,i,ky(n),t);if(d===-1){if(cr(r))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&u!==f){if(cr(r))return!1;s=!0}}}}return cr(r)||s}function cr(n){return(n&1)===0}function fk(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return gk(e,n)}function pk(n,e,t=!1){for(let r=0;r<e.length;r++)if(hk(n,e[r],t))return!0;return!1}function mk(n){for(let e=0;e<n.length;e++){let t=n[e];if(kS(t))return e}return n.length}function gk(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function HC(n,e){return n?":not("+e.trim()+")":e}function yk(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!cr(s)&&(e+=HC(o,i),i=""),r=s,o=o||!cr(r);t++}return i!==""&&(e+=HC(o,i)),e}function vk(n){return n.map(yk).join(",")}function _k(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!cr(i))break;i=o}r++}return{attrs:e,classes:t}}function we(n){return rl(()=>{let e=BS(n),t=pe(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===OS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Nr.Emulated,styles:n.styles||Sn,_:null,schemas:n.schemas||null,tView:null,id:""});$S(t);let r=n.dependencies;return t.directiveDefs=WC(r,!1),t.pipeDefs=WC(r,!0),t.id=Ik(t),t})}function wk(n){return no(n)||LS(n)}function Ek(n){return n!==null}function Vt(n){return rl(()=>({type:n.type,bootstrap:n.bootstrap||Sn,declarations:n.declarations||Sn,imports:n.imports||Sn,exports:n.exports||Sn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function GC(n,e){if(n==null)return ha;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=xt.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==xt.None?[r,a]:r,e[o]=s):t[o]=r}return t}function ct(n){return rl(()=>{let e=BS(n);return $S(e),e})}function ah(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function no(n){return n[HO]||null}function LS(n){return n[GO]||null}function VS(n){return n[WO]||null}function US(n){let e=no(n)||LS(n)||VS(n);return e!==null?e.standalone:!1}function jS(n,e){let t=n[KO]||null;if(!t&&e===!0)throw new Error(`Type ${gn(n)} does not have '\u0275mod' property.`);return t}function BS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ha,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Sn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:GC(n.inputs,e),outputs:GC(n.outputs),debugInfo:null}}function $S(n){n.features?.forEach(e=>e(n))}function WC(n,e){if(!n)return null;let t=e?VS:wk;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(Ek)}function Ik(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ia(n){return{\u0275providers:n}}function Fy(...n){return{\u0275providers:qS(!0,n),\u0275fromNgModule:!0}}function qS(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Ny(e,s=>{let a=s;Kg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&zS(i,o),t}function zS(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Ly(i,o=>{e(o,r)})}}function Kg(n,e,t,r){if(n=mn(n),!n)return!1;let i=null,o=jC(n),s=!o&&no(n);if(!o&&!s){let c=n.ngModule;if(o=jC(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)Kg(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Ny(o.imports,d=>{Kg(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&zS(u,e)}if(!a){let u=Zo(i)||(()=>new i);e({provide:i,useFactory:u,deps:Sn},i),e({provide:NS,useValue:i,multi:!0},i),e({provide:fa,useValue:()=>U(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;Ly(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function Ly(n,e){for(let t of n)DS(t)&&(t=t.\u0275providers),Array.isArray(t)?Ly(t,e):e(t)}var bk=Je({provide:String,useValue:Je});function HS(n){return n!==null&&typeof n=="object"&&bk in n}function Ck(n){return!!(n&&n.useExisting)}function Sk(n){return!!(n&&n.useFactory)}function pa(n){return typeof n=="function"}function Tk(n){return!!n.useClass}var ch=new te(""),Pd={},Dk={},Ag;function Vy(){return Ag===void 0&&(Ag=new jd),Ag}var sn=class{},Yc=class extends sn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yg(e,s=>this.processProvider(s)),this.records.set(PS,oa(void 0,this)),i.has("environment")&&this.records.set(sn,oa(void 0,this));let o=this.records.get(ch);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(NS,Sn,Ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=je(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),je(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=eo(this),r=Cn(void 0),i;try{return e()}finally{eo(t),Cn(r)}}get(e,t=Kc,r=Ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty($C))return e[$C](this);r=sh(r);let i,o=eo(this),s=Cn(void 0);try{if(!(r&Ae.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=Pk(e)&&oh(e);u&&this.injectableDefInScope(u)?c=oa(Qg(e),Pd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Ae.Self?Vy():this.parent;return t=r&Ae.Optional&&t===Kc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Vd]=a[Vd]||[]).unshift(gn(e)),o)throw a;return ik(a,e,"R3InjectorError",this.source)}else throw a}finally{Cn(s),eo(o)}}resolveInjectorInitializers(){let e=je(null),t=eo(this),r=Cn(void 0),i;try{let o=this.get(fa,Sn,Ae.Self);for(let s of o)s()}finally{eo(t),Cn(r),je(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(gn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new B(205,!1)}processProvider(e){e=mn(e);let t=pa(e)?e:mn(e&&e.provide),r=xk(e);if(!pa(e)&&e.multi===!0){let i=this.records.get(t);i||(i=oa(void 0,Pd,!0),i.factory=()=>Gg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=je(null);try{return t.value===Pd&&(t.value=Dk,t.value=t.factory()),typeof t.value=="object"&&t.value&&Rk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{je(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=mn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Qg(n){let e=oh(n),t=e!==null?e.factory:Zo(n);if(t!==null)return t;if(n instanceof te)throw new B(204,!1);if(n instanceof Function)return Ak(n);throw new B(204,!1)}function Ak(n){if(n.length>0)throw new B(204,!1);let t=qO(n);return t!==null?()=>t.factory(n):()=>new n}function xk(n){if(HS(n))return oa(void 0,n.useValue);{let e=GS(n);return oa(e,Pd)}}function GS(n,e,t){let r;if(pa(n)){let i=mn(n);return Zo(i)||Qg(i)}else if(HS(n))r=()=>mn(n.useValue);else if(Sk(n))r=()=>n.useFactory(...Gg(n.deps||[]));else if(Ck(n))r=()=>U(mn(n.useExisting));else{let i=mn(n&&(n.useClass||n.provide));if(Mk(n))r=()=>new i(...Gg(n.deps));else return Zo(i)||Qg(i)}return r}function oa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Mk(n){return!!n.deps}function Rk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Pk(n){return typeof n=="function"||typeof n=="object"&&n instanceof te}function Yg(n,e){for(let t of n)Array.isArray(t)?Yg(t,e):t&&DS(t)?Yg(t.\u0275providers,e):e(t)}function pr(n,e){n instanceof Yc&&n.assertNotDestroyed();let t,r=eo(n),i=Cn(void 0);try{return e()}finally{eo(r),Cn(i)}}function WS(){return AS()!==void 0||tk()!=null}function Nk(n){if(!WS())throw new B(-203,!1)}function Ok(n){return typeof n=="function"}var fi=0,Re=1,fe=2,an=3,dr=4,mr=5,Bd=6,Jc=7,hr=8,ma=9,fr=10,bt=11,Xc=12,KC=13,ba=14,Or=15,lh=16,sa=17,ga=18,uh=19,KS=20,to=21,xg=22,es=23,Nn=25,QS=1;var ts=7,$d=8,qd=9,Gn=10,Uy=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Uy||{});function Jo(n){return Array.isArray(n)&&typeof n[QS]=="object"}function pi(n){return Array.isArray(n)&&n[QS]===!0}function jy(n){return(n.flags&4)!==0}function dh(n){return n.componentOffset>-1}function hh(n){return(n.flags&1)===1}function ro(n){return!!n.template}function kk(n){return(n[fe]&512)!==0}var Jg=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function YS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Lr(){return JS}function JS(n){return n.type.prototype.ngOnChanges&&(n.setInput=Lk),Fk}Lr.ngInherit=!0;function Fk(){let n=ZS(this),e=n?.current;if(e){let t=n.previous;if(t===ha)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Lk(n,e,t,r,i){let o=this.declaredInputs[r],s=ZS(n)||Vk(n,{previous:ha,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Jg(u&&u.currentValue,t,c===ha),YS(n,e,i,t)}var XS="__ngSimpleChanges__";function ZS(n){return n[XS]||null}function Vk(n,e){return n[XS]=e}var QC=null;var Rr=function(n,e,t){QC?.(n,e,t)},eT="svg",Uk="math",jk=!1;function Bk(){return jk}function kr(n){for(;Array.isArray(n);)n=n[fi];return n}function tT(n,e){return kr(e[n])}function Kn(n,e){return kr(e[n.index])}function nT(n,e){return n.data[e]}function By(n,e){return n[e]}function so(n,e){let t=e[n];return Jo(t)?t:t[fi]}function $y(n){return(n[fe]&128)===128}function $k(n){return pi(n[an])}function ya(n,e){return e==null?null:n[e]}function rT(n){n[sa]=0}function qk(n){n[fe]&1024||(n[fe]|=1024,$y(n)&&Zc(n))}function zk(n,e){for(;n>0;)e=e[ba],n--;return e}function qy(n){return!!(n[fe]&9216||n[es]?.dirty)}function Xg(n){n[fr].changeDetectionScheduler?.notify(1),qy(n)?Zc(n):n[fe]&64&&(Bk()?(n[fe]|=1024,Zc(n)):n[fr].changeDetectionScheduler?.notify())}function Zc(n){n[fr].changeDetectionScheduler?.notify();let e=el(n);for(;e!==null&&!(e[fe]&8192||(e[fe]|=8192,!$y(e)));)e=el(e)}function iT(n,e){if((n[fe]&256)===256)throw new B(911,!1);n[to]===null&&(n[to]=[]),n[to].push(e)}function Hk(n,e){if(n[to]===null)return;let t=n[to].indexOf(e);t!==-1&&n[to].splice(t,1)}function el(n){let e=n[an];return pi(e)?e[an]:e}var Ce={lFrame:dT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Gk(){return Ce.lFrame.elementDepthCount}function Wk(){Ce.lFrame.elementDepthCount++}function Kk(){Ce.lFrame.elementDepthCount--}function oT(){return Ce.bindingsEnabled}function Qk(){return Ce.skipHydrationRootTNode!==null}function Yk(n){return Ce.skipHydrationRootTNode===n}function Jk(){Ce.skipHydrationRootTNode=null}function Be(){return Ce.lFrame.lView}function Qt(){return Ce.lFrame.tView}function Le(n){return Ce.lFrame.contextLView=n,n[hr]}function Ve(n){return Ce.lFrame.contextLView=null,n}function yn(){let n=sT();for(;n!==null&&n.type===64;)n=n.parent;return n}function sT(){return Ce.lFrame.currentTNode}function Xk(){let n=Ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function as(n,e){let t=Ce.lFrame;t.currentTNode=n,t.isParent=e}function zy(){return Ce.lFrame.isParent}function aT(){Ce.lFrame.isParent=!1}function Zk(){return Ce.lFrame.contextLView}function fh(){let n=Ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function eF(){return Ce.lFrame.bindingIndex}function tF(n){return Ce.lFrame.bindingIndex=n}function ph(){return Ce.lFrame.bindingIndex++}function Hy(n){let e=Ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function nF(){return Ce.lFrame.inI18n}function rF(n,e){let t=Ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,Zg(e)}function iF(){return Ce.lFrame.currentDirectiveIndex}function Zg(n){Ce.lFrame.currentDirectiveIndex=n}function oF(n){let e=Ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function cT(n){Ce.lFrame.currentQueryIndex=n}function sF(n){let e=n[Re];return e.type===2?e.declTNode:e.type===1?n[mr]:null}function lT(n,e,t){if(t&Ae.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Ae.Host);)if(i=sF(o),i===null||(o=o[ba],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Ce.lFrame=uT();return r.currentTNode=e,r.lView=n,!0}function Gy(n){let e=uT(),t=n[Re];Ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function uT(){let n=Ce.lFrame,e=n===null?null:n.child;return e===null?dT(n):e}function dT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function hT(){let n=Ce.lFrame;return Ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var fT=hT;function Wy(){let n=hT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function aF(n){return(Ce.lFrame.contextLView=zk(n,Ce.lFrame.contextLView))[hr]}function ao(){return Ce.lFrame.selectedIndex}function ns(n){Ce.lFrame.selectedIndex=n}function Ky(){let n=Ce.lFrame;return nT(n.tView,n.selectedIndex)}function Yt(){Ce.lFrame.currentNamespace=eT}function gr(){cF()}function cF(){Ce.lFrame.currentNamespace=null}function lF(){return Ce.lFrame.currentNamespace}var pT=!0;function mh(){return pT}function gh(n){pT=n}function uF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=JS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function yh(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Nd(n,e,t){mT(n,e,3,t)}function Od(n,e,t,r){(n[fe]&3)===t&&mT(n,e,t,r)}function Mg(n,e){let t=n[fe];(t&3)===e&&(t&=16383,t+=1,n[fe]=t)}function mT(n,e,t,r){let i=r!==void 0?n[sa]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[sa]+=65536),(a<o||o==-1)&&(dF(n,t,e,c),n[sa]=(n[sa]&4294901760)+c+2),c++}function YC(n,e){Rr(4,n,e);let t=je(null);try{e.call(n)}finally{je(t),Rr(5,n,e)}}function dF(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[fe]>>14<n[sa]>>16&&(n[fe]&3)===e&&(n[fe]+=16384,YC(a,o)):YC(a,o)}var ua=-1,rs=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function hF(n){return n instanceof rs}function fF(n){return(n.flags&8)!==0}function pF(n){return(n.flags&16)!==0}function gT(n){return n!==ua}function zd(n){return n&32767}function mF(n){return n>>16}function Hd(n,e){let t=mF(n),r=e;for(;t>0;)r=r[ba],t--;return r}var ey=!0;function Gd(n){let e=ey;return ey=n,e}var gF=256,yT=gF-1,vT=5,yF=0,Pr={};function vF(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Wc)&&(r=t[Wc]),r==null&&(r=t[Wc]=yF++);let i=r&yT,o=1<<i;e.data[n+(i>>vT)]|=o}function Wd(n,e){let t=_T(n,e);if(t!==-1)return t;let r=e[Re];r.firstCreatePass&&(n.injectorIndex=e.length,Rg(r.data,n),Rg(e,null),Rg(r.blueprint,null));let i=Qy(n,e),o=n.injectorIndex;if(gT(i)){let s=zd(i),a=Hd(i,e),c=a[Re].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Rg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function _T(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Qy(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=CT(i),r===null)return ua;if(t++,i=i[ba],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ua}function ty(n,e,t){vF(n,e,t)}function _F(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(kS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function wT(n,e,t){if(t&Ae.Optional||n!==void 0)return n;Ry(e,"NodeInjector")}function ET(n,e,t,r){if(t&Ae.Optional&&r===void 0&&(r=null),!(t&(Ae.Self|Ae.Host))){let i=n[ma],o=Cn(void 0);try{return i?i.get(e,r,t&Ae.Optional):xS(e,r,t&Ae.Optional)}finally{Cn(o)}}return wT(r,e,t)}function IT(n,e,t,r=Ae.Default,i){if(n!==null){if(e[fe]&2048&&!(r&Ae.Self)){let s=CF(n,e,t,r,Pr);if(s!==Pr)return s}let o=bT(n,e,t,r,Pr);if(o!==Pr)return o}return ET(e,t,r,i)}function bT(n,e,t,r,i){let o=IF(t);if(typeof o=="function"){if(!lT(e,n,r))return r&Ae.Host?wT(i,t,r):ET(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&Ae.Optional))Ry(t);else return s}finally{fT()}}else if(typeof o=="number"){let s=null,a=_T(n,e),c=ua,u=r&Ae.Host?e[Or][mr]:null;for((a===-1||r&Ae.SkipSelf)&&(c=a===-1?Qy(n,e):e[a+8],c===ua||!XC(r,!1)?a=-1:(s=e[Re],a=zd(c),e=Hd(c,e)));a!==-1;){let d=e[Re];if(JC(o,a,d.data)){let f=wF(a,e,t,s,r,u);if(f!==Pr)return f}c=e[a+8],c!==ua&&XC(r,e[Re].data[a+8]===u)&&JC(o,a,e)?(s=d,a=zd(c),e=Hd(c,e)):a=-1}}return i}function wF(n,e,t,r,i,o){let s=e[Re],a=s.data[n+8],c=r==null?dh(a)&&ey:r!=s&&(a.type&3)!==0,u=i&Ae.Host&&o===a,d=EF(a,s,t,c,u);return d!==null?va(e,s,d,a):Pr}function EF(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,d=o>>20,f=r?a:a+d,w=i?a+d:u;for(let E=f;E<w;E++){let S=s[E];if(E<c&&t===S||E>=c&&S.type===t)return E}if(i){let E=s[c];if(E&&ro(E)&&E.type===t)return c}return null}function va(n,e,t,r){let i=n[t],o=e.data;if(hF(i)){let s=i;s.resolving&&YO(QO(o[t]));let a=Gd(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?Cn(s.injectImpl):null,d=lT(n,r,Ae.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&uF(t,o[t],e)}finally{u!==null&&Cn(u),Gd(a),s.resolving=!1,fT()}}return i}function IF(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Wc)?n[Wc]:void 0;return typeof e=="number"?e>=0?e&yT:bF:e}function JC(n,e,t){let r=1<<n;return!!(t[e+(n>>vT)]&r)}function XC(n,e){return!(n&Ae.Self)&&!(n&Ae.Host&&e)}var Xo=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return IT(this._tNode,this._lView,e,sh(r),t)}};function bF(){return new Xo(yn(),Be())}function yr(n){return rl(()=>{let e=n.prototype.constructor,t=e[Ld]||ny(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ld]||ny(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ny(n){return bS(n)?()=>{let e=ny(mn(n));return e&&e()}:Zo(n)}function CF(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[fe]&2048&&!(s[fe]&512);){let a=bT(o,s,t,r|Ae.Self,Pr);if(a!==Pr)return a;let c=o.parent;if(!c){let u=s[KS];if(u){let d=u.get(t,Pr,r);if(d!==Pr)return d}c=CT(s),s=s[ba]}o=c}return i}function CT(n){let e=n[Re],t=e.type;return t===2?e.declTNode:t===1?n[mr]:null}function Yy(n){return _F(yn(),n)}function ZC(n,e=null,t=null,r){let i=ST(n,e,t,r);return i.resolveInjectorInitializers(),i}function ST(n,e=null,t=null,r,i=new Set){let o=[t||Sn,Fy(n)];return r=r||(typeof n=="object"?void 0:gn(n)),new Yc(o,e||Vy(),r||null,i)}var Jt=(()=>{class n{static{this.THROW_IF_NOT_FOUND=Kc}static{this.NULL=new jd}static create(t,r){if(Array.isArray(t))return ZC({name:""},r,t,"");{let i=t.name??"";return ZC({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=$({token:n,providedIn:"any",factory:()=>U(PS)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var SF="ngOriginalError";function Pg(n){return n[SF]}var Fr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Pg(e);for(;t&&Pg(t);)t=Pg(t);return t||null}},TT=new te("",{providedIn:"root",factory:()=>W(Fr).handleError.bind(void 0)}),Jy=(()=>{class n{static{this.__NG_ELEMENT_ID__=TF}static{this.__NG_ENV_ID__=t=>t}}return n})(),ry=class extends Jy{constructor(e){super(),this._lView=e}onDestroy(e){return iT(this._lView,e),()=>Hk(this._lView,e)}};function TF(){return new ry(Be())}function DF(){return vh(yn(),Be())}function vh(n,e){return new Vr(Kn(n,e))}var Vr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=DF}}return n})();var iy=class extends nn{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,WS()&&(this.destroyRef=W(Jy,{optional:!0})??void 0)}emit(e){let t=je(null);try{super.next(e)}finally{je(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Ng(o),i&&(i=Ng(i)),s&&(s=Ng(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Et&&e.add(a),a}};function Ng(n){return e=>{setTimeout(n,void 0,e)}}var at=iy;function DT(n){return(n.flags&128)===128}var AT=new Map,AF=0;function xF(){return AF++}function MF(n){AT.set(n[uh],n)}function RF(n){AT.delete(n[uh])}var eS="__ngContext__";function io(n,e){Jo(e)?(n[eS]=e[uh],MF(e)):n[eS]=e}function xT(n){return RT(n[Xc])}function MT(n){return RT(n[dr])}function RT(n){for(;n!==null&&!pi(n);)n=n[dr];return n}var oy;function PT(n){oy=n}function PF(){if(oy!==void 0)return oy;if(typeof document<"u")return document;throw new B(210,!1)}var Xy=new te("",{providedIn:"root",factory:()=>NF}),NF="ng",Zy=new te(""),Qn=new te("",{providedIn:"platform",factory:()=>"unknown"});var ev=new te(""),tv=new te("",{providedIn:"root",factory:()=>PF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var OF="h",kF="b";var FF=()=>null;function nv(n,e,t=!1){return FF(n,e,t)}var NT=!1,LF=new te("",{providedIn:"root",factory:()=>NT});var xd;function VF(){if(xd===void 0&&(xd=null,ur.trustedTypes))try{xd=ur.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return xd}function tS(n){return VF()?.createScriptURL(n)||n}var Kd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ES})`}};function Ca(n){return n instanceof Kd?n.changingThisBreaksApplicationSecurity:n}function rv(n,e){let t=UF(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ES})`)}return t===e}function UF(n){return n instanceof Kd&&n.getTypeName()||null}var jF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function OT(n){return n=String(n),n.match(jF)?n:"unsafe:"+n}var _h=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(_h||{});function iv(n){let e=FT();return e?e.sanitize(_h.URL,n)||"":rv(n,"URL")?Ca(n):OT(da(n))}function BF(n){let e=FT();if(e)return tS(e.sanitize(_h.RESOURCE_URL,n)||"");if(rv(n,"ResourceURL"))return tS(Ca(n));throw new B(904,!1)}function $F(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?BF:iv}function kT(n,e,t){return $F(e,t)(n)}function FT(){let n=Be();return n&&n[fr].sanitizer}var qF=/^>|^->|<!--|-->|--!>|<!-$/g,zF=/(<|>)/g,HF="\u200B$1\u200B";function GF(n){return n.replace(qF,e=>e.replace(zF,HF))}function LT(n){return n instanceof Function?n():n}function WF(n){return(n??W(Jt)).get(Qn)==="browser"}var ui=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ui||{}),KF;function ov(n,e){return KF(n,e)}function aa(n,e,t,r,i){if(r!=null){let o,s=!1;pi(r)?o=r:Jo(r)&&(s=!0,r=r[fi]);let a=kr(r);n===0&&t!==null?i==null?$T(e,t,a):Qd(e,t,a,i||null,!0):n===1&&t!==null?Qd(e,t,a,i||null,!0):n===2?hL(e,a,s):n===3&&e.destroyNode(a),o!=null&&pL(e,n,o,t,i)}}function QF(n,e){return n.createText(e)}function YF(n,e,t){n.setValue(e,t)}function JF(n,e){return n.createComment(GF(e))}function VT(n,e,t){return n.createElement(e,t)}function XF(n,e){UT(n,e),e[fi]=null,e[mr]=null}function ZF(n,e,t,r,i,o){r[fi]=i,r[mr]=e,Eh(n,r,t,1,i,o)}function UT(n,e){e[fr].changeDetectionScheduler?.notify(1),Eh(n,e,e[bt],2,null,null)}function eL(n){let e=n[Xc];if(!e)return Og(n[Re],n);for(;e;){let t=null;if(Jo(e))t=e[Xc];else{let r=e[Gn];r&&(t=r)}if(!t){for(;e&&!e[dr]&&e!==n;)Jo(e)&&Og(e[Re],e),e=e[an];e===null&&(e=n),Jo(e)&&Og(e[Re],e),t=e&&e[dr]}e=t}}function tL(n,e,t,r){let i=Gn+r,o=t.length;r>0&&(t[i-1][dr]=e),r<o-Gn?(e[dr]=t[i],RS(t,Gn+r,e)):(t.push(e),e[dr]=null),e[an]=t;let s=e[lh];s!==null&&t!==s&&nL(s,e);let a=e[ga];a!==null&&a.insertView(n),Xg(e),e[fe]|=128}function nL(n,e){let t=n[qd],i=e[an][an][Or];e[Or]!==i&&(n[fe]|=Uy.HasTransplantedViews),t===null?n[qd]=[e]:t.push(e)}function jT(n,e){let t=n[qd],r=t.indexOf(e);t.splice(r,1)}function sy(n,e){if(n.length<=Gn)return;let t=Gn+e,r=n[t];if(r){let i=r[lh];i!==null&&i!==n&&jT(i,r),e>0&&(n[t-1][dr]=r[dr]);let o=Ud(n,Gn+e);XF(r[Re],r);let s=o[ga];s!==null&&s.detachView(o[Re]),r[an]=null,r[dr]=null,r[fe]&=-129}return r}function BT(n,e){if(!(e[fe]&256)){let t=e[bt];t.destroyNode&&Eh(n,e,t,3,null,null),eL(e)}}function Og(n,e){if(e[fe]&256)return;let t=je(null);try{e[fe]&=-129,e[fe]|=256,e[es]&&fC(e[es]),iL(n,e),rL(n,e),e[Re].type===1&&e[bt].destroy();let r=e[lh];if(r!==null&&pi(e[an])){r!==e[an]&&jT(r,e);let i=e[ga];i!==null&&i.detachView(n)}RF(e)}finally{je(t)}}function rL(n,e){let t=n.cleanup,r=e[Jc];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Jc]=null);let i=e[to];if(i!==null){e[to]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function iL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof rs)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Rr(4,a,c);try{c.call(a)}finally{Rr(5,a,c)}}else{Rr(4,i,o);try{o.call(i)}finally{Rr(5,i,o)}}}}}function oL(n,e,t){return sL(n,e.parent,t)}function sL(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[fi];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Nr.None||o===Nr.Emulated)return null}return Kn(r,t)}}function Qd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function $T(n,e,t){n.appendChild(e,t)}function nS(n,e,t,r,i){r!==null?Qd(n,e,t,r,i):$T(n,e,t)}function aL(n,e,t,r){n.removeChild(e,t,r)}function sv(n,e){return n.parentNode(e)}function cL(n,e){return n.nextSibling(e)}function lL(n,e,t){return dL(n,e,t)}function uL(n,e,t){return n.type&40?Kn(n,t):null}var dL=uL,rS;function wh(n,e,t,r){let i=oL(n,r,e),o=e[bt],s=r.parent||e[mr],a=lL(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)nS(o,i,t[c],a,!1);else nS(o,i,t,a,!1);rS!==void 0&&rS(o,r,e,t,i)}function kd(n,e){if(e!==null){let t=e.type;if(t&3)return Kn(e,n);if(t&4)return ay(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return kd(n,r);{let i=n[e.index];return pi(i)?ay(-1,i):kr(i)}}else{if(t&32)return ov(e,n)()||kr(n[e.index]);{let r=qT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=el(n[Or]);return kd(i,r)}else return kd(n,e.next)}}}return null}function qT(n,e){if(e!==null){let r=n[Or][mr],i=e.projection;return r.projection[i]}return null}function ay(n,e){let t=Gn+n+1;if(t<e.length){let r=e[t],i=r[Re].firstChild;if(i!==null)return kd(r,i)}return e[ts]}function hL(n,e,t){let r=sv(n,e);r&&aL(n,r,e,t)}function av(n,e,t,r,i,o,s){for(;t!=null;){let a=r[t.index],c=t.type;if(s&&e===0&&(a&&io(kr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)av(n,e,t.child,r,i,o,!1),aa(e,n,i,a,o);else if(c&32){let u=ov(t,r),d;for(;d=u();)aa(e,n,i,d,o);aa(e,n,i,a,o)}else c&16?fL(n,e,r,t,i,o):aa(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Eh(n,e,t,r,i,o){av(t,r,n.firstChild,e,i,o,!1)}function fL(n,e,t,r,i,o){let s=t[Or],c=s[mr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];aa(e,n,i,d,o)}else{let u=c,d=s[an];DT(r)&&(u.flags|=128),av(n,e,u,d,i,o,!0)}}function pL(n,e,t,r,i){let o=t[ts],s=kr(t);o!==s&&aa(e,n,r,o,i);for(let a=Gn;a<t.length;a++){let c=t[a];Eh(c[Re],c,n,e,r,o)}}function mL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:ui.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ui.Important),n.setStyle(t,r,i,o))}}function gL(n,e,t){n.setAttribute(e,"style",t)}function zT(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function HT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Wg(n,e,r),i!==null&&zT(n,e,i),o!==null&&gL(n,e,o)}var Yn={};function I(n=1){GT(Qt(),Be(),ao()+n,!1)}function GT(n,e,t,r){if(!r)if((e[fe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Nd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Od(e,o,0,t)}ns(t)}function L(n,e=Ae.Default){let t=Be();if(t===null)return U(n,e);let r=yn();return IT(r,t,mn(n),e)}function WT(){let n="invalid";throw new Error(n)}function KT(n,e,t,r,i,o){let s=je(null);try{let a=null;i&xt.SignalBased&&(a=e[r][ng]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&xt.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):YS(e,a,r,o)}finally{je(s)}}function yL(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ns(~i);else{let o=i,s=t[++r],a=t[++r];rF(s,o);let c=e[o];a(2,c)}}}finally{ns(-1)}}function Ih(n,e,t,r,i,o,s,a,c,u,d){let f=e.blueprint.slice();return f[fi]=i,f[fe]=r|4|128|8|64,(u!==null||n&&n[fe]&2048)&&(f[fe]|=2048),rT(f),f[an]=f[ba]=n,f[hr]=t,f[fr]=s||n&&n[fr],f[bt]=a||n&&n[bt],f[ma]=c||n&&n[ma]||null,f[mr]=o,f[uh]=xF(),f[Bd]=d,f[KS]=u,f[Or]=e.type==2?n[Or]:f,f}function ol(n,e,t,r,i){let o=n.data[e];if(o===null)o=vL(n,e,t,r,i),nF()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Xk();o.injectorIndex=s===null?-1:s.injectorIndex}return as(o,!0),o}function vL(n,e,t,r,i){let o=sT(),s=zy(),a=s?o:o&&o.parent,c=n.data[e]=bL(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function QT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function YT(n,e,t,r,i){let o=ao(),s=r&2;try{ns(-1),s&&e.length>Nn&&GT(n,e,Nn,!1),Rr(s?2:0,i),t(r,i)}finally{ns(o),Rr(s?3:1,i)}}function cv(n,e,t){if(jy(e)){let r=je(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{je(r)}}}function lv(n,e,t){oT()&&(xL(n,e,t,Kn(t,e)),(t.flags&64)===64&&eD(n,e,t))}function uv(n,e,t=Kn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function JT(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=dv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function dv(n,e,t,r,i,o,s,a,c,u,d){let f=Nn+r,w=f+i,E=_L(f,w),S=typeof u=="function"?u():u;return E[Re]={type:n,blueprint:E,template:t,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:S,incompleteFirstPass:!1,ssrId:d}}function _L(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Yn);return t}function wL(n,e,t,r){let o=r.get(LF,NT)||t===Nr.ShadowDom,s=n.selectRootElement(e,o);return EL(s),s}function EL(n){IL(n)}var IL=()=>null;function bL(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Qk()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function iS(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=xt.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}n===0?oS(r,t,u,a,c):oS(r,t,u,a)}return r}function oS(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function CL(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,u=null;for(let d=r;d<i;d++){let f=o[d],w=t?t.get(f):null,E=w?w.inputs:null,S=w?w.outputs:null;c=iS(0,f.inputs,d,c,E),u=iS(1,f.outputs,d,u,S);let x=c!==null&&s!==null&&!ky(e)?jL(c,d,s):null;a.push(x)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function SL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function XT(n,e,t,r,i,o,s,a){let c=Kn(e,t),u=e.inputs,d;!a&&u!=null&&(d=u[r])?(fv(n,t,d,r,i),dh(e)&&TL(t,e.index)):e.type&3?(r=SL(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function TL(n,e){let t=so(e,n);t[fe]&16||(t[fe]|=64)}function hv(n,e,t,r){if(oT()){let i=r===null?null:{"":-1},o=RL(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&ZT(n,e,t,s,i,a),i&&PL(t,r,i)}t.mergedAttrs=Qc(t.mergedAttrs,t.attrs)}function ZT(n,e,t,r,i,o){for(let u=0;u<r.length;u++)ty(Wd(t,e),n,r[u].type);OL(t,n.data.length,r.length);for(let u=0;u<r.length;u++){let d=r[u];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=QT(n,e,r.length,null);for(let u=0;u<r.length;u++){let d=r[u];t.mergedAttrs=Qc(t.mergedAttrs,d.hostAttrs),kL(n,t,e,c,d),NL(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}CL(n,t,o)}function DL(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;AL(s)!=a&&s.push(a),s.push(t,r,o)}}function AL(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function xL(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;dh(t)&&FL(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Wd(t,e),io(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],u=va(e,n,a,t);if(io(u,e),s!==null&&UL(e,a-i,u,c,t,s),ro(c)){let d=so(t.index,e);d[hr]=va(e,n,a,t)}}}function eD(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=iF();try{ns(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];Zg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&ML(c,u)}}finally{ns(-1),Zg(s)}}function ML(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function RL(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(pk(e,s.selectors,!1))if(r||(r=[]),ro(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;cy(n,e,c)}else r.unshift(s),cy(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function cy(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function PL(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new B(-301,!1);r.push(e[i],o)}}}function NL(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ro(e)&&(t[""]=n)}}function OL(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function kL(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Zo(i.type,!0)),s=new rs(o,ro(i),L);n.blueprint[r]=s,t[r]=s,DL(n,e,r,QT(n,t,i.hostVars,Yn),i)}function FL(n,e,t){let r=Kn(e,n),i=JT(t),o=n[fr].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=bh(n,Ih(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function LL(n,e,t,r,i,o){let s=Kn(n,e);VL(e[bt],s,o,n.value,t,r,i)}function VL(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?da(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function UL(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],d=s[a++],f=s[a++];KT(r,t,c,u,d,f)}}function jL(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function tD(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function nD(n,e){let t=n.contentQueries;if(t!==null){let r=je(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];cT(o),a.contentQueries(2,e[s],s)}}}finally{je(r)}}}function bh(n,e){return n[Xc]?n[KC][dr]=e:n[Xc]=e,n[KC]=e,e}function ly(n,e,t){cT(0);let r=je(null);try{e(n,t)}finally{je(r)}}function BL(n){return n[Jc]||(n[Jc]=[])}function $L(n){return n.cleanup||(n.cleanup=[])}function rD(n,e){let t=n[ma],r=t?t.get(Fr,null):null;r&&r.handleError(e)}function fv(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],u=e[s],d=n.data[s];KT(d,u,r,a,c,i)}}function iD(n,e,t){let r=tT(e,n);YF(n[bt],r,t)}function qL(n,e){let t=so(e,n),r=t[Re];zL(r,t);let i=t[fi];i!==null&&t[Bd]===null&&(t[Bd]=nv(i,t[ma])),pv(r,t,t[hr])}function zL(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function pv(n,e,t){Gy(e);try{let r=n.viewQuery;r!==null&&ly(1,r,t);let i=n.template;i!==null&&YT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ga]?.finishViewCreation(n),n.staticContentQueries&&nD(n,e),n.staticViewQueries&&ly(2,n.viewQuery,t);let o=n.components;o!==null&&HL(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[fe]&=-5,Wy()}}function HL(n,e){for(let t=0;t<e.length;t++)qL(n,e[t])}function GL(n,e,t,r){let i=je(null);try{let o=e.tView,a=n[fe]&4096?4096:16,c=Ih(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[lh]=u;let d=n[ga];return d!==null&&(c[ga]=d.createEmbeddedView(o)),pv(o,c,t),c}finally{je(i)}}function sS(n,e){return!e||e.firstChild===null||DT(n)}function WL(n,e,t,r=!0){let i=e[Re];if(tL(i,e,n,t),r){let s=ay(t,n),a=e[bt],c=sv(a,n[ts]);c!==null&&ZF(i,n[mr],a,e,c,s)}let o=e[Bd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Yd(n,e,t,r,i=!1){for(;t!==null;){let o=e[t.index];o!==null&&r.push(kr(o)),pi(o)&&KL(o,r);let s=t.type;if(s&8)Yd(n,e,t.child,r);else if(s&32){let a=ov(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=qT(e,t);if(Array.isArray(a))r.push(...a);else{let c=el(e[Or]);Yd(c[Re],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function KL(n,e){for(let t=Gn;t<n.length;t++){let r=n[t],i=r[Re].firstChild;i!==null&&Yd(r[Re],r,i,e)}n[ts]!==n[fi]&&e.push(n[ts])}var oD=[];function QL(n){return n[es]??YL(n)}function YL(n){let e=oD.pop()??Object.create(XL);return e.lView=n,e}function JL(n){n.lView[es]!==n&&(n.lView=null,oD.push(n))}var XL=pe(j({},uC),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Zc(n.lView)},consumerOnSignalRead(){this.lView[es]=this}}),sD=100;function aD(n,e=!0,t=0){let r=n[fr],i=r.rendererFactory,o=!1;o||i.begin?.();try{ZL(n,t)}catch(s){throw e&&rD(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function ZL(n,e){uy(n,e);let t=0;for(;qy(n);){if(t===sD)throw new B(103,!1);t++,uy(n,1)}}function e2(n,e,t,r){let i=e[fe];if((i&256)===256)return;let o=!1;!o&&e[fr].inlineEffectRunner?.flush(),Gy(e);let s=null,a=null;!o&&t2(n)&&(a=QL(e),s=dC(a));try{rT(e),tF(n.bindingStartIndex),t!==null&&YT(n,e,t,2,r);let c=(i&3)===3;if(!o)if(c){let f=n.preOrderCheckHooks;f!==null&&Nd(e,f,null)}else{let f=n.preOrderHooks;f!==null&&Od(e,f,0,null),Mg(e,0)}if(n2(e),cD(e,0),n.contentQueries!==null&&nD(n,e),!o)if(c){let f=n.contentCheckHooks;f!==null&&Nd(e,f)}else{let f=n.contentHooks;f!==null&&Od(e,f,1),Mg(e,1)}yL(n,e);let u=n.components;u!==null&&uD(e,u,0);let d=n.viewQuery;if(d!==null&&ly(2,d,r),!o)if(c){let f=n.viewCheckHooks;f!==null&&Nd(e,f)}else{let f=n.viewHooks;f!==null&&Od(e,f,2),Mg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[xg]){for(let f of e[xg])f();e[xg]=null}o||(e[fe]&=-73)}catch(c){throw Zc(e),c}finally{a!==null&&(hC(a,s),JL(a)),Wy()}}function t2(n){return n.type!==2}function cD(n,e){for(let t=xT(n);t!==null;t=MT(t))for(let r=Gn;r<t.length;r++){let i=t[r];lD(i,e)}}function n2(n){for(let e=xT(n);e!==null;e=MT(e)){if(!(e[fe]&Uy.HasTransplantedViews))continue;let t=e[qd];for(let r=0;r<t.length;r++){let i=t[r],o=i[an];qk(i)}}}function r2(n,e,t){let r=so(e,n);lD(r,t)}function lD(n,e){$y(n)&&uy(n,e)}function uy(n,e){let r=n[Re],i=n[fe],o=n[es],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&rg(o)),o&&(o.dirty=!1),n[fe]&=-9217,s)e2(r,n,r.template,n[hr]);else if(i&8192){cD(n,1);let a=r.components;a!==null&&uD(n,a,1)}}function uD(n,e,t){for(let r=0;r<e.length;r++)r2(n,e[r],t)}function mv(n){for(n[fr].changeDetectionScheduler?.notify();n;){n[fe]|=64;let e=el(n);if(kk(n)&&!e)return n;n=e}return null}var is=class{get rootNodes(){let e=this._lView,t=e[Re];return Yd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[hr]}set context(e){this._lView[hr]=e}get destroyed(){return(this._lView[fe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[an];if(pi(e)){let t=e[$d],r=t?t.indexOf(this):-1;r>-1&&(sy(e,r),Ud(t,r))}this._attachedToViewContainer=!1}BT(this._lView[Re],this._lView)}onDestroy(e){iT(this._lView,e)}markForCheck(){mv(this._cdRefInjectingView||this._lView)}detach(){this._lView[fe]&=-129}reattach(){Xg(this._lView),this._lView[fe]|=128}detectChanges(){this._lView[fe]|=1024,aD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,UT(this._lView[Re],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e,Xg(this._lView)}},Ch=(()=>{class n{static{this.__NG_ELEMENT_ID__=s2}}return n})(),i2=Ch,o2=class extends i2{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=GL(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new is(i)}};function s2(){return dD(yn(),Be())}function dD(n,e){return n.type&4?new o2(e,n,vh(n,e)):null}var eZ=new RegExp(`^(\\d+)*(${kF}|${OF})*(.*)`);var a2=()=>null;function aS(n,e){return a2(n,e)}var _a=class{},dy=class{},Jd=class{};function c2(n){let e=Error(`No component factory found for ${gn(n)}.`);return e[l2]=n,e}var l2="ngComponent";var hy=class{resolveComponentFactory(e){throw c2(e)}},Sh=(()=>{class n{static{this.NULL=new hy}}return n})(),os=class{},mi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>u2()}}return n})();function u2(){let n=Be(),e=yn(),t=so(e.index,n);return(Jo(t)?t:n)[bt]}var d2=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>null})}}return n})(),kg={};var cS=new Set;function Sa(n){cS.has(n)||(cS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function lS(...n){}function h2(){let n=typeof ur.requestAnimationFrame=="function",e=ur[n?"requestAnimationFrame":"setTimeout"],t=ur[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var Pe=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new at(!1),this.onMicrotaskEmpty=new at(!1),this.onStable=new at(!1),this.onError=new at(!1),typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=h2().nativeRequestAnimationFrame,m2(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new B(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,f2,lS,lS);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},f2={};function gv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function p2(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ur,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,fy(n),n.isCheckStableRunning=!0,gv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),fy(n))}function m2(n){let e=()=>{p2(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(g2(a))return t.invokeTask(i,o,s,a);try{return uS(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),dS(n)}},onInvoke:(t,r,i,o,s,a,c)=>{try{return uS(n),t.invoke(i,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),dS(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,fy(n),gv(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function fy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function uS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function dS(n){n._nesting--,gv(n)}function g2(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var ca=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ca||{}),y2={destroy(){}};function Th(n,e){!e&&Nk(Th);let t=e?.injector??W(Jt);if(!WF(t))return y2;Sa("NgAfterNextRender");let r=t.get(yv),i=r.handler??=new my,o=e?.phase??ca.MixedReadWrite,s=()=>{i.unregister(c),a()},a=t.get(Jy).onDestroy(s),c=pr(t,()=>new py(o,()=>{s(),n()}));return i.register(c),{destroy:s}}var py=class{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=W(Pe),this.errorHandler=W(Fr,{optional:!0}),W(_a,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},my=class{constructor(){this.executingCallbacks=!1,this.buckets={[ca.EarlyRead]:new Set,[ca.Write]:new Set,[ca.MixedReadWrite]:new Set,[ca.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let t of e)t.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},yv=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Xd(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=qg(i,a);else if(o==2){let c=a,u=e[++s];r=qg(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Zd=class extends Sh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=no(e);return new wa(t,this.ngModule)}};function hS(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function v2(n){let e=n.toLowerCase();return e==="svg"?eT:e==="math"?Uk:null}var gy=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=sh(r);let i=this.injector.get(e,kg,r);return i!==kg||t===kg?i:this.parentInjector.get(e,t,r)}},wa=class extends Jd{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=hS(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return hS(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=vk(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=je(null);try{i=i||this.ngModule;let s=i instanceof sn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new gy(e,s):e,c=a.get(os,null);if(c===null)throw new B(407,!1);let u=a.get(d2,null),d=a.get(yv,null),f=a.get(_a,null),w={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},E=c.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",x=r?wL(E,r,this.componentDef.encapsulation,a):VT(E,S,v2(S)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let k=null;x!==null&&(k=nv(x,a,!0));let X=dv(0,null,null,1,0,null,null,null,null,null,null),K=Ih(null,X,null,N,null,null,w,E,a,null,k);Gy(K);let re,Fe;try{let Z=this.componentDef,D,b=null;Z.findHostDirectiveDefs?(D=[],b=new Map,Z.findHostDirectiveDefs(Z,D,b),D.push(Z)):D=[Z];let C=_2(K,x),A=w2(C,x,Z,D,K,w,E);Fe=nT(X,Nn),x&&b2(E,Z,x,r),t!==void 0&&C2(Fe,this.ngContentSelectors,t),re=I2(A,Z,D,b,K,[S2]),pv(X,K,null)}finally{Wy()}return new yy(this.componentType,re,vh(Fe,K),K,Fe)}finally{je(o)}}},yy=class extends dy{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new is(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;fv(o[Re],o,i,e,t),this.previousInputValues.set(e,t);let s=so(this._tNode.index,o);mv(s)}}get injector(){return new Xo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function _2(n,e){let t=n[Re],r=Nn;return n[r]=e,ol(t,r,2,"#host",null)}function w2(n,e,t,r,i,o,s){let a=i[Re];E2(r,n,e,s);let c=null;e!==null&&(c=nv(e,i[ma]));let u=o.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=Ih(i,JT(t),null,d,i[n.index],n,o,u,null,null,c);return a.firstCreatePass&&cy(a,n,r.length-1),bh(i,f),i[n.index]=f}function E2(n,e,t,r){for(let i of n)e.mergedAttrs=Qc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Xd(e,e.mergedAttrs,!0),t!==null&&HT(r,t,e))}function I2(n,e,t,r,i,o){let s=yn(),a=i[Re],c=Kn(s,i);ZT(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,w=va(i,a,f,s);io(w,i)}eD(a,i,s),c&&io(c,i);let u=va(i,a,s.directiveStart+s.componentOffset,s);if(n[hr]=i[hr]=u,o!==null)for(let d of o)d(u,e);return cv(a,s,i),u}function b2(n,e,t,r){if(r)Wg(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=_k(e.selectors[0]);i&&Wg(n,t,i),o&&o.length>0&&zT(n,t,o.join(" "))}}function C2(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function S2(){let n=yn();yh(Be()[Re],n)}var Ta=(()=>{class n{static{this.__NG_ELEMENT_ID__=T2}}return n})();function T2(){let n=yn();return A2(n,Be())}var D2=Ta,hD=class extends D2{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return vh(this._hostTNode,this._hostLView)}get injector(){return new Xo(this._hostTNode,this._hostLView)}get parentInjector(){let e=Qy(this._hostTNode,this._hostLView);if(gT(e)){let t=Hd(e,this._hostLView),r=zd(e),i=t[Re].data[r+8];return new Xo(i,t)}else return new Xo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=fS(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Gn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=aS(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,sS(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!Ok(e),a;if(s)a=t;else{let S=t||{};a=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let c=s?e:new wa(no(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let x=(s?u:this.parentInjector).get(sn,null);x&&(o=x)}let d=no(c.componentType??{}),f=aS(this._lContainer,d?.id??null),w=f?.firstChild??null,E=c.create(u,i,w,o);return this.insertImpl(E.hostView,a,sS(this._hostTNode,f)),E}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if($k(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[an],u=new hD(c,c[mr],c[an]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return WL(s,i,o,r),e.attachToViewContainerRef(),RS(Fg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=fS(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=sy(this._lContainer,t);r&&(Ud(Fg(this._lContainer),t),BT(r[Re],r))}detach(e){let t=this._adjustIndex(e,-1),r=sy(this._lContainer,t);return r&&Ud(Fg(this._lContainer),t)!=null?new is(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function fS(n){return n[$d]}function Fg(n){return n[$d]||(n[$d]=[])}function A2(n,e){let t,r=e[n.index];return pi(r)?t=r:(t=tD(r,e,null,n),e[n.index]=t,bh(e,t)),M2(t,e,n,r),new hD(t,n,e)}function x2(n,e){let t=n[bt],r=t.createComment(""),i=Kn(e,n),o=sv(t,i);return Qd(t,o,r,cL(t,i),!1),r}var M2=N2,R2=()=>!1;function P2(n,e,t){return R2(n,e,t)}function N2(n,e,t,r){if(n[ts])return;let i;t.type&8?i=kr(r):i=x2(e,t),n[ts]=i}function O2(n){return typeof n=="function"&&n[ng]!==void 0}function fD(n){return O2(n)&&typeof n.set=="function"}function k2(n){return Object.getPrototypeOf(n.prototype).constructor}function Tn(n){let e=k2(n.type),t=!0,r=[n];for(;e;){let i;if(ro(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Md(n.inputs),s.inputTransforms=Md(n.inputTransforms),s.declaredInputs=Md(n.declaredInputs),s.outputs=Md(n.outputs);let a=i.hostBindings;a&&j2(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&V2(n,c),u&&U2(n,u),F2(n,i),BO(n.outputs,i.outputs),ro(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Tn&&(t=!1)}}e=Object.getPrototypeOf(e)}L2(r)}function F2(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function L2(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Qc(i.hostAttrs,t=Qc(t,i.hostAttrs))}}function Md(n){return n===ha?{}:n===Sn?[]:n}function V2(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function U2(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function j2(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function vv(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var oo=class{},tl=class{};var vy=class extends oo{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Zd(this);let i=jS(e);this._bootstrapComponents=LT(i.bootstrap),this._r3Injector=ST(e,t,[{provide:oo,useValue:this},{provide:Sh,useValue:this.componentFactoryResolver},...r],gn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},_y=class extends tl{constructor(e){super(),this.moduleType=e}create(e){return new vy(this.moduleType,e,[])}};var eh=class extends oo{constructor(e){super(),this.componentFactoryResolver=new Zd(this),this.instance=null;let t=new Yc([...e.providers,{provide:oo,useValue:this},{provide:Sh,useValue:this.componentFactoryResolver}],e.parent||Vy(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Dh(n,e,t=null){return new eh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Da=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new It(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pD(n){return $2(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function B2(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function $2(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function _v(n,e,t){return n[e]=t}function q2(n,e){return n[e]}function di(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function mD(n,e,t,r){let i=di(n,e,t);return di(n,e+1,r)||i}function z2(n){return(n.flags&32)===32}function H2(n,e,t,r,i,o,s,a,c){let u=e.consts,d=ol(e,n,4,s||null,ya(u,a));hv(e,t,d,ya(u,c)),yh(e,d);let f=d.tView=dv(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function H(n,e,t,r,i,o,s,a){let c=Be(),u=Qt(),d=n+Nn,f=u.firstCreatePass?H2(d,u,c,e,t,r,i,o,s):u.data[d];as(f,!1);let w=G2(u,c,f,n);mh()&&wh(u,c,w,f),io(w,c);let E=tD(w,c,w,f);return c[d]=E,bh(c,E),P2(E,f,c),hh(f)&&lv(u,c,f),s!=null&&uv(c,f,a),H}var G2=W2;function W2(n,e,t,r){return gh(!0),e[bt].createComment("")}function sl(n,e,t,r){let i=Be(),o=ph();if(di(i,o,e)){let s=Qt(),a=Ky();LL(a,i,n,e,t,r)}return sl}function K2(n,e,t,r){return di(n,ph(),t)?e+da(t)+r:Yn}function Q2(n,e,t,r,i,o){let s=eF(),a=mD(n,s,t,i);return Hy(2),a?e+da(t)+r+da(i)+o:Yn}function Rd(n,e){return n<<17|e<<2}function ss(n){return n>>17&32767}function Y2(n){return(n&2)==2}function J2(n,e){return n&131071|e<<17}function wy(n){return n|2}function Ea(n){return(n&131068)>>2}function Lg(n,e){return n&-131069|e<<2}function X2(n){return(n&1)===1}function Ey(n){return n|1}function Z2(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ss(s),c=Ea(s);n[r]=t;let u=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||il(f,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let w=ss(n[a+1]);n[r+1]=Rd(w,a),w!==0&&(n[w+1]=Lg(n[w+1],r)),n[a+1]=J2(n[a+1],r)}else n[r+1]=Rd(a,0),a!==0&&(n[a+1]=Lg(n[a+1],r)),a=r;else n[r+1]=Rd(c,0),a===0?a=r:n[c+1]=Lg(n[c+1],r),c=r;u&&(n[r+1]=wy(n[r+1])),pS(n,d,r,!0),pS(n,d,r,!1),eV(e,d,n,r,o),s=Rd(a,c),o?e.classBindings=s:e.styleBindings=s}function eV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&il(o,e)>=0&&(t[r+1]=Ey(t[r+1]))}function pS(n,e,t,r){let i=n[t+1],o=e===null,s=r?ss(i):Ea(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];tV(c,e)&&(a=!0,n[s+1]=r?Ey(u):wy(u)),s=r?ss(u):Ea(u)}a&&(n[t+1]=r?wy(i):Ey(i))}function tV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?il(n,e)>=0:!1}var lr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function nV(n){return n.substring(lr.key,lr.keyEnd)}function rV(n){return iV(n),gD(n,yD(n,0,lr.textEnd))}function gD(n,e){let t=lr.textEnd;return t===e?-1:(e=lr.keyEnd=oV(n,lr.key=e,t),yD(n,e,t))}function iV(n){lr.key=0,lr.keyEnd=0,lr.value=0,lr.valueEnd=0,lr.textEnd=n.length}function yD(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function oV(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function F(n,e,t){let r=Be(),i=ph();if(di(r,i,e)){let o=Qt(),s=Ky();XT(o,s,r,n,e,r[bt],t,!1)}return F}function Iy(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";fv(n,t,o[s],s,r)}function vr(n,e,t){return vD(n,e,t,!1),vr}function gi(n,e){return vD(n,e,null,!0),gi}function On(n){aV(fV,sV,n,!0)}function sV(n,e){for(let t=rV(e);t>=0;t=gD(e,t))Oy(n,nV(e),!0)}function vD(n,e,t,r){let i=Be(),o=Qt(),s=Hy(2);if(o.firstUpdatePass&&wD(o,n,s,r),e!==Yn&&di(i,s,e)){let a=o.data[ao()];ED(o,a,i,i[bt],n,i[s+1]=mV(e,t),r,s)}}function aV(n,e,t,r){let i=Qt(),o=Hy(2);i.firstUpdatePass&&wD(i,null,o,r);let s=Be();if(t!==Yn&&di(s,o,t)){let a=i.data[ao()];if(ID(a,r)&&!_D(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=qg(c,t||"")),Iy(i,a,s,t,r)}else pV(i,a,s,s[bt],s[o+1],s[o+1]=hV(n,e,t),r,o)}}function _D(n,e){return e>=n.expandoStartIndex}function wD(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ao()],s=_D(n,t);ID(o,r)&&e===null&&!s&&(e=!1),e=cV(i,o,e,r),Z2(i,o,e,t,s,r)}}function cV(n,e,t,r){let i=oF(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Vg(null,n,e,t,r),t=nl(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Vg(i,n,e,t,r),o===null){let c=lV(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Vg(null,n,e,c[1],r),c=nl(c,e.attrs,r),uV(n,e,r,c))}else o=dV(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function lV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ea(r)!==0)return n[ss(r)]}function uV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ss(i)]=r}function dV(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=nl(r,s,t)}return nl(r,e.attrs,t)}function Vg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=nl(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function nl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Oy(n,s,t?!0:e[++o]))}return n===void 0?null:n}function hV(n,e,t){if(t==null||t==="")return Sn;let r=[],i=Ca(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function fV(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Oy(n,r,t)}function pV(n,e,t,r,i,o,s,a){i===Yn&&(i=Sn);let c=0,u=0,d=0<i.length?i[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let w=c<i.length?i[c+1]:void 0,E=u<o.length?o[u+1]:void 0,S=null,x;d===f?(c+=2,u+=2,w!==E&&(S=f,x=E)):f===null||d!==null&&d<f?(c+=2,S=d):(u+=2,S=f,x=E),S!==null&&ED(n,e,t,r,S,x,s,a),d=c<i.length?i[c]:null,f=u<o.length?o[u]:null}}function ED(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=X2(u)?mS(c,e,t,i,Ea(u),s):void 0;if(!th(d)){th(o)||Y2(u)&&(o=mS(c,null,t,i,a,s));let f=tT(ao(),t);mL(r,s,f,i,o)}}function mS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,f=d===null,w=t[i+1];w===Yn&&(w=f?Sn:void 0);let E=f?Dg(w,r):d===r?w:void 0;if(u&&!th(E)&&(E=Dg(c,r)),th(E)&&(a=E,s))return a;let S=n[i+1];i=s?ss(S):Ea(S)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Dg(c,r))}return a}function th(n){return n!==void 0}function mV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=gn(Ca(n)))),n}function ID(n,e){return(n.flags&(e?8:16))!==0}function gV(n,e,t,r,i,o){let s=e.consts,a=ya(s,i),c=ol(e,n,2,r,a);return hv(e,t,c,ya(s,o)),c.attrs!==null&&Xd(c,c.attrs,!1),c.mergedAttrs!==null&&Xd(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function m(n,e,t,r){let i=Be(),o=Qt(),s=Nn+n,a=i[bt],c=o.firstCreatePass?gV(s,o,i,e,t,r):o.data[s],u=yV(o,i,c,a,e,n);i[s]=u;let d=hh(c);return as(c,!0),HT(a,u,c),!z2(c)&&mh()&&wh(o,i,u,c),Gk()===0&&io(u,i),Wk(),d&&(lv(o,i,c),cv(o,c,i)),r!==null&&uv(i,c),m}function g(){let n=yn();zy()?aT():(n=n.parent,as(n,!1));let e=n;Yk(e)&&Jk(),Kk();let t=Qt();return t.firstCreatePass&&(yh(t,n),jy(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&fF(e)&&Iy(t,e,Be(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&pF(e)&&Iy(t,e,Be(),e.stylesWithoutHost,!1),g}function ce(n,e,t,r){return m(n,e,t,r),g(),ce}var yV=(n,e,t,r,i,o)=>(gh(!0),VT(r,i,lF()));function vV(n,e,t,r,i){let o=e.consts,s=ya(o,r),a=ol(e,n,8,"ng-container",s);s!==null&&Xd(a,s,!0);let c=ya(o,i);return hv(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function kn(n,e,t){let r=Be(),i=Qt(),o=n+Nn,s=i.firstCreatePass?vV(o,i,r,e,t):i.data[o];as(s,!0);let a=_V(i,r,s,n);return r[o]=a,mh()&&wh(i,r,a,s),io(a,r),hh(s)&&(lv(i,r,s),cv(i,s,r)),t!=null&&uv(r,s),kn}function Fn(){let n=yn(),e=Qt();return zy()?aT():(n=n.parent,as(n,!1)),e.firstCreatePass&&(yh(e,n),jy(n)&&e.queries.elementEnd(n)),Fn}var _V=(n,e,t,r)=>(gh(!0),JF(e[bt],""));function He(){return Be()}var Yo=void 0;function wV(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var EV=["en",[["a","p"],["AM","PM"],Yo],[["AM","PM"],Yo,Yo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yo,"{1} 'at' {0}",Yo],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",wV],Ug={};function Jn(n){let e=IV(n),t=gS(e);if(t)return t;let r=e.split("-")[0];if(t=gS(r),t)return t;if(r==="en")return EV;throw new B(701,!1)}function gS(n){return n in Ug||(Ug[n]=ur.ng&&ur.ng.common&&ur.ng.common.locales&&ur.ng.common.locales[n]),Ug[n]}var St=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(St||{});function IV(n){return n.toLowerCase().replace(/_/g,"-")}var nh="en-US";var bV=nh;function CV(n){typeof n=="string"&&(bV=n.toLowerCase().replace(/_/g,"-"))}function ae(n,e,t,r){let i=Be(),o=Qt(),s=yn();return bD(o,i,i[bt],s,n,e,r),ae}function SV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Jc],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function bD(n,e,t,r,i,o,s){let a=hh(r),u=n.firstCreatePass&&$L(n),d=e[hr],f=BL(e),w=!0;if(r.type&3||s){let x=Kn(r,e),N=s?s(x):x,k=f.length,X=s?re=>s(kr(re[r.index])):r.index,K=null;if(!s&&a&&(K=SV(n,e,i,r.index)),K!==null){let re=K.__ngLastListenerFn__||K;re.__ngNextListenerFn__=o,K.__ngLastListenerFn__=o,w=!1}else{o=vS(r,e,d,o,!1);let re=t.listen(N,i,o);f.push(o,re),u&&u.push(i,X,k,k+1)}}else o=vS(r,e,d,o,!1);let E=r.outputs,S;if(w&&E!==null&&(S=E[i])){let x=S.length;if(x)for(let N=0;N<x;N+=2){let k=S[N],X=S[N+1],Fe=e[k][X].subscribe(o),Z=f.length;f.push(o,Fe),u&&u.push(i,r.index,Z,-(Z+1))}}}function yS(n,e,t,r){let i=je(null);try{return Rr(6,e,t),t(r)!==!1}catch(o){return rD(n,o),!1}finally{Rr(7,e,t),je(i)}}function vS(n,e,t,r,i){return function o(s){if(s===Function)return r;let a=n.componentOffset>-1?so(n.index,e):e;mv(a);let c=yS(e,t,r,s),u=o.__ngNextListenerFn__;for(;u;)c=yS(e,t,u,s)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function G(n=1){return aF(n)}function TV(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function al(n){let e=Zk();return By(e,Nn+n)}function y(n,e=""){let t=Be(),r=Qt(),i=n+Nn,o=r.firstCreatePass?ol(r,i,1,e,null):r.data[i],s=DV(r,t,o,e,n);t[i]=s,mh()&&wh(r,t,s,o),as(o,!1)}var DV=(n,e,t,r,i)=>(gh(!0),QF(e[bt],r));function q(n){return J("",n,""),q}function J(n,e,t){let r=Be(),i=K2(r,n,e,t);return i!==Yn&&iD(r,ao(),i),J}function cs(n,e,t,r,i){let o=Be(),s=Q2(o,n,e,t,r,i);return s!==Yn&&iD(o,ao(),s),cs}function vn(n,e,t){fD(e)&&(e=e());let r=Be(),i=ph();if(di(r,i,e)){let o=Qt(),s=Ky();XT(o,s,r,n,e,r[bt],t,!1)}return vn}function Dn(n,e){let t=fD(n);return t&&n.set(e),t}function _n(n,e){let t=Be(),r=Qt(),i=yn();return bD(r,t,t[bt],i,n,e),_n}function AV(n,e,t){let r=Qt();if(r.firstCreatePass){let i=ro(n);by(t,r.data,r.blueprint,i,!0),by(e,r.data,r.blueprint,i,!1)}}function by(n,e,t,r,i){if(n=mn(n),Array.isArray(n))for(let o=0;o<n.length;o++)by(n[o],e,t,r,i);else{let o=Qt(),s=Be(),a=yn(),c=pa(n)?n:mn(n.provide),u=GS(n),d=a.providerIndexes&1048575,f=a.directiveStart,w=a.providerIndexes>>20;if(pa(n)||!n.multi){let E=new rs(u,i,L),S=Bg(c,e,i?d:d+w,f);S===-1?(ty(Wd(a,s),o,c),jg(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(E),s.push(E)):(t[S]=E,s[S]=E)}else{let E=Bg(c,e,d+w,f),S=Bg(c,e,d,d+w),x=E>=0&&t[E],N=S>=0&&t[S];if(i&&!N||!i&&!x){ty(Wd(a,s),o,c);let k=RV(i?MV:xV,t.length,i,r,u);!i&&N&&(t[S].providerFactory=k),jg(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),s.push(k)}else{let k=CD(t[i?S:E],u,!i&&r);jg(o,n,E>-1?E:S,k)}!i&&r&&N&&t[S].componentProviders++}}}function jg(n,e,t,r){let i=pa(e),o=Tk(e);if(i||o){let c=(o?mn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function CD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Bg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function xV(n,e,t,r){return Cy(this.multi,[])}function MV(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=va(t,t[Re],this.providerFactory.index,r);o=a.slice(0,s),Cy(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Cy(i,o);return o}function Cy(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function RV(n,e,t,r,i){let o=new rs(n,t,L);return o.multi=[],o.index=e,o.componentProviders=0,CD(o,i,r&&!t),o}function Ur(n,e=[]){return t=>{t.providersResolver=(r,i)=>AV(r,i?i(n):n,e)}}var PV=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=qS(!1,t.type),i=r.length>0?Dh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=$({token:n,providedIn:"environment",factory:()=>new n(U(sn))})}}return n})();function Ee(n){Sa("NgStandalone"),n.getStandaloneInjector=e=>e.get(PV).getOrCreateStandaloneInjector(n)}function _r(n,e,t){let r=fh()+n,i=Be();return i[r]===Yn?_v(i,r,t?e.call(t):e()):q2(i,r)}function Ah(n,e,t,r){return TD(Be(),fh(),n,e,t,r)}function SD(n,e){let t=n[e];return t===Yn?void 0:t}function TD(n,e,t,r,i,o){let s=e+t;return di(n,s,i)?_v(n,s+1,o?r.call(o,i):r(i)):SD(n,s+1)}function NV(n,e,t,r,i,o,s){let a=e+t;return mD(n,a,i,o)?_v(n,a+2,s?r.call(s,i,o):r(i,o)):SD(n,a+2)}function co(n,e){let t=Qt(),r,i=n+Nn;t.firstCreatePass?(r=OV(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Zo(r.type,!0)),s,a=Cn(L);try{let c=Gd(!1),u=o();return Gd(c),TV(t,Be(),i,u),u}finally{Cn(a)}}function OV(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function cl(n,e,t){let r=n+Nn,i=Be(),o=By(i,r);return DD(i,r)?TD(i,fh(),e,o.transform,t,o):o.transform(t)}function wv(n,e,t,r){let i=n+Nn,o=Be(),s=By(o,i);return DD(o,i)?NV(o,fh(),e,s.transform,t,r,s):s.transform(t,r)}function DD(n,e){return n[Re].data[e].pure}function ll(n,e){return dD(n,e)}var hi=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},AD=new hi("17.3.12"),xh=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var xD=new te("");function lo(n){return!!n&&typeof n.then=="function"}function Ev(n){return!!n&&typeof n.subscribe=="function"}var Mh=new te(""),MD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=W(Mh,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(lo(o))t.push(o);else if(Ev(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ul=new te("");function kV(){pC(()=>{throw new B(600,!1)})}function FV(n){return n.isBoundToModule}function LV(n,e,t){try{let r=t();return lo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Aa=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=W(TT),this.afterRenderEffectManager=W(yv),this.externalTestViews=new Set,this.beforeRender=new nn,this.afterTick=new nn,this.componentTypes=[],this.components=[],this.isStable=W(Da).hasPendingTasks.pipe(ge(t=>!t)),this._injector=W(sn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Jd;if(!this._injector.get(MD).done){let w=!i&&US(t),E=!1;throw new B(405,E)}let s;i?s=t:s=this._injector.get(Sh).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=FV(s)?void 0:this._injector.get(oo),c=r||s.selector,u=s.create(Jt.NULL,[],c,a),d=u.location.nativeElement,f=u.injector.get(xD,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),$g(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new B(101,!1);let r=je(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,je(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===sD)throw new B(103,!1);if(t){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)VV(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Sy(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Sy(o))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;$g(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(ul,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>$g(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new B(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $g(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function VV(n,e,t){!e&&!Sy(n)||UV(n,t,e)}function Sy(n){return qy(n)}function UV(n,e,t){let r;t?(r=0,n[fe]|=1024):n[fe]&64?r=0:r=1,aD(n,e,r)}var Ty=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Rh=(()=>{class n{compileModuleSync(t){return new _y(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=jS(t),o=LT(i.declarations).reduce((s,a)=>{let c=no(a);return c&&s.push(new wa(c)),s},[]);return new Ty(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var jV=(()=>{class n{constructor(){this.zone=W(Pe),this.applicationRef=W(Aa)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function BV(n){return[{provide:Pe,useFactory:n},{provide:fa,multi:!0,useFactory:()=>{let e=W(jV,{optional:!0});return()=>e.initialize()}},{provide:fa,multi:!0,useFactory:()=>{let e=W(zV);return()=>{e.initialize()}}},{provide:TT,useFactory:$V}]}function $V(){let n=W(Pe),e=W(Fr);return t=>n.runOutsideAngular(()=>e.handleError(t))}function Iv(n){let e=BV(()=>new Pe(qV(n)));return Ia([[],e])}function qV(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var zV=(()=>{class n{constructor(){this.subscription=new Et,this.initialized=!1,this.zone=W(Pe),this.pendingTasks=W(Da)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Pe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Pe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function HV(){return typeof $localize<"u"&&$localize.locale||nh}var Ph=new te("",{providedIn:"root",factory:()=>W(Ph,Ae.Optional|Ae.SkipSelf)||HV()});var RD=new te("");var Fd=null;function GV(n=[],e){return Jt.create({name:e,providers:[{provide:ch,useValue:"platform"},{provide:RD,useValue:new Set([()=>Fd=null])},...n]})}function WV(n=[]){if(Fd)return Fd;let e=GV(n);return Fd=e,kV(),KV(e),e}function KV(n){n.get(Zy,null)?.forEach(t=>t())}var uo=(()=>{class n{static{this.__NG_ELEMENT_ID__=QV}}return n})();function QV(n){return YV(yn(),Be(),(n&16)===16)}function YV(n,e,t){if(dh(n)&&!t){let r=so(n.index,e);return new is(r,r)}else if(n.type&47){let r=e[Or];return new is(r,e)}return null}var Dy=class{constructor(){}supports(e){return pD(e)}create(e){return new Ay(e)}},JV=(n,e)=>e,Ay=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||JV}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<_S(r,i,o)?t:r,a=_S(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,d=c-i;if(u!=d){for(let w=0;w<u;w++){let E=w<o.length?o[w]:o[w]=0,S=E+w;d<=S&&S<u&&(o[w]=E+1)}let f=s.previousIndex;o[f]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!pD(e))throw new B(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,B2(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new xy(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new rh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new rh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},xy=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},My=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},rh=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new My,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function _S(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function wS(){return new bv([new Dy])}var bv=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:wS})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||wS()),deps:[[n,new Py,new Ct]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new B(901,!1)}}return n})();function PD(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=WV(r),o=[Iv(),...t||[]],a=new eh({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Pe);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(Fr,null),d;c.runOutsideAngular(()=>{d=c.onError.subscribe({next:E=>{u.handleError(E)}})});let f=()=>a.destroy(),w=i.get(RD);return w.add(f),a.onDestroy(()=>{d.unsubscribe(),w.delete(f)}),LV(u,c,()=>{let E=a.get(MD);return E.runInitializers(),E.donePromise.then(()=>{let S=a.get(Ph,nh);CV(S||nh);let x=a.get(Aa);return e!==void 0&&x.bootstrap(e),x})})})}catch(e){return Promise.reject(e)}}function ho(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Cv(n){let e=je(null);try{return n()}finally{je(e)}}function ND(n){let e=no(n);if(!e)return null;let t=new wa(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var UD=null;function wi(){return UD}function jD(n){UD??=n}var Bh=class{};var Bt=new te(""),Ov=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>W(XV),providedIn:"platform"})}}return n})(),BD=new te(""),XV=(()=>{class n extends Ov{constructor(){super(),this._doc=W(Bt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wi().getBaseHref(this._doc)}onPopState(t){let r=wi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=wi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function kv(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function OD(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function vi(n){return n&&n[0]!=="?"?"?"+n:n}var Ei=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>W(Fv),providedIn:"root"})}}return n})(),$D=new te(""),Fv=(()=>{class n extends Ei{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??W(Bt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return kv(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+vi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+vi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+vi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(U(Ov),U($D,8))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qD=(()=>{class n extends Ei{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=kv(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+vi(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+vi(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(U(Ov),U($D,8))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),Ma=(()=>{class n{constructor(t){this._subject=new at,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=tU(OD(kD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+vi(r))}normalize(t){return n.stripTrailingSlash(eU(this._basePath,kD(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=vi}static{this.joinWithSlash=kv}static{this.stripTrailingSlash=OD}static{this.\u0275fac=function(r){return new(r||n)(U(Ei))}}static{this.\u0275prov=$({token:n,factory:()=>ZV(),providedIn:"root"})}}return n})();function ZV(){return new Ma(U(Ei))}function eU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function kD(n){return n.replace(/\/index.html$/,"")}function tU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var wn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(wn||{}),Xe=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Xe||{}),Ln=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Ln||{}),fo={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function nU(n){return Jn(n)[St.LocaleId]}function rU(n,e,t){let r=Jn(n),i=[r[St.DayPeriodsFormat],r[St.DayPeriodsStandalone]],o=Xn(i,e);return Xn(o,t)}function iU(n,e,t){let r=Jn(n),i=[r[St.DaysFormat],r[St.DaysStandalone]],o=Xn(i,e);return Xn(o,t)}function oU(n,e,t){let r=Jn(n),i=[r[St.MonthsFormat],r[St.MonthsStandalone]],o=Xn(i,e);return Xn(o,t)}function sU(n,e){let r=Jn(n)[St.Eras];return Xn(r,e)}function Nh(n,e){let t=Jn(n);return Xn(t[St.DateFormat],e)}function Oh(n,e){let t=Jn(n);return Xn(t[St.TimeFormat],e)}function kh(n,e){let r=Jn(n)[St.DateTimeFormat];return Xn(r,e)}function qh(n,e){let t=Jn(n),r=t[St.NumberSymbols][e];if(typeof r>"u"){if(e===fo.CurrencyDecimal)return t[St.NumberSymbols][fo.Decimal];if(e===fo.CurrencyGroup)return t[St.NumberSymbols][fo.Group]}return r}function zD(n){if(!n[St.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[St.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function aU(n){let e=Jn(n);return zD(e),(e[St.ExtraData][2]||[]).map(r=>typeof r=="string"?Sv(r):[Sv(r[0]),Sv(r[1])])}function cU(n,e,t){let r=Jn(n);zD(r);let i=[r[St.ExtraData][0],r[St.ExtraData][1]],o=Xn(i,e)||[];return Xn(o,t)||[]}function Xn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Sv(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var lU=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Fh={},uU=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,_i=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(_i||{}),We=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(We||{}),Ge=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Ge||{});function dU(n,e,t,r){let i=wU(n);e=yi(t,e)||e;let s=[],a;for(;e;)if(a=uU.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=GD(r,c),i=_U(i,r,!0));let u="";return s.forEach(d=>{let f=yU(d);u+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function $h(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function yi(n,e){let t=nU(n);if(Fh[t]??={},Fh[t][e])return Fh[t][e];let r="";switch(e){case"shortDate":r=Nh(n,Ln.Short);break;case"mediumDate":r=Nh(n,Ln.Medium);break;case"longDate":r=Nh(n,Ln.Long);break;case"fullDate":r=Nh(n,Ln.Full);break;case"shortTime":r=Oh(n,Ln.Short);break;case"mediumTime":r=Oh(n,Ln.Medium);break;case"longTime":r=Oh(n,Ln.Long);break;case"fullTime":r=Oh(n,Ln.Full);break;case"short":let i=yi(n,"shortTime"),o=yi(n,"shortDate");r=Lh(kh(n,Ln.Short),[i,o]);break;case"medium":let s=yi(n,"mediumTime"),a=yi(n,"mediumDate");r=Lh(kh(n,Ln.Medium),[s,a]);break;case"long":let c=yi(n,"longTime"),u=yi(n,"longDate");r=Lh(kh(n,Ln.Long),[c,u]);break;case"full":let d=yi(n,"fullTime"),f=yi(n,"fullDate");r=Lh(kh(n,Ln.Full),[d,f]);break}return r&&(Fh[t][e]=r),r}function Lh(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function wr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function hU(n,e){return wr(n,3).substring(0,e)}function Mt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=fU(n,o);if((t>0||a>-t)&&(a+=t),n===We.Hours)a===0&&t===-12&&(a=12);else if(n===We.FractionalSeconds)return hU(a,e);let c=qh(s,fo.MinusSign);return wr(a,e,c,r,i)}}function fU(n,e){switch(n){case We.FullYear:return e.getFullYear();case We.Month:return e.getMonth();case We.Date:return e.getDate();case We.Hours:return e.getHours();case We.Minutes:return e.getMinutes();case We.Seconds:return e.getSeconds();case We.FractionalSeconds:return e.getMilliseconds();case We.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Ze(n,e,t=wn.Format,r=!1){return function(i,o){return pU(i,o,n,e,t,r)}}function pU(n,e,t,r,i,o){switch(t){case Ge.Months:return oU(e,i,r)[n.getMonth()];case Ge.Days:return iU(e,i,r)[n.getDay()];case Ge.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let u=aU(e),d=cU(e,i,r),f=u.findIndex(w=>{if(Array.isArray(w)){let[E,S]=w,x=s>=E.hours&&a>=E.minutes,N=s<S.hours||s===S.hours&&a<S.minutes;if(E.hours<S.hours){if(x&&N)return!0}else if(x||N)return!0}else if(w.hours===s&&w.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return rU(e,i,r)[s<12?0:1];case Ge.Eras:return sU(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function Vh(n){return function(e,t,r){let i=-1*r,o=qh(t,fo.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case _i.Short:return(i>=0?"+":"")+wr(s,2,o)+wr(Math.abs(i%60),2,o);case _i.ShortGMT:return"GMT"+(i>=0?"+":"")+wr(s,1,o);case _i.Long:return"GMT"+(i>=0?"+":"")+wr(s,2,o)+":"+wr(Math.abs(i%60),2,o);case _i.Extended:return r===0?"Z":(i>=0?"+":"")+wr(s,2,o)+":"+wr(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var mU=0,jh=4;function gU(n){let e=$h(n,mU,1).getDay();return $h(n,0,1+(e<=jh?jh:jh+7)-e)}function HD(n){let e=n.getDay(),t=e===0?-3:jh-e;return $h(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Tv(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=HD(t),s=gU(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return wr(i,n,qh(r,fo.MinusSign))}}function Uh(n,e=!1){return function(t,r){let o=HD(t).getFullYear();return wr(o,n,qh(r,fo.MinusSign),e)}}var Dv={};function yU(n){if(Dv[n])return Dv[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ze(Ge.Eras,Xe.Abbreviated);break;case"GGGG":e=Ze(Ge.Eras,Xe.Wide);break;case"GGGGG":e=Ze(Ge.Eras,Xe.Narrow);break;case"y":e=Mt(We.FullYear,1,0,!1,!0);break;case"yy":e=Mt(We.FullYear,2,0,!0,!0);break;case"yyy":e=Mt(We.FullYear,3,0,!1,!0);break;case"yyyy":e=Mt(We.FullYear,4,0,!1,!0);break;case"Y":e=Uh(1);break;case"YY":e=Uh(2,!0);break;case"YYY":e=Uh(3);break;case"YYYY":e=Uh(4);break;case"M":case"L":e=Mt(We.Month,1,1);break;case"MM":case"LL":e=Mt(We.Month,2,1);break;case"MMM":e=Ze(Ge.Months,Xe.Abbreviated);break;case"MMMM":e=Ze(Ge.Months,Xe.Wide);break;case"MMMMM":e=Ze(Ge.Months,Xe.Narrow);break;case"LLL":e=Ze(Ge.Months,Xe.Abbreviated,wn.Standalone);break;case"LLLL":e=Ze(Ge.Months,Xe.Wide,wn.Standalone);break;case"LLLLL":e=Ze(Ge.Months,Xe.Narrow,wn.Standalone);break;case"w":e=Tv(1);break;case"ww":e=Tv(2);break;case"W":e=Tv(1,!0);break;case"d":e=Mt(We.Date,1);break;case"dd":e=Mt(We.Date,2);break;case"c":case"cc":e=Mt(We.Day,1);break;case"ccc":e=Ze(Ge.Days,Xe.Abbreviated,wn.Standalone);break;case"cccc":e=Ze(Ge.Days,Xe.Wide,wn.Standalone);break;case"ccccc":e=Ze(Ge.Days,Xe.Narrow,wn.Standalone);break;case"cccccc":e=Ze(Ge.Days,Xe.Short,wn.Standalone);break;case"E":case"EE":case"EEE":e=Ze(Ge.Days,Xe.Abbreviated);break;case"EEEE":e=Ze(Ge.Days,Xe.Wide);break;case"EEEEE":e=Ze(Ge.Days,Xe.Narrow);break;case"EEEEEE":e=Ze(Ge.Days,Xe.Short);break;case"a":case"aa":case"aaa":e=Ze(Ge.DayPeriods,Xe.Abbreviated);break;case"aaaa":e=Ze(Ge.DayPeriods,Xe.Wide);break;case"aaaaa":e=Ze(Ge.DayPeriods,Xe.Narrow);break;case"b":case"bb":case"bbb":e=Ze(Ge.DayPeriods,Xe.Abbreviated,wn.Standalone,!0);break;case"bbbb":e=Ze(Ge.DayPeriods,Xe.Wide,wn.Standalone,!0);break;case"bbbbb":e=Ze(Ge.DayPeriods,Xe.Narrow,wn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ze(Ge.DayPeriods,Xe.Abbreviated,wn.Format,!0);break;case"BBBB":e=Ze(Ge.DayPeriods,Xe.Wide,wn.Format,!0);break;case"BBBBB":e=Ze(Ge.DayPeriods,Xe.Narrow,wn.Format,!0);break;case"h":e=Mt(We.Hours,1,-12);break;case"hh":e=Mt(We.Hours,2,-12);break;case"H":e=Mt(We.Hours,1);break;case"HH":e=Mt(We.Hours,2);break;case"m":e=Mt(We.Minutes,1);break;case"mm":e=Mt(We.Minutes,2);break;case"s":e=Mt(We.Seconds,1);break;case"ss":e=Mt(We.Seconds,2);break;case"S":e=Mt(We.FractionalSeconds,1);break;case"SS":e=Mt(We.FractionalSeconds,2);break;case"SSS":e=Mt(We.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Vh(_i.Short);break;case"ZZZZZ":e=Vh(_i.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Vh(_i.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Vh(_i.Long);break;default:return null}return Dv[n]=e,e}function GD(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function vU(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function _U(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=GD(e,i);return vU(n,r*(o-i))}function wU(n){if(FD(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return $h(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(lU))return EU(r)}let e=new Date(n);if(!FD(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function EU(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,u),e}function FD(n){return n instanceof Date&&!isNaN(n.valueOf())}function zh(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Av=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},et=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Av(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),LD(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);LD(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(L(Ta),L(Ch),L(bv))}}static{this.\u0275dir=ct({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function LD(n,e){n.context.$implicit=e.item}var lt=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new xv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){VD("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){VD("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(L(Ta),L(Ch))}}static{this.\u0275dir=ct({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),xv=class{constructor(){this.$implicit=null,this.ngIf=null}};function VD(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${gn(e)}'.`)}function Lv(n,e){return new B(2100,!1)}var Mv=class{createSubscription(e,t){return Cv(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Cv(()=>e.unsubscribe())}},Rv=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},IU=new Rv,bU=new Mv,WD=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(lo(t))return IU;if(Ev(t))return bU;throw Lv(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(L(uo,16))}}static{this.\u0275pipe=ah({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var CU=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,KD=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw Lv(n,t);return t.replace(CU,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=ah({name:"titlecase",type:n,pure:!0,standalone:!0})}}return n})();var SU="mediumDate",TU=new te(""),DU=new te(""),QD=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??SU,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return dU(t,s,o||this.locale,a)}catch(s){throw Lv(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(L(Ph,16),L(TU,24),L(DU,24))}}static{this.\u0275pipe=ah({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var Te=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Vt({type:n})}static{this.\u0275inj=Lt({})}}return n})(),Vv="browser",AU="server";function xU(n){return n===Vv}function Hh(n){return n===AU}var YD=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>xU(W(Qn))?new Pv(W(Bt),window):new Nv})}}return n})(),Pv=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=MU(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function MU(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Nv=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},xa=class{};var hl=class{},Wh=class{},ls=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var jv=class{encodeKey(e){return JD(e)}encodeValue(e){return JD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function NU(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var OU=/%(\d[a-f0-9])/gi,kU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function JD(n){return encodeURIComponent(n).replace(OU,(e,t)=>kU[t]??e)}function Gh(n){return`${n}`}var po=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new jv,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=NU(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Gh):[Gh(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Gh(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Gh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Bv=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function FU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function XD(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function ZD(n){return typeof Blob<"u"&&n instanceof Blob}function eA(n){return typeof FormData<"u"&&n instanceof FormData}function LU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var dl=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(FU(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new ls,this.context??=new Bv,!this.params)this.params=new po,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||XD(this.body)||ZD(this.body)||eA(this.body)||LU(this.body)?this.body:this.body instanceof po?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||eA(this.body)?null:ZD(this.body)?this.body.type||null:XD(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof po?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((w,E)=>w.set(E,e.setHeaders[E]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((w,E)=>w.set(E,e.setParams[E]),d)),new n(t,r,s,{params:d,headers:u,context:f,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},Ra=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ra||{}),fl=class{constructor(e,t=Yh.Ok,r="OK"){this.headers=e.headers||new ls,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},$v=class n extends fl{constructor(e={}){super(e),this.type=Ra.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Kh=class n extends fl{constructor(e={}){super(e),this.type=Ra.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Qh=class extends fl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Yh=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(Yh||{});function Uv(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Er=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof dl)o=t;else{let c;i.headers instanceof ls?c=i.headers:c=new ls(i.headers);let u;i.params&&(i.params instanceof po?u=i.params:u=new po({fromObject:i.params})),o=new dl(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=oe(o).pipe(ci(c=>this.handler.handle(c)));if(t instanceof dl||i.observe==="events")return s;let a=s.pipe(Ft(c=>c instanceof Kh));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ge(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(ge(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(ge(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(ge(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new po().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Uv(i,r))}post(t,r,i={}){return this.request("POST",t,Uv(i,r))}put(t,r,i={}){return this.request("PUT",t,Uv(i,r))}static{this.\u0275fac=function(r){return new(r||n)(U(hl))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();function VU(n,e){return e(n)}function UU(n,e,t){return(r,i)=>pr(t,()=>e(r,o=>n(o,i)))}var rA=new te(""),jU=new te(""),BU=new te("");var tA=(()=>{class n extends hl{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=W(Da);let i=W(BU,{optional:!0});this.backend=i??t}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(rA),...this.injector.get(jU,[])]));this.chain=i.reduceRight((o,s)=>UU(o,s,this.injector),VU)}let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Qo(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(U(Wh),U(sn))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();var $U=/^\)\]\}',?\n/;function qU(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var nA=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new B(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?be(r.\u0275loadImpl()):oe(null)).pipe(ot(()=>new De(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((x,N)=>s.setRequestHeader(x,N.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let x=t.detectContentTypeHeader();x!==null&&s.setRequestHeader("Content-Type",x)}if(t.responseType){let x=t.responseType.toLowerCase();s.responseType=x!=="json"?x:"text"}let a=t.serializeBody(),c=null,u=()=>{if(c!==null)return c;let x=s.statusText||"OK",N=new ls(s.getAllResponseHeaders()),k=qU(s)||t.url;return c=new $v({headers:N,status:s.status,statusText:x,url:k}),c},d=()=>{let{headers:x,status:N,statusText:k,url:X}=u(),K=null;N!==Yh.NoContent&&(K=typeof s.response>"u"?s.responseText:s.response),N===0&&(N=K?Yh.Ok:0);let re=N>=200&&N<300;if(t.responseType==="json"&&typeof K=="string"){let Fe=K;K=K.replace($U,"");try{K=K!==""?JSON.parse(K):null}catch(Z){K=Fe,re&&(re=!1,K={error:Z,text:K})}}re?(o.next(new Kh({body:K,headers:x,status:N,statusText:k,url:X||void 0})),o.complete()):o.error(new Qh({error:K,headers:x,status:N,statusText:k,url:X||void 0}))},f=x=>{let{url:N}=u(),k=new Qh({error:x,status:s.status||0,statusText:s.statusText||"Unknown Error",url:N||void 0});o.error(k)},w=!1,E=x=>{w||(o.next(u()),w=!0);let N={type:Ra.DownloadProgress,loaded:x.loaded};x.lengthComputable&&(N.total=x.total),t.responseType==="text"&&s.responseText&&(N.partialText=s.responseText),o.next(N)},S=x=>{let N={type:Ra.UploadProgress,loaded:x.loaded};x.lengthComputable&&(N.total=x.total),o.next(N)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",E),a!==null&&s.upload&&s.upload.addEventListener("progress",S)),s.send(a),o.next({type:Ra.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",f),t.reportProgress&&(s.removeEventListener("progress",E),a!==null&&s.upload&&s.upload.removeEventListener("progress",S)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(U(xa))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),iA=new te(""),zU="XSRF-TOKEN",HU=new te("",{providedIn:"root",factory:()=>zU}),GU="X-XSRF-TOKEN",WU=new te("",{providedIn:"root",factory:()=>GU}),Jh=class{},KU=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=zh(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(U(Bt),U(Qn),U(HU))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();function QU(n,e){let t=n.url.toLowerCase();if(!W(iA)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=W(Jh).getToken(),i=W(WU);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function oA(...n){let e=[Er,nA,tA,{provide:hl,useExisting:tA},{provide:Wh,useExisting:nA},{provide:rA,useValue:QU,multi:!0},{provide:iA,useValue:!0},{provide:Jh,useClass:KU}];for(let t of n)e.push(...t.\u0275providers);return Ia(e)}var Hv=class extends Bh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Gv=class n extends Hv{static makeCurrent(){jD(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=YU();return t==null?null:JU(t)}resetBaseElement(){ml=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return zh(document.cookie,e)}},ml=null;function YU(){return ml=ml||document.querySelector("base"),ml?ml.getAttribute("href"):null}function JU(n){return new URL(n,document.baseURI).pathname}var XU=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),Wv=new te(""),cA=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new B(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(U(Wv),U(Pe))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),Xh=class{constructor(e){this._doc=e}},qv="ng-app-id",lA=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Hh(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${qv}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(qv),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(qv,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(U(Bt),U(Xy),U(tv,8),U(Qn))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),zv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Qv=/%COMP%/g,uA="%COMP%",ZU=`_nghost-${uA}`,ej=`_ngcontent-${uA}`,tj=!0,nj=new te("",{providedIn:"root",factory:()=>tj});function rj(n){return ej.replace(Qv,n)}function ij(n){return ZU.replace(Qv,n)}function dA(n,e){return e.map(t=>t.replace(Qv,n))}var Zh=(()=>{class n{constructor(t,r,i,o,s,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Hh(a),this.defaultRenderer=new gl(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Nr.ShadowDom&&(r=pe(j({},r),{encapsulation:Nr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof ef?i.applyToHost(t):i instanceof yl&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Nr.Emulated:o=new ef(c,u,r,this.appId,d,s,a,f);break;case Nr.ShadowDom:return new Kv(c,u,t,r,s,a,this.nonce,f);default:o=new yl(c,u,r,d,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(U(cA),U(lA),U(Xy),U(nj),U(Bt),U(Qn),U(Pe),U(tv))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),gl=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(zv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(sA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(sA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=zv[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=zv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ui.DashCase|ui.Important)?e.style.setProperty(t,r,i&ui.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ui.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=wi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function sA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Kv=class extends gl{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=dA(i.id,i.styles);for(let d of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},yl=class extends gl{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?dA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ef=class extends yl{constructor(e,t,r,i,o,s,a,c){let u=i+"-"+r.id;super(e,t,r,o,s,a,c,u),this.contentAttr=rj(u),this.hostAttr=ij(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},oj=(()=>{class n extends Xh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(U(Bt))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),aA=["alt","control","meta","shift"],sj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},aj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},cj=(()=>{class n extends Xh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),aA.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=sj[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),aA.forEach(s=>{if(s!==i){let a=aj[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(U(Bt))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();function hA(n,e){return PD(j({rootComponent:n},lj(e)))}function lj(n){return{appProviders:[...pj,...n?.providers??[]],platformProviders:fj}}function uj(){Gv.makeCurrent()}function dj(){return new Fr}function hj(){return PT(document),document}var fj=[{provide:Qn,useValue:Vv},{provide:Zy,useValue:uj,multi:!0},{provide:Bt,useFactory:hj,deps:[]}];var pj=[{provide:ch,useValue:"root"},{provide:Fr,useFactory:dj,deps:[]},{provide:Wv,useClass:oj,multi:!0,deps:[Bt,Pe,Qn]},{provide:Wv,useClass:cj,multi:!0,deps:[Bt]},Zh,lA,cA,{provide:os,useExisting:Zh},{provide:xa,useClass:XU,deps:[]},[]];var fA=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(U(Bt))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Se="primary",Nl=Symbol("RouteTitle"),e0=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Fa(n){return new e0(n)}function gj(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function yj(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!jr(n[t],e[t]))return!1;return!0}function jr(n,e){let t=n?t0(n):void 0,r=e?t0(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!IA(n[i],e[i]))return!1;return!0}function t0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function IA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function bA(n){return n.length>0?n[n.length-1]:null}function vo(n){return vg(n)?n:lo(n)?be(Promise.resolve(n)):oe(n)}var vj={exact:SA,subset:TA},CA={exact:_j,subset:wj,ignored:()=>!0};function pA(n,e,t){return vj[t.paths](n.root,e.root,t.matrixParams)&&CA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function _j(n,e){return jr(n,e)}function SA(n,e,t){if(!ds(n.segments,e.segments)||!rf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!SA(n.children[r],e.children[r],t))return!1;return!0}function wj(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>IA(n[t],e[t]))}function TA(n,e,t){return DA(n,e,e.segments,t)}function DA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ds(i,t)||e.hasChildren()||!rf(i,t,r))}else if(n.segments.length===t.length){if(!ds(n.segments,t)||!rf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!TA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ds(n.segments,i)||!rf(n.segments,i,r)||!n.children[Se]?!1:DA(n.children[Se],e,o,r)}}function rf(n,e,t){return e.every((r,i)=>CA[t](n[i].parameters,r.parameters))}var mo=class{constructor(e=new Ke([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Fa(this.queryParams),this._queryParamMap}toString(){return bj.serialize(this)}},Ke=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return of(this)}},us=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Fa(this.parameters),this._parameterMap}toString(){return xA(this)}};function Ej(n,e){return ds(n,e)&&n.every((t,r)=>jr(t.parameters,e[r].parameters))}function ds(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Ij(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Se&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Se&&(t=t.concat(e(i,r)))}),t}var Ol=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>new Cl,providedIn:"root"})}}return n})(),Cl=class{parse(e){let t=new r0(e);return new mo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${vl(e.root,!0)}`,r=Tj(e.queryParams),i=typeof e.fragment=="string"?`#${Cj(e.fragment)}`:"";return`${t}${r}${i}`}},bj=new Cl;function of(n){return n.segments.map(e=>xA(e)).join("/")}function vl(n,e){if(!n.hasChildren())return of(n);if(e){let t=n.children[Se]?vl(n.children[Se],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Se&&r.push(`${i}:${vl(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Ij(n,(r,i)=>i===Se?[vl(n.children[Se],!1)]:[`${i}:${vl(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Se]!=null?`${of(n)}/${t[0]}`:`${of(n)}/(${t.join("//")})`}}function AA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tf(n){return AA(n).replace(/%3B/gi,";")}function Cj(n){return encodeURI(n)}function n0(n){return AA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sf(n){return decodeURIComponent(n)}function mA(n){return sf(n.replace(/\+/g,"%20"))}function xA(n){return`${n0(n.path)}${Sj(n.parameters)}`}function Sj(n){return Object.entries(n).map(([e,t])=>`;${n0(e)}=${n0(t)}`).join("")}function Tj(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${tf(t)}=${tf(i)}`).join("&"):`${tf(t)}=${tf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Dj=/^[^\/()?;#]+/;function Yv(n){let e=n.match(Dj);return e?e[0]:""}var Aj=/^[^\/()?;=#]+/;function xj(n){let e=n.match(Aj);return e?e[0]:""}var Mj=/^[^=?&#]+/;function Rj(n){let e=n.match(Mj);return e?e[0]:""}var Pj=/^[^&#]+/;function Nj(n){let e=n.match(Pj);return e?e[0]:""}var r0=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ke([],{}):new Ke([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Se]=new Ke(e,t)),r}parseSegment(){let e=Yv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new us(sf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=xj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Yv(this.remaining);i&&(r=i,this.capture(r))}e[sf(t)]=sf(r)}parseQueryParam(e){let t=Rj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Nj(this.remaining);s&&(r=s,this.capture(r))}let i=mA(t),o=mA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Yv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new B(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Se);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Se]:new Ke([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}};function MA(n){return n.segments.length>0?new Ke([],{[Se]:n}):n}function RA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=RA(i);if(r===Se&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ke(n.segments,e);return Oj(t)}function Oj(n){if(n.numberOfChildren===1&&n.children[Se]){let e=n.children[Se];return new Ke(n.segments.concat(e.segments),e.children)}return n}function La(n){return n instanceof mo}function kj(n,e,t=null,r=null){let i=PA(n);return NA(i,e,t,r)}function PA(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new Ke(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=MA(r);return e??i}function NA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Jv(i,i,i,t,r);let o=Fj(e);if(o.toRoot())return Jv(i,i,new Ke([],{}),t,r);let s=Lj(o,i,n),a=s.processChildren?El(s.segmentGroup,s.index,o.commands):kA(s.segmentGroup,s.index,o.commands);return Jv(i,s.segmentGroup,a,t,r)}function af(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Sl(n){return typeof n=="object"&&n!=null&&n.outlets}function Jv(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;n===e?s=t:s=OA(n,e,t);let a=MA(RA(s));return new mo(a,o,i)}function OA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=OA(o,e,t)}),new Ke(n.segments,r)}var cf=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&af(r[0]))throw new B(4003,!1);let i=r.find(Sl);if(i&&i!==bA(r))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Fj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new cf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new cf(t,e,r)}var Oa=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Lj(n,e,t){if(n.isAbsolute)return new Oa(e,!0,0);if(!t)return new Oa(e,!1,NaN);if(t.parent===null)return new Oa(t,!0,0);let r=af(n.commands[0])?0:1,i=t.segments.length-1+r;return Vj(t,i,n.numberOfDoubleDots)}function Vj(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new B(4005,!1);i=r.segments.length}return new Oa(r,!1,i-o)}function Uj(n){return Sl(n[0])?n[0].outlets:{[Se]:n}}function kA(n,e,t){if(n??=new Ke([],{}),n.segments.length===0&&n.hasChildren())return El(n,e,t);let r=jj(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ke(n.segments.slice(0,r.pathIndex),{});return o.children[Se]=new Ke(n.segments.slice(r.pathIndex),n.children),El(o,0,i)}else return r.match&&i.length===0?new Ke(n.segments,{}):r.match&&!n.hasChildren()?i0(n,e,t):r.match?El(n,0,i):i0(n,e,t)}function El(n,e,t){if(t.length===0)return new Ke(n.segments,{});{let r=Uj(t),i={};if(Object.keys(r).some(o=>o!==Se)&&n.children[Se]&&n.numberOfChildren===1&&n.children[Se].segments.length===0){let o=El(n.children[Se],e,t);return new Ke(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=kA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ke(n.segments,i)}}function jj(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Sl(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!yA(c,u,s))return o;r+=2}else{if(!yA(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function i0(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Sl(o)){let c=Bj(o.outlets);return new Ke(r,c)}if(i===0&&af(t[0])){let c=n.segments[e];r.push(new us(c.path,gA(t[0]))),i++;continue}let s=Sl(o)?o.outlets[Se]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&af(a)?(r.push(new us(s,gA(a))),i+=2):(r.push(new us(s,{})),i++)}return new Ke(r,{})}function Bj(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=i0(new Ke([],{}),0,r))}),e}function gA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function yA(n,e,t){return n==t.path&&jr(e,t.parameters)}var Il="imperative",$t=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}($t||{}),Zn=class{constructor(e,t){this.id=e,this.url=t}},Va=class extends Zn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=$t.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},An=class extends Zn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=$t.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Un=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Un||{}),lf=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(lf||{}),go=class extends Zn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=$t.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},yo=class extends Zn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=$t.NavigationSkipped}},Tl=class extends Zn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=$t.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},uf=class extends Zn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=$t.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},o0=class extends Zn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=$t.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},s0=class extends Zn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=$t.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},a0=class extends Zn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=$t.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},c0=class extends Zn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=$t.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},l0=class{constructor(e){this.route=e,this.type=$t.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},u0=class{constructor(e){this.route=e,this.type=$t.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},d0=class{constructor(e){this.snapshot=e,this.type=$t.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},h0=class{constructor(e){this.snapshot=e,this.type=$t.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},f0=class{constructor(e){this.snapshot=e,this.type=$t.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},p0=class{constructor(e){this.snapshot=e,this.type=$t.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},df=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=$t.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Dl=class{},Al=class{constructor(e){this.url=e}};var m0=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new kl,this.attachRef=null}},kl=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new m0,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=g0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=g0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=y0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return y0(e,this._root).map(t=>t.value)}};function g0(n,e){if(n===e.value)return e;for(let t of e.children){let r=g0(n,t);if(r)return r}return null}function y0(n,e){if(n===e.value)return[e];for(let t of e.children){let r=y0(n,t);if(r.length)return r.unshift(e),r}return[]}var Vn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Na(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ff=class extends hf{constructor(e,t){super(e),this.snapshot=t,D0(this,e)}toString(){return this.snapshot.toString()}};function FA(n){let e=$j(n),t=new It([new us("",{})]),r=new It({}),i=new It({}),o=new It({}),s=new It(""),a=new yt(t,r,o,s,i,Se,n,e.root);return a.snapshot=e.root,new ff(new Vn(a,[]),e)}function $j(n){let e={},t={},r={},i="",o=new xl([],e,r,i,t,Se,n,null,{});return new pf("",new Vn(o,[]))}var yt=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ge(u=>u[Nl]))??oe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ge(e=>Fa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ge(e=>Fa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function T0(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&VA(i)&&(r.resolve[Nl]=i.title),r}var xl=class{get title(){return this.data?.[Nl]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Fa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Fa(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},pf=class extends hf{constructor(e,t){super(t),this.url=e,D0(this,t)}toString(){return LA(this._root)}};function D0(n,e){e.value._routerState=n,e.children.forEach(t=>D0(n,t))}function LA(n){let e=n.children.length>0?` { ${n.children.map(LA).join(", ")} } `:"";return`${n.value}${e}`}function Xv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,jr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),jr(e.params,t.params)||n.paramsSubject.next(t.params),yj(e.url,t.url)||n.urlSubject.next(t.url),jr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function v0(n,e){let t=jr(n.params,e.params)&&Ej(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||v0(n.parent,e.parent))}function VA(n){return typeof n.title=="string"||n.title===null}var A0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Se,this.activateEvents=new at,this.deactivateEvents=new at,this.attachEvents=new at,this.detachEvents=new at,this.parentContexts=W(kl),this.location=W(Ta),this.changeDetector=W(uo),this.environmentInjector=W(sn),this.inputBinder=W(vf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new _0(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ct({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Lr]})}}return n})(),_0=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===yt?this.route:e===kl?this.childContexts:this.parent.get(e,t)}},vf=new te(""),vA=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Hc([r.queryParams,r.params,r.data]).pipe(ot(([o,s,a],c)=>(a=j(j(j({},o),s),a),c===0?oe(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=ND(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();function qj(n,e,t){let r=Ml(n,e._root,t?t._root:void 0);return new ff(r,e)}function Ml(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=zj(n,e,t);return new Vn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ml(n,a)),s}}let r=Hj(e.value),i=e.children.map(o=>Ml(n,o));return new Vn(r,i)}}function zj(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ml(n,r,i);return Ml(n,r)})}function Hj(n){return new yt(new It(n.url),new It(n.params),new It(n.queryParams),new It(n.fragment),new It(n.data),n.outlet,n.component,n)}var UA="ngNavigationCancelingError";function jA(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=La(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=BA(!1,Un.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function BA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[UA]=!0,t.cancellationCode=e,t}function Gj(n){return $A(n)&&La(n.url)}function $A(n){return!!n&&n[UA]}var Wj=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=we({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ee],decls:1,vars:0,template:function(r,i){r&1&&ce(0,"router-outlet")},dependencies:[A0],encapsulation:2})}}return n})();function Kj(n,e){return n.providers&&!n._injector&&(n._injector=Dh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function x0(n){let e=n.children&&n.children.map(x0),t=e?pe(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Se&&(t.component=Wj),t}function Br(n){return n.outlet||Se}function Qj(n,e){let t=n.filter(r=>Br(r)===e);return t.push(...n.filter(r=>Br(r)!==e)),t}function Fl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Yj=(n,e,t,r)=>ge(i=>(new w0(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),w0=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Xv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Na(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Na(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Na(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Na(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new p0(o.value.snapshot))}),e.children.length&&this.forwardEvent(new h0(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Xv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Xv(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Fl(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},mf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ka=class{constructor(e,t){this.component=e,this.route=t}};function Jj(n,e,t){let r=n._root,i=e?e._root:null;return _l(r,i,t,[r.value])}function Xj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ja(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!CS(n)?n:e.get(n):r}function _l(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Na(e);return n.children.forEach(s=>{Zj(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>bl(a,t.getContext(s),i)),i}function Zj(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=e4(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new mf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?_l(n,e,a?a.children:null,r,i):_l(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ka(a.outlet.component,s))}else s&&bl(e,a,i),i.canActivateChecks.push(new mf(r)),o.component?_l(n,null,a?a.children:null,r,i):_l(n,null,t,r,i);return i}function e4(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ds(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ds(n.url,e.url)||!jr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!v0(n,e)||!jr(n.queryParams,e.queryParams);case"paramsChange":default:return!v0(n,e)}}function bl(n,e,t){let r=Na(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?bl(s,e.children.getContext(o),t):bl(s,null,t):bl(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ka(e.outlet.component,i)):t.canDeactivateChecks.push(new ka(null,i)):t.canDeactivateChecks.push(new ka(null,i))}function Ll(n){return typeof n=="function"}function t4(n){return typeof n=="boolean"}function n4(n){return n&&Ll(n.canLoad)}function r4(n){return n&&Ll(n.canActivate)}function i4(n){return n&&Ll(n.canActivateChild)}function o4(n){return n&&Ll(n.canDeactivate)}function s4(n){return n&&Ll(n.canMatch)}function qA(n){return n instanceof si||n?.name==="EmptyError"}var nf=Symbol("INITIAL_VALUE");function Ua(){return ot(n=>Hc(n.map(e=>e.pipe(li(1),Sg(nf)))).pipe(ge(e=>{for(let t of e)if(t!==!0){if(t===nf)return nf;if(t===!1||t instanceof mo)return t}return!0}),Ft(e=>e!==nf),li(1)))}function a4(n,e){return Dt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?oe(pe(j({},t),{guardsResult:!0})):c4(s,r,i,n).pipe(Dt(a=>a&&t4(a)?l4(r,o,n,e):oe(a)),ge(a=>pe(j({},t),{guardsResult:a})))})}function c4(n,e,t,r){return be(n).pipe(Dt(i=>p4(i.component,i.route,t,e,r)),Mr(i=>i!==!0,!0))}function l4(n,e,t,r){return be(e).pipe(ci(i=>ra(d4(i.route.parent,r),u4(i.route,r),f4(n,i.path,t),h4(n,i.route,t))),Mr(i=>i!==!0,!0))}function u4(n,e){return n!==null&&e&&e(new f0(n)),oe(!0)}function d4(n,e){return n!==null&&e&&e(new d0(n)),oe(!0)}function h4(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return oe(!0);let i=r.map(o=>Td(()=>{let s=Fl(e)??t,a=ja(o,s),c=r4(a)?a.canActivate(e,n):pr(s,()=>a(e,n));return vo(c).pipe(Mr())}));return oe(i).pipe(Ua())}function f4(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Xj(s)).filter(s=>s!==null).map(s=>Td(()=>{let a=s.guards.map(c=>{let u=Fl(s.node)??t,d=ja(c,u),f=i4(d)?d.canActivateChild(r,n):pr(u,()=>d(r,n));return vo(f).pipe(Mr())});return oe(a).pipe(Ua())}));return oe(o).pipe(Ua())}function p4(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return oe(!0);let s=o.map(a=>{let c=Fl(e)??i,u=ja(a,c),d=o4(u)?u.canDeactivate(n,e,t,r):pr(c,()=>u(n,e,t,r));return vo(d).pipe(Mr())});return oe(s).pipe(Ua())}function m4(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return oe(!0);let o=i.map(s=>{let a=ja(s,n),c=n4(a)?a.canLoad(e,t):pr(n,()=>a(e,t));return vo(c)});return oe(o).pipe(Ua(),zA(r))}function zA(n){return dg(At(e=>{if(La(e))throw jA(n,e)}),ge(e=>e===!0))}function g4(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return oe(!0);let o=i.map(s=>{let a=ja(s,n),c=s4(a)?a.canMatch(e,t):pr(n,()=>a(e,t));return vo(c)});return oe(o).pipe(Ua(),zA(r))}var Rl=class{constructor(e){this.segmentGroup=e||null}},gf=class extends Error{constructor(e){super(),this.urlTree=e}};function Pa(n){return Kt(new Rl(n))}function y4(n){return Kt(new B(4e3,!1))}function v4(n){return Kt(BA(!1,Un.GuardRejected))}var E0=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return oe(r);if(i.numberOfChildren>1||!i.children[Se])return y4(e.redirectTo);i=i.children[Se]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new gf(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new mo(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ke(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new B(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},I0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _4(n,e,t,r,i){let o=M0(n,e,t);return o.matched?(r=Kj(e,r),g4(r,e,t,i).pipe(ge(s=>s===!0?o:j({},I0)))):oe(o)}function M0(n,e,t){if(e.path==="**")return w4(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},I0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||gj)(t,n,e);if(!i)return j({},I0);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function w4(n){return{matched:!0,parameters:n.length>0?bA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function _A(n,e,t,r){return t.length>0&&b4(n,t,r)?{segmentGroup:new Ke(e,I4(r,new Ke(t,n.children))),slicedSegments:[]}:t.length===0&&C4(n,t,r)?{segmentGroup:new Ke(n.segments,E4(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ke(n.segments,n.children),slicedSegments:t}}function E4(n,e,t,r){let i={};for(let o of t)if(_f(n,e,o)&&!r[Br(o)]){let s=new Ke([],{});i[Br(o)]=s}return j(j({},r),i)}function I4(n,e){let t={};t[Se]=e;for(let r of n)if(r.path===""&&Br(r)!==Se){let i=new Ke([],{});t[Br(r)]=i}return t}function b4(n,e,t){return t.some(r=>_f(n,e,r)&&Br(r)!==Se)}function C4(n,e,t){return t.some(r=>_f(n,e,r))}function _f(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function S4(n,e,t,r){return Br(n)!==r&&(r===Se||!_f(e,t,n))?!1:M0(e,n,t).matched}function T4(n,e,t){return e.length===0&&!n.children[t]}var b0=class{};function D4(n,e,t,r,i,o,s="emptyOnly"){return new C0(n,e,t,r,i,s,o).recognize()}var A4=31,C0=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new E0(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new B(4002,`'${e.segmentGroup}'`)}recognize(){let e=_A(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ge(t=>{let r=new xl([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,{},Se,this.rootComponentType,null,{}),i=new Vn(r,t),o=new pf("",i),s=kj(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Se).pipe(on(r=>{if(r instanceof gf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Rl?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=T0(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(ge(o=>o instanceof Vn?[o]:[]))}processChildren(e,t,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return be(i).pipe(ci(o=>{let s=r.children[o],a=Qj(t,o);return this.processSegmentGroup(e,a,s,o)}),Cg((o,s)=>(o.push(...s),o)),Zi(null),bg(),Dt(o=>{if(o===null)return Pa(r);let s=HA(o);return x4(s),oe(s)}))}processSegment(e,t,r,i,o,s){return be(t).pipe(ci(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,o,s).pipe(on(c=>{if(c instanceof Rl)return oe(null);throw c}))),Mr(a=>!!a),on(a=>{if(qA(a))return T4(r,i,o)?oe(new b0):Pa(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,o,s,a){return S4(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s):Pa(i):Pa(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:d}=M0(t,i,o);if(!a)return Pa(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>A4&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,f).pipe(Dt(w=>this.processSegment(e,r,t,w.concat(d),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){let s=_4(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),s.pipe(ot(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ot(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:w}=a,E=new xl(d,w,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,R4(r),Br(r),r.component??r._loadedComponent??null,r,P4(r)),{segmentGroup:S,slicedSegments:x}=_A(t,d,f,c);if(x.length===0&&S.hasChildren())return this.processChildren(u,c,S).pipe(ge(k=>k===null?null:new Vn(E,k)));if(c.length===0&&x.length===0)return oe(new Vn(E,[]));let N=Br(r)===o;return this.processSegment(u,c,S,x,N?Se:o,!0).pipe(ge(k=>new Vn(E,k instanceof Vn?[k]:[])))}))):Pa(t)))}getChildConfig(e,t,r){return t.children?oe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?oe({routes:t._loadedRoutes,injector:t._loadedInjector}):m4(e,t,r,this.urlSerializer).pipe(Dt(i=>i?this.configLoader.loadChildren(e,t).pipe(At(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):v4(t))):oe({routes:[],injector:e})}};function x4(n){n.sort((e,t)=>e.value.outlet===Se?-1:t.value.outlet===Se?1:e.value.outlet.localeCompare(t.value.outlet))}function M4(n){let e=n.value.routeConfig;return e&&e.path===""}function HA(n){let e=[],t=new Set;for(let r of n){if(!M4(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=HA(r.children);e.push(new Vn(r.value,i))}return e.filter(r=>!t.has(r))}function R4(n){return n.data||{}}function P4(n){return n.resolve||{}}function N4(n,e,t,r,i,o){return Dt(s=>D4(n,e,t,r,s.extractedUrl,i,o).pipe(ge(({state:a,tree:c})=>pe(j({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function O4(n,e){return Dt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return oe(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of GA(c))s.add(u);let a=0;return be(s).pipe(ci(c=>o.has(c)?k4(c,r,n,e):(c.data=T0(c,c.parent,n).resolve,oe(void 0))),At(()=>a++),ia(1),Dt(c=>a===s.size?oe(t):Pn))})}function GA(n){let e=n.children.map(t=>GA(t)).flat();return[n,...e]}function k4(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!VA(i)&&(o[Nl]=i.title),F4(o,n,e,r).pipe(ge(s=>(n._resolvedData=s,n.data=T0(n,n.parent,t).resolve,null)))}function F4(n,e,t,r){let i=t0(n);if(i.length===0)return oe({});let o={};return be(i).pipe(Dt(s=>L4(n[s],e,t,r).pipe(Mr(),At(a=>{o[s]=a}))),ia(1),Eg(o),on(s=>qA(s)?Pn:Kt(s)))}function L4(n,e,t,r){let i=Fl(e)??r,o=ja(n,i),s=o.resolve?o.resolve(e,t):pr(i,()=>o(e,t));return vo(s)}function Zv(n){return ot(e=>{let t=n(e);return t?be(t).pipe(ge(()=>e)):oe(e)})}var WA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Se);return r}getResolvedTitleForRoute(t){return t.data[Nl]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>W(V4),providedIn:"root"})}}return n})(),V4=(()=>{class n extends WA{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(U(fA))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Vl=new te("",{providedIn:"root",factory:()=>({})}),Pl=new te(""),R0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=W(Rh)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return oe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=vo(t.loadComponent()).pipe(ge(KA),At(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Qo(()=>{this.componentLoaders.delete(t)})),i=new Xs(r,()=>new nn).pipe(Js());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return oe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=U4(r,this.compiler,t,this.onLoadEndListener).pipe(Qo(()=>{this.childrenLoaders.delete(r)})),s=new Xs(o,()=>new nn).pipe(Js());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function U4(n,e,t,r){return vo(n.loadChildren()).pipe(ge(KA),Dt(i=>i instanceof tl||Array.isArray(i)?oe(i):be(e.compileModuleAsync(i))),ge(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Pl,[],{optional:!0,self:!0}).flat()),{routes:s.map(x0),injector:o}}))}function j4(n){return n&&typeof n=="object"&&"default"in n}function KA(n){return j4(n)?n.default:n}var P0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>W(B4),providedIn:"root"})}}return n})(),B4=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),QA=new te(""),YA=new te("");function $4(n,e,t){let r=n.get(YA),i=n.get(Bt);return n.get(Pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),q4(n))),{onViewTransitionCreated:c}=r;return c&&pr(n,()=>c({transition:a,from:e,to:t})),s})}function q4(n){return new Promise(e=>{Th(e,{injector:n})})}var N0=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new nn,this.transitionAbortSubject=new nn,this.configLoader=W(R0),this.environmentInjector=W(sn),this.urlSerializer=W(Ol),this.rootContexts=W(kl),this.location=W(Ma),this.inputBindingEnabled=W(vf,{optional:!0})!==null,this.titleStrategy=W(WA),this.options=W(Vl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=W(P0),this.createViewTransition=W(QA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>oe(void 0),this.rootComponentType=null;let t=i=>this.events.next(new l0(i)),r=i=>this.events.next(new u0(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(pe(j(j({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new It({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Il,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ft(o=>o.id!==0),ge(o=>pe(j({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ot(o=>{let s=!1,a=!1;return oe(o).pipe(ot(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Un.SupersededByNewNavigation),Pn;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?pe(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new yo(c.id,this.urlSerializer.serialize(c.rawUrl),f,lf.IgnoredSameUrlNavigation)),c.resolve(null),Pn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return oe(c).pipe(ot(f=>{let w=this.transitions?.getValue();return this.events.next(new Va(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),w!==this.transitions?.getValue()?Pn:Promise.resolve(f)}),N4(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),At(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=pe(j({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let w=new uf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(w)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:w,source:E,restoredState:S,extras:x}=c,N=new Va(f,this.urlSerializer.serialize(w),E,S);this.events.next(N);let k=FA(this.rootComponentType).snapshot;return this.currentTransition=o=pe(j({},c),{targetSnapshot:k,urlAfterRedirects:w,extras:pe(j({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=w,oe(o)}else{let f="";return this.events.next(new yo(c.id,this.urlSerializer.serialize(c.extractedUrl),f,lf.IgnoredByUrlHandlingStrategy)),c.resolve(null),Pn}}),At(c=>{let u=new o0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),ge(c=>(this.currentTransition=o=pe(j({},c),{guards:Jj(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),a4(this.environmentInjector,c=>this.events.next(c)),At(c=>{if(o.guardsResult=c.guardsResult,La(c.guardsResult))throw jA(this.urlSerializer,c.guardsResult);let u=new s0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Ft(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Un.GuardRejected),!1)),Zv(c=>{if(c.guards.canActivateChecks.length)return oe(c).pipe(At(u=>{let d=new a0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),ot(u=>{let d=!1;return oe(u).pipe(O4(this.paramsInheritanceStrategy,this.environmentInjector),At({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Un.NoDataFromResolver)}}))}),At(u=>{let d=new c0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Zv(c=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(At(w=>{d.component=w}),ge(()=>{})));for(let w of d.children)f.push(...u(w));return f};return Hc(u(c.targetSnapshot.root)).pipe(Zi(null),li(1))}),Zv(()=>this.afterPreactivation()),ot(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?be(d).pipe(ge(()=>o)):oe(o)}),ge(c=>{let u=qj(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=pe(j({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),At(()=>{this.events.next(new Dl)}),Yj(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),li(1),At({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new An(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Tg(this.transitionAbortSubject.pipe(At(c=>{throw c}))),Qo(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Un.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),on(c=>{if(a=!0,$A(c))this.events.next(new go(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Gj(c)?this.events.next(new Al(c.url)):o.resolve(!1);else{this.events.next(new Tl(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(c))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Pn}))}))}cancelNavigationTransition(t,r,i){let o=new go(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function z4(n){return n!==Il}var H4=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>W(G4),providedIn:"root"})}}return n})(),S0=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},G4=(()=>{class n extends S0{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})()}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),JA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>W(W4),providedIn:"root"})}}return n})(),W4=(()=>{class n extends JA{constructor(){super(...arguments),this.location=W(Ma),this.urlSerializer=W(Ol),this.options=W(Vl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=W(P0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new mo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=FA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Va)this.stateMemento=this.createStateMemento();else if(t instanceof yo)this.rawUrlTree=r.initialUrl;else if(t instanceof uf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof Dl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof go&&(t.code===Un.GuardRejected||t.code===Un.NoDataFromResolver)?this.restoreHistory(r):t instanceof Tl?this.restoreHistory(r,!0):t instanceof An&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=j(j({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=j(j({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})()}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(wl||{});function XA(n,e){n.events.pipe(Ft(t=>t instanceof An||t instanceof go||t instanceof Tl||t instanceof yo),ge(t=>t instanceof An||t instanceof yo?wl.COMPLETE:(t instanceof go?t.code===Un.Redirect||t.code===Un.SupersededByNewNavigation:!1)?wl.REDIRECTING:wl.FAILED),Ft(t=>t!==wl.REDIRECTING),li(1)).subscribe(()=>{e()})}function K4(n){throw n}var Q4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Y4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ke=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=W(xh),this.stateManager=W(JA),this.options=W(Vl,{optional:!0})||{},this.pendingTasks=W(Da),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=W(N0),this.urlSerializer=W(Ol),this.location=W(Ma),this.urlHandlingStrategy=W(P0),this._events=new nn,this.errorHandler=this.options.errorHandler||K4,this.navigated=!1,this.routeReuseStrategy=W(H4),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=W(Pl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!W(vf,{optional:!0}),this.eventsSubscription=new Et,this.isNgZoneEnabled=W(Pe)instanceof Pe&&Pe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof go&&r.code!==Un.Redirect&&r.code!==Un.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof An)this.navigated=!0;else if(r instanceof Al){let s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||z4(i.source)};this.scheduleNavigation(s,Il,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}X4(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Il,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=j({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(x0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,d=null;switch(a){case"merge":d=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let w=i?i.snapshot:this.routerState.snapshot.root;f=PA(w)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),f=this.currentUrlTree.root}return NA(f,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=La(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Il,null,r)}navigate(t,r={skipLocationChange:!1}){return J4(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},Q4):r===!1?i=j({},Y4):i=r,La(t))return pA(this.currentUrlTree,t,i);let o=this.parseUrl(t);return pA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((f,w)=>{a=f,c=w});let d=this.pendingTasks.add();return XA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function J4(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new B(4008,!1)}function X4(n){return!(n instanceof Dl)&&!(n instanceof Al)}var $r=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new nn,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof An&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t!=null?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:kT(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(L(ke),L(yt),Yy("tabindex"),L(mi),L(Vr),L(Ei))}}static{this.\u0275dir=ct({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ae("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&sl("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[xt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",ho],skipLocationChange:[xt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",ho],replaceUrl:[xt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",ho],routerLink:"routerLink"},standalone:!0,features:[vv,Lr]})}}return n})();var yf=class{};var Z4=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ft(t=>t instanceof An),ci(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Dh(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return be(i).pipe(na())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=oe(null);let o=i.pipe(Dt(s=>s===null?oe(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return be([o,s]).pipe(na())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(U(ke),U(Rh),U(sn),U(yf),U(R0))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ZA=new te(""),e3=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=W(sn),s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Va?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof An?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof yo&&t.code===lf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof df&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>v(this,null,function*(){yield new Promise(i=>{setTimeout(()=>{i()}),Th(()=>{i()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new df(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){WT()}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();function ex(n,...e){return Ia([{provide:Pl,multi:!0,useValue:n},[],{provide:yt,useFactory:tx,deps:[ke]},{provide:ul,multi:!0,useFactory:nx},e.map(t=>t.\u0275providers)])}function tx(n){return n.routerState.root}function Ul(n,e){return{\u0275kind:n,\u0275providers:e}}function nx(){let n=W(Jt);return e=>{let t=n.get(Aa);if(e!==t.components[0])return;let r=n.get(ke),i=n.get(rx);n.get(O0)===1&&r.initialNavigation(),n.get(ix,null,Ae.Optional)?.setUpPreloading(),n.get(ZA,null,Ae.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var rx=new te("",{factory:()=>new nn}),O0=new te("",{providedIn:"root",factory:()=>1});function t3(){return Ul(2,[{provide:O0,useValue:0},{provide:Mh,multi:!0,deps:[Jt],useFactory:e=>{let t=e.get(BD,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(ke),o=e.get(rx);XA(i,()=>{r(!0)}),e.get(N0).afterPreactivation=()=>(r(!0),o.closed?oe(void 0):o),i.initialNavigation()}))}}])}function n3(){return Ul(3,[{provide:Mh,multi:!0,useFactory:()=>{let e=W(ke);return()=>{e.setUpLocationChangeListener()}}},{provide:O0,useValue:2}])}var ix=new te("");function r3(n){return Ul(0,[{provide:ix,useExisting:Z4},{provide:yf,useExisting:n}])}function i3(){return Ul(8,[vA,{provide:vf,useExisting:vA}])}function o3(n){let e=[{provide:QA,useValue:$4},{provide:YA,useValue:j({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ul(9,e)}var wA=new te("ROUTER_FORROOT_GUARD"),s3=[Ma,{provide:Ol,useClass:Cl},ke,kl,{provide:yt,useFactory:tx,deps:[ke]},R0,[]],Rt=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[s3,[],{provide:Pl,multi:!0,useValue:t},{provide:wA,useFactory:u3,deps:[[ke,new Ct,new Py]]},{provide:Vl,useValue:r||{}},r?.useHash?c3():l3(),a3(),r?.preloadingStrategy?r3(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?d3(r):[],r?.bindToComponentInputs?i3().\u0275providers:[],r?.enableViewTransitions?o3().\u0275providers:[],h3()]}}static forChild(t){return{ngModule:n,providers:[{provide:Pl,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(U(wA,8))}}static{this.\u0275mod=Vt({type:n})}static{this.\u0275inj=Lt({})}}return n})();function a3(){return{provide:ZA,useFactory:()=>{let n=W(YD),e=W(Pe),t=W(Vl),r=W(N0),i=W(Ol);return t.scrollOffset&&n.setOffset(t.scrollOffset),new e3(i,r,n,e,t)}}}function c3(){return{provide:Ei,useClass:qD}}function l3(){return{provide:Ei,useClass:Fv}}function u3(n){return"guarded"}function d3(n){return[n.initialNavigation==="disabled"?n3().\u0275providers:[],n.initialNavigation==="enabledBlocking"?t3().\u0275providers:[]]}var EA=new te("");function h3(){return[{provide:EA,useFactory:nx},{provide:ul,multi:!0,useExisting:EA}]}var sx=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},f3=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ax={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=o>>2,f=(o&3)<<4|a>>4,w=(a&15)<<2|u>>6,E=u&63;c||(E=64,s||(w=64)),r.push(t[d],t[f],t[w],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sx(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):f3(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||f==null)throw new F0;let w=o<<2|a>>4;if(r.push(w),u!==64){let E=a<<4&240|u>>2;if(r.push(E),f!==64){let S=u<<6&192|f;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},F0=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},p3=function(n){let e=sx(n);return ax.encodeByteArray(e,!0)},jl=function(n){return p3(n).replace(/\./g,"")},V0=function(n){try{return ax.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function m3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var g3=()=>m3().__FIREBASE_DEFAULTS__,y3=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},v3=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&V0(n[1]);return e&&JSON.parse(e)},Ef=()=>{try{return g3()||y3()||v3()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},U0=n=>{var e,t;return(t=(e=Ef())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},If=n=>{let e=U0(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},j0=()=>{var n;return(n=Ef())===null||n===void 0?void 0:n.config},B0=n=>{var e;return(e=Ef())===null||e===void 0?void 0:e[`_${n}`]};var wf=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function cx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[jl(JSON.stringify(t)),jl(JSON.stringify(s)),""].join(".")}function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function _3(){var n;let e=(n=Ef())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ux(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dx(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fx(){let n=qt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function px(){return!_3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $0(){try{return typeof indexedDB=="object"}catch{return!1}}function mx(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var w3="FirebaseError",En=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=w3,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ii.prototype.create)}},Ii=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?E3(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new En(i,a,r)}};function E3(n,e){return n.replace(I3,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var I3=/\{\$([^}]+)}/g;function gx(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function hs(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(ox(o)&&ox(s)){if(!hs(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function ox(n){return n!==null&&typeof n=="object"}function Ba(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $a(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function qa(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function yx(n,e){let t=new L0(n,e);return t.subscribe.bind(t)}var L0=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");b3(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=k0),i.error===void 0&&(i.error=k0),i.complete===void 0&&(i.complete=k0);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function b3(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function k0(){}var Iee=4*60*60*1e3;function ut(n){return n&&n._delegate?n._delegate:n}var Mn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var fs="[DEFAULT]";var q0=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new wf;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(S3(e))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=fs){return this.instances.has(e)}getOptions(e=fs){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:C3(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fs){return this.component?this.component.multipleInstances?e:fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function C3(n){return n===fs?void 0:n}function S3(n){return n.instantiationMode==="EAGER"}var bf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new q0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var T3=[],Ne=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ne||{}),D3={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},A3=Ne.INFO,x3={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},M3=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=x3[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},_o=class{constructor(e){this.name=e,this._logLevel=A3,this._logHandler=M3,this._userLogHandler=null,T3.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}};var R3=(n,e)=>e.some(t=>n instanceof t),vx,_x;function P3(){return vx||(vx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function N3(){return _x||(_x=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var wx=new WeakMap,H0=new WeakMap,Ex=new WeakMap,z0=new WeakMap,W0=new WeakMap;function O3(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(qr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&wx.set(t,n)}).catch(()=>{}),W0.set(e,n),e}function k3(n){if(H0.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});H0.set(n,e)}var G0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return H0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ex.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return qr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Ix(n){G0=n(G0)}function F3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Cf(this),e,...t);return Ex.set(r,e.sort?e.sort():[e]),qr(r)}:N3().includes(n)?function(...e){return n.apply(Cf(this),e),qr(wx.get(this))}:function(...e){return qr(n.apply(Cf(this),e))}}function L3(n){return typeof n=="function"?F3(n):(n instanceof IDBTransaction&&k3(n),R3(n,P3())?new Proxy(n,G0):n)}function qr(n){if(n instanceof IDBRequest)return O3(n);if(z0.has(n))return z0.get(n);let e=L3(n);return e!==n&&(z0.set(n,e),W0.set(e,n)),e}var Cf=n=>W0.get(n);function Cx(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=qr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(qr(s.result),c.oldVersion,c.newVersion,qr(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var V3=["get","getKey","getAll","getAllKeys","count"],U3=["put","add","delete","clear"],K0=new Map;function bx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(K0.get(e))return K0.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=U3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||V3.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&c.done]))[0]})};return K0.set(e,o),o}Ix(n=>pe(j({},n),{get:(e,t,r)=>bx(e,t)||n.get(e,t,r),has:(e,t)=>!!bx(e,t)||n.has(e,t)}));var Y0=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(j3(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function j3(n){let e=n.getComponent();return e?.type==="VERSION"}var J0="@firebase/app",Sx="0.10.13";var bi=new _o("@firebase/app"),B3="@firebase/app-compat",$3="@firebase/analytics-compat",q3="@firebase/analytics",z3="@firebase/app-check-compat",H3="@firebase/app-check",G3="@firebase/auth",W3="@firebase/auth-compat",K3="@firebase/database",Q3="@firebase/data-connect",Y3="@firebase/database-compat",J3="@firebase/functions",X3="@firebase/functions-compat",Z3="@firebase/installations",eB="@firebase/installations-compat",tB="@firebase/messaging",nB="@firebase/messaging-compat",rB="@firebase/performance",iB="@firebase/performance-compat",oB="@firebase/remote-config",sB="@firebase/remote-config-compat",aB="@firebase/storage",cB="@firebase/storage-compat",lB="@firebase/firestore",uB="@firebase/vertexai-preview",dB="@firebase/firestore-compat",hB="firebase",fB="10.14.1";var X0="[DEFAULT]",pB={[J0]:"fire-core",[B3]:"fire-core-compat",[q3]:"fire-analytics",[$3]:"fire-analytics-compat",[H3]:"fire-app-check",[z3]:"fire-app-check-compat",[G3]:"fire-auth",[W3]:"fire-auth-compat",[K3]:"fire-rtdb",[Q3]:"fire-data-connect",[Y3]:"fire-rtdb-compat",[J3]:"fire-fn",[X3]:"fire-fn-compat",[Z3]:"fire-iid",[eB]:"fire-iid-compat",[tB]:"fire-fcm",[nB]:"fire-fcm-compat",[rB]:"fire-perf",[iB]:"fire-perf-compat",[oB]:"fire-rc",[sB]:"fire-rc-compat",[aB]:"fire-gcs",[cB]:"fire-gcs-compat",[lB]:"fire-fst",[dB]:"fire-fst-compat",[uB]:"fire-vertex","fire-js":"fire-js",[hB]:"fire-js-all"};var Bl=new Map,mB=new Map,Z0=new Map;function Tx(n,e){try{n.container.addComponent(e)}catch(t){bi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function zr(n){let e=n.name;if(Z0.has(e))return bi.debug(`There were multiple attempts to register component ${e}.`),!1;Z0.set(e,n);for(let t of Bl.values())Tx(t,n);for(let t of mB.values())Tx(t,n);return!0}function ps(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function er(n){return n.settings!==void 0}var gB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wo=new Ii("app","Firebase",gB);var e_=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wo.create("app-deleted",{appName:this._name})}};var Eo=fB;function r_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:X0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw wo.create("bad-app-name",{appName:String(i)});if(t||(t=j0()),!t)throw wo.create("no-options");let o=Bl.get(i);if(o){if(hs(t,o.options)&&hs(r,o.config))return o;throw wo.create("duplicate-app",{appName:i})}let s=new bf(i);for(let c of Z0.values())s.addComponent(c);let a=new e_(t,r,s);return Bl.set(i,a),a}function Io(n=X0){let e=Bl.get(n);if(!e&&n===X0&&j0())return r_();if(!e)throw wo.create("no-app",{appName:n});return e}function Sf(){return Array.from(Bl.values())}function dt(n,e,t){var r;let i=(r=pB[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bi.warn(a.join(" "));return}zr(new Mn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var yB="firebase-heartbeat-database",vB=1,$l="firebase-heartbeat-store",Q0=null;function Mx(){return Q0||(Q0=Cx(yB,vB,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($l)}catch(t){console.warn(t)}}}}).catch(n=>{throw wo.create("idb-open",{originalErrorMessage:n.message})})),Q0}function _B(n){return v(this,null,function*(){try{let t=(yield Mx()).transaction($l),r=yield t.objectStore($l).get(Rx(n));return yield t.done,r}catch(e){if(e instanceof En)bi.warn(e.message);else{let t=wo.create("idb-get",{originalErrorMessage:e?.message});bi.warn(t.message)}}})}function Dx(n,e){return v(this,null,function*(){try{let r=(yield Mx()).transaction($l,"readwrite");yield r.objectStore($l).put(e,Rx(n)),yield r.done}catch(t){if(t instanceof En)bi.warn(t.message);else{let r=wo.create("idb-set",{originalErrorMessage:t?.message});bi.warn(r.message)}}})}function Rx(n){return`${n.name}!${n.options.appId}`}var wB=1024,EB=30*24*60*60*1e3,t_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new n_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Ax();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=EB}),this._storage.overwrite(this._heartbeatsCache))}catch(r){bi.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Ax(),{heartbeatsToSend:r,unsentEntries:i}=IB(this._heartbeatsCache.heartbeats),o=jl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return bi.warn(t),""}})}};function Ax(){return new Date().toISOString().substring(0,10)}function IB(n,e=wB){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),xx(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),xx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var n_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return $0()?mx().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield _B(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Dx(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Dx(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function xx(n){return jl(JSON.stringify({version:2,heartbeats:n})).length}function bB(n){zr(new Mn("platform-logger",e=>new Y0(e),"PRIVATE")),zr(new Mn("heartbeat",e=>new t_(e),"PRIVATE")),dt(J0,Sx,n),dt(J0,Sx,"esm2017"),dt("fire-js","")}bB("");var CB="firebase",SB="10.14.1";dt(CB,SB,"app");var Ci=new hi("ANGULARFIRE2_VERSION");function Ha(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var gs=(n,e)=>{let t=e?[e]:Sf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},bo=class{constructor(){return gs(TB)}},TB="app-check";function za(){}var Tf=class{zone;delegate;constructor(e,t=yg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},i_=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",za,{},za,za)),t.pipe(At({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Co=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Tf(Zone.current)),this.insideAngular=t.run(()=>new Tf(Zone.current,Qi)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(U(Pe))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Df(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function DB(n){return Df().ngZone.runOutsideAngular(()=>n())}function ms(n){return Df().ngZone.run(()=>n())}function AB(n){return xB(Df())(n)}function xB(n){return function(t){return t=t.lift(new i_(n.ngZone)),t.pipe(Xi(n.outsideAngular),Ji(n.insideAngular))}}var MB=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ms(()=>n.apply(void 0,r))},tt=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=ms(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",za,{},za,za))),r[o]=MB(r[o],t));let i=DB(()=>n.apply(this,r));if(!e)if(i instanceof De){let o=Df();return i.pipe(Xi(o.outsideAngular),Ji(o.insideAngular))}else return ms(()=>i);return i instanceof De?i.pipe(AB):i instanceof Promise?ms(()=>new Promise((o,s)=>i.then(a=>ms(()=>o(a)),a=>ms(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:ms(()=>i)};var Ir=class{constructor(e){return e}},Si=class{constructor(){return Sf()}};function RB(n){return n&&n.length===1?n[0]:new Ir(Io())}var o_=new te("angularfire2._apps"),PB={provide:Ir,useFactory:RB,deps:[[new Ct,o_]]},NB={provide:Si,deps:[[new Ct,o_]]};function OB(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ir(r)}}var kB=(()=>{class n{constructor(t){dt("angularfire",Ci.full,"core"),dt("angularfire",Ci.full,"app"),dt("angular",AD.full,t.toString())}static \u0275fac=function(r){return new(r||n)(U(Qn))};static \u0275mod=Vt({type:n});static \u0275inj=Lt({providers:[PB,NB]})}return n})();function Px(n,...e){return{ngModule:kB,providers:[{provide:o_,useFactory:OB(n),multi:!0,deps:[Pe,Jt,Co,...e]}]}}var Nx=tt(r_,!0);function Yx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Jx=Yx,Xx=new Ii("auth","Firebase",Yx());var Nf=new _o("@firebase/auth");function FB(n,...e){Nf.logLevel<=Ne.WARN&&Nf.warn(`Auth (${Eo}): ${n}`,...e)}function xf(n,...e){Nf.logLevel<=Ne.ERROR&&Nf.error(`Auth (${Eo}): ${n}`,...e)}function tr(n,...e){throw S_(n,...e)}function br(n,...e){return S_(n,...e)}function C_(n,e,t){let r=Object.assign(Object.assign({},Jx()),{[e]:t});return new Ii("auth","Firebase",r).create(e,{appName:n.name})}function Ai(n){return C_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LB(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&tr(n,"argument-error"),C_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function S_(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Xx.create(n,...e)}function le(n,e,...t){if(!n)throw S_(e,...t)}function Ti(n){let e="INTERNAL ASSERTION FAILED: "+n;throw xf(e),new Error(e)}function xi(n,e){n||Ti(e)}function c_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function VB(){return Ox()==="http:"||Ox()==="https:"}function Ox(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function UB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VB()||dx()||"connection"in navigator)?navigator.onLine:!0}function jB(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ys=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,xi(t>e,"Short delay should be less than long delay!"),this.isMobile=lx()||hx()}get(){return UB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function T_(n,e){xi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Of=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var BB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var $B=new ys(3e4,6e4);function Mi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ri(o,s,a,c){return v(this,arguments,function*(n,e,t,r,i={}){return Zx(n,i,()=>v(this,null,function*(){let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});let f=Ba(Object.assign({key:n.config.apiKey},d)).slice(1),w=yield n._getAdditionalHeaders();w["Content-Type"]="application/json",n.languageCode&&(w["X-Firebase-Locale"]=n.languageCode);let E=Object.assign({method:e,headers:w},u);return ux()||(E.referrerPolicy="no-referrer"),Of.fetch()(e1(n,n.config.apiHost,t,f),E)}))})}function Zx(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},BB),e);try{let i=new l_(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Af(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Af(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Af(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Af(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw C_(n,d,u);tr(n,d)}}catch(i){if(i instanceof En)throw i;tr(n,"network-request-failed",{message:String(i)})}})}function Yl(o,s,a,c){return v(this,arguments,function*(n,e,t,r,i={}){let u=yield Ri(n,e,t,r,i);return"mfaPendingCredential"in u&&tr(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function e1(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?T_(n.config,i):`${n.config.apiScheme}://${i}`}function qB(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var l_=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(br(this.auth,"network-request-failed")),$B.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Af(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=br(n,e,r);return i.customData._tokenResponse=t,i}function kx(n){return n!==void 0&&n.enterprise!==void 0}var u_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return qB(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function zB(n,e){return v(this,null,function*(){return Ri(n,"GET","/v2/recaptchaConfig",Mi(n,e))})}function HB(n,e){return v(this,null,function*(){return Ri(n,"POST","/v1/accounts:delete",e)})}function t1(n,e){return v(this,null,function*(){return Ri(n,"POST","/v1/accounts:lookup",e)})}function ql(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function D_(n,e=!1){return v(this,null,function*(){let t=ut(n),r=yield t.getIdToken(e),i=A_(r);le(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ql(s_(i.auth_time)),issuedAtTime:ql(s_(i.iat)),expirationTime:ql(s_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function s_(n){return Number(n)*1e3}function A_(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return xf("JWT malformed, contained fewer than 3 sections"),null;try{let i=V0(t);return i?JSON.parse(i):(xf("Failed to decode base64 JWT payload"),null)}catch(i){return xf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Fx(n){let e=A_(n);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Hl(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof En&&GB(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function GB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var d_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Gl=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ql(this.lastLoginAt),this.creationTime=ql(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function kf(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Hl(n,t1(t,{idToken:r}));le(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?n1(o.providerUserInfo):[],a=WB(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,d=c?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Gl(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function x_(n){return v(this,null,function*(){let e=ut(n);yield kf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function WB(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function n1(n){return n.map(e=>{var{providerId:t}=e,r=dd(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function KB(n,e){return v(this,null,function*(){let t=yield Zx(n,{},()=>v(this,null,function*(){let r=Ba({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=e1(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Of.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function QB(n,e){return v(this,null,function*(){return Ri(n,"POST","/v2/accounts:revokeToken",Mi(n,e))})}var zl=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){le(e.length!==0,"internal-error");let t=Fx(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield KB(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(le(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(le(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ti("not implemented")}};function So(n,e){le(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Wa=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=dd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new d_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Gl(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Hl(this,this.stsTokenManager.getToken(this.auth,e));return le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return D_(this,e)}reload(){return x_(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield kf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(er(this.auth.app))return Promise.reject(Ai(this.auth));let e=yield this.getIdToken();return yield Hl(this,HB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(i=t.email)!==null&&i!==void 0?i:void 0,E=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=t.photoURL)!==null&&s!==void 0?s:void 0,x=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,k=(u=t.createdAt)!==null&&u!==void 0?u:void 0,X=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:K,emailVerified:re,isAnonymous:Fe,providerData:Z,stsTokenManager:D}=t;le(K&&D,e,"internal-error");let b=zl.fromJSON(this.name,D);le(typeof K=="string",e,"internal-error"),So(f,e.name),So(w,e.name),le(typeof re=="boolean",e,"internal-error"),le(typeof Fe=="boolean",e,"internal-error"),So(E,e.name),So(S,e.name),So(x,e.name),So(N,e.name),So(k,e.name),So(X,e.name);let C=new n({uid:K,auth:e,email:w,emailVerified:re,displayName:f,isAnonymous:Fe,photoURL:S,phoneNumber:E,tenantId:x,stsTokenManager:b,createdAt:k,lastLoginAt:X});return Z&&Array.isArray(Z)&&(C.providerData=Z.map(A=>Object.assign({},A))),N&&(C._redirectEventId=N),C}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new zl;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield kf(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];le(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?n1(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new zl;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Gl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var Lx=new Map;function Di(n){xi(n instanceof Function,"Expected a class definition");let e=Lx.get(n);return e?(xi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Lx.set(n,e),e)}var YB=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),h_=YB;function Mf(n,e,t){return`firebase:${n}:${e}:${t}`}var Ff=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Mf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Mf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Wa._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(Di(h_),e,r);let i=(yield Promise.all(t.map(u=>v(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||Di(h_),s=Mf(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=yield u._get(s);if(d){let f=Wa._fromJSON(e,d);u!==o&&(a=f),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>v(this,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function Vx(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(s1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(r1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(c1(e))return"Blackberry";if(l1(e))return"Webos";if(i1(e))return"Safari";if((e.includes("chrome/")||o1(e))&&!e.includes("edge/"))return"Chrome";if(a1(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function r1(n=qt()){return/firefox\//i.test(n)}function i1(n=qt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o1(n=qt()){return/crios\//i.test(n)}function s1(n=qt()){return/iemobile/i.test(n)}function a1(n=qt()){return/android/i.test(n)}function c1(n=qt()){return/blackberry/i.test(n)}function l1(n=qt()){return/webos/i.test(n)}function M_(n=qt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function JB(n=qt()){var e;return M_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XB(){return fx()&&document.documentMode===10}function u1(n=qt()){return M_(n)||a1(n)||l1(n)||c1(n)||/windows phone/i.test(n)||s1(n)}function d1(n,e=[]){let t;switch(n){case"Browser":t=Vx(qt());break;case"Worker":t=`${Vx(qt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Eo}/${r}`}var f_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function ZB(t){return v(this,arguments,function*(n,e={}){return Ri(n,"GET","/v2/passwordPolicy",Mi(n,e))})}var e$=6,p_=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:e$,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var m_=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lf(this),this.idTokenSubscription=new Lf(this),this.beforeStateQueue=new f_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Di(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ff.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield t1(this,{idToken:e}),r=yield Wa._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(er(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield kf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=jB()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(er(this.app))return Promise.reject(Ai(this));let t=e?ut(e):null;return t&&le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return er(this.app)?Promise.reject(Ai(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return er(this.app)?Promise.reject(Ai(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Di(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield ZB(this),t=new p_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ii("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield QB(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Di(e)||this._popupRedirectResolver;le(t,this,"argument-error"),this.redirectPersistenceManager=yield Ff.create(this,[Di(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=d1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&FB(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Pi(n){return ut(n)}var Lf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=yx(t=>this.observer=t)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Wf={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t$(n){Wf=n}function h1(n){return Wf.loadJS(n)}function n$(){return Wf.recaptchaEnterpriseScript}function r$(){return Wf.gapiScript}function f1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var i$="recaptcha-enterprise",o$="NO_RECAPTCHA",g_=class{constructor(e){this.type=i$,this.auth=Pi(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(this,null,function*(){zB(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new u_(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;kx(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(o$)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&kx(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=n$();c.length!==0&&(c+=a),h1(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})})}};function Ux(n,e,t,r=!1){return v(this,null,function*(){let i=new g_(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function Vf(n,e,t,r){return v(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield Ux(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>v(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield Ux(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)}))})}function R_(n,e){let t=ps(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(hs(o,e??{}))return i;tr(i,"already-initialized")}return t.initialize({options:e})}function s$(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Di);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function P_(n,e,t){let r=Pi(n);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=p1(e),{host:s,port:a}=a$(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||c$()}function p1(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function a$(n){let e=p1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:jx(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:jx(s)}}}function jx(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function c$(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ka=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ti("not implemented")}_getIdTokenResponse(e){return Ti("not implemented")}_linkToIdToken(e,t){return Ti("not implemented")}_getReauthenticationResolver(e){return Ti("not implemented")}};function l$(n,e){return v(this,null,function*(){return Ri(n,"POST","/v1/accounts:signUp",e)})}function u$(n,e){return v(this,null,function*(){return Yl(n,"POST","/v1/accounts:signInWithPassword",Mi(n,e))})}function d$(n,e){return v(this,null,function*(){return Ri(n,"POST","/v1/accounts:sendOobCode",Mi(n,e))})}function h$(n,e){return v(this,null,function*(){return d$(n,e)})}function f$(n,e){return v(this,null,function*(){return Yl(n,"POST","/v1/accounts:signInWithEmailLink",Mi(n,e))})}function p$(n,e){return v(this,null,function*(){return Yl(n,"POST","/v1/accounts:signInWithEmailLink",Mi(n,e))})}var Wl=class n extends Ka{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vf(e,t,"signInWithPassword",u$);case"emailLink":return f$(e,{email:this._email,oobCode:this._password});default:tr(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vf(e,r,"signUpPassword",l$);case"emailLink":return p$(e,{idToken:t,email:this._email,oobCode:this._password});default:tr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Ga(n,e){return v(this,null,function*(){return Yl(n,"POST","/v1/accounts:signInWithIdp",Mi(n,e))})}var m$="http://localhost",Uf=class n extends Ka{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=dd(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return Ga(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Ga(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Ga(e,t)}buildRequest(){let e={requestUri:m$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ba(t)}return e}};function g$(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function y$(n){let e=$a(qa(n)).link,t=e?$a(qa(e)).deep_link_id:null,r=$a(qa(n)).deep_link_id;return(r?$a(qa(r)).link:null)||r||t||e||n}var jf=class n{constructor(e){var t,r,i,o,s,a;let c=$a(qa(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=g$((i=c.mode)!==null&&i!==void 0?i:null);le(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=y$(e);try{return new n(t)}catch{return null}}};var m1=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Wl._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=jf.parseLink(r);return le(i,"argument-error"),Wl._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Kl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Bf=class extends Kl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var N_=(()=>{class n extends Bf{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Uf._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function v$(n,e){return v(this,null,function*(){return Yl(n,"POST","/v1/accounts:signUp",Mi(n,e))})}var Qa=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield Wa._fromIdTokenResponse(e,r,i),s=Bx(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Bx(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Bx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var y_=class n extends En{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function g1(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?y_._fromErrorAndOperation(n,o,e,r):o})}function _$(n,e,t=!1){return v(this,null,function*(){let r=yield Hl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Qa._forOperation(n,"link",r)})}function w$(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(er(r.app))return Promise.reject(Ai(r));let i="reauthenticate";try{let o=yield Hl(n,g1(r,i,e,n),t);le(o.idToken,r,"internal-error");let s=A_(o.idToken);le(s,r,"internal-error");let{sub:a}=s;return le(n.uid===a,r,"user-mismatch"),Qa._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&tr(r,"user-mismatch"),o}})}function y1(n,e,t=!1){return v(this,null,function*(){if(er(n.app))return Promise.reject(Ai(n));let r="signIn",i=yield g1(n,r,e),o=yield Qa._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function O_(n,e){return v(this,null,function*(){return y1(Pi(n),e)})}function E$(n,e,t){var r;le(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),le(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(le(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(le(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function v1(n){return v(this,null,function*(){let e=Pi(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function k_(n,e,t){return v(this,null,function*(){let r=Pi(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&E$(r,i,t),yield Vf(r,i,"getOobCode",h$)})}function F_(n,e,t){return v(this,null,function*(){if(er(n.app))return Promise.reject(Ai(n));let r=Pi(n),s=yield Vf(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",v$).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&v1(n),c}),a=yield Qa._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function L_(n,e,t){return er(n.app)?Promise.reject(Ai(n)):O_(ut(n),m1.credential(e,t)).catch(r=>v(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&v1(n),r}))}function V_(n,e,t,r){return ut(n).onIdTokenChanged(e,t,r)}function U_(n,e,t){return ut(n).beforeAuthStateChanged(e,t)}function j_(n,e,t,r){return ut(n).onAuthStateChanged(e,t,r)}function B_(n){return ut(n).signOut()}var $f="__sak";var qf=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem($f,"1"),this.storage.removeItem($f),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var I$=1e3,b$=10,C$=(()=>{class n extends qf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=u1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);XB()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,b$):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},I$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield Wi(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield Wi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield Wi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),_1=C$;var S$=(()=>{class n extends qf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),$_=S$;function T$(n){return Promise.all(n.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var D$=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(d=>v(this,null,function*(){return d(r.origin,s)})),u=yield T$(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function q_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var v_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=q_("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){let w=f;if(w.data.eventId===u)switch(w.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(w.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Hr(){return window}function A$(n){Hr().location.href=n}function w1(){return typeof Hr().WorkerGlobalScope<"u"&&typeof Hr().importScripts=="function"}function x$(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function M$(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function R$(){return w1()?self:null}var E1="firebaseLocalStorageDb",P$=1,zf="firebaseLocalStorage",I1="fbase_key",vs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Kf(n,e){return n.transaction([zf],e?"readwrite":"readonly").objectStore(zf)}function N$(){let n=indexedDB.deleteDatabase(E1);return new vs(n).toPromise()}function __(){let n=indexedDB.open(E1,P$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(zf,{keyPath:I1})}catch(i){t(i)}}),n.addEventListener("success",()=>v(this,null,function*(){let r=n.result;r.objectStoreNames.contains(zf)?e(r):(r.close(),yield N$(),e(yield __()))}))})}function $x(n,e,t){return v(this,null,function*(){let r=Kf(n,!0).put({[I1]:e,value:t});return new vs(r).toPromise()})}function O$(n,e){return v(this,null,function*(){let t=Kf(n,!1).get(e),r=yield new vs(t).toPromise();return r===void 0?null:r.value})}function qx(n,e){let t=Kf(n,!0).delete(e);return new vs(t).toPromise()}var k$=800,F$=3,L$=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield __(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>F$)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return w1()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=D$._getInstance(R$()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield x$(),!this.activeServiceWorker)return;this.sender=new v_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||M$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield __();return yield $x(t,$f,"1"),yield qx(t,$f),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>$x(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>O$(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>qx(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=Kf(o,!1).getAll();return new vs(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),k$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),b1=L$;var pte=f1("rcb"),mte=new ys(3e4,6e4);function C1(n,e){return e?Di(e):(le(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ql=class extends Ka{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ga(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ga(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ga(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function V$(n){return y1(n.auth,new Ql(n),n.bypassAuthState)}function U$(n){let{auth:e,user:t}=n;return le(t,e,"internal-error"),w$(t,new Ql(n),n.bypassAuthState)}function j$(n){return v(this,null,function*(){let{auth:e,user:t}=n;return le(t,e,"internal-error"),_$(t,new Ql(n),n.bypassAuthState)})}var Hf=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return V$;case"linkViaPopup":case"linkViaRedirect":return j$;case"reauthViaPopup":case"reauthViaRedirect":return U$;default:tr(this.auth,"internal-error")}}resolve(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var B$=new ys(2e3,1e4);function z_(n,e,t){return v(this,null,function*(){if(er(n.app))return Promise.reject(br(n,"operation-not-supported-in-this-environment"));let r=Pi(n);LB(n,e,Kl);let i=C1(r,t);return new $$(r,"signInViaPopup",e,i).executeNotNull()})}var $$=(()=>{class n extends Hf{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return v(this,null,function*(){let t=yield this.execute();return le(t,this.auth,"internal-error"),t})}onExecution(){return v(this,null,function*(){xi(this.filter.length===1,"Popup operations only handle one event");let t=q_();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,B$.get())};t()}}n.currentPopupAction=null;return n})(),q$="pendingRedirect",Rf=new Map,w_=class n extends Hf{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Rf.get(this.auth._key());if(!e){try{let r=(yield z$(this.resolver,this.auth))?yield Wi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Rf.set(this.auth._key(),e)}return this.bypassAuthState||Rf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Wi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Wi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function z$(n,e){return v(this,null,function*(){let t=W$(e),r=G$(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function H$(n,e){Rf.set(n._key(),e)}function G$(n){return Di(n._redirectPersistence)}function W$(n){return Mf(q$,n.config.apiKey,n.name)}function K$(n,e,t=!1){return v(this,null,function*(){if(er(n.app))return Promise.reject(Ai(n));let r=Pi(n),i=C1(r,e),s=yield new w_(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var Q$=10*60*1e3,E_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Y$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!S1(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(br(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Q$&&this.cachedEventUids.clear(),this.cachedEventUids.has(zx(e))}saveEventToCache(e){this.cachedEventUids.add(zx(e)),this.lastProcessedEventTime=Date.now()}};function zx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function S1({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Y$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return S1(n);default:return!1}}function J$(t){return v(this,arguments,function*(n,e={}){return Ri(n,"GET","/v1/projects",e)})}var X$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Z$=/^https?/;function e5(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield J$(n);for(let t of e)try{if(t5(t))return}catch{}tr(n,"unauthorized-domain")})}function t5(n){let e=c_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!Z$.test(t))return!1;if(X$.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var n5=new ys(3e4,6e4);function Hx(){let n=Hr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function r5(n){return new Promise((e,t)=>{var r,i,o;function s(){Hx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hx(),t(br(n,"network-request-failed"))},timeout:n5.get()})}if(!((i=(r=Hr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Hr().gapi)===null||o===void 0)&&o.load)s();else{let a=f1("iframefcb");return Hr()[a]=()=>{gapi.load?s():t(br(n,"network-request-failed"))},h1(`${r$()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Pf=null,e})}var Pf=null;function i5(n){return Pf=Pf||r5(n),Pf}var o5=new ys(5e3,15e3),s5="__/auth/iframe",a5="emulator/auth/iframe",c5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function u5(n){let e=n.config;le(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?T_(e,a5):`https://${n.config.authDomain}/${s5}`,r={apiKey:e.apiKey,appName:n.name,v:Eo},i=l5.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Ba(r).slice(1)}`}function d5(n){return v(this,null,function*(){let e=yield i5(n),t=Hr().gapi;return le(t,n,"internal-error"),e.open({where:document.body,url:u5(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c5,dontclear:!0},r=>new Promise((i,o)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=br(n,"network-request-failed"),a=Hr().setTimeout(()=>{o(s)},o5.get());function c(){Hr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var h5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f5=500,p5=600,m5="_blank",g5="http://localhost",Gf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function y5(n,e,t,r=f5,i=p5){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},h5),{width:r.toString(),height:i.toString(),top:o,left:s}),u=qt().toLowerCase();t&&(a=o1(u)?m5:t),r1(u)&&(e=e||g5,c.scrollbars="yes");let d=Object.entries(c).reduce((w,[E,S])=>`${w}${E}=${S},`,"");if(JB(u)&&a!=="_self")return v5(e||"",a),new Gf(null);let f=window.open(e||"",a,d);le(f,n,"popup-blocked");try{f.focus()}catch{}return new Gf(f)}function v5(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var _5="__/auth/handler",w5="emulator/auth/handler",E5=encodeURIComponent("fac");function Gx(n,e,t,r,i,o){return v(this,null,function*(){le(n.config.authDomain,n,"auth-domain-config-required"),le(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Eo,eventId:i};if(e instanceof Kl){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",gx(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(o||{}))s[d]=f}if(e instanceof Bf){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),u=c?`#${E5}=${encodeURIComponent(c)}`:"";return`${I5(n)}?${Ba(a).slice(1)}${u}`})}function I5({config:n}){return n.emulator?T_(n,w5):`https://${n.authDomain}/${_5}`}var a_="webStorageSupport",I_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$_,this._completeRedirectFn=K$,this._overrideRedirectResult=H$}_openPopup(e,t,r,i){return v(this,null,function*(){var o;xi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield Gx(e,t,r,c_(),i);return y5(e,s,q_())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield Gx(e,t,r,c_(),i);return A$(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(xi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield d5(e),r=new E_(e);return t.register("authEvent",i=>(le(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(a_,{type:a_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[a_];s!==void 0&&t(!!s),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=e5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return u1()||i1()||M_()}},T1=I_;var Wx="@firebase/auth",Kx="1.7.9";var b_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function b5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function C5(n){zr(new Mn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;le(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:d1(n)},u=new m_(r,i,o,c);return s$(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),zr(new Mn("auth-internal",e=>{let t=Pi(e.getProvider("auth").getImmediate());return(r=>new b_(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),dt(Wx,Kx,b5(n)),dt(Wx,Kx,"esm2017")}var S5=5*60,T5=B0("authIdTokenMaxAge")||S5,Qx=null,D5=n=>e=>v(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>T5)return;let i=t?.token;Qx!==i&&(Qx=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function H_(n=Io()){let e=ps(n,"auth");if(e.isInitialized())return e.getImmediate();let t=R_(n,{popupRedirectResolver:T1,persistence:[b1,_1,$_]}),r=B0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=D5(o.toString());U_(t,s,()=>s(t.currentUser)),V_(t,a=>s(a))}}let i=U0("auth");return i&&P_(t,`http://${i}`),t}function A5(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}t$({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=br("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",A5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});C5("Browser");var D1="auth",_s=class{constructor(e){return e}},ws=class{constructor(){return gs(D1)}};var G_=new te("angularfire2.auth-instances");function m6(n,e){let t=Ha(D1,n,e);return t&&new _s(t)}function g6(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new _s(r)}}var y6={provide:ws,deps:[[new Ct,G_]]},v6={provide:_s,useFactory:m6,deps:[[new Ct,G_],Ir]},_6=(()=>{class n{constructor(){dt("angularfire",Ci.full,"auth")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vt({type:n});static \u0275inj=Lt({providers:[v6,y6]})}return n})();function A1(n,...e){return{ngModule:_6,providers:[{provide:G_,useFactory:g6(n),multi:!0,deps:[Pe,Jt,Co,Si,[new Ct,bo],...e]}]}}var x1=tt(F_,!0);var M1=tt(H_,!0);var R1=tt(j_,!0);var P1=tt(k_,!0);var N1=tt(L_,!0);var O1=tt(z_,!0);var W_=tt(B_,!0);var k1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},F1={};var To,K_;(function(){var n;function e(D,b){function C(){}C.prototype=b.prototype,D.D=b.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(A,M,P){for(var T=Array(arguments.length-2),zn=2;zn<arguments.length;zn++)T[zn-2]=arguments[zn];return b.prototype[M].apply(A,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,b,C){C||(C=0);var A=Array(16);if(typeof b=="string")for(var M=0;16>M;++M)A[M]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(M=0;16>M;++M)A[M]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;b=D.g[0],C=D.g[1],M=D.g[2];var P=D.g[3],T=b+(P^C&(M^P))+A[0]+3614090360&4294967295;b=C+(T<<7&4294967295|T>>>25),T=P+(M^b&(C^M))+A[1]+3905402710&4294967295,P=b+(T<<12&4294967295|T>>>20),T=M+(C^P&(b^C))+A[2]+606105819&4294967295,M=P+(T<<17&4294967295|T>>>15),T=C+(b^M&(P^b))+A[3]+3250441966&4294967295,C=M+(T<<22&4294967295|T>>>10),T=b+(P^C&(M^P))+A[4]+4118548399&4294967295,b=C+(T<<7&4294967295|T>>>25),T=P+(M^b&(C^M))+A[5]+1200080426&4294967295,P=b+(T<<12&4294967295|T>>>20),T=M+(C^P&(b^C))+A[6]+2821735955&4294967295,M=P+(T<<17&4294967295|T>>>15),T=C+(b^M&(P^b))+A[7]+4249261313&4294967295,C=M+(T<<22&4294967295|T>>>10),T=b+(P^C&(M^P))+A[8]+1770035416&4294967295,b=C+(T<<7&4294967295|T>>>25),T=P+(M^b&(C^M))+A[9]+2336552879&4294967295,P=b+(T<<12&4294967295|T>>>20),T=M+(C^P&(b^C))+A[10]+4294925233&4294967295,M=P+(T<<17&4294967295|T>>>15),T=C+(b^M&(P^b))+A[11]+2304563134&4294967295,C=M+(T<<22&4294967295|T>>>10),T=b+(P^C&(M^P))+A[12]+1804603682&4294967295,b=C+(T<<7&4294967295|T>>>25),T=P+(M^b&(C^M))+A[13]+4254626195&4294967295,P=b+(T<<12&4294967295|T>>>20),T=M+(C^P&(b^C))+A[14]+2792965006&4294967295,M=P+(T<<17&4294967295|T>>>15),T=C+(b^M&(P^b))+A[15]+1236535329&4294967295,C=M+(T<<22&4294967295|T>>>10),T=b+(M^P&(C^M))+A[1]+4129170786&4294967295,b=C+(T<<5&4294967295|T>>>27),T=P+(C^M&(b^C))+A[6]+3225465664&4294967295,P=b+(T<<9&4294967295|T>>>23),T=M+(b^C&(P^b))+A[11]+643717713&4294967295,M=P+(T<<14&4294967295|T>>>18),T=C+(P^b&(M^P))+A[0]+3921069994&4294967295,C=M+(T<<20&4294967295|T>>>12),T=b+(M^P&(C^M))+A[5]+3593408605&4294967295,b=C+(T<<5&4294967295|T>>>27),T=P+(C^M&(b^C))+A[10]+38016083&4294967295,P=b+(T<<9&4294967295|T>>>23),T=M+(b^C&(P^b))+A[15]+3634488961&4294967295,M=P+(T<<14&4294967295|T>>>18),T=C+(P^b&(M^P))+A[4]+3889429448&4294967295,C=M+(T<<20&4294967295|T>>>12),T=b+(M^P&(C^M))+A[9]+568446438&4294967295,b=C+(T<<5&4294967295|T>>>27),T=P+(C^M&(b^C))+A[14]+3275163606&4294967295,P=b+(T<<9&4294967295|T>>>23),T=M+(b^C&(P^b))+A[3]+4107603335&4294967295,M=P+(T<<14&4294967295|T>>>18),T=C+(P^b&(M^P))+A[8]+1163531501&4294967295,C=M+(T<<20&4294967295|T>>>12),T=b+(M^P&(C^M))+A[13]+2850285829&4294967295,b=C+(T<<5&4294967295|T>>>27),T=P+(C^M&(b^C))+A[2]+4243563512&4294967295,P=b+(T<<9&4294967295|T>>>23),T=M+(b^C&(P^b))+A[7]+1735328473&4294967295,M=P+(T<<14&4294967295|T>>>18),T=C+(P^b&(M^P))+A[12]+2368359562&4294967295,C=M+(T<<20&4294967295|T>>>12),T=b+(C^M^P)+A[5]+4294588738&4294967295,b=C+(T<<4&4294967295|T>>>28),T=P+(b^C^M)+A[8]+2272392833&4294967295,P=b+(T<<11&4294967295|T>>>21),T=M+(P^b^C)+A[11]+1839030562&4294967295,M=P+(T<<16&4294967295|T>>>16),T=C+(M^P^b)+A[14]+4259657740&4294967295,C=M+(T<<23&4294967295|T>>>9),T=b+(C^M^P)+A[1]+2763975236&4294967295,b=C+(T<<4&4294967295|T>>>28),T=P+(b^C^M)+A[4]+1272893353&4294967295,P=b+(T<<11&4294967295|T>>>21),T=M+(P^b^C)+A[7]+4139469664&4294967295,M=P+(T<<16&4294967295|T>>>16),T=C+(M^P^b)+A[10]+3200236656&4294967295,C=M+(T<<23&4294967295|T>>>9),T=b+(C^M^P)+A[13]+681279174&4294967295,b=C+(T<<4&4294967295|T>>>28),T=P+(b^C^M)+A[0]+3936430074&4294967295,P=b+(T<<11&4294967295|T>>>21),T=M+(P^b^C)+A[3]+3572445317&4294967295,M=P+(T<<16&4294967295|T>>>16),T=C+(M^P^b)+A[6]+76029189&4294967295,C=M+(T<<23&4294967295|T>>>9),T=b+(C^M^P)+A[9]+3654602809&4294967295,b=C+(T<<4&4294967295|T>>>28),T=P+(b^C^M)+A[12]+3873151461&4294967295,P=b+(T<<11&4294967295|T>>>21),T=M+(P^b^C)+A[15]+530742520&4294967295,M=P+(T<<16&4294967295|T>>>16),T=C+(M^P^b)+A[2]+3299628645&4294967295,C=M+(T<<23&4294967295|T>>>9),T=b+(M^(C|~P))+A[0]+4096336452&4294967295,b=C+(T<<6&4294967295|T>>>26),T=P+(C^(b|~M))+A[7]+1126891415&4294967295,P=b+(T<<10&4294967295|T>>>22),T=M+(b^(P|~C))+A[14]+2878612391&4294967295,M=P+(T<<15&4294967295|T>>>17),T=C+(P^(M|~b))+A[5]+4237533241&4294967295,C=M+(T<<21&4294967295|T>>>11),T=b+(M^(C|~P))+A[12]+1700485571&4294967295,b=C+(T<<6&4294967295|T>>>26),T=P+(C^(b|~M))+A[3]+2399980690&4294967295,P=b+(T<<10&4294967295|T>>>22),T=M+(b^(P|~C))+A[10]+4293915773&4294967295,M=P+(T<<15&4294967295|T>>>17),T=C+(P^(M|~b))+A[1]+2240044497&4294967295,C=M+(T<<21&4294967295|T>>>11),T=b+(M^(C|~P))+A[8]+1873313359&4294967295,b=C+(T<<6&4294967295|T>>>26),T=P+(C^(b|~M))+A[15]+4264355552&4294967295,P=b+(T<<10&4294967295|T>>>22),T=M+(b^(P|~C))+A[6]+2734768916&4294967295,M=P+(T<<15&4294967295|T>>>17),T=C+(P^(M|~b))+A[13]+1309151649&4294967295,C=M+(T<<21&4294967295|T>>>11),T=b+(M^(C|~P))+A[4]+4149444226&4294967295,b=C+(T<<6&4294967295|T>>>26),T=P+(C^(b|~M))+A[11]+3174756917&4294967295,P=b+(T<<10&4294967295|T>>>22),T=M+(b^(P|~C))+A[2]+718787259&4294967295,M=P+(T<<15&4294967295|T>>>17),T=C+(P^(M|~b))+A[9]+3951481745&4294967295,D.g[0]=D.g[0]+b&4294967295,D.g[1]=D.g[1]+(M+(T<<21&4294967295|T>>>11))&4294967295,D.g[2]=D.g[2]+M&4294967295,D.g[3]=D.g[3]+P&4294967295}r.prototype.u=function(D,b){b===void 0&&(b=D.length);for(var C=b-this.blockSize,A=this.B,M=this.h,P=0;P<b;){if(M==0)for(;P<=C;)i(this,D,P),P+=this.blockSize;if(typeof D=="string"){for(;P<b;)if(A[M++]=D.charCodeAt(P++),M==this.blockSize){i(this,A),M=0;break}}else for(;P<b;)if(A[M++]=D[P++],M==this.blockSize){i(this,A),M=0;break}}this.h=M,this.o+=b},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var b=1;b<D.length-8;++b)D[b]=0;var C=8*this.o;for(b=D.length-8;b<D.length;++b)D[b]=C&255,C/=256;for(this.u(D),D=Array(16),b=C=0;4>b;++b)for(var A=0;32>A;A+=8)D[C++]=this.g[b]>>>A&255;return D};function o(D,b){var C=a;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=b(D)}function s(D,b){this.h=b;for(var C=[],A=!0,M=D.length-1;0<=M;M--){var P=D[M]|0;A&&P==b||(C[M]=P,A=!1)}this.g=C}var a={};function c(D){return-128<=D&&128>D?o(D,function(b){return new s([b|0],0>b?-1:0)}):new s([D|0],0>D?-1:0)}function u(D){if(isNaN(D)||!isFinite(D))return f;if(0>D)return N(u(-D));for(var b=[],C=1,A=0;D>=C;A++)b[A]=D/C|0,C*=4294967296;return new s(b,0)}function d(D,b){if(D.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(D.charAt(0)=="-")return N(d(D.substring(1),b));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(b,8)),A=f,M=0;M<D.length;M+=8){var P=Math.min(8,D.length-M),T=parseInt(D.substring(M,M+P),b);8>P?(P=u(Math.pow(b,P)),A=A.j(P).add(u(T))):(A=A.j(C),A=A.add(u(T)))}return A}var f=c(0),w=c(1),E=c(16777216);n=s.prototype,n.m=function(){if(x(this))return-N(this).m();for(var D=0,b=1,C=0;C<this.g.length;C++){var A=this.i(C);D+=(0<=A?A:4294967296+A)*b,b*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(x(this))return"-"+N(this).toString(D);for(var b=u(Math.pow(D,6)),C=this,A="";;){var M=re(C,b).g;C=k(C,M.j(b));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(D);if(C=M,S(C))return P+A;for(;6>P.length;)P="0"+P;A=P+A}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var b=0;b<D.g.length;b++)if(D.g[b]!=0)return!1;return!0}function x(D){return D.h==-1}n.l=function(D){return D=k(this,D),x(D)?-1:S(D)?0:1};function N(D){for(var b=D.g.length,C=[],A=0;A<b;A++)C[A]=~D.g[A];return new s(C,~D.h).add(w)}n.abs=function(){return x(this)?N(this):this},n.add=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],A=0,M=0;M<=b;M++){var P=A+(this.i(M)&65535)+(D.i(M)&65535),T=(P>>>16)+(this.i(M)>>>16)+(D.i(M)>>>16);A=T>>>16,P&=65535,T&=65535,C[M]=T<<16|P}return new s(C,C[C.length-1]&-2147483648?-1:0)};function k(D,b){return D.add(N(b))}n.j=function(D){if(S(this)||S(D))return f;if(x(this))return x(D)?N(this).j(N(D)):N(N(this).j(D));if(x(D))return N(this.j(N(D)));if(0>this.l(E)&&0>D.l(E))return u(this.m()*D.m());for(var b=this.g.length+D.g.length,C=[],A=0;A<2*b;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(var M=0;M<D.g.length;M++){var P=this.i(A)>>>16,T=this.i(A)&65535,zn=D.i(M)>>>16,Bi=D.i(M)&65535;C[2*A+2*M]+=T*Bi,X(C,2*A+2*M),C[2*A+2*M+1]+=P*Bi,X(C,2*A+2*M+1),C[2*A+2*M+1]+=T*zn,X(C,2*A+2*M+1),C[2*A+2*M+2]+=P*zn,X(C,2*A+2*M+2)}for(A=0;A<b;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=b;A<2*b;A++)C[A]=0;return new s(C,0)};function X(D,b){for(;(D[b]&65535)!=D[b];)D[b+1]+=D[b]>>>16,D[b]&=65535,b++}function K(D,b){this.g=D,this.h=b}function re(D,b){if(S(b))throw Error("division by zero");if(S(D))return new K(f,f);if(x(D))return b=re(N(D),b),new K(N(b.g),N(b.h));if(x(b))return b=re(D,N(b)),new K(N(b.g),b.h);if(30<D.g.length){if(x(D)||x(b))throw Error("slowDivide_ only works with positive integers.");for(var C=w,A=b;0>=A.l(D);)C=Fe(C),A=Fe(A);var M=Z(C,1),P=Z(A,1);for(A=Z(A,2),C=Z(C,2);!S(A);){var T=P.add(A);0>=T.l(D)&&(M=M.add(C),P=T),A=Z(A,1),C=Z(C,1)}return b=k(D,M.j(b)),new K(M,b)}for(M=f;0<=D.l(b);){for(C=Math.max(1,Math.floor(D.m()/b.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),P=u(C),T=P.j(b);x(T)||0<T.l(D);)C-=A,P=u(C),T=P.j(b);S(P)&&(P=w),M=M.add(P),D=k(D,T)}return new K(M,D)}n.A=function(D){return re(this,D).h},n.and=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],A=0;A<b;A++)C[A]=this.i(A)&D.i(A);return new s(C,this.h&D.h)},n.or=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],A=0;A<b;A++)C[A]=this.i(A)|D.i(A);return new s(C,this.h|D.h)},n.xor=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],A=0;A<b;A++)C[A]=this.i(A)^D.i(A);return new s(C,this.h^D.h)};function Fe(D){for(var b=D.g.length+1,C=[],A=0;A<b;A++)C[A]=D.i(A)<<1|D.i(A-1)>>>31;return new s(C,D.h)}function Z(D,b){var C=b>>5;b%=32;for(var A=D.g.length-C,M=[],P=0;P<A;P++)M[P]=0<b?D.i(P+C)>>>b|D.i(P+C+1)<<32-b:D.i(P+C);return new s(M,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,K_=F1.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,To=F1.Integer=s}).apply(typeof k1<"u"?k1:typeof self<"u"?self:typeof window<"u"?window:{});var Qf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ni={};var Q_,E6,Ya,Y_,Jl,Yf,J_,X_,Z_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qf=="object"&&Qf];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var R=l[_];if(!(R in p))break e;p=p[R]}l=l[l.length-1],_=p[l],h=h(_),h!=_&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var p=0,_=!1,R={next:function(){if(!_&&p<l.length){var O=p++;return{value:h(O,l[O]),done:!1}}return _=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}i("Array.prototype.values",function(l){return l||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,_),l.apply(h,R)}}return function(){return l.apply(h,arguments)}}function w(l,h,p){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,w.apply(null,arguments)}function E(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function S(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(_,R,O){for(var Q=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)Q[Ye-2]=arguments[Ye];return h.prototype[R].apply(_,Q)}}function x(l){let h=l.length;if(0<h){let p=Array(h);for(let _=0;_<h;_++)p[_]=l[_];return p}return[]}function N(l,h){for(let p=1;p<arguments.length;p++){let _=arguments[p];if(c(_)){let R=l.length||0,O=_.length||0;l.length=R+O;for(let Q=0;Q<O;Q++)l[R+Q]=_[Q]}else l.push(_)}}class k{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function X(l){return/^[\s\xa0]*$/.test(l)}function K(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function re(l){return re[" "](l),l}re[" "]=function(){};var Fe=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function Z(l,h,p){for(let _ in l)h.call(p,l[_],_,l)}function D(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function b(l){let h={};for(let p in l)h[p]=l[p];return h}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,h){let p,_;for(let R=1;R<arguments.length;R++){_=arguments[R];for(p in _)l[p]=_[p];for(let O=0;O<C.length;O++)p=C[O],Object.prototype.hasOwnProperty.call(_,p)&&(l[p]=_[p])}}function M(l){var h=1;l=l.split(":");let p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function P(l){a.setTimeout(()=>{throw l},0)}function T(){var l=Me;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class zn{constructor(){this.h=this.g=null}add(h,p){let _=Bi.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var Bi=new k(()=>new ee,l=>l.reset());class ee{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,se=!1,Me=new zn,wt=()=>{let l=a.Promise.resolve(void 0);ie=()=>{l.then(Hn)}};var Hn=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(p){P(p)}var h=Bi;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}se=!1};function pt(){this.s=this.s,this.C=this.C}pt.prototype.s=!1,pt.prototype.ma=function(){this.s||(this.s=!0,this.N())},pt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function nt(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}nt.prototype.h=function(){this.defaultPrevented=!0};var rt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function $i(l,h){if(nt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(Fe){e:{try{re(h.nodeName);var R=!0;break e}catch{}R=!1}R||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:xm[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&$i.aa.h.call(this)}}S($i,nt);var xm={2:"touch",3:"pen",4:"mouse"};$i.prototype.h=function(){$i.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var mt="closure_listenable_"+(1e6*Math.random()|0),ni=0;function bn(l,h,p,_,R){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=R,this.key=++ni,this.da=this.fa=!1}function ri(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function qi(l){this.src=l,this.g={},this.h=0}qi.prototype.add=function(l,h,p,_,R){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var Q=Rm(l,h,_,R);return-1<Q?(h=l[Q],p||(h.fa=!1)):(h=new bn(h,this.src,O,!!_,R),h.fa=p,l.push(h)),h};function Mm(l,h){var p=h.type;if(p in l.g){var _=l.g[p],R=Array.prototype.indexOf.call(_,h,void 0),O;(O=0<=R)&&Array.prototype.splice.call(_,R,1),O&&(ri(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Rm(l,h,p,_){for(var R=0;R<l.length;++R){var O=l[R];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==_)return R}return-1}var Pm="closure_lm_"+(1e6*Math.random()|0),Nm={};function sb(l,h,p,_,R){if(_&&_.once)return cb(l,h,p,_,R);if(Array.isArray(h)){for(var O=0;O<h.length;O++)sb(l,h[O],p,_,R);return null}return p=Lm(p),l&&l[mt]?l.K(h,p,u(_)?!!_.capture:!!_,R):ab(l,h,p,!1,_,R)}function ab(l,h,p,_,R,O){if(!h)throw Error("Invalid event type");var Q=u(R)?!!R.capture:!!R,Ye=km(l);if(Ye||(l[Pm]=Ye=new qi(l)),p=Ye.add(h,p,_,Q,O),p.proxy)return p;if(_=NN(),p.proxy=_,_.src=l,_.listener=p,l.addEventListener)rt||(R=Q),R===void 0&&(R=!1),l.addEventListener(h.toString(),_,R);else if(l.attachEvent)l.attachEvent(ub(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function NN(){function l(p){return h.call(l.src,l.listener,p)}let h=ON;return l}function cb(l,h,p,_,R){if(Array.isArray(h)){for(var O=0;O<h.length;O++)cb(l,h[O],p,_,R);return null}return p=Lm(p),l&&l[mt]?l.L(h,p,u(_)?!!_.capture:!!_,R):ab(l,h,p,!0,_,R)}function lb(l,h,p,_,R){if(Array.isArray(h))for(var O=0;O<h.length;O++)lb(l,h[O],p,_,R);else _=u(_)?!!_.capture:!!_,p=Lm(p),l&&l[mt]?(l=l.i,h=String(h).toString(),h in l.g&&(O=l.g[h],p=Rm(O,p,_,R),-1<p&&(ri(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete l.g[h],l.h--)))):l&&(l=km(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Rm(h,p,_,R)),(p=-1<l?h[l]:null)&&Om(p))}function Om(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[mt])Mm(h.i,l);else{var p=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(p,_,l.capture):h.detachEvent?h.detachEvent(ub(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=km(h))?(Mm(p,l),p.h==0&&(p.src=null,h[Pm]=null)):ri(l)}}}function ub(l){return l in Nm?Nm[l]:Nm[l]="on"+l}function ON(l,h){if(l.da)l=!0;else{h=new $i(h,this);var p=l.listener,_=l.ha||l.src;l.fa&&Om(l),l=p.call(_,h)}return l}function km(l){return l=l[Pm],l instanceof qi?l:null}var Fm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lm(l){return typeof l=="function"?l:(l[Fm]||(l[Fm]=function(h){return l.handleEvent(h)}),l[Fm])}function Zt(){pt.call(this),this.i=new qi(this),this.M=this,this.F=null}S(Zt,pt),Zt.prototype[mt]=!0,Zt.prototype.removeEventListener=function(l,h,p,_){lb(this,l,h,p,_)};function fn(l,h){var p,_=l.F;if(_)for(p=[];_;_=_.F)p.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new nt(h,l);else if(h instanceof nt)h.target=h.target||l;else{var R=h;h=new nt(_,l),A(h,R)}if(R=!0,p)for(var O=p.length-1;0<=O;O--){var Q=h.g=p[O];R=Vu(Q,_,!0,h)&&R}if(Q=h.g=l,R=Vu(Q,_,!0,h)&&R,R=Vu(Q,_,!1,h)&&R,p)for(O=0;O<p.length;O++)Q=h.g=p[O],R=Vu(Q,_,!1,h)&&R}Zt.prototype.N=function(){if(Zt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],_=0;_<p.length;_++)ri(p[_]);delete l.g[h],l.h--}}this.F=null},Zt.prototype.K=function(l,h,p,_){return this.i.add(String(l),h,!1,p,_)},Zt.prototype.L=function(l,h,p,_){return this.i.add(String(l),h,!0,p,_)};function Vu(l,h,p,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var R=!0,O=0;O<h.length;++O){var Q=h[O];if(Q&&!Q.da&&Q.capture==p){var Ye=Q.listener,Gt=Q.ha||Q.src;Q.fa&&Mm(l.i,Q),R=Ye.call(Gt,_)!==!1&&R}}return R&&!_.defaultPrevented}function db(l,h,p){if(typeof l=="function")p&&(l=w(l,p));else if(l&&typeof l.handleEvent=="function")l=w(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function hb(l){l.g=db(()=>{l.g=null,l.i&&(l.i=!1,hb(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class kN extends pt{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:hb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xc(l){pt.call(this),this.h=l,this.g={}}S(xc,pt);var fb=[];function pb(l){Z(l.g,function(h,p){this.g.hasOwnProperty(p)&&Om(h)},l),l.g={}}xc.prototype.N=function(){xc.aa.N.call(this),pb(this)},xc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vm=a.JSON.stringify,FN=a.JSON.parse,LN=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Um(){}Um.prototype.h=null;function mb(l){return l.h||(l.h=l.i())}function gb(){}var Mc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jm(){nt.call(this,"d")}S(jm,nt);function Bm(){nt.call(this,"c")}S(Bm,nt);var Bo={},yb=null;function Uu(){return yb=yb||new Zt}Bo.La="serverreachability";function vb(l){nt.call(this,Bo.La,l)}S(vb,nt);function Rc(l){let h=Uu();fn(h,new vb(h))}Bo.STAT_EVENT="statevent";function _b(l,h){nt.call(this,Bo.STAT_EVENT,l),this.stat=h}S(_b,nt);function pn(l){let h=Uu();fn(h,new _b(h,l))}Bo.Ma="timingevent";function wb(l,h){nt.call(this,Bo.Ma,l),this.size=h}S(wb,nt);function Pc(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Nc(){this.g=!0}Nc.prototype.xa=function(){this.g=!1};function VN(l,h,p,_,R,O){l.info(function(){if(l.g)if(O)for(var Q="",Ye=O.split("&"),Gt=0;Gt<Ye.length;Gt++){var $e=Ye[Gt].split("=");if(1<$e.length){var en=$e[0];$e=$e[1];var tn=en.split("_");Q=2<=tn.length&&tn[1]=="type"?Q+(en+"="+$e+"&"):Q+(en+"=redacted&")}}else Q=null;else Q=O;return"XMLHTTP REQ ("+_+") [attempt "+R+"]: "+h+`
`+p+`
`+Q})}function UN(l,h,p,_,R,O,Q){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+R+"]: "+h+`
`+p+`
`+O+" "+Q})}function qs(l,h,p,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+BN(l,p)+(_?" "+_:"")})}function jN(l,h){l.info(function(){return"TIMEOUT: "+h})}Nc.prototype.info=function(){};function BN(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var _=p[l];if(!(2>_.length)){var R=_[1];if(Array.isArray(R)&&!(1>R.length)){var O=R[0];if(O!="noop"&&O!="stop"&&O!="close")for(var Q=1;Q<R.length;Q++)R[Q]=""}}}}return Vm(p)}catch{return h}}var ju={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Eb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$m;function Bu(){}S(Bu,Um),Bu.prototype.g=function(){return new XMLHttpRequest},Bu.prototype.i=function(){return{}},$m=new Bu;function zi(l,h,p,_){this.j=l,this.i=h,this.l=p,this.R=_||1,this.U=new xc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ib}function Ib(){this.i=null,this.g="",this.h=!1}var bb={},qm={};function zm(l,h,p){l.L=1,l.v=Hu(ii(h)),l.m=p,l.P=!0,Cb(l,null)}function Cb(l,h){l.F=Date.now(),$u(l),l.A=ii(l.v);var p=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),Vb(p.i,"t",_),l.C=0,p=l.j.J,l.h=new Ib,l.g=nC(l.j,p?h:null,!l.m),0<l.O&&(l.M=new kN(w(l.Y,l,l.g),l.O)),h=l.U,p=l.g,_=l.ca;var R="readystatechange";Array.isArray(R)||(R&&(fb[0]=R.toString()),R=fb);for(var O=0;O<R.length;O++){var Q=sb(p,R[O],_||h.handleEvent,!1,h.h||h);if(!Q)break;h.g[Q.key]=Q}h=l.H?b(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Rc(),VN(l.i,l.u,l.A,l.l,l.R,l.m)}zi.prototype.ca=function(l){l=l.target;let h=this.M;h&&oi(l)==3?h.j():this.Y(l)},zi.prototype.Y=function(l){try{if(l==this.g)e:{let tn=oi(this.g);var h=this.g.Ba();let Gs=this.g.Z();if(!(3>tn)&&(tn!=3||this.g&&(this.h.h||this.g.oa()||Hb(this.g)))){this.J||tn!=4||h==7||(h==8||0>=Gs?Rc(3):Rc(2)),Hm(this);var p=this.g.Z();this.X=p;t:if(Sb(this)){var _=Hb(this.g);l="";var R=_.length,O=oi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$o(this),Oc(this);var Q="";break t}this.h.i=new a.TextDecoder}for(h=0;h<R;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(O&&h==R-1)});_.length=0,this.h.g+=l,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=p==200,UN(this.i,this.u,this.A,this.l,this.R,tn,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ye,Gt=this.g;if((Ye=Gt.g?Gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Ye)){var $e=Ye;break t}}$e=null}if(p=$e)qs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gm(this,p);else{this.o=!1,this.s=3,pn(12),$o(this),Oc(this);break e}}if(this.P){p=!0;let sr;for(;!this.J&&this.C<Q.length;)if(sr=$N(this,Q),sr==qm){tn==4&&(this.s=4,pn(14),p=!1),qs(this.i,this.l,null,"[Incomplete Response]");break}else if(sr==bb){this.s=4,pn(15),qs(this.i,this.l,Q,"[Invalid Chunk]"),p=!1;break}else qs(this.i,this.l,sr,null),Gm(this,sr);if(Sb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tn!=4||Q.length!=0||this.h.h||(this.s=1,pn(16),p=!1),this.o=this.o&&p,!p)qs(this.i,this.l,Q,"[Invalid Chunked Response]"),$o(this),Oc(this);else if(0<Q.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),Xm(en),en.M=!0,pn(11))}}else qs(this.i,this.l,Q,null),Gm(this,Q);tn==4&&$o(this),this.o&&!this.J&&(tn==4?Xb(this.j,this):(this.o=!1,$u(this)))}else oO(this.g),p==400&&0<Q.indexOf("Unknown SID")?(this.s=3,pn(12)):(this.s=0,pn(13)),$o(this),Oc(this)}}}catch{}finally{}};function Sb(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function $N(l,h){var p=l.C,_=h.indexOf(`
`,p);return _==-1?qm:(p=Number(h.substring(p,_)),isNaN(p)?bb:(_+=1,_+p>h.length?qm:(h=h.slice(_,_+p),l.C=_+p,h)))}zi.prototype.cancel=function(){this.J=!0,$o(this)};function $u(l){l.S=Date.now()+l.I,Tb(l,l.I)}function Tb(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Pc(w(l.ba,l),h)}function Hm(l){l.B&&(a.clearTimeout(l.B),l.B=null)}zi.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(jN(this.i,this.A),this.L!=2&&(Rc(),pn(17)),$o(this),this.s=2,Oc(this)):Tb(this,this.S-l)};function Oc(l){l.j.G==0||l.J||Xb(l.j,l)}function $o(l){Hm(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,pb(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Gm(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Wm(p.h,l))){if(!l.K&&Wm(p.h,l)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var R=_;if(R[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Yu(p),Ku(p);else break e;Jm(p),pn(18)}}else p.za=R[1],0<p.za-p.T&&37500>R[2]&&p.F&&p.v==0&&!p.C&&(p.C=Pc(w(p.Za,p),6e3));if(1>=xb(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else zo(p,11)}else if((l.K||p.g==l)&&Yu(p),!X(h))for(R=p.Da.g.parse(h),h=0;h<R.length;h++){let $e=R[h];if(p.T=$e[0],$e=$e[1],p.G==2)if($e[0]=="c"){p.K=$e[1],p.ia=$e[2];let en=$e[3];en!=null&&(p.la=en,p.j.info("VER="+p.la));let tn=$e[4];tn!=null&&(p.Aa=tn,p.j.info("SVER="+p.Aa));let Gs=$e[5];Gs!=null&&typeof Gs=="number"&&0<Gs&&(_=1.5*Gs,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;let sr=l.g;if(sr){let Xu=sr.g?sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xu){var O=_.h;O.g||Xu.indexOf("spdy")==-1&&Xu.indexOf("quic")==-1&&Xu.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Km(O,O.h),O.h=null))}if(_.D){let Zm=sr.g?sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Zm&&(_.ya=Zm,it(_.I,_.D,Zm))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var Q=l;if(_.qa=tC(_,_.J?_.ia:null,_.W),Q.K){Mb(_.h,Q);var Ye=Q,Gt=_.L;Gt&&(Ye.I=Gt),Ye.B&&(Hm(Ye),$u(Ye)),_.g=Q}else Yb(_);0<p.i.length&&Qu(p)}else $e[0]!="stop"&&$e[0]!="close"||zo(p,7);else p.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?zo(p,7):Ym(p):$e[0]!="noop"&&p.l&&p.l.ta($e),p.v=0)}}Rc(4)}catch{}}var qN=class{constructor(l,h){this.g=l,this.map=h}};function Db(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ab(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function xb(l){return l.h?1:l.g?l.g.size:0}function Wm(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Km(l,h){l.g?l.g.add(h):l.h=h}function Mb(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Db.prototype.cancel=function(){if(this.i=Rb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Rb(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.D);return h}return x(l.i)}function zN(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,_=0;_<p;_++)h.push(l[_]);return h}h=[],p=0;for(_ in l)h[p++]=l[_];return h}function HN(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(let _ in l)h[p++]=_;return h}}}function Pb(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=HN(l),_=zN(l),R=_.length,O=0;O<R;O++)h.call(void 0,_[O],p&&p[O],l)}var Nb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GN(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var _=l[p].indexOf("="),R=null;if(0<=_){var O=l[p].substring(0,_);R=l[p].substring(_+1)}else O=l[p];h(O,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function qo(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof qo){this.h=l.h,qu(this,l.j),this.o=l.o,this.g=l.g,zu(this,l.s),this.l=l.l;var h=l.i,p=new Lc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Ob(this,p),this.m=l.m}else l&&(h=String(l).match(Nb))?(this.h=!1,qu(this,h[1]||"",!0),this.o=kc(h[2]||""),this.g=kc(h[3]||"",!0),zu(this,h[4]),this.l=kc(h[5]||"",!0),Ob(this,h[6]||"",!0),this.m=kc(h[7]||"")):(this.h=!1,this.i=new Lc(null,this.h))}qo.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Fc(h,kb,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Fc(h,kb,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Fc(p,p.charAt(0)=="/"?QN:KN,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Fc(p,JN)),l.join("")};function ii(l){return new qo(l)}function qu(l,h,p){l.j=p?kc(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function zu(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Ob(l,h,p){h instanceof Lc?(l.i=h,XN(l.i,l.h)):(p||(h=Fc(h,YN)),l.i=new Lc(h,l.h))}function it(l,h,p){l.i.set(h,p)}function Hu(l){return it(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function kc(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Fc(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,WN),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function WN(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var kb=/[#\/\?@]/g,KN=/[#\?:]/g,QN=/[#\?]/g,YN=/[#\?@]/g,JN=/#/g;function Lc(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Hi(l){l.g||(l.g=new Map,l.h=0,l.i&&GN(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Lc.prototype,n.add=function(l,h){Hi(this),this.i=null,l=zs(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Fb(l,h){Hi(l),h=zs(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Lb(l,h){return Hi(l),h=zs(l,h),l.g.has(h)}n.forEach=function(l,h){Hi(this),this.g.forEach(function(p,_){p.forEach(function(R){l.call(h,R,_,this)},this)},this)},n.na=function(){Hi(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){let R=l[_];for(let O=0;O<R.length;O++)p.push(h[_])}return p},n.V=function(l){Hi(this);let h=[];if(typeof l=="string")Lb(this,l)&&(h=h.concat(this.g.get(zs(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},n.set=function(l,h){return Hi(this),this.i=null,l=zs(this,l),Lb(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Vb(l,h,p){Fb(l,h),0<p.length&&(l.i=null,l.g.set(zs(l,h),x(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];let O=encodeURIComponent(String(_)),Q=this.V(_);for(_=0;_<Q.length;_++){var R=O;Q[_]!==""&&(R+="="+encodeURIComponent(String(Q[_]))),l.push(R)}}return this.i=l.join("&")};function zs(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function XN(l,h){h&&!l.j&&(Hi(l),l.i=null,l.g.forEach(function(p,_){var R=_.toLowerCase();_!=R&&(Fb(this,_),Vb(this,R,p))},l)),l.j=h}function ZN(l,h){let p=new Nc;if(a.Image){let _=new Image;_.onload=E(Gi,p,"TestLoadImage: loaded",!0,h,_),_.onerror=E(Gi,p,"TestLoadImage: error",!1,h,_),_.onabort=E(Gi,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=E(Gi,p,"TestLoadImage: timeout",!1,h,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function eO(l,h){let p=new Nc,_=new AbortController,R=setTimeout(()=>{_.abort(),Gi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(O=>{clearTimeout(R),O.ok?Gi(p,"TestPingServer: ok",!0,h):Gi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(R),Gi(p,"TestPingServer: error",!1,h)})}function Gi(l,h,p,_,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),_(p)}catch{}}function tO(){this.g=new LN}function nO(l,h,p){let _=p||"";try{Pb(l,function(R,O){let Q=R;u(R)&&(Q=Vm(R)),h.push(_+O+"="+encodeURIComponent(Q))})}catch(R){throw h.push(_+"type="+encodeURIComponent("_badmap")),R}}function Vc(l){this.l=l.Ub||null,this.j=l.eb||!1}S(Vc,Um),Vc.prototype.g=function(){return new Gu(this.l,this.j)},Vc.prototype.i=function(l){return function(){return l}}({});function Gu(l,h){Zt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Gu,Zt),n=Gu.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,jc(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uc(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,jc(this)),this.g&&(this.readyState=3,jc(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ub(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ub(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Uc(this):jc(this),this.readyState==3&&Ub(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Uc(this))},n.Qa=function(l){this.g&&(this.response=l,Uc(this))},n.ga=function(){this.g&&Uc(this)};function Uc(l){l.readyState=4,l.l=null,l.j=null,l.v=null,jc(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function jc(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Gu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function jb(l){let h="";return Z(l,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function Qm(l,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=jb(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):it(l,h,p))}function gt(l){Zt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(gt,Zt);var rO=/^https?$/i,iO=["POST","PUT"];n=gt.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$m.g(),this.v=this.o?mb(this.o):mb($m),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){Bb(this,O);return}if(l=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var R in _)p.set(R,_[R]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let O of _.keys())p.set(O,_.get(O));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),R=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iO,h,void 0))||_||R||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,Q]of p)this.g.setRequestHeader(O,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zb(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){Bb(this,O)}};function Bb(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,$b(l),Wu(l)}function $b(l){l.A||(l.A=!0,fn(l,"complete"),fn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,fn(this,"complete"),fn(this,"abort"),Wu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wu(this,!0)),gt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?qb(this):this.bb())},n.bb=function(){qb(this)};function qb(l){if(l.h&&typeof s<"u"&&(!l.v[1]||oi(l)!=4||l.Z()!=2)){if(l.u&&oi(l)==4)db(l.Ea,0,l);else if(fn(l,"readystatechange"),oi(l)==4){l.h=!1;try{let Q=l.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=Q===0){var R=String(l.D).match(Nb)[1]||null;!R&&a.self&&a.self.location&&(R=a.self.location.protocol.slice(0,-1)),_=!rO.test(R?R.toLowerCase():"")}p=_}if(p)fn(l,"complete"),fn(l,"success");else{l.m=6;try{var O=2<oi(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",$b(l)}}finally{Wu(l)}}}}function Wu(l,h){if(l.g){zb(l);let p=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||fn(l,"ready");try{p.onreadystatechange=_}catch{}}}function zb(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function oi(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<oi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),FN(h)}};function Hb(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function oO(l){let h={};l=(l.g&&2<=oi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(X(l[_]))continue;var p=M(l[_]);let R=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let O=h[R]||[];h[R]=O,O.push(p)}D(h,function(_){return _.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bc(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Gb(l){this.Aa=0,this.i=[],this.j=new Nc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bc("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bc("baseRetryDelayMs",5e3,l),this.cb=Bc("retryDelaySeedMs",1e4,l),this.Wa=Bc("forwardChannelMaxRetries",2,l),this.wa=Bc("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Db(l&&l.concurrentRequestLimit),this.Da=new tO,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Gb.prototype,n.la=8,n.G=1,n.connect=function(l,h,p,_){pn(0),this.W=l,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=tC(this,null,this.W),Qu(this)};function Ym(l){if(Wb(l),l.G==3){var h=l.U++,p=ii(l.I);if(it(p,"SID",l.K),it(p,"RID",h),it(p,"TYPE","terminate"),$c(l,p),h=new zi(l,l.j,h),h.L=2,h.v=Hu(ii(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=nC(h.j,null),h.g.ea(h.v)),h.F=Date.now(),$u(h)}eC(l)}function Ku(l){l.g&&(Xm(l),l.g.cancel(),l.g=null)}function Wb(l){Ku(l),l.u&&(a.clearTimeout(l.u),l.u=null),Yu(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Qu(l){if(!Ab(l.h)&&!l.s){l.s=!0;var h=l.Ga;ie||wt(),se||(ie(),se=!0),Me.add(h,l),l.B=0}}function sO(l,h){return xb(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Pc(w(l.Ga,l,h),Zb(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let R=new zi(this,this.j,l),O=this.o;if(this.S&&(O?(O=b(O),A(O,this.S)):O=this.S),this.m!==null||this.O||(R.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Qb(this,R,h),p=ii(this.I),it(p,"RID",l),it(p,"CVER",22),this.D&&it(p,"X-HTTP-Session-Id",this.D),$c(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(jb(O)))+"&"+h:this.m&&Qm(p,this.m,O)),Km(this.h,R),this.Ua&&it(p,"TYPE","init"),this.P?(it(p,"$req",h),it(p,"SID","null"),R.T=!0,zm(R,p,null)):zm(R,p,h),this.G=2}}else this.G==3&&(l?Kb(this,l):this.i.length==0||Ab(this.h)||Kb(this))};function Kb(l,h){var p;h?p=h.l:p=l.U++;let _=ii(l.I);it(_,"SID",l.K),it(_,"RID",p),it(_,"AID",l.T),$c(l,_),l.m&&l.o&&Qm(_,l.m,l.o),p=new zi(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Qb(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Km(l.h,p),zm(p,_,h)}function $c(l,h){l.H&&Z(l.H,function(p,_){it(h,_,p)}),l.l&&Pb({},function(p,_){it(h,_,p)})}function Qb(l,h,p){p=Math.min(l.i.length,p);var _=l.l?w(l.l.Na,l.l,l):null;e:{var R=l.i;let O=-1;for(;;){let Q=["count="+p];O==-1?0<p?(O=R[0].g,Q.push("ofs="+O)):O=0:Q.push("ofs="+O);let Ye=!0;for(let Gt=0;Gt<p;Gt++){let $e=R[Gt].g,en=R[Gt].map;if($e-=O,0>$e)O=Math.max(0,R[Gt].g-100),Ye=!1;else try{nO(en,Q,"req"+$e+"_")}catch{_&&_(en)}}if(Ye){_=Q.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,_}function Yb(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ie||wt(),se||(ie(),se=!0),Me.add(h,l),l.v=0}}function Jm(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Pc(w(l.Fa,l),Zb(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Jb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Pc(w(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pn(10),Ku(this),Jb(this))};function Xm(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Jb(l){l.g=new zi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=ii(l.qa);it(h,"RID","rpc"),it(h,"SID",l.K),it(h,"AID",l.T),it(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&it(h,"TO",l.ja),it(h,"TYPE","xmlhttp"),$c(l,h),l.m&&l.o&&Qm(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Hu(ii(h)),p.m=null,p.P=!0,Cb(p,l)}n.Za=function(){this.C!=null&&(this.C=null,Ku(this),Jm(this),pn(19))};function Yu(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Xb(l,h){var p=null;if(l.g==h){Yu(l),Xm(l),l.g=null;var _=2}else if(Wm(l.h,h))p=h.D,Mb(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var R=l.B;_=Uu(),fn(_,new wb(_,p)),Qu(l)}else Yb(l);else if(R=h.s,R==3||R==0&&0<h.X||!(_==1&&sO(l,h)||_==2&&Jm(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),R){case 1:zo(l,5);break;case 4:zo(l,10);break;case 3:zo(l,6);break;default:zo(l,2)}}}function Zb(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function zo(l,h){if(l.j.info("Error code "+h),h==2){var p=w(l.fb,l),_=l.Xa;let R=!_;_=new qo(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||qu(_,"https"),Hu(_),R?ZN(_.toString(),p):eO(_.toString(),p)}else pn(2);l.G=0,l.l&&l.l.sa(h),eC(l),Wb(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),pn(2)):(this.j.info("Failed to ping google.com"),pn(1))};function eC(l){if(l.G=0,l.ka=[],l.l){let h=Rb(l.h);(h.length!=0||l.i.length!=0)&&(N(l.ka,h),N(l.ka,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.ra()}}function tC(l,h,p){var _=p instanceof qo?ii(p):new qo(p);if(_.g!="")h&&(_.g=h+"."+_.g),zu(_,_.s);else{var R=a.location;_=R.protocol,h=h?h+"."+R.hostname:R.hostname,R=+R.port;var O=new qo(null);_&&qu(O,_),h&&(O.g=h),R&&zu(O,R),p&&(O.l=p),_=O}return p=l.D,h=l.ya,p&&h&&it(_,p,h),it(_,"VER",l.la),$c(l,_),_}function nC(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new gt(new Vc({eb:p})):new gt(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function rC(){}n=rC.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ju(){}Ju.prototype.g=function(l,h){return new Rn(l,h)};function Rn(l,h){Zt.call(this),this.g=new Gb(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!X(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!X(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Hs(this)}S(Rn,Zt),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){Ym(this.g)},Rn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Vm(l),l=p);h.i.push(new qN(h.Ya++,l)),h.G==3&&Qu(h)},Rn.prototype.N=function(){this.g.l=null,delete this.j,Ym(this.g),delete this.g,Rn.aa.N.call(this)};function iC(l){jm.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}S(iC,jm);function oC(){Bm.call(this),this.status=1}S(oC,Bm);function Hs(l){this.g=l}S(Hs,rC),Hs.prototype.ua=function(){fn(this.g,"a")},Hs.prototype.ta=function(l){fn(this.g,new iC(l))},Hs.prototype.sa=function(l){fn(this.g,new oC)},Hs.prototype.ra=function(){fn(this.g,"b")},Ju.prototype.createWebChannel=Ju.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,Z_=Ni.createWebChannelTransport=function(){return new Ju},X_=Ni.getStatEventTarget=function(){return Uu()},J_=Ni.Event=Bo,Yf=Ni.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ju.NO_ERROR=0,ju.TIMEOUT=8,ju.HTTP_ERROR=6,Jl=Ni.ErrorCode=ju,Eb.COMPLETE="complete",Y_=Ni.EventType=Eb,gb.EventType=Mc,Mc.OPEN="a",Mc.CLOSE="b",Mc.ERROR="c",Mc.MESSAGE="d",Zt.prototype.listen=Zt.prototype.K,Ya=Ni.WebChannel=gb,E6=Ni.FetchXmlHttpFactory=Vc,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,Q_=Ni.XhrIo=gt}).apply(typeof Qf<"u"?Qf:typeof self<"u"?self:typeof window<"u"?window:{});var L1="@firebase/firestore";var zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");var mc="10.14.0";var Cs=new _o("@firebase/firestore");function Xl(){return Cs.logLevel}function ne(n,...e){if(Cs.logLevel<=Ne.DEBUG){let t=e.map(VE);Cs.debug(`Firestore (${mc}): ${n}`,...t)}}function Oi(n,...e){if(Cs.logLevel<=Ne.ERROR){let t=e.map(VE);Cs.error(`Firestore (${mc}): ${n}`,...t)}}function rc(n,...e){if(Cs.logLevel<=Ne.WARN){let t=e.map(VE);Cs.warn(`Firestore (${mc}): ${n}`,...t)}}function VE(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function he(n="Unexpected state"){let e=`FIRESTORE (${mc}) INTERNAL ASSERTION FAILED: `+n;throw Oi(e),new Error(e)}function Qe(n,e){n||he()}function ye(n,e){return n}var V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Y=class extends En{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Cr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var tp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},iw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zt.UNAUTHENTICATED))}shutdown(){}},ow=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},sw=class{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Cr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>v(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Cr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string"),new tp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string"),new zt(e)}},aw=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},cw=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new aw(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},lw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},uw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Qe(this.o===void 0);let r=o=>{o.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,ne("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Qe(typeof t.token=="string"),this.R=t.token,new lw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function I6(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var np=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=I6(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function qe(n,e){return n<e?-1:n>e?1:0}function ic(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Xt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Y(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Y(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Y(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Ie=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Xt(0,0))}static max(){return new n(new Xt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var rp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&he(),r===void 0?r=e.length-t:r>e.length-t&&he(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ft=class n extends rp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Y(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},b6=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bn=class n extends rp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return b6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new Y(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Y(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ue=class n{constructor(e){this.path=e}static fromPath(e){return new n(ft.fromString(e))}static fromName(e){return new n(ft.fromString(e).popFirst(5))}static empty(){return new n(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ft(e.slice()))}};var dw=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};dw.UNKNOWN_ID=-1;function C6(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ie.fromTimestamp(r===1e9?new Xt(t+1,0):new Xt(t,r));return new Ss(i,ue.empty(),e)}function S6(n){return new Ss(n.readTime,n.key,-1)}var Ss=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ie.min(),ue.empty(),-1)}static max(){return new n(Ie.max(),ue.empty(),-1)}};function T6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ue.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}var D6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function gu(n){return v(this,null,function*(){if(n.code!==V.FAILED_PRECONDITION||n.message!==D6)throw n;ne("LocalStore","Unexpectedly lost primary lease")})}var z=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function A6(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function yu(n){return n.name==="IndexedDbTransactionError"}var yM=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Fp(n){return n==null}function iu(n){return n===0&&1/n==-1/0}function x6(n){return typeof n=="number"&&Number.isInteger(n)&&!iu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var M6=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cne=[...M6,"documentOverlays"],R6=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],P6=R6,N6=[...P6,"indexConfiguration","indexState","indexEntries"];var lne=[...N6,"globals"];function V1(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ns(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var vt=class n{constructor(e,t){this.comparator=e,this.root=t||Wr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ec(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ec(this.root,e,this.comparator,!1)}getReverseIterator(){return new ec(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ec(this.root,e,this.comparator,!0)}},ec=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Wr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw he();let e=this.left.check();if(e!==this.right.check())throw he();return e+(this.isRed()?0:1)}};Wr.EMPTY=null,Wr.RED=!0,Wr.BLACK=!1;Wr.EMPTY=new class{constructor(){this.size=0}get key(){throw he()}get value(){throw he()}get color(){throw he()}get left(){throw he()}get right(){throw he()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Wr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ln=class n{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ip(this.data.getIterator())}getIteratorFrom(e){return new ip(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},ip=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var nr=class n{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new n([])}unionWith(e){let t=new ln(Bn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ic(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var op=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var un=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new op("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};un.EMPTY_BYTE_STRING=new un("");var O6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ki(n){if(Qe(!!n),typeof n=="string"){let e=0,t=O6.exec(n);if(Qe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ht(n.seconds),nanos:ht(n.nanos)}}function ht(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xo(n){return typeof n=="string"?un.fromBase64String(n):un.fromUint8Array(n)}function UE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function jE(n){let e=n.mapValue.fields.__previous_value__;return UE(e)?jE(e):e}function ou(n){let e=ki(n.mapValue.fields.__local_write_time__.timestampValue);return new Xt(e.seconds,e.nanos)}var fw=class{constructor(e,t,r,i,o,s,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},sp=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Jf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ts(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?UE(n)?4:wM(n)?9007199254740991:_M(n)?10:11:he()}function Yr(n,e){if(n===e)return!0;let t=Ts(n);if(t!==Ts(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ou(n).isEqual(ou(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ki(i.timestampValue),a=ki(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return xo(i.bytesValue).isEqual(xo(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ht(i.geoPointValue.latitude)===ht(o.geoPointValue.latitude)&&ht(i.geoPointValue.longitude)===ht(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ht(i.integerValue)===ht(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ht(i.doubleValue),a=ht(o.doubleValue);return s===a?iu(s)===iu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ic(n.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(V1(s)!==V1(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Yr(s[c],a[c])))return!1;return!0}(n,e);default:return he()}}function su(n,e){return(n.values||[]).find(t=>Yr(t,e))!==void 0}function oc(n,e){if(n===e)return 0;let t=Ts(n),r=Ts(e);if(t!==r)return qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ht(o.integerValue||o.doubleValue),c=ht(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return U1(n.timestampValue,e.timestampValue);case 4:return U1(ou(n),ou(e));case 5:return qe(n.stringValue,e.stringValue);case 6:return function(o,s){let a=xo(o),c=xo(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=qe(a[u],c[u]);if(d!==0)return d}return qe(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=qe(ht(o.latitude),ht(s.latitude));return a!==0?a:qe(ht(o.longitude),ht(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return j1(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;let f=o.fields||{},w=s.fields||{},E=(a=f.value)===null||a===void 0?void 0:a.arrayValue,S=(c=w.value)===null||c===void 0?void 0:c.arrayValue,x=qe(((u=E?.values)===null||u===void 0?void 0:u.length)||0,((d=S?.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:j1(E,S)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Jf.mapValue&&s===Jf.mapValue)return 0;if(o===Jf.mapValue)return 1;if(s===Jf.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let w=qe(c[f],d[f]);if(w!==0)return w;let E=oc(a[c[f]],u[d[f]]);if(E!==0)return E}return qe(c.length,d.length)}(n.mapValue,e.mapValue);default:throw he()}}function U1(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);let t=ki(n),r=ki(e),i=qe(t.seconds,r.seconds);return i!==0?i:qe(t.nanos,r.nanos)}function j1(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=oc(t[i],r[i]);if(o)return o}return qe(t.length,r.length)}function sc(n){return pw(n)}function pw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ki(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return xo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ue.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=pw(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${pw(t.fields[s])}`;return i+"}"}(n.mapValue):he()}function B1(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mw(n){return!!n&&"integerValue"in n}function BE(n){return!!n&&"arrayValue"in n}function $1(n){return!!n&&"nullValue"in n}function q1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Zf(n){return!!n&&"mapValue"in n}function _M(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function eu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ns(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=eu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=eu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var jn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Zf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(t)}setAll(e){let t=Bn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=eu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Zf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Zf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ns(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(eu(this.value))}};function EM(n){let e=[];return Ns(n.fields,(t,r)=>{let i=new Bn([t]);if(Zf(r)){let o=EM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new nr(e)}var Sr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Ie.min(),Ie.min(),Ie.min(),jn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ie.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ie.min(),Ie.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ie.min(),Ie.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ac=class{constructor(e,t){this.position=e,this.inclusive=t}};function z1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ue.comparator(ue.fromName(s.referenceValue),t.key):r=oc(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function H1(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yr(n.position[t],e.position[t]))return!1;return!0}var Ds=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function k6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var ap=class{},Ot=class n extends ap{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new yw(e,t,r):t==="array-contains"?new ww(e,r):t==="in"?new Ew(e,r):t==="not-in"?new Iw(e,r):t==="array-contains-any"?new bw(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new vw(e,r):new _w(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(oc(t,this.value)):t!==null&&Ts(this.value)===Ts(t)&&this.matchesComparison(oc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Tr=class n extends ap{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return IM(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function IM(n){return n.op==="and"}function bM(n){return F6(n)&&IM(n)}function F6(n){for(let e of n.filters)if(e instanceof Tr)return!1;return!0}function gw(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+sc(n.value);if(bM(n))return n.filters.map(e=>gw(e)).join(",");{let e=n.filters.map(t=>gw(t)).join(",");return`${n.op}(${e})`}}function CM(n,e){return n instanceof Ot?function(r,i){return i instanceof Ot&&r.op===i.op&&r.field.isEqual(i.field)&&Yr(r.value,i.value)}(n,e):n instanceof Tr?function(r,i){return i instanceof Tr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&CM(s,i.filters[a]),!0):!1}(n,e):void he()}function SM(n){return n instanceof Ot?function(t){return`${t.field.canonicalString()} ${t.op} ${sc(t.value)}`}(n):n instanceof Tr?function(t){return t.op.toString()+" {"+t.getFilters().map(SM).join(" ,")+"}"}(n):"Filter"}var yw=class extends Ot{constructor(e,t,r){super(e,t,r),this.key=ue.fromName(r.referenceValue)}matches(e){let t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}},vw=class extends Ot{constructor(e,t){super(e,"in",t),this.keys=TM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},_w=class extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=TM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function TM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ue.fromName(r.referenceValue))}var ww=class extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return BE(t)&&su(t.arrayValue,this.value)}},Ew=class extends Ot{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&su(this.value.arrayValue,t)}},Iw=class extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!su(this.value.arrayValue,t)}},bw=class extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!BE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>su(this.value.arrayValue,r))}};var Cw=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function G1(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Cw(n,e,t,r,i,o,s)}function $E(n){let e=ye(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>gw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Fp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>sc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>sc(r)).join(",")),e.ue=t}return e.ue}function qE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!k6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!H1(n.startAt,e.startAt)&&H1(n.endAt,e.endAt)}function Sw(n){return ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Mo=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function L6(n,e,t,r,i,o,s,a){return new Mo(n,e,t,r,i,o,s,a)}function zE(n){return new Mo(n)}function W1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function DM(n){return n.collectionGroup!==null}function tu(n){let e=ye(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ln(Bn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ds(o,r))}),t.has(Bn.keyField().canonicalString())||e.ce.push(new Ds(Bn.keyField(),r))}return e.ce}function Kr(n){let e=ye(n);return e.le||(e.le=V6(e,tu(n))),e.le}function V6(n,e){if(n.limitType==="F")return G1(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ds(i.field,o)});let t=n.endAt?new ac(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ac(n.startAt.position,n.startAt.inclusive):null;return G1(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Tw(n,e){let t=n.filters.concat([e]);return new Mo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function cp(n,e,t){return new Mo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lp(n,e){return qE(Kr(n),Kr(e))&&n.limitType===e.limitType}function AM(n){return`${$E(Kr(n))}|lt:${n.limitType}`}function Ja(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>SM(i)).join(", ")}]`),Fp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>sc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>sc(i)).join(",")),`Target(${r})`}(Kr(n))}; limitType=${n.limitType})`}function Vp(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ue.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of tu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=z1(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,tu(r),i)||r.endAt&&!function(s,a,c){let u=z1(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,tu(r),i))}(n,e)}function U6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xM(n){return(e,t)=>{let r=!1;for(let i of tu(n)){let o=j6(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function j6(n,e,t){let r=n.field.isKeyField()?ue.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?oc(c,u):he()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return he()}}var Ro=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return vM(this.inner)}size(){return this.innerSize}};var B6=new vt(ue.comparator);function Fi(){return B6}var MM=new vt(ue.comparator);function Zl(...n){let e=MM;for(let t of n)e=e.insert(t.key,t);return e}function RM(n){let e=MM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Es(){return nu()}function PM(){return nu()}function nu(){return new Ro(n=>n.toString(),(n,e)=>n.isEqual(e))}var $6=new vt(ue.comparator),q6=new ln(ue.comparator);function Oe(...n){let e=q6;for(let t of n)e=e.add(t);return e}var z6=new ln(qe);function H6(){return z6}function HE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iu(e)?"-0":e}}function NM(n){return{integerValue:""+n}}function G6(n,e){return x6(e)?NM(e):HE(n,e)}var cc=class{constructor(){this._=void 0}};function W6(n,e,t){return n instanceof As?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&UE(o)&&(o=jE(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof xs?kM(n,e):n instanceof Ms?FM(n,e):function(i,o){let s=OM(i,o),a=K1(s)+K1(i.Pe);return mw(s)&&mw(i.Pe)?NM(a):HE(i.serializer,a)}(n,e)}function K6(n,e,t){return n instanceof xs?kM(n,e):n instanceof Ms?FM(n,e):t}function OM(n,e){return n instanceof lc?function(r){return mw(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var As=class extends cc{},xs=class extends cc{constructor(e){super(),this.elements=e}};function kM(n,e){let t=LM(e);for(let r of n.elements)t.some(i=>Yr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ms=class extends cc{constructor(e){super(),this.elements=e}};function FM(n,e){let t=LM(e);for(let r of n.elements)t=t.filter(i=>!Yr(i,r));return{arrayValue:{values:t}}}var lc=class extends cc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function K1(n){return ht(n.integerValue||n.doubleValue)}function LM(n){return BE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Dw=class{constructor(e,t){this.field=e,this.transform=t}};function Q6(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof xs&&i instanceof xs||r instanceof Ms&&i instanceof Ms?ic(r.elements,i.elements,Yr):r instanceof lc&&i instanceof lc?Yr(r.Pe,i.Pe):r instanceof As&&i instanceof As}(n.transform,e.transform)}var Aw=class{constructor(e,t){this.version=e,this.transformResults=t}},Do=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ep(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var uc=class{};function VM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new lp(n.key,Do.none()):new Rs(n.key,n.data,Do.none());{let t=n.data,r=jn.empty(),i=new ln(Bn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Jr(n.key,r,new nr(i.toArray()),Do.none())}}function Y6(n,e,t){n instanceof Rs?function(i,o,s){let a=i.value.clone(),c=Y1(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Jr?function(i,o,s){if(!ep(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Y1(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(UM(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ru(n,e,t,r){return n instanceof Rs?function(o,s,a,c){if(!ep(o.precondition,s))return a;let u=o.value.clone(),d=J1(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Jr?function(o,s,a,c){if(!ep(o.precondition,s))return a;let u=J1(o.fieldTransforms,c,s),d=s.data;return d.setAll(UM(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return ep(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function J6(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=OM(r.transform,i||null);o!=null&&(t===null&&(t=jn.empty()),t.set(r.field,o))}return t||null}function Q1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ic(r,i,(o,s)=>Q6(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Rs=class extends uc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Jr=class extends uc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function UM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Y1(n,e,t){let r=new Map;Qe(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,K6(s,a,t[i]))}return r}function J1(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,W6(o,s,e))}return r}var lp=class extends uc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},xw=class extends uc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Mw=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Y6(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ru(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ru(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=PM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=VM(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ie.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Oe())}isEqual(e){return this.batchId===e.batchId&&ic(this.mutations,e.mutations,(t,r)=>Q1(t,r))&&ic(this.baseMutations,e.baseMutations,(t,r)=>Q1(t,r))}},Rw=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Qe(e.mutations.length===r.length);let i=function(){return $6}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Pw=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Nw=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Pt,Ue;function X6(n){switch(n){default:return he();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function jM(n){if(n===void 0)return Oi("GRPC error has no .code"),V.UNKNOWN;switch(n){case Pt.OK:return V.OK;case Pt.CANCELLED:return V.CANCELLED;case Pt.UNKNOWN:return V.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return V.INTERNAL;case Pt.UNAVAILABLE:return V.UNAVAILABLE;case Pt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Pt.NOT_FOUND:return V.NOT_FOUND;case Pt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Pt.ABORTED:return V.ABORTED;case Pt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Pt.DATA_LOSS:return V.DATA_LOSS;default:return he()}}(Ue=Pt||(Pt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";var X1=null;function Z6(){return new TextEncoder}var eq=new To([4294967295,4294967295],0);function Z1(n){let e=Z6().encode(n),t=new K_;return t.update(e),new Uint8Array(t.digest())}function eM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new To([t,r],0),new To([i,o],0)]}var Ow=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Is(`Invalid padding: ${t}`);if(r<0)throw new Is(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Is(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Is(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=To.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(To.fromNumber(r)));return i.compare(eq)===1&&(i=new To([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Z1(e),[r,i]=eM(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=Z1(e),[r,i]=eM(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Is=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var up=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,au.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ie.min(),i,new vt(qe),Fi(),Oe())}},au=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Oe(),Oe(),Oe())}};var tc=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},dp=class{constructor(e,t){this.targetId=e,this.me=t}},hp=class{constructor(e,t,r=un.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},fp=class{constructor(){this.fe=0,this.ge=nM(),this.pe=un.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Oe(),t=Oe(),r=Oe();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:he()}}),new au(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=nM()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},kw=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fi(),this.qe=tM(),this.Qe=new vt(qe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:he()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Sw(o))if(r===0){let s=new ue(o.path);this.Ue(t,s,Sr.newNoDocument(s,Ie.min()))}else Qe(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}X1?.et(function(d,f,w,E,S){var x,N,k,X,K,re;let Fe={localCacheCount:d,existenceFilterCount:f.count,databaseId:w.database,projectId:w.projectId},Z=f.unchangedNames;return Z&&(Fe.bloomFilter={applied:S===0,hashCount:(x=Z?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(X=(k=(N=Z?.bits)===null||N===void 0?void 0:N.bitmap)===null||k===void 0?void 0:k.length)!==null&&X!==void 0?X:0,padding:(re=(K=Z?.bits)===null||K===void 0?void 0:K.padding)!==null&&re!==void 0?re:0,mightContain:D=>{var b;return(b=E?.mightContain(D))!==null&&b!==void 0&&b}}),Fe}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=xo(r).toUint8Array()}catch(c){if(c instanceof op)return rc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Ow(s,i,o)}catch(c){return rc(c instanceof Is?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Sw(a.target)){let c=new ue(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Sr.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=Oe();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new up(e,t,this.Qe,this.ke,r);return this.ke=Fi(),this.qe=tM(),this.Qe=new vt(qe),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new fp,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ln(qe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new fp),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function tM(){return new vt(ue.comparator)}function nM(){return new vt(ue.comparator)}var tq={asc:"ASCENDING",desc:"DESCENDING"},nq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rq={and:"AND",or:"OR"},Fw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Lw(n,e){return n.useProto3Json||Fp(e)?e:{value:e}}function pp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function iq(n,e){return pp(n,e.toTimestamp())}function Qr(n){return Qe(!!n),Ie.fromTimestamp(function(t){let r=ki(t);return new Xt(r.seconds,r.nanos)}(n))}function GE(n,e){return Vw(n,e).canonicalString()}function Vw(n,e){let t=function(i){return new ft(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function $M(n){let e=ft.fromString(n);return Qe(WM(e)),e}function Uw(n,e){return GE(n.databaseId,e.path)}function ew(n,e){let t=$M(e);if(t.get(1)!==n.databaseId.projectId)throw new Y(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Y(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ue(zM(t))}function qM(n,e){return GE(n.databaseId,e)}function oq(n){let e=$M(n);return e.length===4?ft.emptyPath():zM(e)}function jw(n){return new ft(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zM(n){return Qe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function rM(n,e,t){return{name:Uw(n,e),fields:t.value.mapValue.fields}}function sq(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:he()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(Qe(d===void 0||typeof d=="string"),un.fromBase64String(d||"")):(Qe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),un.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let d=u.code===void 0?V.UNKNOWN:jM(u.code);return new Y(d,u.message||"")}(s);t=new hp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ew(n,r.document.name),o=Qr(r.document.updateTime),s=r.document.createTime?Qr(r.document.createTime):Ie.min(),a=new jn({mapValue:{fields:r.document.fields}}),c=Sr.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new tc(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ew(n,r.document),o=r.readTime?Qr(r.readTime):Ie.min(),s=Sr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new tc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ew(n,r.document),o=r.removedTargetIds||[];t=new tc([],o,i,null)}else{if(!("filter"in e))return he();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Nw(i,o),a=r.targetId;t=new dp(a,s)}}return t}function aq(n,e){let t;if(e instanceof Rs)t={update:rM(n,e.key,e.value)};else if(e instanceof lp)t={delete:Uw(n,e.key)};else if(e instanceof Jr)t={update:rM(n,e.key,e.data),updateMask:gq(e.fieldMask)};else{if(!(e instanceof xw))return he();t={verify:Uw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof As)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ms)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof lc)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw he()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:iq(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:he()}(n,e.precondition)),t}function cq(n,e){return n&&n.length>0?(Qe(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Qr(i.updateTime):Qr(o);return s.isEqual(Ie.min())&&(s=Qr(o)),new Aw(s,i.transformResults||[])}(t,e))):[]}function lq(n,e){return{documents:[qM(n,e.path)]}}function uq(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=qM(n,i);let o=function(u){if(u.length!==0)return GM(Tr.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(w){return{field:Xa(w.field),direction:fq(w.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Lw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function dq(n){let e=oq(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Qe(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let w=HM(f);return w instanceof Tr&&bM(w)?w.getFilters():[w]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(w=>function(S){return new Ds(Za(S.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(w))}(t.orderBy));let a=null;t.limit&&(a=function(f){let w;return w=typeof f=="object"?f.value:f,Fp(w)?null:w}(t.limit));let c=null;t.startAt&&(c=function(f){let w=!!f.before,E=f.values||[];return new ac(E,w)}(t.startAt));let u=null;return t.endAt&&(u=function(f){let w=!f.before,E=f.values||[];return new ac(E,w)}(t.endAt)),L6(e,i,s,o,a,"F",c,u)}function hq(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Za(t.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Za(t.unaryFilter.field);return Ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Za(t.unaryFilter.field);return Ot.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Za(t.unaryFilter.field);return Ot.create(s,"!=",{nullValue:"NULL_VALUE"});default:return he()}}(n):n.fieldFilter!==void 0?function(t){return Ot.create(Za(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return he()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Tr.create(t.compositeFilter.filters.map(r=>HM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he()}}(t.compositeFilter.op))}(n):he()}function fq(n){return tq[n]}function pq(n){return nq[n]}function mq(n){return rq[n]}function Xa(n){return{fieldPath:n.canonicalString()}}function Za(n){return Bn.fromServerFormat(n.fieldPath)}function GM(n){return n instanceof Ot?function(t){if(t.op==="=="){if(q1(t.value))return{unaryFilter:{field:Xa(t.field),op:"IS_NAN"}};if($1(t.value))return{unaryFilter:{field:Xa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(q1(t.value))return{unaryFilter:{field:Xa(t.field),op:"IS_NOT_NAN"}};if($1(t.value))return{unaryFilter:{field:Xa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xa(t.field),op:pq(t.op),value:t.value}}}(n):n instanceof Tr?function(t){let r=t.getFilters().map(i=>GM(i));return r.length===1?r[0]:{compositeFilter:{op:mq(t.op),filters:r}}}(n):he()}function gq(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function WM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var cu=class n{constructor(e,t,r,i,o=Ie.min(),s=Ie.min(),a=un.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Bw=class{constructor(e){this.ct=e}};function yq(n){let e=dq({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cp(e,e.limit,"L"):e}var mp=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ht(e.integerValue));else if("doubleValue"in e){let r=ht(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),iu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ki(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(xo(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?wM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):_M(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):he()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ht(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ue.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};mp.vt=new mp;var $w=class{constructor(){this.un=new qw}addToCollectionParentIndex(e,t){return this.un.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(Ss.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}},qw=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ln(ft.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ln(ft.comparator)).toArray()}};var dne=new Uint8Array(0);var Gr=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Gr.DEFAULT_COLLECTION_PERCENTILE=10,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gr.DEFAULT=new Gr(41943040,Gr.DEFAULT_COLLECTION_PERCENTILE,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gr.DISABLED=new Gr(-1,0,0);var lu=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var zw=class{constructor(){this.changes=new Ro(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Hw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Gw=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ru(r.mutation,i,nr.empty(),Xt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Oe()){let i=Es();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Zl();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Es();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Oe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Fi(),s=nu(),a=function(){return nu()}();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Jr)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),ru(d.mutation,u,d.mutation.getFieldMask(),Xt.now())):s.set(u.key,nr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),t.forEach((u,d)=>{var f;return a.set(u,new Hw(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=nu(),i=new vt((s,a)=>s-a),o=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||nr.empty();d=a.applyToLocalView(u,d),r.set(c,d);let f=(i.get(a.batchId)||Oe()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=PM();d.forEach(w=>{if(!o.has(w)){let E=VM(t.get(w),r.get(w));E!==null&&f.set(w,E),o=o.add(w)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return z.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ue.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):DM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):z.resolve(Es()),a=-1,c=o;return s.next(u=>z.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?z.resolve():this.remoteDocumentCache.getEntry(e,d).next(w=>{c=c.insert(d,w)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Oe())).next(d=>({batchId:a,changes:RM(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next(r=>{let i=Zl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Zl();return this.indexManager.getCollectionParents(e,o).next(a=>z.forEach(a,c=>{let u=function(f,w){return new Mo(w,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,w)=>{s=s.insert(f,w)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,Sr.newInvalidDocument(d)))});let a=Zl();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&ru(d.mutation,u,nr.empty(),Xt.now()),Vp(t,u)&&(a=a.insert(c,u))}),a})}};var Ww=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return z.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Qr(i.createTime)}}(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:yq(i.bundledQuery),readTime:Qr(i.readTime)}}(t)),z.resolve()}};var Kw=class{constructor(){this.overlays=new vt(ue.comparator),this.Ir=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Es();return z.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),z.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){let i=Es(),o=t.length+1,s=new ue(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new vt((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=Es(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=Es(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return z.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Pw(t,r));let o=this.Ir.get(t);o===void 0&&(o=Oe(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Qw=class{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}};var uu=class{constructor(){this.Tr=new ln(Nt.Er),this.dr=new ln(Nt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Nt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Nt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new ue(new ft([])),r=new Nt(t,e),i=new Nt(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new ue(new ft([])),r=new Nt(t,e),i=new Nt(t,e+1),o=Oe();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Nt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Nt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ue.comparator(e.key,t.key)||qe(e.wr,t.wr)}static Ar(e,t){return qe(e.wr,t.wr)||ue.comparator(e.key,t.key)}};var Yw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ln(Nt.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Mw(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Nt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(s)}lookupMutationBatch(e,t){return z.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Nt(t,0),i=new Nt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(qe);return t.forEach(i=>{let o=new Nt(i,0),s=new Nt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ue.isDocumentKey(o)||(o=o.child(""));let s=new Nt(new ue(o),0),a=new ln(qe);return this.br.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.wr)),!0)},s),z.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Qe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(t.mutations,i=>{let o=new Nt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Nt(t,0),i=this.br.firstAfterOrEqual(r);return z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Jw=class{constructor(e){this.Mr=e,this.docs=function(){return new vt(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():Sr.newInvalidDocument(t))}getEntries(e,t){let r=Fi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Sr.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Fi(),s=t.path,a=new ue(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||T6(S6(d),r)<=0||(i.has(d.key)||Vp(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return z.resolve(o)}getAllFromCollectionGroup(e,t,r,i){he()}Or(e,t){return z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Xw(this)}getSize(e){return z.resolve(this.size)}},Xw=class extends zw{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),z.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Zw=class{constructor(e){this.persistence=e,this.Nr=new Ro(t=>$E(t),qE),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new uu,this.targetCount=0,this.kr=lu.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),z.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new lu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.Kn(t),z.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(o).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),z.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),z.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.Br.containsKey(t))}};var eE=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new yM(0),this.Kr=!1,this.Kr=!0,this.$r=new Qw,this.referenceDelegate=e(this),this.Ur=new Zw(this),this.indexManager=new $w,this.remoteDocumentCache=function(i){return new Jw(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Bw(t),this.Gr=new Ww(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Kw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Yw(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ne("MemoryPersistence","Starting transaction:",e);let i=new tE(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},tE=class extends hw{constructor(e){super(),this.currentSequenceNumber=e}},nE=class n{constructor(e){this.persistence=e,this.Jr=new uu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw he()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),z.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{let i=ue.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Ie.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return z.or([()=>z.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var rE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Oe(),i=Oe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var iE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var oE=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return px()?8:A6(qt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new iE;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Xl()<=Ne.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Ja(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Xl()<=Ne.DEBUG&&ne("QueryEngine","Query:",Ja(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Xl()<=Ne.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Ja(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(t))):z.resolve())}Yi(e,t){if(W1(t))return z.resolve(null);let r=Kr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=cp(t,null,"F"),r=Kr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Oe(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.ts(t,a);return this.ns(t,u,s,c.readTime)?this.Yi(e,cp(t,null,"F")):this.rs(e,u,t,c)}))})))}Zi(e,t,r,i){return W1(t)||i.isEqual(Ie.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?z.resolve(null):(Xl()<=Ne.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ja(t)),this.rs(e,s,t,C6(i,-1)).next(a=>a))})}ts(e,t){let r=new ln(xM(e));return t.forEach((i,o)=>{Vp(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Xl()<=Ne.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Ja(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ss.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var sE=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new vt(qe),this._s=new Ro(o=>$E(o),qE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gw(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function vq(n,e,t,r){return new sE(n,e,t,r)}function KM(n,e){return v(this,null,function*(){let t=ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Oe();for(let u of i){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function _q(n,e){let t=ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let f=u.batch,w=f.keys(),E=z.resolve();return w.forEach(S=>{E=E.next(()=>d.getEntry(c,S)).next(x=>{let N=u.docVersions.get(S);Qe(N!==null),x.version.compareTo(N)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Oe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function QM(n){let e=ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function wq(n,e){let t=ye(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let w=i.get(f);if(!w)return;a.push(t.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(o,d.addedDocuments,f)));let E=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?E=E.withResumeToken(un.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):d.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(d.resumeToken,r)),i=i.insert(f,E),function(x,N,k){return x.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(w,E,d)&&a.push(t.Ur.updateTargetData(o,E))});let c=Fi(),u=Oe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(Eq(o,s,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(Ie.min())){let d=t.Ur.getLastRemoteSnapshotVersion(o).next(f=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return z.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.os=i,o))}function Eq(n,e,t){let r=Oe(),i=Oe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Fi();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ie.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function Iq(n,e){let t=ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bq(n,e){let t=ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,z.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new cu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function aE(n,e,t){return v(this,null,function*(){let r=ye(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!yu(s))throw s;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function iM(n,e,t){let r=ye(n),i=Ie.min(),o=Oe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){let f=ye(c),w=f._s.get(d);return w!==void 0?z.resolve(f.os.get(w)):f.Ur.getTargetData(u,d)}(r,s,Kr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:Ie.min(),t?o:Oe())).next(a=>(Cq(r,U6(e),a),{documents:a,Ts:o})))}function Cq(n,e,t){let r=n.us.get(e)||Ie.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var gp=class{constructor(){this.activeTargetIds=H6()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var cE=class{constructor(){this.so=new gp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new gp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var lE=class{_o(e){}shutdown(){}};var yp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Xf=null;function tw(){return Xf===null?Xf=function(){return 268435456+Math.round(2147483648*Math.random())}():Xf++,"0x"+Xf.toString(16)}var Sq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var uE=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var cn="WebChannelConnection",dE=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=tw(),c=this.xo(t,r.toUriEncodedString());ne("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,s),this.No(t,c,u,i).then(d=>(ne("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw rc("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=Sq[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=tw();return new Promise((s,a)=>{let c=new Q_;c.setWithCredentials(!0),c.listenOnce(Y_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Jl.NO_ERROR:let d=c.getResponseJson();ne(cn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Jl.TIMEOUT:ne(cn,`RPC '${e}' ${o} timed out`),a(new Y(V.DEADLINE_EXCEEDED,"Request time out"));break;case Jl.HTTP_ERROR:let f=c.getStatus();if(ne(cn,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let w=c.getResponseJson();Array.isArray(w)&&(w=w[0]);let E=w?.error;if(E&&E.status&&E.message){let S=function(N){let k=N.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(k)>=0?k:V.UNKNOWN}(E.status);a(new Y(S,E.message))}else a(new Y(V.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Y(V.UNAVAILABLE,"Connection failed."));break;default:he()}}finally{ne(cn,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);ne(cn,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",u,r,15)})}Bo(e,t,r){let i=tw(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Z_(),a=X_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");ne(cn,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c),w=!1,E=!1,S=new uE({Io:N=>{E?ne(cn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(w||(ne(cn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),w=!0),ne(cn,`RPC '${e}' stream ${i} sending:`,N),f.send(N))},To:()=>f.close()}),x=(N,k,X)=>{N.listen(k,K=>{try{X(K)}catch(re){setTimeout(()=>{throw re},0)}})};return x(f,Ya.EventType.OPEN,()=>{E||(ne(cn,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),x(f,Ya.EventType.CLOSE,()=>{E||(E=!0,ne(cn,`RPC '${e}' stream ${i} transport closed`),S.So())}),x(f,Ya.EventType.ERROR,N=>{E||(E=!0,rc(cn,`RPC '${e}' stream ${i} transport errored:`,N),S.So(new Y(V.UNAVAILABLE,"The operation could not be completed")))}),x(f,Ya.EventType.MESSAGE,N=>{var k;if(!E){let X=N.data[0];Qe(!!X);let K=X,re=K.error||((k=K[0])===null||k===void 0?void 0:k.error);if(re){ne(cn,`RPC '${e}' stream ${i} received error:`,re);let Fe=re.status,Z=function(C){let A=Pt[C];if(A!==void 0)return jM(A)}(Fe),D=re.message;Z===void 0&&(Z=V.INTERNAL,D="Unknown error status: "+Fe+" with message "+re.message),E=!0,S.So(new Y(Z,D)),f.close()}else ne(cn,`RPC '${e}' stream ${i} received:`,X),S.bo(X)}}),x(a,J_.STAT_EVENT,N=>{N.stat===Yf.PROXY?ne(cn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Yf.NOPROXY&&ne(cn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function nw(){return typeof document<"u"?document:null}function Up(n){return new Fw(n,!0)}var vp=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var _p=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new vp(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return v(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return v(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return v(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===V.RESOURCE_EXHAUSTED?(Oi(t.toString()),Oi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new Y(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>v(this,null,function*(){this.state=0,this.start()}))}I_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},hE=class extends _p{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=sq(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Ie.min():s.readTime?Qr(s.readTime):Ie.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=jw(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=Sw(c)?{documents:lq(o,c)}:{query:uq(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=BM(o,s.resumeToken);let u=Lw(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(Ie.min())>0){a.readTime=pp(o,s.snapshotVersion.toTimestamp());let u=Lw(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=hq(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=jw(this.serializer),t.removeTarget=e,this.a_(t)}},fE=class extends _p{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=cq(e.writeResults,e.commitTime),r=Qr(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=jw(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>aq(this.serializer,r))};this.a_(t)}};var pE=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Y(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Vw(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(V.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Vw(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(V.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},mE=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Oi(t),this.D_=!1):ne("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var gE=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>v(this,null,function*(){Os(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),yield function(c){return v(this,null,function*(){let u=ye(c);u.L_.add(4),yield vu(u),u.q_.set("Unknown"),u.L_.delete(4),yield jp(u)})}(this))}))}),this.q_=new mE(r,i)}};function jp(n){return v(this,null,function*(){if(Os(n))for(let e of n.B_)yield e(!0)})}function vu(n){return v(this,null,function*(){for(let e of n.B_)yield e(!1)})}function YM(n,e){let t=ye(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),YE(t)?QE(t):gc(t).r_()&&KE(t,e))}function WE(n,e){let t=ye(n),r=gc(t);t.N_.delete(e),r.r_()&&JM(t,e),t.N_.size===0&&(r.r_()?r.o_():Os(t)&&t.q_.set("Unknown"))}function KE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gc(n).A_(e)}function JM(n,e){n.Q_.xe(e),gc(n).R_(e)}function QE(n){n.Q_=new kw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),gc(n).start(),n.q_.v_()}function YE(n){return Os(n)&&!gc(n).n_()&&n.N_.size>0}function Os(n){return ye(n).L_.size===0}function XM(n){n.Q_=void 0}function Tq(n){return v(this,null,function*(){n.q_.set("Online")})}function Dq(n){return v(this,null,function*(){n.N_.forEach((e,t)=>{KE(n,e)})})}function Aq(n,e){return v(this,null,function*(){XM(n),YE(n)?(n.q_.M_(e),QE(n)):n.q_.set("Unknown")})}function xq(n,e,t){return v(this,null,function*(){if(n.q_.set("Online"),e instanceof hp&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wp(n,r)}else if(e instanceof tc?n.Q_.Ke(e):e instanceof dp?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ie.min()))try{let r=yield QM(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.N_.get(u);d&&o.N_.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.N_.get(c);if(!d)return;o.N_.set(c,d.withResumeToken(un.EMPTY_BYTE_STRING,d.snapshotVersion)),JM(o,c);let f=new cu(d.target,c,u,d.sequenceNumber);KE(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),yield wp(n,r)}})}function wp(n,e,t){return v(this,null,function*(){if(!yu(e))throw e;n.L_.add(1),yield vu(n),n.q_.set("Offline"),t||(t=()=>QM(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){ne("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield jp(n)}))})}function ZM(n,e){return e().catch(t=>wp(n,t,e))}function Bp(n){return v(this,null,function*(){let e=ye(n),t=Po(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Mq(e);)try{let i=yield Iq(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,Rq(e,i)}catch(i){yield wp(e,i)}eR(e)&&tR(e)})}function Mq(n){return Os(n)&&n.O_.length<10}function Rq(n,e){n.O_.push(e);let t=Po(n);t.r_()&&t.V_&&t.m_(e.mutations)}function eR(n){return Os(n)&&!Po(n).n_()&&n.O_.length>0}function tR(n){Po(n).start()}function Pq(n){return v(this,null,function*(){Po(n).p_()})}function Nq(n){return v(this,null,function*(){let e=Po(n);for(let t of n.O_)e.m_(t.mutations)})}function Oq(n,e,t){return v(this,null,function*(){let r=n.O_.shift(),i=Rw.from(r,e,t);yield ZM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Bp(n)})}function kq(n,e){return v(this,null,function*(){e&&Po(n).V_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return X6(s)&&s!==V.ABORTED}(i.code)){let o=r.O_.shift();Po(r).s_(),yield ZM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Bp(r)}})}(n,e)),eR(n)&&tR(n)})}function oM(n,e){return v(this,null,function*(){let t=ye(n);t.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");let r=Os(t);t.L_.add(3),yield vu(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield jp(t)})}function Fq(n,e){return v(this,null,function*(){let t=ye(n);e?(t.L_.delete(2),yield jp(t)):e||(t.L_.add(2),yield vu(t),t.q_.set("Unknown"))})}function gc(n){return n.K_||(n.K_=function(t,r,i){let o=ye(t);return o.w_(),new hE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Tq.bind(null,n),Ro:Dq.bind(null,n),mo:Aq.bind(null,n),d_:xq.bind(null,n)}),n.B_.push(e=>v(this,null,function*(){e?(n.K_.s_(),YE(n)?QE(n):n.q_.set("Unknown")):(yield n.K_.stop(),XM(n))}))),n.K_}function Po(n){return n.U_||(n.U_=function(t,r,i){let o=ye(t);return o.w_(),new fE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Pq.bind(null,n),mo:kq.bind(null,n),f_:Nq.bind(null,n),g_:Oq.bind(null,n)}),n.B_.push(e=>v(this,null,function*(){e?(n.U_.s_(),yield Bp(n)):(yield n.U_.stop(),n.O_.length>0&&(ne("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var yE=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function JE(n,e){if(Oi("AsyncQueue",`${e}: ${n}`),yu(n))return new Y(V.UNAVAILABLE,`${e}: ${n}`);throw n}var Ep=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ue.comparator(t.key,r.key):(t,r)=>ue.comparator(t.key,r.key),this.keyedMap=Zl(),this.sortedSet=new vt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Ip=class{constructor(){this.W_=new vt(ue.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):he():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},dc=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Ep.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var vE=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},_E=class{constructor(){this.queries=sM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=ye(t),o=i.queries;i.queries=sM(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new Y(V.ABORTED,"Firestore shutting down"))}};function sM(){return new Ro(n=>AM(n),Lp)}function nR(n,e){return v(this,null,function*(){let t=ye(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new vE,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=JE(s,`Initialization of query '${Ja(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&XE(t)})}function rR(n,e){return v(this,null,function*(){let t=ye(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Lq(n,e){let t=ye(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&XE(t)}function Vq(n,e,t){let r=ye(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function XE(n){n.Y_.forEach(e=>{e.next()})}var wE,aM;(aM=wE||(wE={})).ea="default",aM.Cache="cache";var bp=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new dc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==wE.Cache}};var Cp=class{constructor(e){this.key=e}},Sp=class{constructor(e){this.key=e}},EE=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Oe(),this.mutatedKeys=Oe(),this.Aa=xM(e),this.Ra=new Ep(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Ip,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let w=i.get(d),E=Vp(this.query,f)?f:null,S=!!w&&this.mutatedKeys.has(w.key),x=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),N=!1;w&&E?w.data.isEqual(E.data)?S!==x&&(r.track({type:3,doc:E}),N=!0):this.ga(w,E)||(r.track({type:2,doc:E}),N=!0,(c&&this.Aa(E,c)>0||u&&this.Aa(E,u)<0)&&(a=!0)):!w&&E?(r.track({type:0,doc:E}),N=!0):w&&!E&&(r.track({type:1,doc:w}),N=!0,(c||u)&&(a=!0)),N&&(E?(s=s.add(E),o=x?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,f)=>function(E,S){let x=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he()}};return x(E)-x(S)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,s.length!==0||u?{snapshot:new dc(this.query,e.Ra,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ip,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Sp(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Cp(r))}),t}ba(e){this.Ta=e.Ts,this.da=Oe();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return dc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},IE=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},bE=class{constructor(e){this.key=e,this.va=!1}},CE=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Ro(a=>AM(a),Lp),this.Ma=new Map,this.xa=new Set,this.Oa=new vt(ue.comparator),this.Na=new Map,this.La=new uu,this.Ba={},this.ka=new Map,this.qa=lu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Uq(n,e,t=!0){return v(this,null,function*(){let r=lR(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield iR(r,e,t,!0),i})}function jq(n,e){return v(this,null,function*(){let t=lR(n);yield iR(t,e,!0,!1)})}function iR(n,e,t,r){return v(this,null,function*(){let i=yield bq(n.localStore,Kr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Bq(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&YM(n.remoteStore,i),a})}function Bq(n,e,t,r,i){return v(this,null,function*(){n.Ka=(f,w,E)=>function(x,N,k,X){return v(this,null,function*(){let K=N.view.ma(k);K.ns&&(K=yield iM(x.localStore,N.query,!1).then(({documents:D})=>N.view.ma(D,K)));let re=X&&X.targetChanges.get(N.targetId),Fe=X&&X.targetMismatches.get(N.targetId)!=null,Z=N.view.applyChanges(K,x.isPrimaryClient,re,Fe);return lM(x,N.targetId,Z.wa),Z.snapshot})}(n,f,w,E);let o=yield iM(n.localStore,e,!0),s=new EE(e,o.Ts),a=s.ma(o.documents),c=au.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);lM(n,t,u.wa);let d=new IE(e,t,s);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot})}function $q(n,e,t){return v(this,null,function*(){let r=ye(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Lp(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield aE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&WE(r.remoteStore,i.targetId),SE(r,i.targetId)}).catch(gu))):(SE(r,i.targetId),yield aE(r.localStore,i.targetId,!0))})}function qq(n,e){return v(this,null,function*(){let t=ye(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),WE(t.remoteStore,r.targetId))})}function zq(n,e,t){return v(this,null,function*(){let r=Jq(n);try{let i=yield function(s,a){let c=ye(s),u=Xt.now(),d=a.reduce((E,S)=>E.add(S.key),Oe()),f,w;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let S=Fi(),x=Oe();return c.cs.getEntries(E,d).next(N=>{S=N,S.forEach((k,X)=>{X.isValidDocument()||(x=x.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,S)).next(N=>{f=N;let k=[];for(let X of a){let K=J6(X,f.get(X.key).overlayedDocument);K!=null&&k.push(new Jr(X.key,K,EM(K.value.mapValue),Do.exists(!0)))}return c.mutationQueue.addMutationBatch(E,u,k,a)}).next(N=>{w=N;let k=N.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(E,N.batchId,k)})}).then(()=>({batchId:w.batchId,changes:RM(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ba[s.currentUser.toKey()];u||(u=new vt(qe)),u=u.insert(a,c),s.Ba[s.currentUser.toKey()]=u}(r,i.batchId,t),yield _u(r,i.changes),yield Bp(r.remoteStore)}catch(i){let o=JE(i,"Failed to persist write");t.reject(o)}})}function oR(n,e){return v(this,null,function*(){let t=ye(n);try{let r=yield wq(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Qe(s.va):i.removedDocuments.size>0&&(Qe(s.va),s.va=!1))}),yield _u(t,r,e)}catch(r){yield gu(r)}})}function cM(n,e,t){let r=ye(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=ye(s);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let w of f.j_)w.Z_(a)&&(u=!0)}),u&&XE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Hq(n,e,t){return v(this,null,function*(){let r=ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new vt(ue.comparator);s=s.insert(o,Sr.newNoDocument(o,Ie.min()));let a=Oe().add(o),c=new up(Ie.min(),new Map,new vt(qe),s,a);yield oR(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),ZE(r)}else yield aE(r.localStore,e,!1).then(()=>SE(r,e,t)).catch(gu)})}function Gq(n,e){return v(this,null,function*(){let t=ye(n),r=e.batch.batchId;try{let i=yield _q(t.localStore,e);aR(t,r,null),sR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield _u(t,i)}catch(i){yield gu(i)}})}function Wq(n,e,t){return v(this,null,function*(){let r=ye(n);try{let i=yield function(s,a){let c=ye(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(Qe(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);aR(r,e,t),sR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield _u(r,i)}catch(i){yield gu(i)}})}function sR(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function aR(n,e,t){let r=ye(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function SE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||cR(n,r)})}function cR(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(WE(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),ZE(n))}function lM(n,e,t){for(let r of t)r instanceof Cp?(n.La.addReference(r.key,e),Kq(n,r)):r instanceof Sp?(ne("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||cR(n,r.key)):he()}function Kq(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ne("SyncEngine","New document in limbo: "+t),n.xa.add(r),ZE(n))}function ZE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new ue(ft.fromString(e)),r=n.qa.next();n.Na.set(r,new bE(t)),n.Oa=n.Oa.insert(t,r),YM(n.remoteStore,new cu(Kr(zE(t.path)),r,"TargetPurposeLimboResolution",yM.oe))}}function _u(n,e,t){return v(this,null,function*(){let r=ye(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=rE.Wi(c.targetId,u);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,u){return v(this,null,function*(){let d=ye(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>z.forEach(u,w=>z.forEach(w.$i,E=>d.persistence.referenceDelegate.addReference(f,w.targetId,E)).next(()=>z.forEach(w.Ui,E=>d.persistence.referenceDelegate.removeReference(f,w.targetId,E)))))}catch(f){if(!yu(f))throw f;ne("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let w=f.targetId;if(!f.fromCache){let E=d.os.get(w),S=E.snapshotVersion,x=E.withLastLimboFreeSnapshotVersion(S);d.os=d.os.insert(w,x)}}})}(r.localStore,o))})}function Qq(n,e){return v(this,null,function*(){let t=ye(n);if(!t.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());let r=yield KM(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new Y(V.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _u(t,r.hs)}})}function Yq(n,e){let t=ye(n),r=t.Na.get(e);if(r&&r.va)return Oe().add(r.key);{let i=Oe(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function lR(n){let e=ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Hq.bind(null,e),e.Ca.d_=Lq.bind(null,e.eventManager),e.Ca.$a=Vq.bind(null,e.eventManager),e}function Jq(n){let e=ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Gq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wq.bind(null,e),e}var uM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=Up(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return vq(this.persistence,new oE,t.initialUser,this.serializer)}Ga(t){return new eE(nE.Zr,this.serializer)}Wa(t){return new cE}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Xq=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>cM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qq.bind(null,this.syncEngine),yield Fq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new _E}()}createDatastore(t){let r=Up(t.databaseInfo.databaseId),i=function(s){return new dE(s)}(t.databaseInfo);return function(s,a,c,u){return new pE(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new gE(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>cM(this.syncEngine,r,0),function(){return yp.D()?new yp:new lE}())}createSyncEngine(t,r){return function(o,s,a,c,u,d,f){let w=new CE(o,s,a,c,u,d);return f&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(o){return v(this,null,function*(){let s=ye(o);ne("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield vu(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Tp=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Oi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var TE=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=zt.UNAUTHENTICATED,this.clientId=np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){ne("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(ne("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=JE(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function rw(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield KM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function dM(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Zq(n);ne("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>oM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>oM(e.remoteStore,i)),n._onlineComponents=e})}function Zq(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{yield rw(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;rc("Error using user provided cache. Falling back to memory cache: "+t),yield rw(n,new uM)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),yield rw(n,new uM);return n._offlineComponents})}function uR(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),yield dM(n,n._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),yield dM(n,new Xq))),n._onlineComponents})}function ez(n){return uR(n).then(e=>e.syncEngine)}function dR(n){return v(this,null,function*(){let e=yield uR(n),t=e.eventManager;return t.onListen=Uq.bind(null,e.syncEngine),t.onUnlisten=$q.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=jq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=qq.bind(null,e.syncEngine),t})}function tz(n,e,t={}){let r=new Cr;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(o,s,a,c,u){let d=new Tp({next:w=>{d.Za(),s.enqueueAndForget(()=>rR(o,f));let E=w.docs.has(a);!E&&w.fromCache?u.reject(new Y(V.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&c&&c.source==="server"?u.reject(new Y(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(w)},error:w=>u.reject(w)}),f=new bp(zE(a.path),d,{includeMetadataChanges:!0,_a:!0});return nR(o,f)}(yield dR(n),n.asyncQueue,e,t,r)})),r.promise}function nz(n,e,t={}){let r=new Cr;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(o,s,a,c,u){let d=new Tp({next:w=>{d.Za(),s.enqueueAndForget(()=>rR(o,f)),w.fromCache&&c.source==="server"?u.reject(new Y(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(w)},error:w=>u.reject(w)}),f=new bp(a,d,{includeMetadataChanges:!0,_a:!0});return nR(o,f)}(yield dR(n),n.asyncQueue,e,t,r)})),r.promise}function hR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var hM=new Map;function fR(n,e,t){if(!t)throw new Y(V.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rz(n,e,t,r){if(e===!0&&r===!0)throw new Y(V.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fM(n){if(!ue.isDocumentKey(n))throw new Y(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pM(n){if(ue.isDocumentKey(n))throw new Y(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function $p(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":he()}function Li(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Y(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=$p(n);throw new Y(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function iz(n,e){if(e<=0)throw new Y(V.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Dp=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Y(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Y(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Y(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},hc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iw;switch(r.type){case"firstParty":return new cw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=hM.get(t);r&&(ne("ComponentProvider","Removing Datastore"),hM.delete(t),r.terminate())}(this),Promise.resolve()}};function pR(n,e,t,r={}){var i;let o=(n=Li(n,hc))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&rc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=zt.MOCK_USER;else{a=cx(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Y(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new zt(u)}n._authCredentials=new ow(new tp(a,c))}}var No=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},In=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ao(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ao=class n extends No{constructor(e,t,r){super(e,t,zE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new ue(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function mR(n,e,...t){if(n=ut(n),fR("collection","path",e),n instanceof hc){let r=ft.fromString(e,...t);return pM(r),new Ao(n,null,r)}{if(!(n instanceof In||n instanceof Ao))throw new Y(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ft.fromString(e,...t));return pM(r),new Ao(n.firestore,null,r)}}function gR(n,e,...t){if(n=ut(n),arguments.length===1&&(e=np.newId()),fR("doc","path",e),n instanceof hc){let r=ft.fromString(e,...t);return fM(r),new In(n,null,new ue(r))}{if(!(n instanceof In||n instanceof Ao))throw new Y(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ft.fromString(e,...t));return fM(r),new In(n.firestore,n instanceof Ao?n.converter:null,new ue(r))}}var Ap=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new vp(this,"async_queue_retry"),this.Vu=()=>{let r=nw();r&&ne("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=nw();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=nw();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Cr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return v(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yu(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Oi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=yE.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&he()}verifyOperationInProgress(){}wu(){return v(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Ps=class extends hc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ap,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ap(e),this._firestoreClient=void 0,yield e}})}};function yR(n,e){let t=typeof n=="object"?n:Io(),r=typeof n=="string"?n:e||"(default)",i=ps(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=If("firestore");o&&pR(i,...o)}return i}function eI(n){if(n._terminated)throw new Y(V.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||oz(n),n._firestoreClient}function oz(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,u,d){return new fw(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,hR(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new TE(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var du=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(un.fromBase64String(e))}catch(t){throw new Y(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var fc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Y(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var pc=class{constructor(e){this._methodName=e}};var hu=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Y(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Y(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}};var fu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var sz=/^__.*__$/,DE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Jr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rs(e,this.data,t,this.fieldTransforms)}},xp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Jr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function vR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he()}}var AE=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Rp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(vR(this.Cu)&&sz.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},xE=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Up(e)}Qu(e,t,r,i=!1){return new AE({Cu:e,methodName:t,qu:r,path:Bn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function tI(n){let e=n._freezeSettings(),t=Up(n._databaseId);return new xE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function az(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);nI("Data must be an object, but it was:",s,r);let a=_R(r,s),c,u;if(o.merge)c=new nr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let w=RE(e,f,t);if(!s.contains(w))throw new Y(V.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);ER(d,w)||d.push(w)}c=new nr(d),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new DE(new jn(a),c,u)}var Mp=class n extends pc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var ME=class n extends pc{_toFieldTransform(e){return new Dw(e.path,new As)}isEqual(e){return e instanceof n}};function cz(n,e,t,r){let i=n.Qu(1,e,t);nI("Data must be an object, but it was:",i,r);let o=[],s=jn.empty();Ns(r,(c,u)=>{let d=rI(e,c,t);u=ut(u);let f=i.Nu(d);if(u instanceof Mp)o.push(d);else{let w=wu(u,f);w!=null&&(o.push(d),s.set(d,w))}});let a=new nr(o);return new xp(s,a,i.fieldTransforms)}function lz(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[RE(e,r,t)],c=[i];if(o.length%2!=0)throw new Y(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)a.push(RE(e,o[w])),c.push(o[w+1]);let u=[],d=jn.empty();for(let w=a.length-1;w>=0;--w)if(!ER(u,a[w])){let E=a[w],S=c[w];S=ut(S);let x=s.Nu(E);if(S instanceof Mp)u.push(E);else{let N=wu(S,x);N!=null&&(u.push(E),d.set(E,N))}}let f=new nr(u);return new xp(d,f,s.fieldTransforms)}function uz(n,e,t,r=!1){return wu(t,n.Qu(r?4:3,e))}function wu(n,e){if(wR(n=ut(n)))return nI("Unsupported field value:",e,n),_R(n,e);if(n instanceof pc)return function(r,i){if(!vR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=wu(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return G6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Xt.fromDate(r);return{timestampValue:pp(i.serializer,o)}}if(r instanceof Xt){let o=new Xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pp(i.serializer,o)}}if(r instanceof hu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof du)return{bytesValue:BM(i.serializer,r._byteString)};if(r instanceof In){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:GE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fu)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return HE(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${$p(r)}`)}(n,e)}function _R(n,e){let t={};return vM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(n,(r,i)=>{let o=wu(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function wR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xt||n instanceof hu||n instanceof du||n instanceof In||n instanceof pc||n instanceof fu)}function nI(n,e,t){if(!wR(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=$p(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function RE(n,e,t){if((e=ut(e))instanceof fc)return e._internalPath;if(typeof e=="string")return rI(n,e);throw Rp("Field path arguments must be of type string or ",n,!1,void 0,t)}var dz=new RegExp("[~\\*/\\[\\]]");function rI(n,e,t){if(e.search(dz)>=0)throw Rp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fc(...e.split("."))._internalPath}catch{throw Rp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Y(V.INVALID_ARGUMENT,a+n+c)}function ER(n,e){return n.some(t=>t.isEqual(e))}var Pp=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new PE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(qp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},PE=class extends Pp{data(){return super.data()}};function qp(n,e){return typeof e=="string"?rI(n,e):e instanceof fc?e._internalPath:e._delegate._internalPath}function hz(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Y(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pu=class{},mu=class extends pu{};function IR(n,e,...t){let r=[];e instanceof pu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof NE).length,a=o.filter(c=>c instanceof Np).length;if(s>1||s>0&&a>0)throw new Y(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Np=class n extends mu{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return TR(e._query,t),new No(e.firestore,e.converter,Tw(e._query,t))}_parse(e){let t=tI(e.firestore);return function(o,s,a,c,u,d,f){let w;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Y(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){gM(f,d);let E=[];for(let S of f)E.push(mM(c,o,S));w={arrayValue:{values:E}}}else w=mM(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||gM(f,d),w=uz(a,s,f,d==="in"||d==="not-in");return Ot.create(u,d,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function bR(n,e,t){let r=e,i=qp("where",n);return Np._create(i,r,t)}var NE=class n extends pu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Tr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)TR(s,c),s=Tw(s,c)}(e._query,t),new No(e.firestore,e.converter,Tw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var OE=class n extends mu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new Y(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Y(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ds(o,s)}(e._query,this._field,this._direction);return new No(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Mo(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function CR(n,e="asc"){let t=e,r=qp("orderBy",n);return OE._create(r,t)}var kE=class n extends mu{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new No(e.firestore,e.converter,cp(e._query,this._limit,this._limitType))}};function SR(n){return iz("limit",n),kE._create("limit",n,"F")}function mM(n,e,t){if(typeof(t=ut(t))=="string"){if(t==="")throw new Y(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DM(e)&&t.indexOf("/")!==-1)throw new Y(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ft.fromString(t));if(!ue.isDocumentKey(r))throw new Y(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return B1(n,new ue(r))}if(t instanceof In)return B1(n,t._key);throw new Y(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$p(t)}.`)}function gM(n,e){if(!Array.isArray(n)||n.length===0)throw new Y(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TR(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Y(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var FE=class{convertValue(e,t="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ns(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ht(s.doubleValue));return new fu(o)}convertGeoPoint(e){return new hu(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=jE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){let t=ki(e);return new Xt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ft.fromString(e);Qe(WM(r));let i=new sp(r.get(1),r.get(3)),o=new ue(r.popFirst(5));return i.isEqual(t)||Oi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function fz(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var bs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Op=class extends Pp{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(qp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},nc=class extends Op{data(e={}){return super.data(e)}},LE=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new nc(this._firestore,this._userDataWriter,r.key,r,new bs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Y(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new nc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new nc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:pz(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function pz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he()}}function DR(n){n=Li(n,In);let e=Li(n.firestore,Ps);return tz(eI(e),n._key).then(t=>mz(e,n,t))}var kp=class extends FE{constructor(e){super(),this.firestore=e}convertBytes(e){return new du(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,t)}};function AR(n){n=Li(n,No);let e=Li(n.firestore,Ps),t=eI(e),r=new kp(e);return hz(n._query),nz(t,n._query).then(i=>new LE(e,r,n,i))}function xR(n,e,t){n=Li(n,In);let r=Li(n.firestore,Ps),i=fz(n.converter,e,t);return RR(r,[az(tI(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Do.none())])}function MR(n,e,t,...r){n=Li(n,In);let i=Li(n.firestore,Ps),o=tI(i),s;return s=typeof(e=ut(e))=="string"||e instanceof fc?lz(o,"updateDoc",n._key,e,t,r):cz(o,"updateDoc",n._key,e),RR(i,[s.toMutation(n._key,Do.exists(!0))])}function RR(n,e){return function(r,i){let o=new Cr;return r.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return zq(yield ez(r),i,o)})),o.promise}(eI(n),e)}function mz(n,e,t){let r=t.docs.get(e._key),i=new kp(n);return new Op(n,i,e._key,r,new bs(t.hasPendingWrites,t.fromCache),e.converter)}function PR(){return new ME("serverTimestamp")}(function(e,t=!0){(function(i){mc=i})(Eo),zr(new Mn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ps(new sw(r.getProvider("auth-internal")),new uw(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sp(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),dt(L1,"4.7.3",e),dt(L1,"4.7.3","esm2017")})();var Tt=class{constructor(e){return e}},NR="firestore",iI=class{constructor(){return gs(NR)}};var oI=new te("angularfire2.firestore-instances");function gz(n,e){let t=Ha(NR,n,e);return t&&new Tt(t)}function yz(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Tt(r)}}var vz={provide:iI,deps:[[new Ct,oI]]},_z={provide:Tt,useFactory:gz,deps:[[new Ct,oI],Ir]},wz=(()=>{class n{constructor(){dt("angularfire",Ci.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vt({type:n});static \u0275inj=Lt({providers:[_z,vz]})}return n})();function OR(n,...e){return{ngModule:wz,providers:[{provide:oI,useFactory:yz(n),multi:!0,deps:[Pe,Jt,Co,Si,[new Ct,ws],[new Ct,bo],...e]}]}}var jt=tt(mR,!0);var dn=tt(gR,!0);var Dr=tt(DR,!0);var Ht=tt(AR,!0);var kR=tt(yR,!0);var yc=tt(SR,!0);var vc=tt(CR,!0);var kt=tt(IR,!0);var zp=tt(PR,!0),ks=tt(xR,!0);var FR=tt(MR,!0);var _t=tt(bR,!0);var Ez="type.googleapis.com/google.protobuf.Int64Value",Iz="type.googleapis.com/google.protobuf.UInt64Value";function jR(n,e){let t={};for(let r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function sI(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>sI(e));if(typeof n=="function"||typeof n=="object")return jR(n,e=>sI(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Hp(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case Ez:case Iz:{let e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Hp(e)):typeof n=="function"||typeof n=="object"?jR(n,e=>Hp(e)):n}var uI="functions";var LR={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ko=class extends En{constructor(e,t,r){super(`${uI}/${e}`,t||""),this.details=r}};function bz(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Cz(n,e){let t=bz(n),r=t,i;try{let o=e&&e.error;if(o){let s=o.status;if(typeof s=="string"){if(!LR[s])return new ko("internal","internal");t=LR[s],r=s}let a=o.message;typeof a=="string"&&(r=a),i=o.details,i!==void 0&&(i=Hp(i))}}catch{}return t==="ok"?null:new ko(t,r,i)}var aI=class{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return v(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return v(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return v(this,null,function*(){if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return v(this,null,function*(){let t=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}})}};var cI="us-central1";function Sz(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new ko("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}var lI=class{constructor(e,t,r,i,o=cI,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new aI(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=cI}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function Tz(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}function Dz(n,e,t){return r=>xz(n,e,r,t||{})}function Az(n,e,t,r){return v(this,null,function*(){t["Content-Type"]="application/json";let i;try{i=yield r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let o=null;try{o=yield i.json()}catch{}return{status:i.status,json:o}})}function xz(n,e,t,r){let i=n._url(e);return Mz(n,i,t,r)}function Mz(n,e,t,r){return v(this,null,function*(){t=sI(t);let i={data:t},o={},s=yield n.contextProvider.getContext(r.limitedUseAppCheckTokens);s.authToken&&(o.Authorization="Bearer "+s.authToken),s.messagingToken&&(o["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(o["X-Firebase-AppCheck"]=s.appCheckToken);let a=r.timeout||7e4,c=Sz(a),u=yield Promise.race([Az(e,i,o,n.fetchImpl),c.promise,n.cancelAllRequests]);if(c.cancel(),!u)throw new ko("cancelled","Firebase Functions instance was deleted.");let d=Cz(u.status,u.json);if(d)throw d;if(!u.json)throw new ko("internal","Response is not valid JSON object.");let f=u.json.data;if(typeof f>"u"&&(f=u.json.result),typeof f>"u")throw new ko("internal","Response is missing data field.");return{data:Hp(f)}})}var VR="@firebase/functions",UR="0.11.8";var Rz="auth-internal",Pz="app-check-internal",Nz="messaging-internal";function Oz(n,e){let t=(r,{instanceIdentifier:i})=>{let o=r.getProvider("app").getImmediate(),s=r.getProvider(Rz),a=r.getProvider(Nz),c=r.getProvider(Pz);return new lI(o,s,a,c,i,n)};zr(new Mn(uI,t,"PUBLIC").setMultipleInstances(!0)),dt(VR,UR,e),dt(VR,UR,"esm2017")}function BR(n=Io(),e=cI){let r=ps(ut(n),uI).getImmediate({identifier:e}),i=If("functions");return i&&$R(r,...i),r}function $R(n,e,t){Tz(ut(n),e,t)}function qR(n,e,t){return Dz(ut(n),e,t)}Oz(fetch.bind(self));var Fs=class{constructor(e){return e}},zR="functions",dI=class{constructor(){return gs(zR)}};var hI=new te("angularfire2.functions-instances");function kz(n,e){let t=Ha(zR,n,e);return t&&new Fs(t)}function Fz(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Fs(r)}}var Lz={provide:dI,deps:[[new Ct,hI]]},Vz={provide:Fs,useFactory:kz,deps:[[new Ct,hI],Ir]},Uz=(()=>{class n{constructor(){dt("angularfire",Ci.full,"fn")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vt({type:n});static \u0275inj=Lt({providers:[Vz,Lz]})}return n})();function HR(n,...e){return{ngModule:Uz,providers:[{provide:hI,useFactory:Fz(n),multi:!0,deps:[Pe,Jt,Co,Si,[new Ct,ws],[new Ct,bo],...e]}]}}var GR=tt(BR,!0),WR=tt(qR,!0);var rr={production:!1,apiUrl:"https://us-central1-mereka-ai-game.cloudfunctions.net",firebase:{apiKey:"AIzaSyD7esOuznHY_x0r1XsalWSZBoOJTspuABA",authDomain:"mereka-ai-game.firebaseapp.com",projectId:"mereka-ai-game",storageBucket:"mereka-ai-game.firebasestorage.app",messagingSenderId:"939508804715",appId:"1:939508804715:web:71ccc7faab3879aff5552e",measurementId:"G-NJWRDG4PWP",databaseURL:"https://mereka-ai-game.firebaseio.com"}};var xe=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(xe||{}),Xr="*";function KR(n,e=null){return{type:xe.Sequence,steps:n,options:e}}function fI(n){return{type:xe.Style,styles:n,offset:null}}var Fo=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Eu=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Gp="!";function QR(n){return new B(3e3,!1)}function Bz(){return new B(3100,!1)}function $z(){return new B(3101,!1)}function qz(n){return new B(3001,!1)}function zz(n){return new B(3003,!1)}function Hz(n){return new B(3004,!1)}function Gz(n,e){return new B(3005,!1)}function Wz(){return new B(3006,!1)}function Kz(){return new B(3007,!1)}function Qz(n,e){return new B(3008,!1)}function Yz(n){return new B(3002,!1)}function Jz(n,e,t,r,i){return new B(3010,!1)}function Xz(){return new B(3011,!1)}function Zz(){return new B(3012,!1)}function eH(){return new B(3200,!1)}function tH(){return new B(3202,!1)}function nH(){return new B(3013,!1)}function rH(n){return new B(3014,!1)}function iH(n){return new B(3015,!1)}function oH(n){return new B(3016,!1)}function sH(n,e){return new B(3404,!1)}function aH(n){return new B(3502,!1)}function cH(n){return new B(3503,!1)}function lH(){return new B(3300,!1)}function uH(n){return new B(3504,!1)}function dH(n){return new B(3301,!1)}function hH(n,e){return new B(3302,!1)}function fH(n){return new B(3303,!1)}function pH(n,e){return new B(3400,!1)}function mH(n){return new B(3401,!1)}function gH(n){return new B(3402,!1)}function yH(n,e){return new B(3505,!1)}function Lo(n){switch(n.length){case 0:return new Fo;case 1:return n[0];default:return new Eu(n)}}function lP(n,e,t=new Map,r=new Map){let i=[],o=[],s=-1,a=null;if(e.forEach(c=>{let u=c.get("offset"),d=u==s,f=d&&a||new Map;c.forEach((w,E)=>{let S=E,x=w;if(E!=="offset")switch(S=n.normalizePropertyName(S,i),x){case Gp:x=t.get(E);break;case Xr:x=r.get(E);break;default:x=n.normalizeStyleValue(E,S,x,i);break}f.set(S,x)}),d||o.push(f),a=f,s=u}),i.length)throw aH(i);return o}function FI(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&pI(t,"start",n)));break;case"done":n.onDone(()=>r(t&&pI(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&pI(t,"destroy",n)));break}}function pI(n,e,t){let r=t.totalTime,i=!!t.disabled,o=LI(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),s=n._data;return s!=null&&(o._data=s),o}function LI(n,e,t,r,i="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function qn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function YR(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var vH=typeof document>"u"?null:document.documentElement;function VI(n){let e=n.parentNode||n.host||null;return e===vH?null:e}function _H(n){return n.substring(1,6)=="ebkit"}var Ls=null,JR=!1;function wH(n){Ls||(Ls=EH()||{},JR=Ls.style?"WebkitAppearance"in Ls.style:!1);let e=!0;return Ls.style&&!_H(n)&&(e=n in Ls.style,!e&&JR&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Ls.style)),e}function EH(){return typeof document<"u"?document.body:null}function uP(n,e){for(;e;){if(e===n)return!0;e=VI(e)}return!1}function dP(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var UI=(()=>{class n{validateStyleProperty(t){return wH(t)}matchesElement(t,r){return!1}containsElement(t,r){return uP(t,r)}getParentElement(t){return VI(t)}query(t,r,i){return dP(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,s,a=[],c){return new Fo(i,o)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),js=class{static{this.NOOP=new UI}},Bs=class{};var IH=1e3,hP="{{",bH="}}",fP="ng-enter",wI="ng-leave",Wp="ng-trigger",Xp=".ng-trigger",XR="ng-animating",EI=".ng-animating";function Vi(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:II(parseFloat(e[1]),e[2])}function II(n,e){switch(e){case"s":return n*IH;default:return n}}function Zp(n,e,t){return n.hasOwnProperty("duration")?n:CH(n,e,t)}function CH(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,o=0,s="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(QR(n)),{duration:0,delay:0,easing:""};i=II(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(o=II(parseFloat(c),a[4]));let u=a[5];u&&(s=u)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(Bz()),a=!0),o<0&&(e.push($z()),a=!0),a&&e.splice(c,0,QR(n))}return{duration:i,delay:o,easing:s}}function SH(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Zr(n,e,t){e.forEach((r,i)=>{let o=jI(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r})}function Us(n,e){e.forEach((t,r)=>{let i=jI(r);n.style[i]=""})}function Iu(n){return Array.isArray(n)?n.length==1?n[0]:KR(n):n}function TH(n,e,t){let r=e.params||{},i=pP(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(qz(o))})}var bI=new RegExp(`${hP}\\s*(.+?)\\s*${bH}`,"g");function pP(n){let e=[];if(typeof n=="string"){let t;for(;t=bI.exec(n);)e.push(t[1]);bI.lastIndex=0}return e}function Cu(n,e,t){let r=`${n}`,i=r.replace(bI,(o,s)=>{let a=e[s];return a==null&&(t.push(zz(s)),a=""),a.toString()});return i==r?n:i}var DH=/-+([a-z0-9])/g;function jI(n){return n.replace(DH,(...e)=>e[1].toUpperCase())}function AH(n,e){return n===0||e===0}function xH(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,BI(n,a)))}}return e}function $n(n,e,t){switch(e.type){case xe.Trigger:return n.visitTrigger(e,t);case xe.State:return n.visitState(e,t);case xe.Transition:return n.visitTransition(e,t);case xe.Sequence:return n.visitSequence(e,t);case xe.Group:return n.visitGroup(e,t);case xe.Animate:return n.visitAnimate(e,t);case xe.Keyframes:return n.visitKeyframes(e,t);case xe.Style:return n.visitStyle(e,t);case xe.Reference:return n.visitReference(e,t);case xe.AnimateChild:return n.visitAnimateChild(e,t);case xe.AnimateRef:return n.visitAnimateRef(e,t);case xe.Query:return n.visitQuery(e,t);case xe.Stagger:return n.visitStagger(e,t);default:throw Hz(e.type)}}function BI(n,e){return window.getComputedStyle(n)[e]}var MH=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),em=class extends Bs{normalizePropertyName(e,t){return jI(e)}normalizeStyleValue(e,t,r,i){let o="",s=r.toString().trim();if(MH.has(t)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(Gz(e,r))}return s+o}};var tm="*";function RH(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>PH(r,t,e)):t.push(n),t}function PH(n,e,t){if(n[0]==":"){let c=NH(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(iH(n)),e;let i=r[1],o=r[2],s=r[3];e.push(ZR(i,s));let a=i==tm&&s==tm;o[0]=="<"&&!a&&e.push(ZR(s,i))}function NH(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(oH(n)),"* => *"}}var Kp=new Set(["true","1"]),Qp=new Set(["false","0"]);function ZR(n,e){let t=Kp.has(n)||Qp.has(n),r=Kp.has(e)||Qp.has(e);return(i,o)=>{let s=n==tm||n==i,a=e==tm||e==o;return!s&&t&&typeof i=="boolean"&&(s=i?Kp.has(n):Qp.has(n)),!a&&r&&typeof o=="boolean"&&(a=o?Kp.has(e):Qp.has(e)),s&&a}}var mP=":self",OH=new RegExp(`s*${mP}s*,?`,"g");function gP(n,e,t,r){return new CI(n).build(e,t,r)}var eP="",CI=class{constructor(e){this._driver=e}build(e,t,r){let i=new SI(t);return this._resetContextStyleTimingState(i),$n(this,Iu(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=eP,e.collectedStyles=new Map,e.collectedStyles.set(eP,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(Wz()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==xe.State){let c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(d=>{c.name=d,o.push(this.visitState(c,t))}),c.name=u}else if(a.type==xe.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,s.push(c)}else t.errors.push(Kz())}),{type:xe.Trigger,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{pP(c).forEach(u=>{s.hasOwnProperty(u)||o.add(u)})})}),o.size&&t.errors.push(Qz(e.name,[...o.values()]))}return{type:xe.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=$n(this,Iu(e.animation),t),i=RH(e.expr,t.errors);return{type:xe.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Vs(e.options)}}visitSequence(e,t){return{type:xe.Sequence,steps:e.steps.map(r=>$n(this,r,t)),options:Vs(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,o=e.steps.map(s=>{t.currentTime=r;let a=$n(this,s,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:xe.Group,steps:o,options:Vs(e.options)}}visitAnimate(e,t){let r=VH(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:fI({});if(o.type==xe.Keyframes)i=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let u={};r.easing&&(u.easing=r.easing),s=fI(u)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(s,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:xe.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Xr?r.push(a):t.errors.push(Yz(a)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(hP)>=0){o=!0;break}}}),{type:xe.Style,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let u=t.collectedStyles.get(t.currentQuerySelector),d=u.get(c),f=!0;d&&(o!=i&&o>=d.startTime&&i<=d.endTime&&(t.errors.push(Jz(c,d.startTime,d.endTime,o,i)),f=!1),o=d.startTime),f&&u.set(c,{startTime:o,endTime:i}),t.options&&TH(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:xe.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Xz()),r;let i=1,o=0,s=[],a=!1,c=!1,u=0,d=e.steps.map(k=>{let X=this._makeStyleAst(k,t),K=X.offset!=null?X.offset:LH(X.styles),re=0;return K!=null&&(o++,re=X.offset=K),c=c||re<0||re>1,a=a||re<u,u=re,s.push(re),X});c&&t.errors.push(Zz()),a&&t.errors.push(eH());let f=e.steps.length,w=0;o>0&&o<f?t.errors.push(tH()):o==0&&(w=i/(f-1));let E=f-1,S=t.currentTime,x=t.currentAnimateTimings,N=x.duration;return d.forEach((k,X)=>{let K=w>0?X==E?1:w*X:s[X],re=K*N;t.currentTime=S+x.delay+re,x.duration=re,this._validateStyleAst(k,t),k.offset=K,r.styles.push(k)}),r}visitReference(e,t){return{type:xe.Reference,animation:$n(this,Iu(e.animation),t),options:Vs(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:xe.AnimateChild,options:Vs(e.options)}}visitAnimateRef(e,t){return{type:xe.AnimateRef,animation:this.visitReference(e.animation,t),options:Vs(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=kH(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,qn(t.collectedStyles,t.currentQuerySelector,new Map);let a=$n(this,Iu(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:xe.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Vs(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(nH());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Zp(e.timings,t.errors,!0);return{type:xe.Stagger,animation:$n(this,Iu(e.animation),t),timings:r,options:null}}};function kH(n){let e=!!n.split(/\s*,\s*/).find(t=>t==mP);return e&&(n=n.replace(OH,"")),n=n.replace(/@\*/g,Xp).replace(/@\w+/g,t=>Xp+"-"+t.slice(1)).replace(/:animating/g,EI),[n,e]}function FH(n){return n?j({},n):null}var SI=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function LH(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function VH(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=Zp(n,e).duration;return mI(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=mI(0,0,"");return o.dynamic=!0,o.strValue=t,o}let i=Zp(t,e);return mI(i.duration,i.delay,i.easing)}function Vs(n){return n?(n=j({},n),n.params&&(n.params=FH(n.params))):n={},n}function mI(n,e,t){return{duration:n,delay:e,easing:t}}function $I(n,e,t,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var Su=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},UH=1,jH=":enter",BH=new RegExp(jH,"g"),$H=":leave",qH=new RegExp($H,"g");function yP(n,e,t,r,i,o=new Map,s=new Map,a,c,u=[]){return new TI().buildKeyframes(n,e,t,r,i,o,s,a,c,u)}var TI=class{buildKeyframes(e,t,r,i,o,s,a,c,u,d=[]){u=u||new Su;let f=new DI(e,t,u,i,o,d,[]);f.options=c;let w=c.delay?Vi(c.delay):0;f.currentTimeline.delayNextStep(w),f.currentTimeline.setStyles([s],null,f.errors,c),$n(this,r,f);let E=f.timelines.filter(S=>S.containsAnimation());if(E.length&&a.size){let S;for(let x=E.length-1;x>=0;x--){let N=E[x];if(N.element===t){S=N;break}}S&&!S.allowOnlyTimelineStyles()&&S.setStyles([a],null,f.errors,c)}return E.length?E.map(S=>S.buildKeyframes()):[$I(t,[],[],[],0,w,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let o=i?.delay;if(o){let s=typeof o=="number"?o:Vi(Cu(o,i?.params??{},t.errors));r.delayNextStep(s)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime,s=r.duration!=null?Vi(r.duration):null,a=r.delay!=null?Vi(r.delay):null;return s!==0&&e.forEach(c=>{let u=t.appendInstructionToTimeline(c,s,a);o=Math.max(o,u.duration+u.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),$n(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==xe.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=nm);let s=Vi(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>$n(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,o=e.options&&e.options.delay?Vi(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),$n(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?Cu(r,t.params,t.errors):r;return Zp(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let o=e.style;o.type==xe.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let u=c.offset||0;a.forwardTime(u*o),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?Vi(i.delay):0;o&&(t.previousNode.type===xe.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=nm);let s=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,d)=>{t.currentQueryIndex=d;let f=t.createSubContext(e.options,u);o&&f.delayNextStep(o),u===t.element&&(c=f.currentTimeline),$n(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe();let w=f.currentTimeline.currentTime;s=Math.max(s,w)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),c=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let d=t.currentTimeline;c&&d.delayNextStep(c);let f=d.currentTime;$n(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-f+(i.startTime-r.currentTimeline.startTime)}},nm={},DI=class n{constructor(e,t,r,i,o,s,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=nm,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new rm(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Vi(r.duration)),r.delay!=null&&(i.delay=Vi(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Cu(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,o=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=nm,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new AI(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(BH,"."+this._enterClassName),e=e.replace(qH,"."+this._leaveClassName);let c=r!=1,u=this._driver.query(this.element,e,c);r!==0&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!o&&a.length==0&&s.push(rH(t)),a}},rm=class n{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=UH,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Xr),this._currentKeyframe.set(t,Xr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let o=i&&i.params||{},s=zH(e,this._globalTimelineStyles);for(let[a,c]of s){let u=Cu(c,o,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Xr),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let u=new Map([...this._backFill,...a]);u.forEach((d,f)=>{d===Gp?e.add(f):d===Xr&&t.add(f)}),r||u.set("offset",c/this.duration),i.push(u)});let o=[...e.values()],s=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return $I(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},AI=class extends rm{constructor(e,t,r,i,o,s,a=!1){super(e,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=r+t,a=t/s,c=new Map(e[0]);c.set("offset",0),o.push(c);let u=new Map(e[0]);u.set("offset",tP(a)),o.push(u);let d=e.length-1;for(let f=1;f<=d;f++){let w=new Map(e[f]),E=w.get("offset"),S=t+E*r;w.set("offset",tP(S/s)),o.push(w)}r=s,t=0,i="",e=o}return $I(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function tP(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function zH(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let o of r)t.set(o,Xr)}else for(let[o,s]of i)t.set(o,s)}),t}function nP(n,e,t,r,i,o,s,a,c,u,d,f,w){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:d,totalTime:f,errors:w}}var gI={},im=class{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return HH(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,s,a,c,u,d){let f=[],w=this.ast.options&&this.ast.options.params||gI,E=a&&a.params||gI,S=this.buildStyles(r,E,f),x=c&&c.params||gI,N=this.buildStyles(i,x,f),k=new Set,X=new Map,K=new Map,re=i==="void",Fe={params:vP(x,w),delay:this.ast.options?.delay},Z=d?[]:yP(e,t,this.ast.animation,o,s,S,N,Fe,u,f),D=0;return Z.forEach(b=>{D=Math.max(b.duration+b.delay,D)}),f.length?nP(t,this._triggerName,r,i,re,S,N,[],[],X,K,D,f):(Z.forEach(b=>{let C=b.element,A=qn(X,C,new Set);b.preStyleProps.forEach(P=>A.add(P));let M=qn(K,C,new Set);b.postStyleProps.forEach(P=>M.add(P)),C!==t&&k.add(C)}),nP(t,this._triggerName,r,i,re,S,N,Z,[...k.values()],X,K,D))}};function HH(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}function vP(n,e){let t=j({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var xI=class{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=vP(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Cu(s,i,t));let c=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,c,s,t),r.set(a,s)})}),r}};function GH(n,e,t){return new MI(n,e,t)}var MI=class{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new xI(i.style,o,r))}),rP(this.states,"true","1"),rP(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new im(e,i,this.states))}),this.fallbackTransition=WH(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(s=>s.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function WH(n,e,t){let r=[(s,a)=>!0],i={type:xe.Sequence,steps:[],options:null},o={type:xe.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new im(n,o,e)}function rP(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var KH=new Su,RI=class{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let r=[],i=[],o=gP(this._driver,t,r,i);if(r.length)throw cH(r);i.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,t,r){let i=e.element,o=lP(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],o=this._animations.get(e),s,a=new Map;if(o?(s=yP(this._driver,t,o,fP,wI,new Map,new Map,r,KH,i),s.forEach(d=>{let f=qn(a,d.element,new Map);d.postStyleProps.forEach(w=>f.set(w,null))})):(i.push(lH()),s=[]),i.length)throw uH(i);a.forEach((d,f)=>{d.forEach((w,E)=>{d.set(E,this._driver.computeStyle(f,E,Xr))})});let c=s.map(d=>{let f=a.get(d.element);return this._buildPlayer(d,new Map,f)}),u=Lo(c);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw dH(e);return t}listen(e,t,r,i){let o=LI(t,"","","");return FI(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},iP="ng-animate-queued",QH=".ng-animate-queued",yI="ng-animate-disabled",YH=".ng-animate-disabled",JH="ng-star-inserted",XH=".ng-star-inserted",ZH=[],_P={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},e9={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ar="__ng_removed",Tu=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=n9(i),r){let o=e,{value:s}=o,a=eg(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},bu="void",vI=new Tu(bu),PI=class{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ir(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw hH(r,t);if(r==null||r.length==0)throw fH(t);if(!r9(r))throw pH(r,t);let o=qn(this._elementListeners,e,[]),s={name:t,phase:r,callback:i};o.push(s);let a=qn(this._engine.statesByElement,e,new Map);return a.has(t)||(ir(e,Wp),ir(e,Wp+"-"+t),a.set(t,vI)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw mH(e);return t}trigger(e,t,r,i=!0){let o=this._getTrigger(t),s=new Du(this.id,t,e),a=this._engine.statesByElement.get(e);a||(ir(e,Wp),ir(e,Wp+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),u=new Tu(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=vI),!(u.value===bu)&&c.value===u.value){if(!s9(c.params,u.params)){let x=[],N=o.matchStyles(c.value,c.params,x),k=o.matchStyles(u.value,u.params,x);x.length?this._engine.reportError(x):this._engine.afterFlush(()=>{Us(e,N),Zr(e,k)})}return}let w=qn(this._engine.playersByElement,e,[]);w.forEach(x=>{x.namespaceId==this.id&&x.triggerName==t&&x.queued&&x.destroy()});let E=o.matchTransition(c.value,u.value,e,u.params),S=!1;if(!E){if(!i)return;E=o.fallbackTransition,S=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:E,fromState:c,toState:u,player:s,isFallbackTransition:S}),S||(ir(e,iP),s.onStart(()=>{_c(e,iP)})),s.onDone(()=>{let x=this.players.indexOf(s);x>=0&&this.players.splice(x,1);let N=this._engine.playersByElement.get(e);if(N){let k=N.indexOf(s);k>=0&&N.splice(k,1)}}),this.players.push(s),w.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Xp,!0);r.forEach(i=>{if(i[Ar])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((c,u)=>{if(s.set(u,c.value),this._triggers.has(u)){let d=this.trigger(e,u,bu,i);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),r&&Lo(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let c=this._triggers.get(s).fallbackTransition,u=r.get(s)||vI,d=new Tu(bu),f=new Du(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:u,toState:d,player:f,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let o=e[Ar];(!o||o===_P)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ir(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){let c=LI(o,r.triggerName,r.fromState.value,r.toState.value);c._data=e,FI(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},NI=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r,i){this.bodyNode=e,this.driver=t,this._normalizer=r,this.scheduler=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new PI(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let u=r.indexOf(c);r.splice(u+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}}return t}trigger(e,t,r,i){if(Yp(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Yp(t))return;let o=t[Ar];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ir(e,yI)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),_c(e,yI))}removeNode(e,t,r){if(Yp(t)){this.scheduler?.notify();let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[Ar]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return Yp(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Xp,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,EI,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Lo(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Ar];if(t&&t.setForRemoval){if(e[Ar]=_P,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(yI)&&this.markElementAsDisabled(e,!1),this.driver.query(e,YH,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];ir(i,JH)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Lo(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw gH(e)}_flushAnimations(e,t){let r=new Su,i=[],o=new Map,s=[],a=new Map,c=new Map,u=new Map,d=new Set;this.disabledNodes.forEach(ee=>{d.add(ee);let ie=this.driver.query(ee,QH,!0);for(let se=0;se<ie.length;se++)d.add(ie[se])});let f=this.bodyNode,w=Array.from(this.statesByElement.keys()),E=aP(w,this.collectedEnterElements),S=new Map,x=0;E.forEach((ee,ie)=>{let se=fP+x++;S.set(ie,se),ee.forEach(Me=>ir(Me,se))});let N=[],k=new Set,X=new Set;for(let ee=0;ee<this.collectedLeaveElements.length;ee++){let ie=this.collectedLeaveElements[ee],se=ie[Ar];se&&se.setForRemoval&&(N.push(ie),k.add(ie),se.hasAnimation?this.driver.query(ie,XH,!0).forEach(Me=>k.add(Me)):X.add(ie))}let K=new Map,re=aP(w,Array.from(k));re.forEach((ee,ie)=>{let se=wI+x++;K.set(ie,se),ee.forEach(Me=>ir(Me,se))}),e.push(()=>{E.forEach((ee,ie)=>{let se=S.get(ie);ee.forEach(Me=>_c(Me,se))}),re.forEach((ee,ie)=>{let se=K.get(ie);ee.forEach(Me=>_c(Me,se))}),N.forEach(ee=>{this.processLeaveNode(ee)})});let Fe=[],Z=[];for(let ee=this._namespaceList.length-1;ee>=0;ee--)this._namespaceList[ee].drainQueuedTransitions(t).forEach(se=>{let Me=se.player,wt=se.element;if(Fe.push(Me),this.collectedEnterElements.length){let mt=wt[Ar];if(mt&&mt.setForMove){if(mt.previousTriggersValues&&mt.previousTriggersValues.has(se.triggerName)){let ni=mt.previousTriggersValues.get(se.triggerName),bn=this.statesByElement.get(se.element);if(bn&&bn.has(se.triggerName)){let ri=bn.get(se.triggerName);ri.value=ni,bn.set(se.triggerName,ri)}}Me.destroy();return}}let Hn=!f||!this.driver.containsElement(f,wt),pt=K.get(wt),nt=S.get(wt),rt=this._buildInstruction(se,r,nt,pt,Hn);if(rt.errors&&rt.errors.length){Z.push(rt);return}if(Hn){Me.onStart(()=>Us(wt,rt.fromStyles)),Me.onDestroy(()=>Zr(wt,rt.toStyles)),i.push(Me);return}if(se.isFallbackTransition){Me.onStart(()=>Us(wt,rt.fromStyles)),Me.onDestroy(()=>Zr(wt,rt.toStyles)),i.push(Me);return}let $i=[];rt.timelines.forEach(mt=>{mt.stretchStartingKeyframe=!0,this.disabledNodes.has(mt.element)||$i.push(mt)}),rt.timelines=$i,r.append(wt,rt.timelines);let xm={instruction:rt,player:Me,element:wt};s.push(xm),rt.queriedElements.forEach(mt=>qn(a,mt,[]).push(Me)),rt.preStyleProps.forEach((mt,ni)=>{if(mt.size){let bn=c.get(ni);bn||c.set(ni,bn=new Set),mt.forEach((ri,qi)=>bn.add(qi))}}),rt.postStyleProps.forEach((mt,ni)=>{let bn=u.get(ni);bn||u.set(ni,bn=new Set),mt.forEach((ri,qi)=>bn.add(qi))})});if(Z.length){let ee=[];Z.forEach(ie=>{ee.push(yH(ie.triggerName,ie.errors))}),Fe.forEach(ie=>ie.destroy()),this.reportError(ee)}let D=new Map,b=new Map;s.forEach(ee=>{let ie=ee.element;r.has(ie)&&(b.set(ie,ie),this._beforeAnimationBuild(ee.player.namespaceId,ee.instruction,D))}),i.forEach(ee=>{let ie=ee.element;this._getPreviousPlayers(ie,!1,ee.namespaceId,ee.triggerName,null).forEach(Me=>{qn(D,ie,[]).push(Me),Me.destroy()})});let C=N.filter(ee=>cP(ee,c,u)),A=new Map;sP(A,this.driver,X,u,Xr).forEach(ee=>{cP(ee,c,u)&&C.push(ee)});let P=new Map;E.forEach((ee,ie)=>{sP(P,this.driver,new Set(ee),c,Gp)}),C.forEach(ee=>{let ie=A.get(ee),se=P.get(ee);A.set(ee,new Map([...ie?.entries()??[],...se?.entries()??[]]))});let T=[],zn=[],Bi={};s.forEach(ee=>{let{element:ie,player:se,instruction:Me}=ee;if(r.has(ie)){if(d.has(ie)){se.onDestroy(()=>Zr(ie,Me.toStyles)),se.disabled=!0,se.overrideTotalTime(Me.totalTime),i.push(se);return}let wt=Bi;if(b.size>1){let pt=ie,nt=[];for(;pt=pt.parentNode;){let rt=b.get(pt);if(rt){wt=rt;break}nt.push(pt)}nt.forEach(rt=>b.set(rt,wt))}let Hn=this._buildAnimation(se.namespaceId,Me,D,o,P,A);if(se.setRealPlayer(Hn),wt===Bi)T.push(se);else{let pt=this.playersByElement.get(wt);pt&&pt.length&&(se.parentPlayer=Lo(pt)),i.push(se)}}else Us(ie,Me.fromStyles),se.onDestroy(()=>Zr(ie,Me.toStyles)),zn.push(se),d.has(ie)&&i.push(se)}),zn.forEach(ee=>{let ie=o.get(ee.element);if(ie&&ie.length){let se=Lo(ie);ee.setRealPlayer(se)}}),i.forEach(ee=>{ee.parentPlayer?ee.syncPlayerEvents(ee.parentPlayer):ee.destroy()});for(let ee=0;ee<N.length;ee++){let ie=N[ee],se=ie[Ar];if(_c(ie,wI),se&&se.hasAnimation)continue;let Me=[];if(a.size){let Hn=a.get(ie);Hn&&Hn.length&&Me.push(...Hn);let pt=this.driver.query(ie,EI,!0);for(let nt=0;nt<pt.length;nt++){let rt=a.get(pt[nt]);rt&&rt.length&&Me.push(...rt)}}let wt=Me.filter(Hn=>!Hn.destroyed);wt.length?i9(this,ie,wt):this.processLeaveNode(ie)}return N.length=0,T.forEach(ee=>{this.players.push(ee),ee.onDone(()=>{ee.destroy();let ie=this.players.indexOf(ee);this.players.splice(ie,1)}),ee.play()}),T}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let c=!o||o==bu;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||s.push(u)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,t,r){let i=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let u=c.element,d=u!==o,f=qn(r,u,[]);this._getPreviousPlayers(u,d,s,a,t.toState).forEach(E=>{let S=E.getRealPlayer();S.beforeDestroy&&S.beforeDestroy(),E.destroy(),f.push(E)})}Us(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,s){let a=t.triggerName,c=t.element,u=[],d=new Set,f=new Set,w=t.timelines.map(S=>{let x=S.element;d.add(x);let N=x[Ar];if(N&&N.removedBeforeQueried)return new Fo(S.duration,S.delay);let k=x!==c,X=o9((r.get(x)||ZH).map(D=>D.getRealPlayer())).filter(D=>{let b=D;return b.element?b.element===x:!1}),K=o.get(x),re=s.get(x),Fe=lP(this._normalizer,S.keyframes,K,re),Z=this._buildPlayer(S,Fe,X);if(S.subTimeline&&i&&f.add(x),k){let D=new Du(e,a,x);D.setRealPlayer(Z),u.push(D)}return Z});u.forEach(S=>{qn(this.playersByQueriedElement,S.element,[]).push(S),S.onDone(()=>t9(this.playersByQueriedElement,S.element,S))}),d.forEach(S=>ir(S,XR));let E=Lo(w);return E.onDestroy(()=>{d.forEach(S=>_c(S,XR)),Zr(c,t.toStyles)}),f.forEach(S=>{qn(i,S,[]).push(E)}),E}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Fo(e.duration,e.delay)}},Du=class{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Fo,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>FI(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){qn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function t9(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function n9(n){return n??null}function Yp(n){return n&&n.nodeType===1}function r9(n){return n=="start"||n=="done"}function oP(n,e){let t=n.style.display;return n.style.display=e??"none",t}function sP(n,e,t,r,i){let o=[];t.forEach(c=>o.push(oP(c)));let s=[];r.forEach((c,u)=>{let d=new Map;c.forEach(f=>{let w=e.computeStyle(u,f,i);d.set(f,w),(!w||w.length==0)&&(u[Ar]=e9,s.push(u))}),n.set(u,d)});let a=0;return t.forEach(c=>oP(c,o[a++])),s}function aP(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),o=new Map;function s(a){if(!a)return r;let c=o.get(a);if(c)return c;let u=a.parentNode;return t.has(u)?c=u:i.has(u)?c=r:c=s(u),o.set(a,c),c}return e.forEach(a=>{let c=s(a);c!==r&&t.get(c).push(a)}),t}function ir(n,e){n.classList?.add(e)}function _c(n,e){n.classList?.remove(e)}function i9(n,e,t){Lo(t).onDone(()=>n.processLeaveNode(e))}function o9(n){let e=[];return wP(n,e),e}function wP(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof Eu?wP(r.players,e):e.push(r)}}function s9(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function cP(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}var wc=class{constructor(e,t,r,i){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(o,s)=>{},this._transitionEngine=new NI(e.body,t,r,i),this._timelineEngine=new RI(e.body,t,r),this._transitionEngine.onRemovalComplete=(o,s)=>this.onRemovalComplete(o,s)}registerTrigger(e,t,r,i,o){let s=e+"-"+i,a=this._triggerCache[s];if(!a){let c=[],u=[],d=gP(this._driver,o,c,u);if(c.length)throw sH(i,c);u.length&&void 0,a=GH(i,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[o,s]=YR(r),a=i;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if(r.charAt(0)=="@"){let[s,a]=YR(r);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function a9(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=_I(e[0]),e.length>1&&(r=_I(e[e.length-1]))):e instanceof Map&&(t=_I(e)),t||r?new OI(n,t,r):null}var OI=class n{static{this.initialStylesByElement=new WeakMap}constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=n.initialStylesByElement.get(e);i||n.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Zr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Zr(this._element,this._initialStyles),this._endStyles&&(Zr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Us(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Us(this._element,this._endStyles),this._endStyles=null),Zr(this._element,this._initialStyles),this._state=3)}};function _I(n){let e=null;return n.forEach((t,r)=>{c9(r)&&(e=e||new Map,e.set(r,t))}),e}function c9(n){return n==="display"||n==="position"}var om=class{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:BI(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},sm=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return uP(e,t)}getParentElement(e){return VI(e)}query(e,t,r){return dP(e,t,r)}computeStyle(e,t,r){return BI(e,t)}animate(e,t,r,i,o,s=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};o&&(c.easing=o);let u=new Map,d=s.filter(E=>E instanceof om);AH(r,i)&&d.forEach(E=>{E.currentSnapshot.forEach((S,x)=>u.set(x,S))});let f=SH(t).map(E=>new Map(E));f=xH(e,f,u);let w=a9(e,f);return new om(e,f,c,w)}};var Jp="@",EP="@.disabled",am=class{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Jp&&t==EP?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},kI=class extends am{constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Jp?t.charAt(1)=="."&&t==EP?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if(t.charAt(0)==Jp){let i=l9(e),o=t.slice(1),s="";return o.charAt(0)!=Jp&&([o,s]=u9(o)),this.engine.listen(this.namespaceId,i,o,s,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,r,a)})}return this.delegate.listen(e,t,r)}};function l9(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function u9(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var cm=class{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,o)=>{let s=o?.parentNode(i);s&&o.removeChild(s,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,d=u.get(i);if(!d){let f=()=>u.delete(i);d=new am(r,i,this.engine,f),u.set(i,d)}return d}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(o,s,e,u.name,u)};return t.data.animation.forEach(a),new kI(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var h9=(()=>{class n extends wc{constructor(t,r,i){super(t,r,i,W(_a,{optional:!0}))}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||n)(U(Bt),U(js),U(Bs))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();function f9(){return new em}function p9(n,e,t){return new cm(n,e,t)}var IP=[{provide:Bs,useFactory:f9},{provide:wc,useClass:h9},{provide:os,useFactory:p9,deps:[Zh,wc,Pe]}],m9=[{provide:js,useFactory:()=>new sm},{provide:ev,useValue:"BrowserAnimations"},...IP],rie=[{provide:js,useClass:UI},{provide:ev,useValue:"NoopAnimations"},...IP];function bP(){return Sa("NgEagerAnimations"),[...m9]}var lm=(()=>{class n{firestore;constructor(t){this.firestore=t}createDocument(t,r){return v(this,null,function*(){let i=dn(jt(this.firestore,t)),o=i.id;return yield ks(i,pe(j({},r),{id:o,createdAt:zp(),updatedAt:zp()})),o})}updateDocument(t,r,i){return v(this,null,function*(){try{let o=dn(this.firestore,t,r);yield FR(o,pe(j({},i),{updatedAt:zp()}))}catch(o){throw console.error("Error updating document:",o),o}})}getDocument(t,r){return v(this,null,function*(){let i=dn(this.firestore,t,r),o=yield Dr(i);return o.exists()?o.data():null})}queryDocuments(t,r,i){return v(this,null,function*(){let o=kt(jt(this.firestore,t),_t(r,"==",i));return(yield Ht(o)).docs.map(a=>j({id:a.id},a.data()))})}queryCollection(t,r,i,o){return v(this,null,function*(){return console.log(`Querying ${t} where ${r} ${i} ${o}`),[]})}static \u0275fac=function(r){return new(r||n)(U(Tt))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ze=(()=>{class n extends lm{COLLECTION="users";createUser(t){return v(this,null,function*(){let r=yield this.createDocument(this.COLLECTION,pe(j({},t),{currentRoute:"/traits",isAnonymous:!0,authId:null,traits:null,attitudes:null,rounds:{}}));return localStorage.setItem("mereka_user_id",r),r})}getUser(t){return v(this,null,function*(){let r=yield this.getDocument(this.COLLECTION,t);return r?pe(j({},r),{id:t}):null})}getUserByAuthId(t){return v(this,null,function*(){try{let r=yield this.queryDocuments(this.COLLECTION,"authId",t);return r.length>0?r[0]:null}catch(r){return console.error("Error getting user by authId:",r),null}})}updateUserAuthId(t,r){return v(this,null,function*(){try{yield this.updateDocument(this.COLLECTION,t,{authId:r,isAnonymous:!1})}catch(i){throw console.error("Error updating user authId:",i),i}})}updateUserTraits(t,r){return v(this,null,function*(){try{yield this.updateDocument(this.COLLECTION,t,{traits:r})}catch(i){throw console.error("Error updating user traits:",i),i}})}updateUserAttitudes(t,r){return v(this,null,function*(){try{yield this.updateDocument(this.COLLECTION,t,{attitudes:r})}catch(i){throw console.error("Error updating user attitudes:",i),i}})}updateUserRound(t,r,i){return v(this,null,function*(){try{let o=yield this.getUser(t);if(!o)throw new Error("User not found");let s=o.rounds||{};s[r]=i,yield this.updateDocument(this.COLLECTION,t,{rounds:s})}catch(o){throw console.error("Error updating user round:",o),o}})}getCurrentUserId(){return localStorage.getItem("mereka_user_id")}clearCurrentUser(){localStorage.removeItem("mereka_user_id")}getUserContext(){let t=localStorage.getItem("userContext");return t?JSON.parse(t):null}getUserTraits(t){return v(this,null,function*(){return(yield this.getUser(t))?.traits||null})}getUserAttitudes(t){return v(this,null,function*(){return(yield this.getUser(t))?.attitudes||null})}updateUser(t,r){return v(this,null,function*(){try{yield this.updateDocument(this.COLLECTION,t,pe(j({},r),{updatedAt:new Date}))}catch(i){throw console.error("Error updating user:",i),i}})}static \u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})();static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Au=(()=>{class n{userService;router;constructor(t,r){this.userService=t,this.router=r}canActivate(){return this.userService.getCurrentUserId()?(this.router.navigate(["/dashboard"]),!1):!0}static \u0275fac=function(r){return new(r||n)(U(ze),U(ke))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function g9(n,e){if(n&1&&(m(0,"div",14)(1,"div"),y(2),g(),m(3,"p",15),y(4),g()()),n&2){let t=e.$implicit;I(),On("flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center "+(t.number===1?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300")),I(),J(" ",t.number," "),I(2),q(t.text)}}var qI=(()=>{class n{steps=[{number:1,text:"Complete a short personality assessment to discover your AI traits"},{number:2,text:"Choose your focus area for the challenge based on your strengths"},{number:3,text:"Compete in three rounds against the AI to test your abilities"},{number:4,text:"Receive your personalized AI profile with detailed insights"},{number:5,text:"Share your results and compare with others in the community"}];static \u0275fac=function(r){return new(r||n)};static \u0275cmp=we({type:n,selectors:[["app-welcome"]],standalone:!0,features:[Ee],decls:23,vars:1,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-4xl","w-full","space-y-8","text-center"],[1,"space-y-4"],[1,"text-6xl","font-bold","text-gray-900","dark:text-white","relative","inline-block"],[1,"absolute","inset-0","blur-lg","bg-blue-400","opacity-20","-z-10"],[1,"text-2xl","text-blue-600","dark:text-blue-400"],[1,"bg-white","dark:bg-gray-800","shadow-lg","rounded-lg","p-8","mt-8"],[1,"space-y-6"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-2","text-lg","text-gray-600","dark:text-gray-300"],[1,"mt-8"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white","mb-6"],["class","flex items-start",4,"ngFor","ngForOf"],["routerLink","/context",1,"inline-flex","items-center","px-6","py-3","border","border-transparent","text-base","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","transition-colors"],[1,"flex","items-start"],[1,"ml-4","text-lg","text-gray-600","dark:text-gray-300"]],template:function(r,i){r&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),y(4," AI Fight Club "),ce(5,"div",4),g(),m(6,"p",5),y(7," Discover Your Competitive Edge in the Age of AI "),g()(),m(8,"div",6)(9,"div",7)(10,"div")(11,"h2",8),y(12," Welcome, Challenger "),g(),m(13,"p",9),y(14," Discover your AI personality traits and challenge the system "),g()(),m(15,"div",10)(16,"h3",11),y(17," How It Works "),g(),m(18,"div",2),H(19,g9,5,4,"div",12),g()(),m(20,"div",10)(21,"a",13),y(22," Get Started "),g()()()()()()),r&2&&(I(19),F("ngForOf",i.steps))},dependencies:[Te,et,Rt,$r]})}return n})();var NP=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(L(mi),L(Vr))}}static{this.\u0275dir=ct({type:n})}}return n})(),vm=(()=>{class n extends NP{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})()}static{this.\u0275dir=ct({type:n,features:[Tn]})}}return n})(),Cc=new te(""),y9={provide:Cc,useExisting:Wn(()=>WI),multi:!0},WI=(()=>{class n extends vm{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})()}static{this.\u0275dir=ct({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&ae("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},features:[Ur([y9]),Tn]})}}return n})(),v9={provide:Cc,useExisting:Wn(()=>Uo),multi:!0};function _9(){let n=wi()?wi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var w9=new te(""),Uo=(()=>{class n extends NP{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!_9())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(L(mi),L(Vr),L(w9,8))}}static{this.\u0275dir=ct({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ae("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Ur([v9]),Tn]})}}return n})();function Vo(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function OP(n){return n!=null&&typeof n.length=="number"}var Nu=new te(""),_m=new te(""),E9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,xr=class{static min(e){return I9(e)}static max(e){return b9(e)}static required(e){return kP(e)}static requiredTrue(e){return C9(e)}static email(e){return S9(e)}static minLength(e){return T9(e)}static maxLength(e){return D9(e)}static pattern(e){return A9(e)}static nullValidator(e){return dm(e)}static compose(e){return BP(e)}static composeAsync(e){return $P(e)}};function I9(n){return e=>{if(Vo(e.value)||Vo(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function b9(n){return e=>{if(Vo(e.value)||Vo(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function kP(n){return Vo(n.value)?{required:!0}:null}function C9(n){return n.value===!0?null:{required:!0}}function S9(n){return Vo(n.value)||E9.test(n.value)?null:{email:!0}}function T9(n){return e=>Vo(e.value)||!OP(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function D9(n){return e=>OP(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function A9(n){if(!n)return dm;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Vo(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function dm(n){return null}function FP(n){return n!=null}function LP(n){return lo(n)?be(n):n}function VP(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function UP(n,e){return e.map(t=>t(n))}function x9(n){return!n.validate}function jP(n){return n.map(e=>x9(e)?e:t=>e.validate(t))}function BP(n){if(!n)return null;let e=n.filter(FP);return e.length==0?null:function(t){return VP(UP(t,e))}}function KI(n){return n!=null?BP(jP(n)):null}function $P(n){if(!n)return null;let e=n.filter(FP);return e.length==0?null:function(t){let r=UP(t,e).map(LP);return _g(r).pipe(ge(VP))}}function QI(n){return n!=null?$P(jP(n)):null}function CP(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function qP(n){return n._rawValidators}function zP(n){return n._rawAsyncValidators}function zI(n){return n?Array.isArray(n)?n:[n]:[]}function hm(n,e){return Array.isArray(n)?n.includes(e):n===e}function SP(n,e){let t=zI(e);return zI(n).forEach(i=>{hm(t,i)||t.push(i)}),t}function TP(n,e){return zI(e).filter(t=>!hm(n,t))}var fm=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=KI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=QI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ui=class extends fm{get formDirective(){return null}get path(){return null}},$s=class extends fm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},pm=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},M9={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},xie=pe(j({},M9),{"[class.ng-submitted]":"isSubmitted"}),ei=(()=>{class n extends pm{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(L($s,2))}}static{this.\u0275dir=ct({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&gi("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Tn]})}}return n})(),wm=(()=>{class n extends pm{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(L(Ui,10))}}static{this.\u0275dir=ct({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&gi("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Tn]})}}return n})();var xu="VALID",um="INVALID",Ec="PENDING",Mu="DISABLED";function YI(n){return(Em(n)?n.validators:n)||null}function R9(n){return Array.isArray(n)?KI(n):n||null}function JI(n,e){return(Em(e)?e.asyncValidators:n)||null}function P9(n){return Array.isArray(n)?QI(n):n||null}function Em(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function HP(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new B(1e3,"");if(!r[t])throw new B(1001,"")}function GP(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new B(1002,"")})}var Ic=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===xu}get invalid(){return this.status===um}get pending(){return this.status==Ec}get disabled(){return this.status===Mu}get enabled(){return this.status!==Mu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(SP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(SP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(TP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(TP(e,this._rawAsyncValidators))}hasValidator(e){return hm(this._rawValidators,e)}hasAsyncValidator(e){return hm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ec,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Mu,this.errors=null,this._forEachChild(r=>{r.disable(pe(j({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(j({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=xu,this._forEachChild(r=>{r.enable(pe(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pe(j({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xu||this.status===Ec)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mu:xu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ec,this._hasOwnPendingAsyncValidator=!0;let t=LP(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new at,this.statusChanges=new at}_calculateStatus(){return this._allControlsDisabled()?Mu:this.errors?um:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ec)?Ec:this._anyControlsHaveStatus(um)?um:xu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Em(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=R9(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=P9(this._rawAsyncValidators)}},bc=class extends Ic{constructor(e,t,r){super(YI(t),JI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){GP(this,!0,e),Object.keys(e).forEach(r=>{HP(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var HI=class extends bc{};var Ou=new te("CallSetDisabledState",{providedIn:"root",factory:()=>Im}),Im="always";function WP(n,e){return[...e.path,n]}function mm(n,e,t=Im){XI(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),O9(n,e),F9(n,e),k9(n,e),N9(n,e)}function DP(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ym(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function gm(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function N9(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function XI(n,e){let t=qP(n);e.validator!==null?n.setValidators(CP(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=zP(n);e.asyncValidator!==null?n.setAsyncValidators(CP(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();gm(e._rawValidators,i),gm(e._rawAsyncValidators,i)}function ym(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=qP(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=zP(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return gm(e._rawValidators,r),gm(e._rawAsyncValidators,r),t}function O9(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&KP(n,e)})}function k9(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&KP(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function KP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function F9(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function QP(n,e){n==null,XI(n,e)}function L9(n,e){return ym(n,e)}function YP(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function V9(n){return Object.getPrototypeOf(n.constructor)===vm}function JP(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function XP(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Uo?t=o:V9(o)?r=o:i=o}),i||r||t||null}function U9(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var j9={provide:Ui,useExisting:Wn(()=>ZI)},Ru=Promise.resolve(),ZI=(()=>{class n extends Ui{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new at,this.form=new bc({},KI(t),QI(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ru.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),mm(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ru.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ru.then(()=>{let r=this._findContainer(t.path),i=new bc({});QP(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ru.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ru.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,JP(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(L(Nu,10),L(_m,10),L(Ou,8))}}static{this.\u0275dir=ct({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ae("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[xt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ur([j9]),Tn]})}}return n})();function AP(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function xP(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Pu=class extends Ic{constructor(e=null,t,r){super(YI(t),JI(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Em(t)&&(t.nonNullable||t.initialValueIsDefault)&&(xP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){AP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){AP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){xP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var B9=n=>n instanceof Pu;var $9={provide:$s,useExisting:Wn(()=>ji)},MP=Promise.resolve(),ji=(()=>{class n extends $s{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Pu,this._registered=!1,this.name="",this.update=new at,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=XP(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),YP(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){mm(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){MP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ho(r);MP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?WP(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(L(Ui,9),L(Nu,10),L(_m,10),L(Cc,10),L(uo,8),L(Ou,8))}}static{this.\u0275dir=ct({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[xt.None,"disabled","isDisabled"],model:[xt.None,"ngModel","model"],options:[xt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ur([$9]),Tn,Lr]})}}return n})(),bm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ct({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var ZP=new te("");var q9={provide:Ui,useExisting:Wn(()=>eb)},eb=(()=>{class n extends Ui{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new at,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ym(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return mm(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){DP(t.control||null,t,!1),U9(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,JP(this.form,this.directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(DP(r||null,t),B9(i)&&(mm(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);QP(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&L9(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){XI(this.form,this),this._oldForm&&ym(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(L(Nu,10),L(_m,10),L(Ou,8))}}static{this.\u0275dir=ct({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ae("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[xt.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ur([q9]),Tn,Lr]})}}return n})();var z9={provide:$s,useExisting:Wn(()=>tb)},tb=(()=>{class n extends $s{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new at,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=XP(this,o)}ngOnChanges(t){this._added||this._setUpControl(),YP(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return WP(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(L(Ui,13),L(Nu,10),L(_m,10),L(Cc,10),L(ZP,8))}}static{this.\u0275dir=ct({type:n,selectors:[["","formControlName",""]],inputs:{name:[xt.None,"formControlName","name"],isDisabled:[xt.None,"disabled","isDisabled"],model:[xt.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Ur([z9]),Tn,Lr]})}}return n})(),H9={provide:Cc,useExisting:Wn(()=>Sc),multi:!0};function eN(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function G9(n){return n.split(":")[0]}var Sc=(()=>{class n extends vm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=eN(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=G9(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})()}static{this.\u0275dir=ct({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ae("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ur([H9]),Tn]})}}return n})(),Cm=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(eN(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(L(Vr),L(mi),L(Sc,9))}}static{this.\u0275dir=ct({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),W9={provide:Cc,useExisting:Wn(()=>tN),multi:!0};function RP(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function K9(n){return n.split(":")[0]}var tN=(()=>{class n extends vm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=K9(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})()}static{this.\u0275dir=ct({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ae("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ur([W9]),Tn]})}}return n})(),Sm=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(RP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(RP(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(L(Vr),L(mi),L(tN,9))}}static{this.\u0275dir=ct({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var Q9=(()=>{class n{constructor(){this._validator=dm}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):dm,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ct({type:n,features:[Lr]})}}return n})();var Y9={provide:Nu,useExisting:Wn(()=>nb),multi:!0};var nb=(()=>{class n extends Q9{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ho,this.createValidator=t=>kP}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})()}static{this.\u0275dir=ct({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&sl("required",i._enabled?"":null)},inputs:{required:"required"},features:[Ur([Y9]),Tn]})}}return n})();var nN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Vt({type:n})}static{this.\u0275inj=Lt({})}}return n})(),GI=class extends Ic{constructor(e,t,r){super(YI(t),JI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){GP(this,!1,e),e.forEach((r,i)=>{HP(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function PP(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var rN=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return PP(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new bc(i,o)}record(t,r=null){let i=this._reduceControls(t);return new HI(i,r)}control(t,r,i){let o={};return this.useNonNullable?(PP(r)?o=r:(o.validators=r,o.asyncValidators=i),new Pu(t,pe(j({},o),{nonNullable:!0}))):new Pu(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new GI(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Pu)return t;if(t instanceof Ic)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var or=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ou,useValue:t.callSetDisabledState??Im}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Vt({type:n})}static{this.\u0275inj=Lt({imports:[nN]})}}return n})(),iN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ZP,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ou,useValue:t.callSetDisabledState??Im}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Vt({type:n})}static{this.\u0275inj=Lt({imports:[nN]})}}return n})();var oN=(()=>{class n{autocompleteService;placesService;constructor(){this.initAutocompleteService()}initAutocompleteService(){typeof google<"u"&&google.maps&&(this.autocompleteService=new google.maps.places.AutocompleteService,this.placesService=new google.maps.places.PlacesService(document.createElement("div")))}getPlacePredictions(t){return this.autocompleteService?be(new Promise((r,i)=>{this.autocompleteService.getPlacePredictions({input:t},(o,s)=>{s===google.maps.places.PlacesServiceStatus.OK?r(o):r([])})})):oe([])}getPlaceDetails(t){return this.placesService?be(new Promise((r,i)=>{this.placesService.getDetails({placeId:t},(o,s)=>{s===google.maps.places.PlacesServiceStatus.OK?r(o):r(null)})})):oe(null)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function X9(n,e){n&1&&(m(0,"span"),y(1,"Name is required"),g())}function Z9(n,e){n&1&&(m(0,"span"),y(1,"Name must be at least 2 characters"),g())}function eG(n,e){if(n&1&&(m(0,"div",26),H(1,X9,2,0,"span",24)(2,Z9,2,0,"span",24),g()),n&2){let t=G();I(),F("ngIf",t.formControls.name.errors==null?null:t.formControls.name.errors.required),I(),F("ngIf",t.formControls.name.errors==null?null:t.formControls.name.errors.minlength)}}function tG(n,e){n&1&&(m(0,"span"),y(1,"Email is required"),g())}function nG(n,e){n&1&&(m(0,"span"),y(1,"Please enter a valid email"),g())}function rG(n,e){if(n&1&&(m(0,"div",26),H(1,tG,2,0,"span",24)(2,nG,2,0,"span",24),g()),n&2){let t=G();I(),F("ngIf",t.formControls.email.errors==null?null:t.formControls.email.errors.required),I(),F("ngIf",t.formControls.email.errors==null?null:t.formControls.email.errors.email)}}function iG(n,e){n&1&&(m(0,"span"),y(1,"Professional title is required"),g())}function oG(n,e){n&1&&(m(0,"span"),y(1,"Professional title must be at least 2 characters"),g())}function sG(n,e){if(n&1&&(m(0,"div",26),H(1,iG,2,0,"span",24)(2,oG,2,0,"span",24),g()),n&2){let t=G();I(),F("ngIf",t.formControls.professionalTitle.errors==null?null:t.formControls.professionalTitle.errors.required),I(),F("ngIf",t.formControls.professionalTitle.errors==null?null:t.formControls.professionalTitle.errors.minlength)}}function aG(n,e){if(n&1){let t=He();m(0,"li",30),ae("click",function(){let i=Le(t).$implicit,o=G(2);return Ve(o.selectLocation(i))}),y(1),g()}if(n&2){let t=e.$implicit;I(),J(" ",t.description," ")}}function cG(n,e){if(n&1&&(m(0,"div",27)(1,"ul",28),H(2,aG,2,1,"li",29),g()()),n&2){let t=G();I(2),F("ngForOf",t.locationSuggestions)}}function lG(n,e){n&1&&(m(0,"span"),y(1,"Location is required"),g())}function uG(n,e){n&1&&(m(0,"span"),y(1,"Location must be at least 2 characters"),g())}function dG(n,e){if(n&1&&(m(0,"div",26),H(1,lG,2,0,"span",24)(2,uG,2,0,"span",24),g()),n&2){let t=G();I(),F("ngIf",t.formControls.location.errors==null?null:t.formControls.location.errors.required),I(),F("ngIf",t.formControls.location.errors==null?null:t.formControls.location.errors.minlength)}}function hG(n,e){if(n&1&&(m(0,"span"),y(1),g()),n&2){let t=G();I(),q(t.isEditMode?"Update Profile":"Get Started")}}function fG(n,e){if(n&1&&(m(0,"span",31),Yt(),m(1,"svg",32),ce(2,"circle",33)(3,"path",34),g(),y(4),g()),n&2){let t=G();I(4),J(" ",t.isEditMode?"Updating...":"Creating..."," ")}}var sN=(()=>{class n{router;route;userService;googleMapsService;fb;contextForm;isSubmitting=!1;locationSuggestions=[];showSuggestions=!1;isEditMode=!1;constructor(t,r,i,o,s){this.router=t,this.route=r,this.userService=i,this.googleMapsService=o,this.fb=s,this.contextForm=this.fb.group({name:["",[xr.required,xr.minLength(2)]],email:["",[xr.required,xr.email]],professionalTitle:["",[xr.required,xr.minLength(2)]],location:["",[xr.required,xr.minLength(2)]]})}ngOnInit(){return v(this,null,function*(){this.setupLocationAutocomplete(),yield this.loadExistingUserData()})}loadExistingUserData(){return v(this,null,function*(){let t=this.userService.getCurrentUserId();if(t)try{let r=yield this.userService.getUser(t);r&&(this.isEditMode=!0,this.contextForm.patchValue({name:r.name,email:r.email,professionalTitle:r.professionalTitle,location:r.location},{emitEvent:!1}))}catch(r){console.error("Error loading user data:",r)}})}setupLocationAutocomplete(){this.contextForm.get("location")?.valueChanges.pipe(wg(300),Ig(),ot(t=>this.googleMapsService.getPlacePredictions(t))).subscribe(t=>{this.locationSuggestions=t,this.showSuggestions=t.length>0})}get formControls(){return this.contextForm.controls}selectLocation(t){this.showSuggestions=!1,this.contextForm.patchValue({location:t.description},{emitEvent:!1})}onSubmit(){return v(this,null,function*(){if(!(this.contextForm.invalid||this.isSubmitting)){this.isSubmitting=!0;try{let t=this.userService.getCurrentUserId();if(!t)yield this.userService.createUser(this.contextForm.value);else{yield this.userService.updateUser(t,this.contextForm.value),window.history.back();return}let r=this.route.snapshot.data.next;this.router.navigate([r])}catch(t){console.error("Error saving context:",t)}finally{this.isSubmitting=!1}}})}static \u0275fac=function(r){return new(r||n)(L(ke),L(yt),L(ze),L(oN),L(rN))};static \u0275cmp=we({type:n,selectors:[["app-context"]],standalone:!0,features:[Ee],decls:42,vars:19,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-4xl","w-full","space-y-8"],[1,"text-center"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-2","text-lg","text-gray-600","dark:text-gray-400"],[1,"container","mx-auto","px-4","py-8"],[1,"max-w-2xl","mx-auto","bg-white","rounded-lg","shadow-lg","p-8"],[1,"text-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-2"],[1,"space-y-6",3,"ngSubmit","formGroup"],["for","name",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","name","formControlName","name",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","sm:text-sm"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","formControlName","email",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","sm:text-sm"],["for","professionalTitle",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","professionalTitle","formControlName","professionalTitle",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","sm:text-sm"],[1,"relative"],["for","location",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","location","formControlName","location",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","sm:text-sm"],["class","absolute z-10 w-full mt-1 bg-white rounded-md shadow-lg",4,"ngIf"],[1,"flex","justify-center"],["type","submit",1,"w-full","flex","justify-center","py-3","px-4","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:opacity-50",3,"disabled"],[4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"text-red-500","text-sm","mt-1"],[1,"absolute","z-10","w-full","mt-1","bg-white","rounded-md","shadow-lg"],[1,"max-h-60","rounded-md","py-1","text-base","ring-1","ring-black","ring-opacity-5","overflow-auto","focus:outline-none","sm:text-sm"],["class","cursor-pointer select-none relative py-2 pl-3 pr-9 hover:bg-indigo-50",3,"click",4,"ngFor","ngForOf"],[1,"cursor-pointer","select-none","relative","py-2","pl-3","pr-9","hover:bg-indigo-50",3,"click"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(r,i){r&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),y(4," Personal Context "),g(),m(5,"p",4),y(6," Before we assess your human edge, we need to understand your professional context. "),ce(7,"br"),y(8," This helps us provide more relevant insights tailored to your specific situation. "),g()(),m(9,"div",5)(10,"div",6)(11,"div",7)(12,"h1",8),y(13),g(),m(14,"p",9),y(15),g()(),m(16,"form",10),ae("ngSubmit",function(){return i.onSubmit()}),m(17,"div")(18,"label",11),y(19,"Name"),g(),ce(20,"input",12),H(21,eG,3,2,"div",13),g(),m(22,"div")(23,"label",14),y(24,"Email"),g(),ce(25,"input",15),H(26,rG,3,2,"div",13),g(),m(27,"div")(28,"label",16),y(29,"Professional Title"),g(),ce(30,"input",17),H(31,sG,3,2,"div",13),g(),m(32,"div",18)(33,"label",19),y(34,"Location"),g(),ce(35,"input",20),H(36,cG,3,1,"div",21)(37,dG,3,2,"div",13),g(),m(38,"div",22)(39,"button",23),H(40,hG,2,1,"span",24)(41,fG,5,1,"span",25),g()()()()()()()),r&2&&(I(13),q(i.isEditMode?"Update Your Profile":"Welcome to Mereka AI"),I(2),q(i.isEditMode?"Update your information below":"Please tell us about yourself"),I(),F("formGroup",i.contextForm),I(4),gi("border-red-500",i.formControls.name.invalid&&i.formControls.name.touched),I(),F("ngIf",i.formControls.name.invalid&&i.formControls.name.touched),I(4),gi("border-red-500",i.formControls.email.invalid&&i.formControls.email.touched),I(),F("ngIf",i.formControls.email.invalid&&i.formControls.email.touched),I(4),gi("border-red-500",i.formControls.professionalTitle.invalid&&i.formControls.professionalTitle.touched),I(),F("ngIf",i.formControls.professionalTitle.invalid&&i.formControls.professionalTitle.touched),I(4),gi("border-red-500",i.formControls.location.invalid&&i.formControls.location.touched),I(),F("ngIf",i.showSuggestions),I(),F("ngIf",i.formControls.location.invalid&&i.formControls.location.touched),I(2),F("disabled",i.contextForm.invalid||i.isSubmitting),I(),F("ngIf",!i.isSubmitting),I(),F("ngIf",i.isSubmitting))},dependencies:[Te,et,lt,or,bm,Uo,ei,wm,iN,eb,tb]})}return n})();var aN=()=>[];function pG(n,e){if(n&1&&(kn(0),m(1,"div",18)(2,"div"),y(3),g()(),Fn()),n&2){let t=e.index,r=G();I(2),On("w-8 h-8 flex items-center justify-center rounded-full text-sm font-medium "+(t<r.currentQuestionIndex?"bg-blue-500 text-white":t===r.currentQuestionIndex?"bg-blue-500 text-white ring-2 ring-blue-300":"bg-blue-100 text-blue-600")),I(),J(" ",t+1," ")}}function mG(n,e){if(n&1){let t=He();kn(0),m(1,"button",23),ae("click",function(){let i=Le(t).index,o=G(2);return Ve(o.onAnswerChange(i+o.question.options.min))}),y(2),g(),Fn()}if(n&2){let t=e.index,r=G(2);I(),On("w-12 h-12 rounded-full text-lg font-medium transition-colors duration-200 "+(r.answer===t+r.question.options.min?"bg-blue-500 text-white transform scale-110":"bg-gray-100 text-gray-600 hover:bg-blue-100 hover:scale-105")),I(),J(" ",t+r.question.options.min," ")}}function gG(n,e){if(n&1&&(m(0,"div")(1,"h3",19),y(2),g(),m(3,"div",20)(4,"span",21),y(5),g(),m(6,"div",22),H(7,mG,3,3,"ng-container",6),g(),m(8,"span",21),y(9),g()()()),n&2){let t=G();I(2),q(t.question.title),I(3),q(t.question.options.minLabel),I(2),F("ngForOf",_r(4,aN).constructor(t.question.options.max-t.question.options.min+1)),I(2),q(t.question.options.maxLabel)}}function yG(n,e){if(n&1&&(m(0,"div",24)(1,"div",25)(2,"div",26)(3,"h4",27),y(4),g(),m(5,"p",28),y(6),g()()()()),n&2){let t=G();I(4),q(t.question.about.title),I(2),q(t.question.about.description)}}var Tm=(()=>{class n{currentQuestionIndex=0;totalQuestions=5;question;answer;answerChange=new at;nextQuestion=new at;previousQuestion=new at;get progressPercentage(){return(this.currentQuestionIndex+1)/this.totalQuestions*100}onAnswerChange(t){this.answerChange.emit(t)}onNext(){this.nextQuestion.emit()}onPrevious(){this.previousQuestion.emit()}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=we({type:n,selectors:[["app-questionnaire"]],inputs:{currentQuestionIndex:"currentQuestionIndex",totalQuestions:"totalQuestions",question:"question",answer:"answer"},outputs:{answerChange:"answerChange",nextQuestion:"nextQuestion",previousQuestion:"previousQuestion"},standalone:!0,features:[Ee],decls:23,vars:12,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-4xl","w-full","space-y-8"],[1,"relative"],[1,"overflow-hidden","h-2","mb-4","text-xs","flex","rounded","bg-blue-100"],[1,"shadow-none","flex","flex-col","text-center","whitespace-nowrap","text-white","justify-center","bg-blue-500"],[1,"flex","justify-between","-mt-2"],[4,"ngFor","ngForOf"],[1,"text-right","text-sm","text-gray-500","mt-2"],[1,"bg-white","shadow-lg","rounded-lg","p-8"],[1,"space-y-6"],[1,"text-center","mb-8"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"text-gray-600","mt-2"],[4,"ngIf"],["class","mt-8 pt-6 border-t border-gray-200",4,"ngIf"],[1,"flex","justify-between","mt-6"],[1,"px-4","py-2","border","border-gray-300","rounded-md","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors","duration-200",3,"click","disabled"],[1,"px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-blue-600","hover:bg-blue-700","transition-colors","duration-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"flex","flex-col","items-center"],[1,"text-xl","font-medium","text-gray-900","mb-4"],[1,"flex","justify-between","items-center","space-x-4"],[1,"text-sm","text-gray-500"],[1,"flex-1","flex","justify-between"],[3,"click"],[1,"mt-8","pt-6","border-t","border-gray-200"],[1,"flex","items-start","space-x-3"],[1,"flex-1"],[1,"text-lg","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"]],template:function(r,i){r&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),ce(4,"div",4),g(),m(5,"div",5),H(6,pG,4,3,"ng-container",6),g(),m(7,"div",7),y(8),g()(),m(9,"div",8)(10,"div",9)(11,"div",10)(12,"h2",11),y(13),g(),m(14,"p",12),y(15),g()(),H(16,gG,10,5,"div",13)(17,yG,7,2,"div",14),g()(),m(18,"div",15)(19,"button",16),ae("click",function(){return i.onPrevious()}),y(20," Previous "),g(),m(21,"button",17),ae("click",function(){return i.onNext()}),y(22),g()()()()),r&2&&(I(4),vr("width",i.progressPercentage,"%"),I(2),F("ngForOf",_r(11,aN).constructor(i.totalQuestions)),I(2),J(" ",i.progressPercentage,"% Complete "),I(5),J("Question ",i.currentQuestionIndex+1,""),I(2),q(i.question.subtitle),I(),F("ngIf",i.question.type==="rating"&&i.question.options),I(),F("ngIf",i.question.about),I(2),F("disabled",i.currentQuestionIndex===0),I(2),F("disabled",i.answer===void 0||i.answer===null),I(),J(" ",i.currentQuestionIndex===i.totalQuestions-1?"Finish":"Next Question"," "))},dependencies:[Te,et,lt,or],styles:["@keyframes _ngcontent-%COMP%_progress{0%{width:0}to{width:100%}}.rating-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.rating-button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.rating-button.selected[_ngcontent-%COMP%]{transform:scale(1.1)}.question-container[_ngcontent-%COMP%], .step-indicator[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.step-indicator.completed[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.step-indicator.current[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff;box-shadow:0 0 0 3px #3b82f680}.about-section[_ngcontent-%COMP%]{border-left:4px solid #3B82F6;padding-left:1rem;margin-top:2rem}.about-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#1f2937;margin-bottom:.5rem}.about-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem;line-height:1.5}"]})}return n})();var cN=(()=>{class n{router;route;userService;currentQuestionIndex=0;answers=[];isSubmitting=!1;isLoading=!0;questions=[{id:1,title:"How creative do you consider yourself to be?",subtitle:"Creativity Assessment",type:"rating",options:{min:1,max:5,minLabel:"Not creative",maxLabel:"Highly creative"},about:{title:"About creativity",description:"Your ability to generate novel ideas and solutions."}},{id:2,title:"How empathetic are you toward others?",subtitle:"Empathy Assessment",type:"rating",options:{min:1,max:5,minLabel:"Not empathetic",maxLabel:"Highly empathetic"},about:{title:"About empathy",description:"Your ability to understand and share the feelings of others."}},{id:3,title:"How analytical is your thinking style?",subtitle:"Analytical Thinking Assessment",type:"rating",options:{min:1,max:5,minLabel:"Not analytical",maxLabel:"Highly analytical"},about:{title:"About analytical thinking",description:"Your tendency to break down complex problems into components."}},{id:4,title:"How adaptable are you to new situations?",subtitle:"Adaptability Assessment",type:"rating",options:{min:1,max:5,minLabel:"Not adaptable",maxLabel:"Highly adaptable"},about:{title:"About adaptability",description:"Your ability to adjust to new conditions or environments."}},{id:5,title:"How would you rate your communication skills?",subtitle:"Communication Assessment",type:"rating",options:{min:1,max:5,minLabel:"Basic",maxLabel:"Advanced"},about:{title:"About communication",description:"Your ability to convey ideas clearly and effectively."}}];constructor(t,r,i){this.router=t,this.route=r,this.userService=i,this.answers=new Array(this.questions.length).fill(null)}ngOnInit(){return v(this,null,function*(){let t=this.userService.getCurrentUserId();if(!t){this.router.navigate(["/context"]);return}try{let r=yield this.userService.getUserTraits(t);r&&r.answers&&(this.answers=this.questions.map(i=>{let o=r.answers.find(s=>s.questionId===i.id);return o?o.answer:null}))}catch(r){console.error("Error loading saved traits:",r)}finally{this.isLoading=!1}})}onAnswerChange(t){this.answers[this.currentQuestionIndex]=t}onNextQuestion(){return v(this,null,function*(){if(!this.isSubmitting)if(this.currentQuestionIndex<this.questions.length-1)this.currentQuestionIndex++;else{this.isSubmitting=!0;try{let t=this.userService.getCurrentUserId();if(!t){this.router.navigate(["/context"]);return}let r={answers:this.answers.map((o,s)=>({questionId:this.questions[s].id,answer:o})).filter(o=>o.answer!==null),questions:this.questions};yield this.userService.updateUserTraits(t,r);let i=this.route.snapshot.data.next;this.router.navigate(["/"+i])}catch(t){console.error("Error saving traits data:",t)}finally{this.isSubmitting=!1}}})}onPreviousQuestion(){this.currentQuestionIndex>0&&this.currentQuestionIndex--}static \u0275fac=function(r){return new(r||n)(L(ke),L(yt),L(ze))};static \u0275cmp=we({type:n,selectors:[["app-traits"]],standalone:!0,features:[Ee],decls:1,vars:4,consts:[[3,"answerChange","nextQuestion","previousQuestion","currentQuestionIndex","totalQuestions","question","answer"]],template:function(r,i){r&1&&(m(0,"app-questionnaire",0),ae("answerChange",function(s){return i.onAnswerChange(s)})("nextQuestion",function(){return i.onNextQuestion()})("previousQuestion",function(){return i.onPreviousQuestion()}),g()),r&2&&F("currentQuestionIndex",i.currentQuestionIndex)("totalQuestions",i.questions.length)("question",i.questions[i.currentQuestionIndex])("answer",i.answers[i.currentQuestionIndex])},dependencies:[Te,Tm],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}"]})}return n})();var lN=(()=>{class n{router;route;userService;currentQuestionIndex=0;answers=[];isSubmitting=!1;isLoading=!0;questions=[{id:1,title:"How do you feel about working with AI?",subtitle:"AI Attitude Assessment",type:"rating",options:{min:1,max:5,minLabel:"Very uncomfortable",maxLabel:"Very comfortable"},about:{title:"About AI collaboration",description:"Your comfort level with AI-assisted work environments."}},{id:2,title:"How do you view the role of AI in decision-making?",subtitle:"Decision-making Assessment",type:"rating",options:{min:1,max:5,minLabel:"Supportive role only",maxLabel:"Equal partnership"},about:{title:"About AI decision-making",description:"Your perspective on AI's role in decision-making processes."}},{id:3,title:"How do you feel about AI replacing human tasks?",subtitle:"Task Automation Assessment",type:"rating",options:{min:1,max:5,minLabel:"Very concerned",maxLabel:"Very optimistic"},about:{title:"About task automation",description:"Your attitude towards AI automating human tasks."}},{id:4,title:"How do you view AI in terms of ethics?",subtitle:"Ethical Assessment",type:"rating",options:{min:1,max:5,minLabel:"Major concerns",maxLabel:"Minor concerns"},about:{title:"About AI ethics",description:"Your perspective on ethical considerations in AI."}},{id:5,title:"How do you feel about AI learning from human behavior?",subtitle:"Learning Assessment",type:"rating",options:{min:1,max:5,minLabel:"Very cautious",maxLabel:"Very supportive"},about:{title:"About AI learning",description:"Your attitude towards AI learning from human behavior."}}];constructor(t,r,i){this.router=t,this.route=r,this.userService=i,this.answers=new Array(this.questions.length).fill(null)}ngOnInit(){return v(this,null,function*(){let t=this.userService.getCurrentUserId();if(!t){this.router.navigate(["/context"]);return}try{let r=yield this.userService.getUserAttitudes(t);r&&r.answers&&(this.answers=this.questions.map(i=>{let o=r.answers.find(s=>s.questionId===i.id);return o?o.answer:null}))}catch(r){console.error("Error loading saved attitudes:",r)}finally{this.isLoading=!1}})}onAnswerChange(t){this.answers[this.currentQuestionIndex]=t}onNextQuestion(){return v(this,null,function*(){if(!this.isSubmitting)if(this.currentQuestionIndex<this.questions.length-1)this.currentQuestionIndex++;else{this.isSubmitting=!0;try{let t=this.userService.getCurrentUserId();if(!t){this.router.navigate(["/context"]);return}let r={answers:this.answers.map((o,s)=>({questionId:this.questions[s].id,answer:o})).filter(o=>o.answer!==null),questions:this.questions};yield this.userService.updateUserAttitudes(t,r);let i=this.route.snapshot.data.next;this.router.navigate(["/"+i])}catch(t){console.error("Error saving attitudes data:",t)}finally{this.isSubmitting=!1}}})}onPreviousQuestion(){this.currentQuestionIndex>0&&this.currentQuestionIndex--}static \u0275fac=function(r){return new(r||n)(L(ke),L(yt),L(ze))};static \u0275cmp=we({type:n,selectors:[["app-attitudes"]],standalone:!0,features:[Ee],decls:1,vars:4,consts:[[3,"answerChange","nextQuestion","previousQuestion","currentQuestionIndex","totalQuestions","question","answer"]],template:function(r,i){r&1&&(m(0,"app-questionnaire",0),ae("answerChange",function(s){return i.onAnswerChange(s)})("nextQuestion",function(){return i.onNextQuestion()})("previousQuestion",function(){return i.onPreviousQuestion()}),g()),r&2&&F("currentQuestionIndex",i.currentQuestionIndex)("totalQuestions",i.questions.length)("question",i.questions[i.currentQuestionIndex])("answer",i.answers[i.currentQuestionIndex])},dependencies:[Te,Tm],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}"]})}return n})();var Tc=(()=>{class n{http;userService;firestore;API_URL=`${rr.apiUrl}/processRequest`;TIMEOUT_MS=3e5;constructor(t,r,i){this.http=t,this.userService=r,this.firestore=i}generateRound(t,r,i,o){return v(this,null,function*(){try{let s=this.userService.getCurrentUserId();if(!s)throw new Error("No user ID found");let a=yield this.userService.getUser(s);if(!a)throw new Error("User not found");if(!t)throw new Error("Focus area is required");let c={answers:a.traits?.answers?.map(k=>({questionId:k.questionId,answer:k.answer}))||[],questions:a.traits?.questions?.map(k=>({id:k.id,text:k.title,options:k.options?.minLabel&&k.options?.maxLabel?[k.options.minLabel,k.options.maxLabel]:[]}))||[]},u={answers:a.attitudes?.answers?.map(k=>({questionId:k.questionId,answer:k.answer}))||[],questions:a.attitudes?.questions?.map(k=>({id:k.id,text:k.title,options:k.options?.minLabel&&k.options?.maxLabel?[k.options.minLabel,k.options.maxLabel]:[]}))||[]},d=this.createStructuredRequest({userId:s,focusType:t,context:i||`Generate a challenge focused on ${t} for round ${r}`,userProfile:{name:a.name,email:a.email,professionalTitle:a.professionalTitle,location:a.location,currentRoute:"/rounds",isAnonymous:!1},traits:c,attitudes:u,options:this.getRoundGenerationOptions(r,o),previousRounds:o||[]}),f=yield this.http.post(this.API_URL,d).pipe(ai(this.TIMEOUT_MS),on(k=>(console.error("Error generating round:",k),Kt(k)))).toPromise();if(!f?.success)throw new Error("Failed to generate round");let E=f.data.choices[0].message.content.replace(/```json/g,"").replace(/```/g,"").trim(),S;try{S=JSON.parse(E)[0]}catch(k){throw console.error("Error parsing question:",k),new Error("Invalid question response format")}let x="round-"+Date.now(),N={id:"challenge-1",question:S,type:"open-ended",points:this.calculatePoints(r)};return{id:x,title:`${t.charAt(0).toUpperCase()+t.slice(1)} Challenge`,description:`A challenge focused on ${t}`,type:"scenario",context:i||"general",difficulty:parseInt(r),challenges:[N],estimatedTime:20}}catch(s){throw console.error("Error generating round:",s),s}})}getUserChallengeHistory(t){return v(this,null,function*(){try{let r=jt(this.firestore,"challenges"),i=kt(r,_t("userId","==",t),vc("createdAt","desc"),yc(10));return(yield Ht(i)).docs.map(s=>{let a=s.data();return pe(j({id:s.id},a),{question:a.question,answer:a.answer,evaluation:a.evaluation})})}catch(r){return console.error("Error fetching challenge history:",r),[]}})}getRoundGenerationOptions(t,r){let i=this.calculateDifficulty(t,r),o=this.calculateCreativeVariation(t,r);return{roundTypes:["scenario","reflection","problem-solving","decision-making","self-assessment","hypothetical","analytical","creative"],difficultyLevels:[i],contextCategories:["personal","professional","educational","social","emotional","ethical","cultural","environmental"],focusAreas:["leadership","communication","teamwork","problem-solving","adaptability","creativity","emotional intelligence","critical thinking"],challengeFormats:["open-ended","scenario-based","reflection","self-assessment","hypothetical","analytical","creative"],answerTypes:["text","rating","ranking"]}}calculateDifficulty(t,r){let i=parseInt(t);if(i===1)return"beginner";if(i===2)return"intermediate";if(i===3)return"advanced";if(r&&r.length>0){let o=r[r.length-1];if(o.evaluation?.metrics?.overall>=80)return"advanced";if(o.evaluation?.metrics?.overall>=60)return"intermediate"}return"intermediate"}calculateCreativeVariation(t,r){let i=parseInt(t);if(i===1)return .6;if(i===2)return .7;if(i===3)return .8;if(r&&r.length>0){let o=r[r.length-1];if(o.evaluation?.metrics?.overall>=80)return .9;if(o.evaluation?.metrics?.overall>=60)return .8}return .7}calculatePoints(t){return 10+parseInt(t)*5}createStructuredRequest(t){let r=`### CHALLENGE GENERATION TASK

`;if(r+=`Generate a challenge for effective AI communication based on the user's profile and history. The challenge should be appropriate for the specified difficulty level and focus area.

`,r+=`### USER PROFILE
`,t.userProfile?.professionalTitle&&(r+=`Professional Title: ${t.userProfile.professionalTitle}
`),t.userProfile?.location&&(r+=`Location: ${t.userProfile.location}
`),t.traits&&Object.keys(t.traits).length>0){r+=`
Personality Traits (scale 1-10):
`;for(let[a,c]of Object.entries(t.traits))if(a==="answers"&&Array.isArray(c)){let u=c.map(d=>d.answer).join(", ");r+=`- Trait Scores: ${u}
`}else if(a==="questions"&&Array.isArray(c)){let u=c.map(d=>d.subtitle?`${d.title}: ${d.subtitle}`:d.title).join(`
  `);r+=`- Trait Questions:
  ${u}
`}}if(t.attitudes&&Object.keys(t.attitudes).length>0){r+=`
Attitudes Toward AI (scale 1-10):
`;for(let[a,c]of Object.entries(t.attitudes))if(a==="answers"&&Array.isArray(c)){let u=c.map(d=>d.answer).join(", ");r+=`- Attitude Scores: ${u}
`}else if(a==="questions"&&Array.isArray(c)){let u=c.map(d=>d.subtitle?`${d.title}: ${d.subtitle}`:d.title).join(`
  `);r+=`- Attitude Questions:
  ${u}
`}}r+=`
`,r+=`### CHALLENGE PARAMETERS
`,r+=`Focus Area: ${t.focusType}
`,r+=`Difficulty: ${t.options.difficultyLevels[0]}
`,t.context&&(r+=`Context: ${t.context}
`),r+=`
`,t.previousRounds&&t.previousRounds.length>0&&(r+=`### PREVIOUS ROUNDS
`,t.previousRounds.forEach((a,c)=>{r+=`Round ${c+1}:
`,a.question&&(r+=`- Question: ${a.question}
`),a.answer&&(r+=`- User's Answer: ${a.answer}
`),a.evaluation&&(r+=`- Evaluation: ${JSON.stringify(a.evaluation)}
`),r+=`
`})),r+=`### CREATIVITY GUIDANCE
`;let i=this.calculateCreativeVariation("1",t.previousRounds);return r+=`- Variation level: ${Math.floor(i*100)}%
`,i>.8?r+=`- Generate highly creative and unique challenges.
`:i>.6?r+=`- Balance creativity with structured learning.
`:r+=`- Focus on foundational concepts with moderate creativity.
`,r+=`
`,r+=`### ADAPTATION GUIDANCE
`,r+=`- Create a challenge that builds on the user's previous performance.
`,r+=`- Consider the patterns in previous rounds when generating the challenge.
`,r+=`- Ensure appropriate difficulty for the current round.
`,t.previousRounds&&t.previousRounds.length>0&&(r+=`- Reference patterns from the user's previous rounds when relevant.
`),r+=`
`,r+=`### RESPONSE FORMAT
`,r+=`Return a single challenge question as a JSON array with one string element. The question should:
`,r+=`1. Be clear and concise
`,r+=`2. Be open-ended
`,r+=`3. Be appropriate for the specified difficulty level
`,r+=`4. Focus on the specified focus area
`,r+=`5. Encourage thoughtful responses

`,r+=`Example format:
`,r+=`["Your challenge question here"]

`,{type:"generateChallenge",model:"gpt-4o",messages:[{role:"system",content:`You are an AI challenge creator specializing in ${t.focusType} challenges. Your task is to generate an engaging and appropriately challenging question that helps users improve their interaction with AI systems.`},{role:"user",content:r}],temperature:.5}}static \u0275fac=function(r){return new(r||n)(U(Er),U(ze),U(Tt))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Dc=(()=>{class n{http;userService;CLOUD_FUNCTION_URL=`${rr.apiUrl}/processRequest`;MAX_RETRIES=3;TIMEOUT_MS=3e4;constructor(t,r){this.http=t,this.userService=r}evaluateResponse(t){return v(this,null,function*(){let r=yield this.userService.getUser(t.userId);if(!r)throw new Error("User profile not found");let i=this.buildEvaluationPrompt(t,r),o=yield this.callCloudFunctionWithRetry(i);if(!this.isValidEvaluationResponse(o))throw new Error("Invalid evaluation response structure");return o.badges=this.assignBadges(o.metrics),o})}buildEvaluationPrompt(t,r){let i=this.getCategoryWeights(t),o=this.getEvaluationHistory(t.userId),a=[this.buildHeaderSection(),this.buildChallengeSection(t),this.buildUserContextSection(r),this.buildEvaluationHistorySection(o),this.buildUserResponseSection(t.userResponse),this.buildCriteriaSection(i),this.buildStrengthAnalysisSection(),this.buildImprovementPlanSection(),this.buildGrowthTrackingSection(o),this.buildRecommendationsSection(),this.buildResponseFormatSection(i)].filter(Boolean).join(`

`);return{model:"gpt-4o",messages:[{role:"system",content:this.buildDynamicSystemMessage(t,r)},{role:"user",content:a}],temperature:.4}}buildHeaderSection(){return`### EVALUATION TASK

Evaluate the user's response to the challenge with detailed scoring in multiple categories, personalized feedback, and growth tracking.`}buildChallengeSection(t){let r=["### CHALLENGE INFORMATION"];return r.push(`Question: ${t.question}`),r.push(`Round Number: ${t.roundNumber}`),r.push(`AI Response: ${t.aiResponse}`),r.join(`
`)}buildUserContextSection(t){if(!t||Object.keys(t).length===0)return"";let r=["### USER CONTEXT"];return t.name&&r.push(`Name: ${t.name}`),t.email&&r.push(`User ID: ${t.email}`),t.skillLevel&&r.push(`Skill Level: ${t.skillLevel}`),t.focusAreas?.length>0&&r.push(`Focus Areas: ${t.focusAreas.join(", ")}`),r.join(`
`)}buildEvaluationHistorySection(t){if(!t||Object.keys(t).length===0)return"";let r=["### PREVIOUS EVALUATION DATA"];return t.previousScore!==void 0&&r.push(`Previous Overall Score: ${t.previousScore}`),t.previousCategoryScores&&(r.push("Previous Category Scores:"),Object.entries(t.previousCategoryScores).forEach(([i,o])=>{r.push(`- ${i}: ${o}`)})),t.consistentStrengths&&t.consistentStrengths.length>0&&r.push(`Consistent Strengths: ${t.consistentStrengths.join(", ")}`),t.persistentWeaknesses&&t.persistentWeaknesses.length>0&&r.push(`Areas Needing Improvement: ${t.persistentWeaknesses.join(", ")}`),r.join(`
`)}buildUserResponseSection(t){return`### USER RESPONSE
${t}`}buildCriteriaSection(t){let r=["### EVALUATION CRITERIA","Evaluate the response using the following criteria:"];return Object.entries(t).forEach(([i,o])=>{let s=this.getCategoryDescription(i);r.push(`- ${i} (0-${o} points): ${s}`)}),r.push(`
The total maximum score is 100 points.`),r.join(`
`)}buildStrengthAnalysisSection(){return`### STRENGTH ANALYSIS
For each strength identified, provide a detailed analysis including:
1. What the user did well (the strength itself)
2. Why this aspect is effective or important
3. How it specifically contributes to the quality of the response`}buildImprovementPlanSection(){return`### IMPROVEMENT PLANS
For each area needing improvement, provide a detailed plan including:
1. Specific issue to address
2. Why improving this area is important
3. Actionable steps to improve
4. Resources or exercises that could help`}buildGrowthTrackingSection(t){return!t||Object.keys(t).length===0?"":`### GROWTH TRACKING
Compare the current response to previous evaluations:
1. Identify improvements since the last evaluation
2. Note any persistent strengths or weaknesses
3. Provide specific growth insights`}buildRecommendationsSection(){return`### PERSONALIZED RECOMMENDATIONS
Based on the user's context, provide:
1. Personalized next steps tailored to their focus areas and skill level
2. 2-3 specific resources that would help improvement (articles, books, courses, etc.)
3. 1-2 recommended challenge types that would build on current strengths or address weaknesses`}buildResponseFormatSection(t){return`### RESPONSE FORMAT
Provide your evaluation as a JSON object with the following EXACT structure:

{
  "metrics": {
    "accuracy": 0,
    "clarity": 0,
    "reasoning": 0,
    "creativity": 0
  },
  "overallScore": 0,  // REQUIRED: Calculate as average of all metrics (accuracy + clarity + reasoning + creativity) / 4
  "overallFeedback": "Overall feedback about the response",
  "strengths": [],
  "strengthAnalysis": [],
  "areasForImprovement": ["List of areas for improvement"],
  "improvementPlans": [
    {
      "area": "Area for improvement",
      "importance": "Why this is important",
      "actionItems": ["Specific actions"],
      "resources": ["Suggested resources"]
    }
  ],
  "growthInsights": {
    "improvements": [],
    "persistentStrengths": [],
    "developmentAreas": ["Areas needing development"],
    "growthSummary": "Summary of growth"
  },
  "recommendations": {
    "nextSteps": "Next steps for improvement",
    "resources": [
      {
        "title": "Resource title",
        "type": "article|video|course",
        "url": "Resource URL",
        "relevance": "Why this is relevant"
      }
    ],
    "recommendedChallenges": [
      {
        "title": "Challenge title",
        "description": "Challenge description",
        "relevance": "Why this would help"
      }
    ]
  }
}

IMPORTANT:
1. All metrics must be numbers between 0 and 100
2. overallScore is REQUIRED and must be calculated as the average of all metrics
3. All sections must be included exactly as shown
4. Arrays can be empty but must be present
5. Do not include any additional fields or sections
6. Do not use markdown formatting in the response`}buildDynamicSystemMessage(t,r){let i=[];if(i.push("You are an AI evaluation expert providing "),i.push(`${r.preferences?.feedbackStyle||"constructive"} feedback `),i.push(`on ${t.challengeId} challenges. `),r.skillLevel){let o=r.skillLevel.toLowerCase();o==="beginner"?i.push("Explain concepts simply and thoroughly, avoiding jargon. "):o==="intermediate"?i.push("Balance explanations with appropriate complexity for someone with moderate familiarity. "):(o==="expert"||o==="advanced")&&i.push("Provide nuanced, in-depth analysis that acknowledges complexity and edge cases. ")}return r.personalityProfile&&(r.personalityProfile.communicationStyle==="formal"?i.push("Maintain a formal, professional tone. "):r.personalityProfile.communicationStyle==="casual"?i.push("Use a friendly, conversational tone. "):r.personalityProfile.communicationStyle==="technical"?i.push("Use precise, technical language where appropriate. "):i.push("Use a clear, encouraging tone. ")),i.push("Your evaluation should be thorough, fair, and aimed at helping the user improve. "),i.push("Always provide specific examples from their response to illustrate your points. "),i.push("Balance critique with encouragement to maintain motivation."),i.push(`

Your response MUST follow the exact JSON structure specified in the prompt. `),i.push("Ensure all required fields are included and properly formatted."),i.join("")}getCategoryWeights(t){return{accuracy:35,clarity:25,reasoning:25,creativity:15}}getCategoryDescription(t){return{accuracy:"Evaluate factual correctness, depth of knowledge, and absence of misconceptions",clarity:"Assess organization, clarity of expression, and logical flow of ideas",reasoning:"Evaluate logical connections, critical thinking, and soundness of arguments",creativity:"Judge originality of ideas, innovative thinking, and novel approaches",critical_thinking:"Assess depth of analysis, consideration of alternatives, and avoidance of cognitive biases",insight:"Evaluate the presence of meaningful, non-obvious observations and connections",problem_solving:"Judge the effectiveness of solutions, considering constraints and trade-offs",application:"Assess how well concepts are applied to specific situations or problems",communication:"Evaluate clarity, precision, and effectiveness of communication",thoroughness:"Judge comprehensiveness of research, addressing all relevant aspects",methodology:"Evaluate appropriateness and rigor of methods used",critical_analysis:"Assess ability to evaluate sources, identify biases, and synthesize information",presentation:"Judge organization, clarity, and effective use of evidence",originality:"Evaluate uniqueness and novelty of ideas and approach",effectiveness:"Assess how well the response achieves its intended purpose",elaboration:"Evaluate depth, detail, and development of ideas",relevance:"Judge how well the response addresses the challenge requirements",technical_accuracy:"Evaluate technical correctness and precision",implementation:"Assess the quality and effectiveness of implementation details",explanation:"Evaluate clarity and completeness of explanations for technical choices",best_practices:"Judge adherence to established standards and best practices",ethical_reasoning:"Evaluate depth and nuance of ethical analysis and reasoning",comprehensiveness:"Assess coverage of relevant ethical dimensions and perspectives",practical_application:"Judge how well ethical principles are applied to concrete situations",conceptual_understanding:"Evaluate understanding of core AI concepts and principles",critical_perspective:"Assess ability to critically evaluate AI technologies and claims",impact_analysis:"Evaluate depth and breadth of impact analysis across domains",stakeholder_consideration:"Assess identification and consideration of affected stakeholders",systemic_thinking:"Evaluate understanding of complex systemic interactions and dynamics"}[t.toLowerCase()]||"Evaluate this aspect of the response"}getEvaluationHistory(t){return{}}isValidEvaluationResponse(t){return t?!t.metrics||!t.overallScore||!t.overallFeedback||!t.areasForImprovement||!t.improvementPlans||!t.growthInsights||!t.recommendations?(console.error("Missing required properties:",{metrics:!!t.metrics,overallScore:!!t.overallScore,overallFeedback:!!t.overallFeedback,areasForImprovement:!!t.areasForImprovement,improvementPlans:!!t.improvementPlans,growthInsights:!!t.growthInsights,recommendations:!!t.recommendations}),!0):typeof t.metrics.accuracy!="number"||typeof t.metrics.clarity!="number"||typeof t.metrics.reasoning!="number"||typeof t.metrics.creativity!="number"?(console.error("Invalid metrics structure:",t.metrics),!1):!Array.isArray(t.areasForImprovement)||!Array.isArray(t.improvementPlans)?(console.error("Invalid array structure:",{areasForImprovement:Array.isArray(t.areasForImprovement),improvementPlans:Array.isArray(t.improvementPlans)}),!1):!t.growthInsights.improvements||!t.growthInsights.persistentStrengths||!t.growthInsights.developmentAreas||!t.growthInsights.growthSummary?(console.error("Invalid growthInsights structure:",t.growthInsights),!1):!t.recommendations.nextSteps||!t.recommendations.resources||!t.recommendations.recommendedChallenges?(console.error("Invalid recommendations structure:",t.recommendations),!1):!0:!1}transformResponse(t){try{let r=t.overallScore||Math.round((t.metrics.accuracy+t.metrics.clarity+t.metrics.reasoning+t.metrics.creativity)/4);return{metrics:{creativity:t.metrics.creativity,practicality:t.metrics.accuracy,depth:t.metrics.reasoning,humanEdge:t.metrics.clarity,overall:r},feedback:[t.overallFeedback],strengths:t.strengths||[],improvements:t.areasForImprovement,comparison:{userScore:r,rivalScore:50,advantage:r>50?"user":"rival",advantageReason:r>50?"Your response shows good understanding and effort":"There is room for improvement in your response"},badges:this.assignBadges({creativity:t.metrics.creativity,practicality:t.metrics.accuracy,depth:t.metrics.reasoning,humanEdge:t.metrics.clarity,overall:r})}}catch(r){throw console.error("Error transforming response:",r),new Error("Failed to transform evaluation response: "+(r instanceof Error?r.message:String(r)))}}callCloudFunctionWithRetry(t){return v(this,null,function*(){let r=0,i=null;for(;r<this.MAX_RETRIES;)try{let o=yield this.http.post(this.CLOUD_FUNCTION_URL,t).pipe(ai(this.TIMEOUT_MS),Gc(1),on(u=>(console.error(`Attempt ${r+1} failed:`,u),i=u,Kt(u)))).toPromise();if(!o||!o.success)throw new Error("No valid response from evaluation service");let s=o.data.choices[0].message.content;console.log("Raw response content:",s);let a=s.replace(/```json\n|\n```/g,"").trim();console.log("Cleaned content:",a);let c;try{c=JSON.parse(a),console.log("Parsed response:",c)}catch(u){throw console.error("JSON parse error:",u),console.error("Content that failed to parse:",a),new Error("Failed to parse JSON response: "+(u instanceof Error?u.message:String(u)))}return this.transformResponse(c)}catch(o){if(i=o,r++,r<this.MAX_RETRIES){let s=Math.pow(2,r)*1e3;console.log(`Retrying in ${s}ms... (Attempt ${r+1}/${this.MAX_RETRIES})`),yield new Promise(a=>setTimeout(a,s))}}throw i||new Error("Failed to get a valid evaluation response after multiple attempts")})}assignBadges(t){let r=[];return r.push("Participant"),t.overall>=80?r.push("Excellence"):t.overall>=60&&r.push("Proficiency"),t.creativity>=80?r.push("Innovator"):t.creativity>=60&&r.push("Creative Thinker"),t.practicality>=80?r.push("Problem Solver"):t.practicality>=60&&r.push("Practical Mind"),t.depth>=80?r.push("Deep Thinker"):t.depth>=60&&r.push("Analytical"),t.humanEdge>=80?r.push("Human Touch"):t.humanEdge>=60&&r.push("Empathetic"),r}static \u0275fac=function(r){return new(r||n)(U(Er),U(ze))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ti=(()=>{class n extends lm{firestore;userService;roundGeneratorService;roundEvaluationService;COLLECTION="challenges";COLLECTION_NAME="challenges";DEFAULT_ROUNDS=4;constructor(t,r,i,o){super(t),this.firestore=t,this.userService=r,this.roundGeneratorService=i,this.roundEvaluationService=o}generateChallenge(t){return v(this,null,function*(){let r={id:"",title:`Challenge for ${t}`,description:`A challenge focused on ${t}`,aiResponse:"",steps:[]},i=yield this.createDocument(this.COLLECTION_NAME,r);return r.id=i,r})}generateAIResponse(t){return v(this,null,function*(){return`This is a mock AI response for challenge ${t}`})}evaluateResponse(t,r,i){return v(this,null,function*(){try{let o=this.userService.getCurrentUserId();if(!o)throw new Error("No user ID found");let s=yield this.getChallenge(i);if(!s)throw new Error("Challenge not found");let a=s.rounds?.find(d=>d.roundNumber===t);if(!a)throw new Error("No round found for this round number");let c=yield this.generateAIResponse(i);return yield this.roundEvaluationService.evaluateResponse({userId:o,challengeId:i,roundNumber:t,question:a.question,userResponse:r,aiResponse:c})}catch(o){throw console.error("Error evaluating response:",o),o}})}saveRoundResponse(t,r,i){return v(this,null,function*(){console.log(`Saving response for user ${t}, round ${r}`);let o={userId:t,roundNumber:r,challengeId:i.challengeId,question:i.question||"",response:i.response,aiResponse:i.aiResponse||"",evaluation:i.evaluation||null,timestamp:new Date};yield this.createDocument(this.COLLECTION,o),console.log("Response saved successfully");let a=(yield this.getChallenge(i.challengeId))?.rounds.length||4;console.log(`Max rounds: ${a}`);let c=r<a?`/round/${r+1}`:"/results";console.log(`Next route: ${c}`)})}getRoundResponse(t,r){return v(this,null,function*(){return this.getDocument(this.COLLECTION,`${t}_round${r}`)})}getAllRoundResponses(t){return v(this,null,function*(){let r=localStorage.getItem("currentChallengeId");if(!r)return[];let i=yield this.getChallenge(r);if(!i)return[];let o=i.rounds.length,s=[];for(let a=1;a<=o;a++){let c=yield this.getRoundResponse(t,a);c&&s.push(c)}return s})}createChallenge(t){return v(this,null,function*(){let r=this.userService.getCurrentUserId();if(!r)throw new Error("No user ID found");let i={id:"",userId:r,focus:t,rounds:[],description:t.description,currentRound:1,status:"pending",createdAt:new Date,updatedAt:new Date};return yield this.createDocument(this.COLLECTION_NAME,i)})}updateChallengeStatus(t,r){return v(this,null,function*(){if(!(yield this.getChallenge(t)))throw new Error("Challenge not found");yield this.updateDocument(this.COLLECTION_NAME,t,{status:r,updatedAt:new Date})})}addRound(t,r){return v(this,null,function*(){let i=yield this.getChallenge(t);if(!i)throw new Error("Challenge not found");let o=i.rounds||[],s=o.findIndex(a=>a.roundNumber===r.roundNumber);s>=0?o[s]=r:o.push(r),yield this.updateDocument(this.COLLECTION_NAME,t,{rounds:o,updatedAt:new Date})})}getChallenge(t){return v(this,null,function*(){return this.getDocument(this.COLLECTION,t)})}getUserChallenges(t){return v(this,null,function*(){return this.queryDocuments(this.COLLECTION,"userId",t)})}saveResponse(t){return v(this,null,function*(){yield this.createDocument("responses",t)})}getCurrentRound(){return v(this,null,function*(){let t=localStorage.getItem("mereka_challenge_id");return t&&(yield this.getChallenge(t))?.currentRound||1})}setCurrentRound(t){let r=localStorage.getItem("mereka_challenge_id");r&&this.updateDocument(this.COLLECTION,r,{currentRound:t})}submitResponse(t,r){return v(this,null,function*(){let i=yield this.getChallenge(t);if(!i)throw new Error("Challenge not found");console.log("Challenge:",i);let o=i.currentRound;console.log("Current round:",o);let s=i.rounds?.find(E=>E.roundNumber===o);if(!s)throw console.error("No round data found for round:",o),new Error("No round data found for this round");let a=yield this.generateAIResponse(t),c=yield this.evaluateResponse(o,r,t),u={roundNumber:o,question:s.question,answer:r,aiResponse:a,evaluation:c},d=i.rounds||[],f=d.findIndex(E=>E.roundNumber===o);f>=0?d[f]=u:d.push(u),yield this.updateDocument(this.COLLECTION,t,{rounds:d,currentRound:o+1,updatedAt:new Date});let w={challengeId:t,response:r,aiResponse:a,evaluation:c,question:s.question};return yield this.saveResponse(w),w})}static \u0275fac=function(r){return new(r||n)(U(Tt),U(ze),U(Tc),U(Dc))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var jo=(()=>{class n{loadingSubject=new It(!1);loading$=this.loadingSubject.asObservable();show(){this.loadingSubject.next(!0)}hide(){this.loadingSubject.next(!1)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var uN=(()=>{class n{http;userService;firestore;API_URL=`${rr.apiUrl}/processRequest`;TIMEOUT_MS=3e5;constructor(t,r,i){this.http=t,this.userService=r,this.firestore=i}generateFocusAreas(){return v(this,null,function*(){let t=this.userService.getCurrentUserId();if(!t)throw new Error("No user ID found");let r=yield this.userService.getUser(t);if(!r)throw new Error("User not found");let i=yield this.getUserChallengeHistory(t),o=this.createStructuredRequest(r,i);try{let s=yield this.http.post(this.API_URL,o).pipe(ai(this.TIMEOUT_MS),on(d=>(console.error("Error generating focus areas:",d),Kt(d)))).toPromise();if(!s?.success)throw new Error("Failed to generate focus areas");let a=s.data.choices[0].message.content,c=a.replace(/```json/g,"").replace(/```/g,"").trim();console.log("Raw response content:",a),console.log("Cleaned content:",c);let u;try{u=JSON.parse(c),console.log("Parsed focus areas:",u)}catch(d){throw console.error("Error parsing focus areas:",d),console.error("Raw content:",a),new Error("Invalid focus areas response format")}if(!this.isValidFocusAreas(u))throw new Error("Invalid focus areas response structure");return u}catch(s){throw console.error("Error generating focus areas:",s),s}})}getUserChallengeHistory(t){return v(this,null,function*(){try{let r=jt(this.firestore,"challenges"),i=kt(r,_t("userId","==",t),vc("createdAt","desc"),yc(10));return(yield Ht(i)).docs.map(s=>{let a=s.data();return pe(j({id:s.id},a),{focus_area:a.focus?.focusArea,challengeType:a.focus?.recommendedChallengeTypes?.[0],score:a.evaluation?.metrics?.overall,strengths:a.evaluation?.strengths||[],areasForImprovement:a.evaluation?.improvements||[]})})}catch(r){return console.error("Error fetching challenge history:",r),[]}})}createStructuredRequest(t,r){let i=`### FOCUS AREA GENERATION TASK

`;if(i+=`Generate personalized focus areas for effective AI communication based on the user's profile and history. Each focus area should represent a specific skill or topic the user should concentrate on to improve their interaction with AI systems.

`,i+=`### USER PROFILE
`,t.professionalTitle&&(i+=`Professional Title: ${t.professionalTitle}
`),t.location&&(i+=`Location: ${t.location}
`),t.traits&&Object.keys(t.traits).length>0){if(i+=`
Personality Traits (scale 1-10):
`,t.traits.answers&&Array.isArray(t.traits.answers)){let a=t.traits.answers.map(c=>c.answer).join(", ");i+=`- Trait Scores: ${a}
`}if(t.traits.questions&&Array.isArray(t.traits.questions)){let a=t.traits.questions.map(c=>c.subtitle?`${c.title}: ${c.subtitle}`:c.title).join(`
  `);i+=`- Trait Questions:
  ${a}
`}}if(t.attitudes&&Object.keys(t.attitudes).length>0){if(i+=`
Attitudes Toward AI (scale 1-10):
`,t.attitudes.answers&&Array.isArray(t.attitudes.answers)){let a=t.attitudes.answers.map(c=>c.answer).join(", ");i+=`- Attitude Scores: ${a}
`}if(t.attitudes.questions&&Array.isArray(t.attitudes.questions)){let a=t.attitudes.questions.map(c=>c.subtitle?`${c.title}: ${c.subtitle}`:c.title).join(`
  `);i+=`- Attitude Questions:
  ${a}
`}}return i+=`
`,r&&r.length>0&&(i+=`### CHALLENGE HISTORY
`,r.forEach((a,c)=>{i+=`Challenge ${c+1}:
`,a.focus_area&&(i+=`- Focus Area: ${a.focus_area}
`),a.challengeType&&(i+=`- Type: ${a.challengeType}
`),a.score!==void 0&&(i+=`- Score: ${a.score}
`),a.strengths&&a.strengths.length>0&&(i+=`- Strengths: ${a.strengths.join(", ")}
`),a.areasForImprovement&&a.areasForImprovement.length>0&&(i+=`- Areas for Improvement: ${a.areasForImprovement.join(", ")}
`),i+=`
`})),i+=`### CREATIVITY GUIDANCE
`,i+=`- Generate highly creative and unique focus areas beyond standard communication skills.
`,i+=`- Balance creativity with practical communication skills.
`,i+=`- Focus on foundational communication skills with moderate creativity.

`,i+=`### PERSONALIZATION GUIDANCE
`,i+=`- Focus areas should be tailored specifically to this user's profile, traits, and history.
`,i+=`- Consider the user's professional context when suggesting focus areas.
`,i+=`- Include both strengths to leverage and areas that need improvement.
`,i+=`- Ensure the focus areas are diverse and cover different aspects of AI communication.
`,r&&r.length>0&&(i+=`- Reference patterns from the user's challenge history when relevant.
`),i+=`
`,i+=`### RESPONSE FORMAT
`,i+=`Return the focus areas as a JSON array with the following structure:

`,i+=`[
  {
    "id": "unique-id-1",
    "name": "Focus Area Name",
    "description": "Detailed description of the focus area",
    "matchLevel": number between 80-100,
    "icon": "emoji-icon",
    "rationale": "Explanation of why this focus area is important for this user",
    "improvementStrategies": [
      "Strategy 1 to improve in this focus area",
      "Strategy 2 to improve in this focus area"
    ],
    "recommendedChallengeTypes": [
      "challenge type 1",
      "challenge type 2"
    ]
  }
]

`,{type:"generateFocusAreas",model:"gpt-4o",messages:[{role:"system",content:"You are an AI learning strategist specializing in personalized focus area recommendations for AI communication skills. Your task is to generate focus areas that help users improve their interaction with AI systems."},{role:"user",content:i}],temperature:.5}}isValidFocusAreas(t){return Array.isArray(t)?t.length===0?(console.error("Focus areas array is empty"),!1):t.every(r=>{let i=typeof r.id=="string"&&typeof r.name=="string"&&typeof r.description=="string"&&typeof r.matchLevel=="number"&&r.matchLevel>=80&&r.matchLevel<=100&&typeof r.icon=="string"&&typeof r.rationale=="string"&&Array.isArray(r.improvementStrategies)&&r.improvementStrategies.every(o=>typeof o=="string")&&Array.isArray(r.recommendedChallengeTypes)&&r.recommendedChallengeTypes.every(o=>typeof o=="string");return i||console.error("Invalid focus area structure:",r),i}):(console.error("Focus areas is not an array:",t),!1)}static \u0275fac=function(r){return new(r||n)(U(Er),U(ze),U(Tt))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _G(n,e){n&1&&(m(0,"div",7),ce(1,"div",8),m(2,"p",9),y(3,"Generating personalized focus areas..."),g()())}function wG(n,e){if(n&1){let t=He();m(0,"div",7)(1,"div",10)(2,"p",11),y(3),g(),m(4,"button",12),ae("click",function(){Le(t);let i=G();return Ve(i.generateFocusAreas())}),y(5," Try Again "),g()()()}if(n&2){let t=G();I(3),q(t.error)}}function EG(n,e){if(n&1&&(m(0,"div",26)(1,"p",27)(2,"span",28),y(3,"Why This Focus Area?"),g(),y(4),g()()),n&2){let t=G().$implicit;I(4),J(" ",t.rationale," ")}}function IG(n,e){if(n&1){let t=He();m(0,"div",15),ae("click",function(){let i=Le(t).$implicit,o=G(2);return Ve(o.selectFocusArea(i))}),m(1,"div",16)(2,"div",17)(3,"div",18)(4,"span",19),y(5),g(),m(6,"h2",20),y(7),g()(),m(8,"div",21)(9,"span",22),y(10,"Match:"),g(),m(11,"span",23),y(12),g()()(),m(13,"p",24),y(14),g(),H(15,EG,5,1,"div",25),g()()}if(n&2){let t=e.$implicit,r=G(2);On((r.selectedFocusArea==null?null:r.selectedFocusArea.id)===t.id?"bg-white rounded-lg shadow-md p-6 cursor-pointer transition-all duration-200 hover:shadow-lg ring-2 ring-primary":"bg-white rounded-lg shadow-md p-6 cursor-pointer transition-all duration-200 hover:shadow-lg"),I(5),q(t.icon),I(2),q(t.name),I(5),J("",t.matchLevel,"%"),I(2),q(t.description),I(),F("ngIf",(r.selectedFocusArea==null?null:r.selectedFocusArea.id)===t.id)}}function bG(n,e){if(n&1&&(m(0,"div",13),H(1,IG,16,7,"div",14),g()),n&2){let t=G();I(),F("ngForOf",t.focusAreas)}}var dN=(()=>{class n{router;route;challengeService;loadingService;roundGeneratorService;focusAreaGeneratorService;userService;selectedFocusArea=null;focusAreas=[];isLoading=!1;error=null;constructor(t,r,i,o,s,a,c){this.router=t,this.route=r,this.challengeService=i,this.loadingService=o,this.roundGeneratorService=s,this.focusAreaGeneratorService=a,this.userService=c}ngOnInit(){return v(this,null,function*(){let t=this.userService.getCurrentUserId();if(!t){this.router.navigate(["/context"]);return}if(!(yield this.userService.getUserTraits(t))){this.router.navigate(["/traits"]);return}if(!(yield this.userService.getUserAttitudes(t))){this.router.navigate(["/attitudes"]);return}this.generateFocusAreas()})}generateFocusAreas(){return v(this,null,function*(){this.isLoading=!0,this.error=null;try{this.focusAreas=yield this.focusAreaGeneratorService.generateFocusAreas()}catch(t){this.error="Failed to generate focus areas. Please try again.",console.error("Error generating focus areas:",t)}finally{this.isLoading=!1}})}selectFocusArea(t){this.selectedFocusArea=t}onContinue(){return v(this,null,function*(){if(this.selectedFocusArea)try{let t=yield this.challengeService.createChallenge({focusArea:this.selectedFocusArea.name,description:this.selectedFocusArea.description});yield this.router.navigate(["/round",t])}catch(t){console.error("Error creating challenge:",t),this.error="Failed to create challenge. Please try again."}})}onBack(){let t=this.route.snapshot.data.previous;this.router.navigate([`/${t}`])}static \u0275fac=function(r){return new(r||n)(L(ke),L(yt),L(ti),L(jo),L(Tc),L(uN),L(ze))};static \u0275cmp=we({type:n,selectors:[["app-focus"]],standalone:!0,features:[Ee],decls:11,vars:5,consts:[[1,"container","mx-auto","px-4","py-8","max-w-7xl"],[1,"text-3xl","font-bold","text-center","mb-2"],[1,"text-gray-600","text-center","mb-8"],["class","flex flex-col items-center justify-center min-h-[400px]",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],[1,"mt-8","flex","justify-center"],[1,"px-6","py-3","bg-primary","text-white","rounded-lg","font-medium","hover:bg-primary-dark","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"flex","flex-col","items-center","justify-center","min-h-[400px]"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-primary"],[1,"mt-4","text-gray-600"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","max-w-md","w-full","text-center"],[1,"text-red-600"],[1,"mt-4","px-4","py-2","bg-primary","text-white","rounded-lg","hover:bg-primary-dark","transition-colors",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-6"],[3,"class","click",4,"ngFor","ngForOf"],[3,"click"],[1,"flex","flex-col","space-y-4"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-3"],[1,"text-3xl"],[1,"text-xl","font-semibold"],[1,"flex","items-center","space-x-2"],[1,"text-sm","text-gray-500"],[1,"text-sm","font-medium","text-primary"],[1,"text-gray-600"],["class","mt-4 p-4 bg-gray-50 rounded-lg",4,"ngIf"],[1,"mt-4","p-4","bg-gray-50","rounded-lg"],[1,"text-sm","text-gray-700"],[1,"font-medium"]],template:function(r,i){r&1&&(m(0,"div",0)(1,"h1",1),y(2,"Focus Selection"),g(),m(3,"p",2),y(4,"Your choice will determine the type of challenges you'll face"),g(),H(5,_G,4,0,"div",3)(6,wG,6,1,"div",3)(7,bG,2,1,"div",4),m(8,"div",5)(9,"button",6),ae("click",function(){return i.onContinue()}),y(10),g()()()),r&2&&(I(5),F("ngIf",i.isLoading),I(),F("ngIf",i.error),I(),F("ngIf",!i.isLoading&&!i.error),I(2),F("disabled",!i.selectedFocusArea||i.isLoading),I(),J(" ",i.isLoading?"Loading...":"Begin "+((i.selectedFocusArea==null?null:i.selectedFocusArea.name)||"Challenge")," "))},dependencies:[Te,et,lt],styles:[".focus-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem;display:flex;flex-direction:column;align-items:center;min-height:100vh;background-color:#f8f9fa}.title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#1a1a1a;margin-bottom:1rem;text-align:center}.subtitle[_ngcontent-%COMP%]{font-size:1.25rem;color:#666;margin-bottom:3rem;text-align:center}.focus-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:2rem;width:100%;max-width:1000px;margin-bottom:3rem}.focus-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:1.5rem;box-shadow:0 4px 6px #0000000d;transition:all .3s ease;cursor:pointer;border:2px solid transparent;position:relative;overflow:hidden}.focus-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 15px #0000001a}.focus-card.selected[_ngcontent-%COMP%]{border-color:#4a90e2;background:linear-gradient(135deg,#4a90e21a,#4a90e20d)}.focus-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}.focus-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-right:1rem}.focus-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1a1a1a}.focus-description[_ngcontent-%COMP%]{color:#666;font-size:1rem;line-height:1.5;margin-bottom:1rem}.challenge-focus[_ngcontent-%COMP%]{background:#4a90e21a;border-radius:.5rem;padding:1rem;margin-top:1rem}.challenge-focus[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#4a4a4a;font-size:.9rem;line-height:1.4}.challenge-focus[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a1a1a}.action-button[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin-top:2rem}.begin-button[_ngcontent-%COMP%]{background:#4a90e2;color:#fff;font-size:1.25rem;font-weight:600;padding:1rem 3rem;border-radius:.5rem;border:none;cursor:pointer;transition:all .3s ease}.begin-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#357abd;transform:translateY(-2px)}.begin-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.focus-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.title[_ngcontent-%COMP%]{font-size:2rem}.subtitle[_ngcontent-%COMP%]{font-size:1.1rem}.focus-card[_ngcontent-%COMP%]{padding:1.25rem}.focus-icon[_ngcontent-%COMP%]{font-size:2rem}.focus-title[_ngcontent-%COMP%]{font-size:1.25rem}}"]})}return n})();var CG=()=>["creativity","practicality","depth","humanEdge","overall"];function SG(n,e){n&1&&(m(0,"div",4),ce(1,"div",5),m(2,"p",6),y(3,"Loading round..."),g()())}function TG(n,e){if(n&1){let t=He();m(0,"div",4)(1,"div",7)(2,"p",8),y(3),g(),m(4,"button",9),ae("click",function(){Le(t);let i=G();return Ve(i.ngOnInit())}),y(5," Try Again "),g()()()}if(n&2){let t=G();I(3),q(t.error)}}function DG(n,e){if(n&1){let t=He();m(0,"div",17)(1,"strong",18),y(2,"Error!"),g(),m(3,"span",19),y(4),g(),m(5,"button",20),ae("click",function(){Le(t);let i=G(2);return Ve(i.error=null)}),m(6,"span",21),y(7,"Dismiss"),g(),Yt(),m(8,"svg",22),ce(9,"path",23),g()()()}if(n&2){let t=G(2);I(4),q(t.error)}}function AG(n,e){if(n&1&&(m(0,"div",24)(1,"h2",25),y(2,"Your Challenge"),g(),m(3,"p",26),y(4),g()()),n&2){let t=G(2);I(4),q(t.currentRound.question)}}function xG(n,e){if(n&1){let t=He();m(0,"div",24)(1,"h2",25),y(2,"Your Response"),g(),m(3,"textarea",27),_n("ngModelChange",function(i){Le(t);let o=G(2);return Dn(o.userResponse,i)||(o.userResponse=i),Ve(i)}),g(),m(4,"div",28)(5,"button",29),ae("click",function(){Le(t);let i=G(2);return Ve(i.submitResponse())}),y(6),g()()()}if(n&2){let t=G(2);I(3),vn("ngModel",t.userResponse),F("disabled",t.isSubmitting),I(2),F("disabled",!t.userResponse.trim()||t.isSubmitting),I(),J(" ",t.isSubmitting?"Submitting...":"Submit Response"," ")}}function MG(n,e){n&1&&(m(0,"div",30)(1,"div",31)(2,"h3",32),y(3,"AI is analyzing your response"),g(),m(4,"p",33),y(5," The AI is evaluating your response to identify your human edge. "),g()()())}function RG(n,e){if(n&1&&(m(0,"div",10)(1,"div",11)(2,"h1",12),y(3),g(),m(4,"div",13),y(5),g()(),H(6,DG,10,1,"div",14)(7,AG,5,1,"div",15)(8,xG,7,4,"div",15)(9,MG,6,0,"div",16),g()),n&2){let t=G();I(3),J("Round ",t.currentRound.roundNumber," of 3"),I(2),J(" Focus Area: ",t.challenge.focus.focusArea," "),I(),F("ngIf",t.error),I(),F("ngIf",t.showQuestion),I(),F("ngIf",t.showQuestion),I(),F("ngIf",t.showAiThinking)}}function PG(n,e){if(n&1&&(m(0,"div",58)(1,"div",59)(2,"span"),y(3),co(4,"titlecase"),g(),m(5,"span"),y(6),g()(),m(7,"div",60),ce(8,"div",61),g()()),n&2){let t=e.$implicit,r=G(2);I(3),q(cl(4,6,t)),I(3),J("",r.getMetricValue(t),"%"),I(2),On(r.getMetricColor(t)),vr("width",r.getMetricValue(t),"%")}}function NG(n,e){if(n&1&&(m(0,"p",62),y(1),g()),n&2){let t=e.$implicit;I(),J(" ",t," ")}}function OG(n,e){if(n&1&&(m(0,"li",49),y(1),g()),n&2){let t=e.$implicit;I(),J(" ",t," ")}}function kG(n,e){if(n&1&&(m(0,"li",49),y(1),g()),n&2){let t=e.$implicit;I(),J(" ",t," ")}}function FG(n,e){if(n&1&&(m(0,"div",67)(1,"h4",68),y(2),co(3,"titlecase"),g()()),n&2){let t=e.$implicit;I(2),q(cl(3,1,t))}}function LG(n,e){if(n&1&&(m(0,"div",63)(1,"h3",64),y(2,"Badges Earned"),g(),m(3,"div",65),H(4,FG,4,3,"div",66),g()()),n&2){let t=G(2);I(4),F("ngForOf",t.getBadges())}}function VG(n,e){if(n&1){let t=He();m(0,"div",34)(1,"div",35)(2,"h2",36),y(3),g()(),m(4,"div",37)(5,"div",38)(6,"div",39)(7,"h3",40),y(8,"Your Performance"),g(),m(9,"div",41),H(10,PG,9,8,"div",42),g()(),m(11,"div",39)(12,"h3",40),y(13,"Feedback"),g(),m(14,"div",43),H(15,NG,2,1,"p",44),g(),m(16,"h3",45),y(17,"Comparison with AI"),g(),m(18,"div",46)(19,"div",47)(20,"span"),y(21,"Your Score"),g(),m(22,"span",18),y(23),g()(),m(24,"div",48)(25,"span"),y(26,"AI Score"),g(),m(27,"span",18),y(28),g()(),m(29,"p",49)(30,"span",50),y(31,"Advantage: "),g(),y(32),g(),m(33,"p",51),y(34),g()()()(),m(35,"div",38)(36,"div")(37,"h3",52),y(38,"Your Strengths"),g(),m(39,"ul",53),H(40,OG,2,1,"li",54),g()(),m(41,"div")(42,"h3",52),y(43,"Areas for Improvement"),g(),m(44,"ul",53),H(45,kG,2,1,"li",54),g()()(),H(46,LG,5,1,"div",55),g(),m(47,"div",56)(48,"button",57),ae("click",function(){Le(t);let i=G();return Ve(i.handleContinue())}),y(49),g()()()}if(n&2){let t=G();I(3),J("Round ",t.currentRoundNumber," Evaluation"),I(7),F("ngForOf",_r(11,CG)),I(5),F("ngForOf",t.getFeedback()),I(8),J("",t.getUserScore(),"%"),I(5),J("",t.getRivalScore(),"%"),I(4),J(" ",t.getComparisonText()," "),I(2),J(" ",t.getComparisonReason()," "),I(6),F("ngForOf",t.getStrengths()),I(5),F("ngForOf",t.getImprovements()),I(),F("ngIf",t.getBadges().length>0),I(3),J(" ",t.currentRoundNumber===t.maxRounds?"View Results":"Continue to Round "+(t.currentRoundNumber+1)," ")}}var hN=(()=>{class n{router;route;challengeService;roundEvaluationService;roundGeneratorService;loadingService;userService;currentRound=null;currentRoundNumber=1;maxRounds=3;userResponse="";isSubmitting=!1;showAiThinking=!1;showPerformance=!1;showQuestion=!0;performanceMetrics=null;evaluation=null;roundNumber=1;previousResponses={};timeLeft=300;timer;progress=0;timeRemaining=60;metrics=[];error=null;isLoading=!1;challenge=null;constructor(t,r,i,o,s,a,c){this.router=t,this.route=r,this.challengeService=i,this.roundEvaluationService=o,this.roundGeneratorService=s,this.loadingService=a,this.userService=c}ngOnInit(){this.loadRound()}loadRound(){return v(this,null,function*(){this.isLoading=!0,this.error=null;try{let t=this.route.snapshot.paramMap.get("challengeId");if(!t){this.router.navigate(["/focus"]);return}if(this.challenge=yield this.challengeService.getChallenge(t),!this.challenge){this.router.navigate(["/focus"]);return}let r=Array.isArray(this.challenge.rounds)?this.challenge.rounds:[],i=r.filter(o=>o&&o.evaluation);if(this.currentRoundNumber=i.length+1,this.roundNumber=this.currentRoundNumber,this.currentRoundNumber>this.maxRounds){this.router.navigate(["/results",t]);return}if(this.currentRoundNumber>1&&!r.slice(0,this.currentRoundNumber-1).every(s=>s&&s.evaluation)){let s=r.findIndex(a=>!a||!a.evaluation);if(s!==-1){this.currentRoundNumber=s+1,this.roundNumber=this.currentRoundNumber,this.router.navigate(["/round",t]);return}}if(r[this.currentRoundNumber-1])this.currentRound=r[this.currentRoundNumber-1];else{let o=r.slice(0,this.currentRoundNumber-1).map(c=>({question:c.question,answer:c.answer,evaluation:c.evaluation})),a=(yield this.roundGeneratorService.generateRound(this.challenge.focus.focusArea,this.currentRoundNumber.toString(),o.length>0?JSON.stringify({previousRounds:o,focus:this.challenge.focus}):void 0,o)).challenges[0];this.currentRound={roundNumber:this.currentRoundNumber,question:a.question,answer:"",aiResponse:""},yield this.challengeService.addRound(t,this.currentRound)}}catch(t){console.error("Error loading round:",t),this.error="Failed to load round. Please try again."}finally{this.isLoading=!1}})}startTimer(){this.timer=setInterval(()=>{this.timeLeft>0?this.timeLeft--:(this.stopTimer(),this.submitResponse())},1e3)}stopTimer(){this.timer&&clearInterval(this.timer)}submitResponse(){return v(this,null,function*(){if(!(!this.currentRound||!this.userResponse.trim())){this.isSubmitting=!0,this.showAiThinking=!0,this.error=null;try{let t=this.route.snapshot.paramMap.get("challengeId");if(!t)throw new Error("No challenge ID found");this.evaluation=(yield this.challengeService.submitResponse(t,this.userResponse)).evaluation,this.performanceMetrics=this.evaluation,this.showPerformance=!0,this.showQuestion=!1}catch(t){console.error("Error submitting response:",t),t.message.includes("No valid response from evaluation service")?this.error="The evaluation service is currently unavailable. Please try again later.":t.message.includes("Failed to parse JSON response")?this.error="There was an error processing your response. Please try again.":t.message.includes("Invalid evaluation response structure")?this.error="The evaluation response was invalid. Please try again.":t.message.includes("timeout")?this.error="The evaluation took too long. Please try again.":this.error="An unexpected error occurred. Please try again."}finally{this.isSubmitting=!1,this.showAiThinking=!1}}})}getMetricValue(t){return this.performanceMetrics?.metrics&&this.performanceMetrics.metrics[t]||0}getMetricColor(t){let r=this.getMetricValue(t);return r>=80?"bg-success":r>=60?"bg-warning":"bg-danger"}getComparisonText(){if(!this.performanceMetrics?.comparison)return"";let t=this.performanceMetrics.comparison;return t.advantage==="user"?"You":t.advantage==="rival"?"AI":"Tie"}getComparisonReason(){return this.performanceMetrics?.comparison?.advantageReason||""}getUserScore(){return this.performanceMetrics?.comparison?.userScore||0}getRivalScore(){return this.performanceMetrics?.comparison?.rivalScore||0}getFeedback(){return this.performanceMetrics?.feedback||[]}getStrengths(){return this.performanceMetrics?.strengths||[]}getImprovements(){return this.performanceMetrics?.improvements||[]}getBadges(){return this.performanceMetrics?.badges||[]}getFormattedTime(){let t=Math.floor(this.timeRemaining/60),r=this.timeRemaining%60;return`${t}:${r.toString().padStart(2,"0")}`}navigateBack(){this.currentRoundNumber>1?this.router.navigate(["/round",this.currentRoundNumber-1]):this.router.navigate(["/focus"])}handleContinue(){return v(this,null,function*(){let t=this.route.snapshot.paramMap.get("challengeId");t&&(this.isLoading=!0,this.showQuestion=!0,this.showPerformance=!1,this.evaluation=null,this.performanceMetrics=null,this.userResponse="",this.isSubmitting=!1,this.showAiThinking=!1,this.error=null,yield this.challengeService.updateChallengeStatus(t,"in-progress"),this.router.navigate(["/round",t]).then(()=>{this.loadRound()}))})}static \u0275fac=function(r){return new(r||n)(L(ke),L(yt),L(ti),L(Dc),L(Tc),L(jo),L(ze))};static \u0275cmp=we({type:n,selectors:[["app-dynamic-round"]],standalone:!0,features:[Ee],decls:5,vars:4,consts:[[1,"container","mx-auto","px-4","py-8","max-w-4xl"],["class","flex flex-col items-center justify-center min-h-[400px]",4,"ngIf"],["class","space-y-8",4,"ngIf"],["class","card w-full max-w-4xl mx-auto shadow-lg",4,"ngIf"],[1,"flex","flex-col","items-center","justify-center","min-h-[400px]"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-primary"],[1,"mt-4","text-gray-600"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","max-w-md","w-full","text-center"],[1,"text-red-600"],[1,"mt-4","px-4","py-2","bg-primary","text-white","rounded-lg","hover:bg-primary-dark","transition-colors",3,"click"],[1,"space-y-8"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold"],[1,"text-sm","text-gray-500"],["class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative mb-4","role","alert",4,"ngIf"],["class","bg-white rounded-lg shadow-md p-6",4,"ngIf"],["class","fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",4,"ngIf"],["role","alert",1,"bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded","relative","mb-4"],[1,"font-bold"],[1,"block","sm:inline"],[1,"absolute","top-0","bottom-0","right-0","px-4","py-3",3,"click"],[1,"sr-only"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"bg-white","rounded-lg","shadow-md","p-6"],[1,"text-xl","font-semibold","mb-4"],[1,"text-gray-700","whitespace-pre-wrap"],["placeholder","Type your response here...",1,"w-full","h-48","p-4","border","rounded-lg","focus:ring-2","focus:ring-primary","focus:border-transparent",3,"ngModelChange","ngModel","disabled"],[1,"mt-4","flex","justify-end"],[1,"px-6","py-3","bg-primary","text-white","rounded-lg","font-medium","hover:bg-primary-dark","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"fixed","inset-0","bg-black/50","backdrop-blur-sm","flex","items-center","justify-center","z-50"],[1,"bg-white","dark:bg-gray-800","p-8","rounded-lg","max-w-md","w-full","text-center"],[1,"text-xl","font-bold","mb-4"],[1,"mt-4","text-gray-600","dark:text-gray-300"],[1,"card","w-full","max-w-4xl","mx-auto","shadow-lg"],[1,"card-header"],[1,"text-2xl","font-bold","text-primary"],[1,"card-content","space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-4"],[1,"font-semibold","text-lg"],[1,"space-y-2"],["class","metric",4,"ngFor","ngForOf"],[1,"border","p-4","rounded-lg","bg-white","dark:bg-gray-800"],["class","mb-2 text-gray-800 dark:text-gray-200",4,"ngFor","ngForOf"],[1,"font-semibold","text-lg","mt-4"],[1,"border","p-4","rounded-lg","bg-gray-50","dark:bg-gray-800"],[1,"flex","justify-between","items-center","mb-2"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-gray-800","dark:text-gray-200"],[1,"font-semibold"],[1,"text-gray-800","dark:text-gray-200","mt-2"],[1,"font-semibold","text-lg","mb-3"],[1,"list-disc","pl-5","space-y-1"],["class","text-gray-800 dark:text-gray-200",4,"ngFor","ngForOf"],["class","mt-4",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-primary",3,"click"],[1,"metric"],[1,"flex","justify-between","items-center"],[1,"progress-bar"],[1,"h-2"],[1,"mb-2","text-gray-800","dark:text-gray-200"],[1,"mt-4"],[1,"text-lg","font-semibold","mb-2"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["class","bg-white p-4 rounded-lg shadow",4,"ngFor","ngForOf"],[1,"bg-white","p-4","rounded-lg","shadow"],[1,"font-medium"]],template:function(r,i){r&1&&(m(0,"div",0),H(1,SG,4,0,"div",1)(2,TG,6,1,"div",1)(3,RG,10,6,"div",2)(4,VG,50,12,"div",3),g()),r&2&&(I(),F("ngIf",i.isLoading),I(),F("ngIf",i.error),I(),F("ngIf",!i.isLoading&&!i.error&&i.challenge&&i.currentRound),I(),F("ngIf",i.evaluation&&i.performanceMetrics))},dependencies:[Te,et,lt,KD,or,Uo,ei,ji],styles:["[_nghost-%COMP%]{display:block;width:100%;max-width:800px;margin:0 auto;padding:20px}.challenge-container[_ngcontent-%COMP%]{background-color:var(--surface-color);border-radius:12px;padding:24px;box-shadow:0 4px 12px #0000001a;margin-bottom:24px}.challenge-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin-bottom:16px;color:var(--text-primary)}.challenge-description[_ngcontent-%COMP%]{font-size:18px;line-height:1.5;margin-bottom:24px;color:var(--text-secondary)}.steps-container[_ngcontent-%COMP%]{margin-bottom:24px}.step-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:12px;font-size:16px;color:var(--text-secondary)}.step-number[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:50%;background-color:var(--primary-color);color:#fff;margin-right:12px;font-weight:600}.response-container[_ngcontent-%COMP%]{margin-bottom:24px}.response-label[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:500;margin-bottom:12px;color:var(--text-primary)}.response-textarea[_ngcontent-%COMP%]{width:100%;min-height:200px;padding:16px;border-radius:8px;border:1px solid var(--border-color);background-color:var(--input-bg);color:var(--text-primary);font-size:16px;line-height:1.5;resize:vertical}.submit-button[_ngcontent-%COMP%]{display:block;width:100%;padding:14px;background-color:var(--primary-color);color:#fff;border:none;border-radius:8px;font-size:18px;font-weight:600;cursor:pointer;transition:background-color .2s}.submit-button[_ngcontent-%COMP%]:hover{background-color:var(--primary-color-dark)}.submit-button[_ngcontent-%COMP%]:disabled{background-color:var(--disabled-color);cursor:not-allowed}.ai-thinking[_ngcontent-%COMP%]{text-align:center;margin:24px 0;color:var(--text-secondary)}.evaluation-container[_ngcontent-%COMP%]{background-color:var(--surface-color);border-radius:12px;padding:24px;box-shadow:0 4px 12px #0000001a;margin-top:24px}.evaluation-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin-bottom:16px;color:var(--text-primary)}.metrics-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:16px;margin-bottom:24px}.metric-item[_ngcontent-%COMP%]{background-color:var(--card-bg);border-radius:8px;padding:16px;text-align:center}.metric-label[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary);margin-bottom:8px}.metric-value[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:var(--primary-color)}.feedback-container[_ngcontent-%COMP%]{margin-bottom:24px}.feedback-title[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin-bottom:12px;color:var(--text-primary)}.feedback-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.feedback-item[_ngcontent-%COMP%]{padding:12px;background-color:var(--card-bg);border-radius:8px;margin-bottom:8px;color:var(--text-secondary)}.continue-button[_ngcontent-%COMP%]{display:block;width:100%;padding:14px;background-color:var(--secondary-color);color:#fff;border:none;border-radius:8px;font-size:18px;font-weight:600;cursor:pointer;transition:background-color .2s}.continue-button[_ngcontent-%COMP%]:hover{background-color:var(--secondary-color-dark)}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px}.previous-responses[_ngcontent-%COMP%]{margin-bottom:24px}.previous-response-title[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin-bottom:12px;color:var(--text-primary)}.previous-response-item[_ngcontent-%COMP%]{background-color:var(--card-bg);border-radius:8px;padding:16px;margin-bottom:12px}.previous-response-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-secondary);margin-bottom:8px}.previous-response-content[_ngcontent-%COMP%]{font-size:16px;line-height:1.5;color:var(--text-primary)}.card[_ngcontent-%COMP%]{border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1.5rem}@media (prefers-color-scheme: dark){.card[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}}.card-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.card-content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.card-footer[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;align-items:center;justify-content:space-between}.progress-bar[_ngcontent-%COMP%]{height:.5rem;width:100%;overflow:hidden;border-radius:9999px;--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.progress-bar[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}}.progress-bar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%;background-color:var(--primary-color)}.timer[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem;font-weight:600;--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}@media (prefers-color-scheme: dark){.timer[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}}.btn[_ngcontent-%COMP%]{border-radius:.5rem;padding:.5rem 1rem;font-weight:500}.btn.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary-color);--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.btn.btn-primary[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.btn.btn-primary[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.btn.btn-outline[_ngcontent-%COMP%]{border-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.btn.btn-outline[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.btn.btn-outline[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity, 1));--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.btn.btn-outline[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}}.badge[_ngcontent-%COMP%]{border-radius:9999px;padding:.25rem .75rem;font-size:.875rem;line-height:1.25rem;font-weight:500}.badge.badge-secondary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}@media (prefers-color-scheme: dark){.badge.badge-secondary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}}.previous-response[_ngcontent-%COMP%]{border-left-width:4px;border-color:var(--primary-color);--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1));padding:1rem}@media (prefers-color-scheme: dark){.previous-response[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}}textarea[_ngcontent-%COMP%]{min-height:150px;width:100%;resize:vertical;border-radius:.5rem;border-width:1px;padding:.75rem}textarea[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.loading-state[_ngcontent-%COMP%]{display:flex;min-height:50vh;align-items:center;justify-content:center}.ai-thinking-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:50;display:flex;align-items:center;justify-content:center;background-color:#00000080;--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}"]})}return n})();var Ac=(()=>{class n{http;firestore;roundEvaluationService;CLOUD_FUNCTION_URL=`${rr.apiUrl}/processRequest`;MAX_RETRIES=3;TIMEOUT_MS=5e4;RESULTS_COLLECTION="final_results";PROGRESS_COLLECTION="progress_analysis";constructor(t,r,i){this.http=t,this.firestore=r,this.roundEvaluationService=i}analyzeResults(t,r){return be(this.getCachedResults(r,t)).pipe(ot(i=>i?oe(i):be(this.fetchRoundEvaluations(r,t)).pipe(ot(o=>!o||o.length===0?Kt(()=>new Error("No round evaluations found to analyze")):be(this.generateFinalReport(r,t,o))))))}analyzeProgress(t,r={}){return be(this.getCachedProgress(t,r)).pipe(ot(i=>i?oe(i):be(this.fetchUserData(t)).pipe(ot(o=>o?be(this.fetchChallengeHistory(t,r.timeRange)).pipe(ot(s=>!s||s.length===0?Kt(()=>new Error("No challenge history found")):be(this.generateProgressAnalysis(t,o,s,r)))):Kt(()=>new Error("User data not found"))))))}getCachedResults(t,r){return v(this,null,function*(){try{let i=jt(this.firestore,this.RESULTS_COLLECTION),o=kt(i,_t("userId","==",t),_t("challengeId","==",r)),s=yield Ht(o);return s.empty?null:s.docs[0].data()}catch(i){throw console.error("Error fetching cached results:",i),i}})}fetchRoundEvaluations(t,r){return v(this,null,function*(){try{let i=dn(this.firestore,`challenges/${r}`),o=yield Dr(i);if(!o.exists())throw new Error("Challenge document not found");let c=(o.data().rounds||[]).map(u=>{let d=u.evaluation||{};return{metrics:{creativity:d.creativity||0,practicality:d.practicality||0,depth:d.depth||0,humanEdge:d.humanEdge||0,overall:d.overall||0},feedback:Array.isArray(d.feedback)?d.feedback:[],strengths:Array.isArray(d.strengths)?d.strengths:[],improvements:Array.isArray(d.improvements)?d.improvements:[],comparison:{userScore:d.userScore||0,rivalScore:d.rivalScore||0,advantage:d.advantage||"tie",advantageReason:d.advantageReason||""},badges:Array.isArray(d.badges)?d.badges:[]}});if(c.length===0)throw new Error("No evaluations found for this challenge");return c}catch(i){throw console.error("Error fetching challenge evaluation:",i),i}})}generateFinalReport(t,r,i){return v(this,null,function*(){try{let o=dn(this.firestore,`challenges/${r}`),s=yield Dr(o),a=s.exists()?s.data():null,c=dn(this.firestore,`users/${t}`),u=yield Dr(c),d=u.exists()?u.data():null,f=this.createAnalysisRequest(t,r,i,a,d),w=yield this.callCloudFunctionWithRetry(f),E;try{let S=w.data.choices[0].message.content.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();E=JSON.parse(S)}catch(S){throw console.error("Error parsing AI response:",S),new Error("Failed to parse AI analysis response")}return a?.focus&&(E.focus=a.focus),d&&(E.traits=d.traits||[],E.attitudes=d.attitudes||[]),yield this.cacheResults(t,r,E),E}catch(o){throw console.error("Error generating final report:",o),o}})}callCloudFunctionWithRetry(t){return v(this,null,function*(){let r=0,i=null;for(;r<this.MAX_RETRIES;)try{let o=yield this.http.post(this.CLOUD_FUNCTION_URL,t).pipe(ai(this.TIMEOUT_MS),Gc(1),on(s=>(console.error(`Attempt ${r+1} failed:`,s),i=s,Kt(s)))).toPromise();if(!o||!o.success)throw new Error("No valid response from analysis service");return o}catch(o){if(i=o,r++,r<this.MAX_RETRIES){let s=Math.pow(2,r)*1e3;console.log(`Retrying in ${s}ms... (Attempt ${r+1}/${this.MAX_RETRIES})`),yield new Promise(a=>setTimeout(a,s))}}throw i||new Error("Failed to get a valid analysis response after multiple attempts")})}createAnalysisRequest(t,r,i,o,s){let a={role:"system",content:`You are an AI analyst that evaluates a user's performance across multiple rounds of a challenge.
      Focus on analyzing the following aspects:
      1. Overall performance and progression across rounds
      2. Strengths and areas for improvement
      3. Comparison with AI responses
      4. Integration with user's traits and attitudes
      5. Alignment with challenge focus area

      Your response MUST be valid JSON matching the following structure EXACTLY:
      {
        "overallScore": number,
        "focusArea": {
          "name": string,
          "description": string
        },
        "rounds": {
          "round1": {
            "score": number,
            "strengths": string[],
            "areas": string[],
            "comparison": {
              "humanScore": number,
              "aiScore": number,
              "difference": number
            }
          },
          "round2": { ... same structure as round1 ... },
          "round3": { ... same structure as round1 ... }
        },
        "badges": [
          {
            "name": string,
            "icon": string,
            "description": string
          }
        ],
        "insights": string[],
        "recommendations": string[]
      }

      Do not include any text outside of this JSON structure.`},c={role:"user",content:`Analyze the following data:
      User ID: ${t}
      Challenge ID: ${r}
      Challenge Data: ${JSON.stringify(o)}
      User Data: ${JSON.stringify(s)}
      Evaluations: ${JSON.stringify(i)}`};return{model:"gpt-4o",messages:[a,c],temperature:.7,max_tokens:1e4}}cacheResults(t,r,i){return v(this,null,function*(){try{let o=`${t}_${r}`,s=pe(j({},i),{userId:t,challengeId:r,timestamp:new Date().toISOString()});yield ks(dn(this.firestore,this.RESULTS_COLLECTION,o),s)}catch(o){throw console.error("Error caching results:",o),o}})}getCachedProgress(t,r){return v(this,null,function*(){try{let i=jt(this.firestore,this.PROGRESS_COLLECTION),o=kt(i,_t("userId","==",t),_t("timeRange","==",r.timeRange||"all")),s=yield Ht(o);return s.empty?null:s.docs[0].data()}catch(i){throw console.error("Error fetching cached progress:",i),i}})}fetchUserData(t){return v(this,null,function*(){try{let r=dn(this.firestore,`users/${t}`),i=yield Dr(r);if(!i.exists())throw new Error("User document not found");return i.data()}catch(r){throw console.error("Error fetching user data:",r),r}})}fetchChallengeHistory(t,r){return v(this,null,function*(){try{let i=jt(this.firestore,"challenges"),o=kt(i,_t("userId","==",t));if(r&&r!=="all"){let a=new Date,c=new Date;switch(r){case"month":c.setMonth(a.getMonth()-1);break;case"week":c.setDate(a.getDate()-7);break;case"day":c.setDate(a.getDate()-1);break}o=kt(o,_t("timestamp",">=",c.toISOString()))}let s=yield Ht(o);if(s.empty)throw new Error("No challenges found for the specified time range");return s.docs.map(a=>a.data())}catch(i){throw console.error("Error fetching challenge history:",i),i}})}generateProgressAnalysis(t,r,i,o){return v(this,null,function*(){try{let s=this.createProgressAnalysisRequest(t,r,i,o),a=yield this.callCloudFunctionWithRetry(s),c;try{let u=a.data.choices[0].message.content.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();c=JSON.parse(u)}catch(u){throw console.error("Error parsing progress analysis:",u),new Error("Failed to parse progress analysis response")}return yield this.cacheProgress(t,o,c),c}catch(s){throw console.error("Error generating progress analysis:",s),s}})}createProgressAnalysisRequest(t,r,i,o){let s={role:"system",content:`You are an AI progress analyst specializing in learning journey assessment and personalized recommendations.
Your analysis should be data-driven, balanced, and provide ${o.detailLevel||"detailed"} insights into the user's progress over the ${o.timeRange||"all"} time period.
${o.includeRecommendations?"Include specific, actionable recommendations that align with their learning goals and current trajectory.":""}
${o.includePredictions?"Include evidence-based predictions about their future growth based on current trends.":""}
Ensure your response follows the exact JSON format specified in the instructions, with no extraneous text.`},a={role:"user",content:`Analyze the following data:
      User ID: ${t}
      User Data: ${JSON.stringify(r)}
      Challenge History: ${JSON.stringify(i)}
      Options: ${JSON.stringify(o)}`};return{model:"gpt-4o",messages:[s,a],temperature:.7,max_tokens:1e4}}cacheProgress(t,r,i){return v(this,null,function*(){try{let o=`${t}_${r.timeRange||"all"}`,s=pe(j({},i),{userId:t,timeRange:r.timeRange||"all",timestamp:new Date().toISOString()});yield ks(dn(this.firestore,this.PROGRESS_COLLECTION,o),s)}catch(o){throw console.error("Error caching progress:",o),o}})}static \u0275fac=function(r){return new(r||n)(U(Er),U(Tt),U(Dc))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var UG=n=>["/share",n],Lu=()=>[];function jG(n,e){n&1&&(m(0,"div",9),ce(1,"div",10),g())}function BG(n,e){n&1&&(m(0,"div",11)(1,"h2",12),y(2,"Unable to Load Results"),g(),m(3,"p",13),y(4,"We encountered an issue loading your results. Please try again later."),g(),m(5,"button",14),y(6," Return to Dashboard "),g()())}function $G(n,e){if(n&1&&(m(0,"li"),y(1),g()),n&2){let t=e.$implicit;I(),q(t)}}function qG(n,e){if(n&1&&(m(0,"li"),y(1),g()),n&2){let t=e.$implicit;I(),q(t)}}function zG(n,e){if(n&1&&(kn(0),m(1,"div",35)(2,"h3",36),y(3),g(),m(4,"div",37),y(5),g(),m(6,"div",29)(7,"div")(8,"h4",38),y(9,"Strengths"),g(),m(10,"ul",39),H(11,$G,2,1,"li",34),g()(),m(12,"div")(13,"h4",38),y(14,"Areas for Improvement"),g(),m(15,"ul",39),H(16,qG,2,1,"li",34),g()(),m(17,"div",40)(18,"h4",38),y(19,"Human vs AI Comparison"),g(),m(20,"div",41)(21,"span",42),y(22,"You"),g(),m(23,"span",43),y(24),g()(),m(25,"div",41)(26,"span",42),y(27,"AI"),g(),m(28,"span",44),y(29),g()(),m(30,"div",45),y(31),g()()()(),Fn()),n&2){let t=e.$implicit,r=G(3);I(3),J("Round ",t.slice(-1),""),I(2),J("",(r.results==null||r.results.rounds==null||r.results.rounds[t]==null?null:r.results.rounds[t].score)||0,"%"),I(6),F("ngForOf",(r.results==null||r.results.rounds==null||r.results.rounds[t]==null?null:r.results.rounds[t].strengths)||_r(8,Lu)),I(5),F("ngForOf",(r.results==null||r.results.rounds==null||r.results.rounds[t]==null?null:r.results.rounds[t].areas)||_r(9,Lu)),I(8),J("",(r.results==null||r.results.rounds==null||r.results.rounds[t]==null||r.results.rounds[t].comparison==null?null:r.results.rounds[t].comparison.humanScore)||0,"%"),I(5),J("",(r.results==null||r.results.rounds==null||r.results.rounds[t]==null||r.results.rounds[t].comparison==null?null:r.results.rounds[t].comparison.aiScore)||0,"%"),I(2),cs(" Difference: ",((r.results==null||r.results.rounds==null||r.results.rounds[t]==null||r.results.rounds[t].comparison==null?null:r.results.rounds[t].comparison.difference)||0)>0?"+":"","",(r.results==null||r.results.rounds==null||r.results.rounds[t]==null||r.results.rounds[t].comparison==null?null:r.results.rounds[t].comparison.difference)||0,"% ")}}function HG(n,e){if(n&1&&(kn(0),H(1,zG,32,10,"ng-container",34),Fn()),n&2){let t=G(2);I(),F("ngForOf",t.rounds)}}function GG(n,e){n&1&&(m(0,"div",46)(1,"p",42),y(2,"No round data available."),g()())}function WG(n,e){if(n&1&&(m(0,"div",48)(1,"div",49),y(2),g(),m(3,"h3",50),y(4),g(),m(5,"p",42),y(6),g()()),n&2){let t=e.$implicit;I(2),q((t==null?null:t.icon)||"\u{1F3C6}"),I(2),q((t==null?null:t.name)||"Participant"),I(2),q((t==null?null:t.description)||"You completed the challenge!")}}function KG(n,e){if(n&1&&(kn(0),H(1,WG,7,3,"div",47),Fn()),n&2){let t=G(2);I(),F("ngForOf",(t.results==null?null:t.results.badges)||_r(1,Lu))}}function QG(n,e){n&1&&(m(0,"div",46)(1,"p",42),y(2,"No badges available."),g()())}function YG(n,e){if(n&1&&(m(0,"li",52)(1,"span",53),y(2,"\u2022"),g(),m(3,"span",23),y(4),g()()),n&2){let t=e.$implicit;I(4),q(t)}}function JG(n,e){if(n&1&&(kn(0),H(1,YG,5,1,"li",51),Fn()),n&2){let t=G(2);I(),F("ngForOf",(t.results==null?null:t.results.insights)||_r(1,Lu))}}function XG(n,e){n&1&&(m(0,"li",42),y(1,"No insights available."),g())}function ZG(n,e){if(n&1&&(m(0,"li",52)(1,"span",53),y(2,"\u2022"),g(),m(3,"span",23),y(4),g()()),n&2){let t=e.$implicit;I(4),q(t)}}function e8(n,e){if(n&1&&(kn(0),H(1,ZG,5,1,"li",51),Fn()),n&2){let t=G(2);I(),F("ngForOf",(t.results==null?null:t.results.recommendations)||_r(1,Lu))}}function t8(n,e){n&1&&(m(0,"li",42),y(1,"No recommendations available."),g())}function n8(n,e){if(n&1&&(kn(0),m(1,"div",15)(2,"div",16)(3,"h1",17),y(4,"Your AI Fight Club Performance"),g(),m(5,"div",18),y(6),g(),m(7,"p",19),y(8,"Overall Score"),g()()(),m(9,"div",15)(10,"h2",20),y(11,"Focus Area"),g(),m(12,"div",21)(13,"h3",22),y(14),g(),m(15,"p",23),y(16),g()()(),m(17,"div",15)(18,"h2",24),y(19,"Round Performance"),g(),m(20,"div",25),H(21,HG,2,1,"ng-container",26)(22,GG,3,0,"ng-template",null,0,ll),g()(),m(24,"div",15)(25,"h2",24),y(26,"Your Badges"),g(),m(27,"div",25),H(28,KG,2,2,"ng-container",26)(29,QG,3,0,"ng-template",null,1,ll),g()(),m(31,"div",27)(32,"div",28)(33,"h2",20),y(34,"Key Insights"),g(),m(35,"ul",29),H(36,JG,2,2,"ng-container",26)(37,XG,2,0,"ng-template",null,2,ll),g()(),m(39,"div",28)(40,"h2",20),y(41,"Recommendations"),g(),m(42,"ul",29),H(43,e8,2,2,"ng-container",26)(44,t8,2,0,"ng-template",null,3,ll),g()()(),m(46,"div",30)(47,"button",31),y(48," View Dashboard "),g(),m(49,"button",32),y(50," Start New Challenge "),g(),m(51,"button",33),y(52," Share Results "),g()(),Fn()),n&2){let t=al(23),r=al(30),i=al(38),o=al(45),s=G();I(6),J("",((s.results==null?null:s.results.overallScore)||0).toFixed(2),"%"),I(8),J("",(s.results==null||s.results.focusArea==null?null:s.results.focusArea.name)||"General Improvement"," "),I(2),q((s.results==null||s.results.focusArea==null?null:s.results.focusArea.description)||"Focus on developing a balanced approach to all aspects of your responses."),I(5),F("ngIf",s.rounds.length>0)("ngIfElse",t),I(7),F("ngIf",s.results==null||s.results.badges==null?null:s.results.badges.length)("ngIfElse",r),I(8),F("ngIf",s.results==null||s.results.insights==null?null:s.results.insights.length)("ngIfElse",i),I(7),F("ngIf",s.results==null||s.results.recommendations==null?null:s.results.recommendations.length)("ngIfElse",o),I(8),F("routerLink",Ah(12,UG,s.challengeId))}}var fN=(()=>{class n{resultsAnalysisService;route;router;challengeService;userService;results;rounds=[];loading=!0;error=!1;challengeId="";constructor(t,r,i,o,s){this.resultsAnalysisService=t,this.route=r,this.router=i,this.challengeService=o,this.userService=s}ngOnInit(){return v(this,null,function*(){if(this.challengeId=this.route.snapshot.paramMap.get("challengeId")||"",!this.challengeId){this.error=!0,this.loading=!1;return}try{if(!(yield this.challengeService.getChallenge(this.challengeId))){this.error=!0,this.loading=!1;return}yield this.challengeService.updateChallengeStatus(this.challengeId,"completed"),this.loadResults(this.challengeId)}catch(t){console.error("Error in results initialization:",t),this.error=!0,this.loading=!1}})}loadResults(t){this.loading=!0,this.error=!1,this.resultsAnalysisService.analyzeResults(t,this.userService.getCurrentUserId()||"").subscribe({next:r=>{this.results=r,this.updateRoundsArray(),this.loading=!1},error:r=>{console.error("Error loading results:",r),this.error=!0,this.loading=!1}})}updateRoundsArray(){if(!this.results||!this.results.rounds){this.rounds=[];return}let t=Object.keys(this.results.rounds);this.rounds=t.sort((r,i)=>{let o=parseInt(r.replace("round","")),s=parseInt(i.replace("round",""));return o-s})}onContinue(){this.router.navigate(["/dashboard"])}static \u0275fac=function(r){return new(r||n)(L(Ac),L(yt),L(ke),L(ti),L(ze))};static \u0275cmp=we({type:n,selectors:[["app-results"]],standalone:!0,features:[Ee],decls:5,vars:3,consts:[["noRounds",""],["noBadges",""],["noInsights",""],["noRecommendations",""],[1,"min-h-screen","bg-gray-50","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-7xl","mx-auto"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-lg p-8 text-center",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center","h-64"],[1,"animate-spin","rounded-full","h-16","w-16","border-t-2","border-b-2","border-indigo-600"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-8","text-center"],[1,"text-2xl","font-bold","text-red-800","mb-4"],[1,"text-red-600","mb-6"],["routerLink","/dashboard",1,"bg-red-600","text-white","px-6","py-3","rounded-lg","font-semibold","hover:bg-red-700","transition-colors"],[1,"bg-white","rounded-lg","shadow-lg","p-8","mb-8"],[1,"text-center"],[1,"text-4xl","font-bold","text-gray-900","mb-4"],[1,"text-6xl","font-bold","text-indigo-600","mb-4"],[1,"text-xl","text-gray-600"],[1,"text-2xl","font-bold","text-gray-900","mb-4"],[1,"bg-indigo-50","rounded-lg","p-6"],[1,"text-xl","font-semibold","text-indigo-900","mb-2"],[1,"text-gray-700"],[1,"text-2xl","font-bold","text-gray-900","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[4,"ngIf","ngIfElse"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-8","mb-8"],[1,"bg-white","rounded-lg","shadow-lg","p-8"],[1,"space-y-4"],[1,"flex","justify-center","space-x-4"],["routerLink","/dashboard",1,"bg-gray-200","text-gray-900","px-6","py-3","rounded-lg","font-semibold","hover:bg-gray-300","transition-colors"],["routerLink","/focus",1,"bg-green-600","text-white","px-6","py-3","rounded-lg","font-semibold","hover:bg-green-700","transition-colors"],[1,"bg-indigo-600","text-white","px-6","py-3","rounded-lg","font-semibold","hover:bg-indigo-700","transition-colors",3,"routerLink"],[4,"ngFor","ngForOf"],[1,"bg-gray-50","rounded-lg","p-6"],[1,"text-xl","font-semibold","text-gray-900","mb-4"],[1,"text-3xl","font-bold","text-indigo-600","mb-4"],[1,"font-medium","text-gray-900","mb-2"],[1,"list-disc","list-inside","text-gray-600"],[1,"border-t","pt-4"],[1,"flex","justify-between","items-center"],[1,"text-gray-600"],[1,"text-lg","font-semibold","text-indigo-600"],[1,"text-lg","font-semibold","text-gray-600"],[1,"text-sm","text-gray-500","mt-2"],[1,"col-span-3","bg-gray-50","rounded-lg","p-6","text-center"],["class","bg-gray-50 rounded-lg p-6 text-center",4,"ngFor","ngForOf"],[1,"bg-gray-50","rounded-lg","p-6","text-center"],[1,"text-4xl","mb-4"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],["class","flex items-start",4,"ngFor","ngForOf"],[1,"flex","items-start"],[1,"text-indigo-600","mr-2"]],template:function(r,i){r&1&&(m(0,"div",4)(1,"div",5),H(2,jG,2,0,"div",6)(3,BG,7,0,"div",7)(4,n8,53,14,"ng-container",8),g()()),r&2&&(I(2),F("ngIf",i.loading),I(),F("ngIf",i.error),I(),F("ngIf",!i.loading&&!i.error&&i.results))},dependencies:[Te,et,lt,Rt,$r],styles:["[_nghost-%COMP%]{display:block}.badge-icon[_ngcontent-%COMP%]{font-size:2.5rem;line-height:1}.insight-bullet[_ngcontent-%COMP%]{color:var(--ai-purple)}.recommendation-bullet[_ngcontent-%COMP%]{color:var(--ai-blue)}@media (max-width: 768px){.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}return n})();var pN=(()=>{class n{firestore;functions;userService;challengeService;RESULTS_COLLECTION="final_results";constructor(t,r,i,o){this.firestore=t,this.functions=r,this.userService=i,this.challengeService=o}getCertificateUrl(t,r){let i=dn(this.firestore,this.RESULTS_COLLECTION,`${t}_${r}`);return be(Dr(i)).pipe(ge(o=>o.exists()&&o.data()?.certificateImageUrl||null))}generatePrompt(t,r){return v(this,null,function*(){let[i,o]=yield Promise.all([this.userService.getUser(t),this.challengeService.getChallenge(r)]);if(!i||!o)throw new Error("User or challenge data not found");let s=i.name||"User",a=o.focus?.focusArea||"the challenge",c=o.focus?.description||"",u=o.rounds||[],d=u.reduce((w,E)=>w+(E.evaluation?.score||0),0),f=u.length>0?(d/u.length).toFixed(2):"0";return`Create a professional certificate of achievement with the following details:
    - Recipient: ${s}
    - Achievement: Successfully completed ${a} challenge
    - Description: ${c}
    - Performance: Achieved an average score of ${f}
    - Style: Modern, professional design with elegant typography
    - Include: Achievement title, recipient name, completion date, and a decorative border
    - Colors: Use a professional color scheme with gold/silver accents
    - Format: Landscape orientation with space for signature
    Make it visually appealing and suitable for sharing on social media.`})}generateCertificate(t,r){return be(this.generatePrompt(t,r)).pipe(ot(i=>{let o={model:"dall-e-3",prompt:i,n:1,size:"1024x1024",quality:"standard",response_format:"url"},s=WR(this.functions,"generateCertificate");return be(s(o)).pipe(ot(a=>{let c=a?.data?.imageUrl;if(!c)throw new Error("No imageUrl returned");let u=dn(this.firestore,this.RESULTS_COLLECTION,`${t}_${r}`);return be(ks(u,{certificateImageUrl:c},{merge:!0})).pipe(ge(()=>c))}))}))}static \u0275fac=function(r){return new(r||n)(U(Tt),U(Fs),U(ze),U(ti))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var i8=n=>["/results",n];function o8(n,e){n&1&&(m(0,"div",5),ce(1,"div",6),m(2,"p",7),y(3,"Generating your certificate..."),g()())}function s8(n,e){if(n&1){let t=He();m(0,"div",8)(1,"div",9)(2,"h1",10),y(3,"Your Achievement Certificate"),g(),m(4,"p",11),y(5,"Share your accomplishment with others!"),g(),m(6,"div",12),ce(7,"img",13),g(),m(8,"div",14)(9,"button",15),ae("click",function(){Le(t);let i=G();return Ve(i.shareOnTwitter())}),Yt(),m(10,"svg",16),ce(11,"path",17),g(),gr(),m(12,"span"),y(13,"Share on Twitter"),g()(),m(14,"button",18),ae("click",function(){Le(t);let i=G();return Ve(i.shareOnLinkedIn())}),Yt(),m(15,"svg",16),ce(16,"path",19),g(),gr(),m(17,"span"),y(18,"Share on LinkedIn"),g()(),m(19,"button",20),ae("click",function(){Le(t);let i=G();return Ve(i.downloadCertificate())}),Yt(),m(20,"svg",21),ce(21,"path",22),g(),gr(),m(22,"span"),y(23,"Download Certificate"),g()(),m(24,"button",23),Yt(),m(25,"svg",21),ce(26,"path",24),g(),gr(),m(27,"span"),y(28,"Back to Results"),g()()()()()}if(n&2){let t=G();I(7),F("src",t.certificateUrl,iv),I(17),F("routerLink",Ah(2,i8,t.challengeId))}}function a8(n,e){if(n&1){let t=He();m(0,"div",25)(1,"h2",26),y(2,"Unable to Load Certificate"),g(),m(3,"p",27),y(4,"We couldn't load your certificate. Would you like to generate a new one?"),g(),m(5,"button",28),ae("click",function(){Le(t);let i=G();return Ve(i.generateCertificate())}),y(6," Generate Certificate "),g()()}}var mN=(()=>{class n{route;router;userService;certificateService;certificateUrl=null;loading=!0;userId=null;challengeId=null;constructor(t,r,i,o){this.route=t,this.router=r,this.userService=i,this.certificateService=o}ngOnInit(){if(this.userId=this.userService.getCurrentUserId(),this.challengeId=this.route.snapshot.paramMap.get("challengeId"),!this.userId||!this.challengeId){this.router.navigate(["/"]);return}this.loadCertificate()}loadCertificate(){this.loading=!0,this.certificateService.getCertificateUrl(this.userId,this.challengeId).subscribe({next:t=>{t?(this.certificateUrl=t,this.loading=!1):this.generateCertificate()},error:t=>{console.error("Error loading certificate:",t),this.loading=!1}})}generateCertificate(){!this.userId||!this.challengeId||(this.loading=!0,this.certificateService.generateCertificate(this.userId,this.challengeId).subscribe({next:t=>{this.certificateUrl=t,this.loading=!1},error:t=>{console.error("Error generating certificate:",t),this.loading=!1}}))}shareOnTwitter(){if(!this.certificateUrl)return;let t=encodeURIComponent("Check out my achievement certificate!"),r=encodeURIComponent(this.certificateUrl);window.open(`https://twitter.com/intent/tweet?text=${t}&url=${r}`,"_blank")}shareOnLinkedIn(){if(!this.certificateUrl)return;let t=encodeURIComponent("Check out my achievement certificate!"),r=encodeURIComponent(this.certificateUrl);window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${r}`,"_blank")}downloadCertificate(){if(!this.certificateUrl)return;let t=document.createElement("a");t.href=this.certificateUrl,t.download="achievement-certificate.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)}static \u0275fac=function(r){return new(r||n)(L(yt),L(ke),L(ze),L(pN))};static \u0275cmp=we({type:n,selectors:[["app-share"]],standalone:!0,features:[Ee],decls:5,vars:3,consts:[[1,"min-h-screen","bg-gray-50","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-3xl","mx-auto"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","bg-white rounded-lg shadow-lg p-8",4,"ngIf"],["class","bg-white rounded-lg shadow-lg p-8 text-center",4,"ngIf"],[1,"flex","justify-center","items-center","h-64"],[1,"animate-spin","rounded-full","h-16","w-16","border-t-2","border-b-2","border-indigo-600"],[1,"ml-4","text-gray-600"],[1,"bg-white","rounded-lg","shadow-lg","p-8"],[1,"text-center"],[1,"text-3xl","font-bold","text-gray-900","mb-4"],[1,"text-lg","text-gray-600","mb-8"],[1,"flex","justify-center","mb-8"],["alt","Certificate",1,"rounded-lg","shadow-lg","max-w-full","h-auto",2,"max-width","512px",3,"src"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-8"],[1,"flex","items-center","justify-center","space-x-2","bg-[#1DA1F2]","text-white","px-6","py-3","rounded-lg","font-semibold","hover:bg-[#1a8cd8]","transition-colors",3,"click"],["fill","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["d","M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"],[1,"flex","items-center","justify-center","space-x-2","bg-[#0A66C2]","text-white","px-6","py-3","rounded-lg","font-semibold","hover:bg-[#094ea3]","transition-colors",3,"click"],["d","M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"],[1,"flex","items-center","justify-center","space-x-2","bg-gray-600","text-white","px-6","py-3","rounded-lg","font-semibold","hover:bg-gray-700","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"],[1,"flex","items-center","justify-center","space-x-2","bg-indigo-600","text-white","px-6","py-3","rounded-lg","font-semibold","hover:bg-indigo-700","transition-colors",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"bg-white","rounded-lg","shadow-lg","p-8","text-center"],[1,"text-2xl","font-bold","text-gray-900","mb-4"],[1,"text-gray-600","mb-6"],[1,"bg-indigo-600","text-white","px-6","py-3","rounded-lg","font-semibold","hover:bg-indigo-700","transition-colors",3,"click"]],template:function(r,i){r&1&&(m(0,"div",0)(1,"div",1),H(2,o8,4,0,"div",2)(3,s8,29,4,"div",3)(4,a8,7,0,"div",4),g()()),r&2&&(I(2),F("ngIf",i.loading),I(),F("ngIf",!i.loading&&i.certificateUrl),I(),F("ngIf",!i.loading&&!i.certificateUrl))},dependencies:[Te,lt,Rt,$r],encapsulation:2})}return n})();var gN=(()=>{class n{http;roundData=new Map;profileId=null;apiUrl=rr.apiUrl;challenges={1:{id:"challenge-1",description:"Analyze the given scenario and identify potential patterns or trends that could impact decision-making."},2:{id:"challenge-2",description:"Based on the patterns identified in Round 1, propose innovative solutions that leverage both human insight and AI capabilities."},3:{id:"challenge-3",description:"Consider the ethical implications of your proposed solutions and how they balance efficiency with human values."}};responses={"challenge-1":"The AI analyzes the data and identifies several key patterns: increasing complexity in decision-making processes, growing importance of human intuition in uncertain scenarios, and the need for balanced human-AI collaboration.","challenge-2":"Based on the patterns, I recommend implementing a hybrid decision-making system that combines AI data analysis with human expertise. This approach ensures both efficiency and adaptability.","challenge-3":"While AI can process vast amounts of data quickly, human oversight remains crucial for ethical considerations and ensuring decisions align with societal values and cultural norms."};constructor(t){this.http=t}generateChallenge(t){return v(this,null,function*(){return this.challenges[t]||{id:`challenge-${t}`,description:"Default challenge description"}})}generateAIResponse(t){return v(this,null,function*(){return this.responses[t]||"AI response not available."})}getRoundData(t){return this.roundData.get(t)||{}}submitResponse(t){return v(this,null,function*(){this.roundData.set(t.round,{response:t.response});let r=yield this.evaluateResponse(t.round,t.response,t.challengeId,t.aiResponse);return this.roundData.set(t.round,pe(j({},this.roundData.get(t.round)),{evaluation:r})),r})}evaluateResponse(t,r,i,o){return v(this,null,function*(){let s=Math.floor(Math.random()*30)+70,a=Math.floor(Math.random()*30)+70,c=s>a?"user":s<a?"rival":"tie";return{metrics:{creativity:Math.floor(Math.random()*30)+70,practicality:Math.floor(Math.random()*30)+70,depth:Math.floor(Math.random()*30)+70,humanEdge:Math.floor(Math.random()*30)+70,overall:Math.floor(Math.random()*30)+70},feedback:["Excellent use of critical thinking","Strong consideration of multiple perspectives","Clear articulation of ideas"],strengths:["Creative problem-solving approach","Strong analytical skills","Clear communication"],improvements:["Consider more diverse scenarios","Expand on practical implementation details","Deepen analysis of long-term impacts"],comparison:{userScore:s,rivalScore:a,advantage:c,advantageReason:"Your response showed exceptional creativity and human insight."},badges:["Creative Thinker","Problem Solver","Strategic Mind"]}})}generateProfile(t){return v(this,null,function*(){return{id:"profile-"+Math.random().toString(36).substr(2,9),badges:["Strategic Thinker","Innovation Champion","Ethical Leader"],strengths:["Strong analytical capabilities","Creative problem-solving","Balanced decision-making"],weaknesses:["Could expand on implementation details","May need more diverse perspectives","Consider broader implications"],recommendations:["Focus on practical applications","Develop more comprehensive solutions","Strengthen ethical considerations"]}})}saveProfileId(t){return v(this,null,function*(){this.profileId=t})}getResults(){let t=this.getRoundData(1),r=this.getRoundData(2),i=this.getRoundData(3),o={overallScore:Math.floor(((t.evaluation?.metrics?.overall??0)+(r.evaluation?.metrics?.overall??0)+(i.evaluation?.metrics?.overall??0))/3),focusArea:{name:"Creative Problem Solving",description:"Your ability to approach problems with innovative and unique solutions"},rounds:{round1:{score:t.evaluation?.metrics.overall||0,strengths:t.evaluation?.strengths||[],areas:t.evaluation?.improvements||[],comparison:{humanScore:t.evaluation?.comparison.userScore||0,aiScore:t.evaluation?.comparison.rivalScore||0,difference:(t.evaluation?.comparison.userScore||0)-(t.evaluation?.comparison.rivalScore||0)}},round2:{score:r.evaluation?.metrics.overall||0,strengths:r.evaluation?.strengths||[],areas:r.evaluation?.improvements||[],comparison:{humanScore:r.evaluation?.comparison.userScore||0,aiScore:r.evaluation?.comparison.rivalScore||0,difference:(r.evaluation?.comparison.userScore||0)-(r.evaluation?.comparison.rivalScore||0)}},round3:{score:i.evaluation?.metrics.overall||0,strengths:i.evaluation?.strengths||[],areas:i.evaluation?.improvements||[],comparison:{humanScore:i.evaluation?.comparison.userScore||0,aiScore:i.evaluation?.comparison.rivalScore||0,difference:(i.evaluation?.comparison.userScore||0)-(i.evaluation?.comparison.rivalScore||0)}}},badges:[{id:"creative-master",name:"Creative Master",description:"Demonstrated exceptional creative problem-solving abilities",icon:"\u{1F3A8}"},{id:"analytical-genius",name:"Analytical Genius",description:"Showed outstanding analytical and logical thinking",icon:"\u{1F9E0}"},{id:"communication-pro",name:"Communication Pro",description:"Excellent communication and articulation skills",icon:"\u{1F4AC}"}],insights:["Your creative approach consistently outperformed AI solutions","You showed strong adaptability across different challenge types","Your communication skills helped convey complex ideas effectively"],recommendations:["Consider exploring more technical aspects in your solutions","Try incorporating more quantitative analysis in your approach","Continue developing your pattern recognition skills"]};return oe(o)}getDashboardData(){let t={level:3,overallProgress:75,challengesCompleted:12,totalBadges:5,streakDays:7,skillLevels:{"critical-thinking":4,"problem-solving":3,communication:5,creativity:4,analytical:3,strategic:4},recentChallenges:[{title:"AI vs Human Decision Making",score:85,focusArea:"Critical Thinking",date:"2023-05-15"},{title:"Ethical AI Implementation",score:92,focusArea:"Problem Solving",date:"2023-05-10"},{title:"Future of Work",score:78,focusArea:"Strategic",date:"2023-05-05"}],badges:[{name:"Critical Thinker",description:"Achieved high scores in critical thinking challenges",date:"2023-05-01"},{name:"Problem Solver",description:"Successfully completed 10 challenges",date:"2023-04-28"},{name:"Communication Pro",description:"Demonstrated excellent communication skills",date:"2023-04-25"},{name:"Creative Mind",description:"Showed exceptional creativity in solutions",date:"2023-04-20"},{name:"Strategic Planner",description:"Achieved high scores in strategic challenges",date:"2023-04-15"}]};return Promise.resolve(t)}static \u0275fac=function(r){return new(r||n)(U(Er))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function l8(n,e){if(n&1&&(m(0,"div",36)(1,"div",37)(2,"span",34),y(3),g(),m(4,"span",38),y(5),g()(),m(6,"div",39),ce(7,"div",10),g()()),n&2){let t=e.$implicit;I(3),q(t.name),I(2),J("Level ",t.level,""),I(2),vr("width",t.progress,"%")}}function u8(n,e){if(n&1&&(m(0,"div",40)(1,"div",41)(2,"div")(3,"h3",42),y(4),g()(),m(5,"div",43)(6,"p",44),y(7),g(),m(8,"p",8),y(9),g()()()()),n&2){let t=e.$implicit,r=G();I(4),q(t.focusArea),I(3),J("",t.score,"%"),I(2),q(r.formatDate(t.date))}}function d8(n,e){if(n&1&&(m(0,"div",40)(1,"div",45),y(2),g(),m(3,"h3",42),y(4),g(),m(5,"p",46),y(6),g(),m(7,"p",47),y(8),g()()),n&2){let t=e.$implicit,r=G();I(2),q(t.icon),I(2),q(t.name),I(2),q(t.description),I(2),q(r.formatDate(t.date))}}function h8(n,e){if(n&1&&(m(0,"div",48)(1,"div",49),Yt(),m(2,"svg",50),ce(3,"path",51),g()(),gr(),m(4,"p",52),y(5),g()()),n&2){let t=e.$implicit;I(5),q(t)}}function f8(n,e){if(n&1&&(m(0,"div",48)(1,"div",49),Yt(),m(2,"svg",50),ce(3,"path",32),g()(),gr(),m(4,"p",52),y(5),g()()),n&2){let t=e.$implicit;I(5),q(t)}}function p8(n,e){if(n&1&&(m(0,"div",55)(1,"span",56),y(2),g(),m(3,"div",6)(4,"div",57),ce(5,"div",10),g(),m(6,"span",8),y(7),g()()()),n&2){let t=e.$implicit,r=G(2);I(2),q(r.getTraitQuestionTitle(t.questionId)),I(3),vr("width",t.answer/5*100,"%"),I(2),J("",t.answer,"/5")}}function m8(n,e){if(n&1&&(m(0,"div")(1,"p",8),y(2,"Last Updated"),g(),m(3,"p",34),y(4),co(5,"date"),g(),m(6,"div",53),H(7,p8,8,4,"div",54),g()()),n&2){let t=G();I(4),q(wv(5,2,t.traitsLastUpdated,"mediumDate")),I(3),F("ngForOf",t.traitsData==null?null:t.traitsData.answers)}}function g8(n,e){n&1&&(m(0,"div")(1,"p",46),y(2,"No traits assessment completed yet"),g()())}function y8(n,e){if(n&1&&(m(0,"div",55)(1,"span",56),y(2),g(),m(3,"div",6)(4,"div",57),ce(5,"div",10),g(),m(6,"span",8),y(7),g()()()),n&2){let t=e.$implicit,r=G(2);I(2),q(r.getAttitudeQuestionTitle(t.questionId)),I(3),vr("width",t.answer/5*100,"%"),I(2),J("",t.answer,"/5")}}function v8(n,e){if(n&1&&(m(0,"div")(1,"p",8),y(2,"Last Updated"),g(),m(3,"p",34),y(4),co(5,"date"),g(),m(6,"div",53),H(7,y8,8,4,"div",54),g()()),n&2){let t=G();I(4),q(wv(5,2,t.attitudesLastUpdated,"mediumDate")),I(3),F("ngForOf",t.attitudesData==null?null:t.attitudesData.answers)}}function _8(n,e){n&1&&(m(0,"div")(1,"p",46),y(2,"No attitudes assessment completed yet"),g()())}var yN=(()=>{class n{gameService;resultsAnalysisService;userService;loadingService;firestore;router;dashboardData={level:1,overallProgress:0,challengesCompleted:0,totalBadges:0,streakDays:0,skillLevels:[],recentChallenges:[],badges:[],insights:[],recommendations:[],lastRound:null};userContext=null;hasTraits=!1;traitsLastUpdated=null;hasAttitudes=!1;attitudesLastUpdated=null;traitsData=null;attitudesData=null;constructor(t,r,i,o,s,a){this.gameService=t,this.resultsAnalysisService=r,this.userService=i,this.loadingService=o,this.firestore=s,this.router=a}ngOnInit(){return v(this,null,function*(){this.loadDashboardData(),yield this.loadUserProfile()})}loadUserProfile(){return v(this,null,function*(){let t=this.userService.getCurrentUserId();if(t)try{let r=yield this.userService.getUser(t);r&&(this.userContext={name:r.name,email:r.email,professionalTitle:r.professionalTitle,location:r.location});let i=yield this.userService.getUserTraits(t);if(this.hasTraits=!!i,this.traitsData=i,i){let s=jt(this.firestore,"users"),a=kt(s,_t("id","==",t)),c=yield Ht(a);if(!c.empty){let d=c.docs[0].data();d.traits?.updatedAt?this.traitsLastUpdated=d.traits.updatedAt.toDate():this.traitsLastUpdated=new Date}}let o=yield this.userService.getUserAttitudes(t);if(this.hasAttitudes=!!o,this.attitudesData=o,o){let s=jt(this.firestore,"users"),a=kt(s,_t("id","==",t)),c=yield Ht(a);if(!c.empty){let d=c.docs[0].data();d.attitudes?.updatedAt?this.attitudesLastUpdated=d.attitudes.updatedAt.toDate():this.attitudesLastUpdated=new Date}}}catch(r){console.error("Error loading user profile:",r)}})}updateContext(){this.router.navigate(["/context"])}updateTraits(){this.router.navigate(["/traits"])}updateAttitudes(){this.router.navigate(["/attitudes"])}loadDashboardData(){return v(this,null,function*(){this.loadingService.show();try{let t=this.userService.getCurrentUserId();if(!t)throw new Error("No user ID found");let r=jt(this.firestore,"challenges"),i=kt(r,_t("userId","==",t),_t("status","==","completed")),s=(yield Ht(i)).size,a=jt(this.firestore,"final_results"),c=kt(a,_t("userId","==",t)),u=yield Ht(c),d=[],f=[],w=[],E=0,S=0,x={},N=[],k=null;u.forEach(Fe=>{let Z=Fe.data();if(Z.badges&&(d=[...d,...Z.badges]),Z.insights&&(f=[...f,...Z.insights]),Z.recommendations&&(w=[...w,...Z.recommendations]),Z.rounds){let D=Object.values(Z.rounds).map(C=>C.score);E+=D.reduce((C,A)=>C+A,0),S+=D.length,Object.values(Z.rounds).forEach(C=>{C.strengths&&C.strengths.forEach(A=>{let M=A.toLowerCase().replace(/\s+/g,"-");x[M]=(x[M]||0)+1})});let b={title:Z.focusArea?.name||"Challenge",score:Math.round(D.reduce((C,A)=>C+A,0)/D.length),focusArea:Z.focusArea?.name||"General",date:Fe.data().timestamp||new Date};N.push(b),(!k||b.date>k.date)&&(k=b)}});let X=S>0?E/S:0,K=Math.floor(s/5)+1,re=Math.min(s,7);this.dashboardData={level:K,overallProgress:Math.round(X/100*100),challengesCompleted:s,totalBadges:d.length,streakDays:re,skillLevels:this.transformSkillLevels(x),recentChallenges:this.transformChallenges(N),badges:this.transformBadges(d),insights:f.length>0?f:["No insights available yet"],recommendations:w.length>0?w:["No recommendations available yet"],lastRound:k?{title:k.title,focusArea:k.focusArea,score:k.score,date:k.date}:null}}catch(t){console.error("Error loading dashboard data:",t)}finally{this.loadingService.hide()}})}transformSkillLevels(t){return Object.entries(t).map(([r,i])=>({name:this.formatSkillName(r),level:i,progress:this.calculateSkillProgress(i)}))}transformChallenges(t){console.log("Raw challenges:",t);let r=t.reduce((o,s)=>{let a=`${s.title}-${s.focusArea}-${s.date}`;return console.log("Processing challenge:",s,"Key:",a),o.has(a)?console.log("Duplicate found:",a):o.set(a,s),o},new Map),i=Array.from(r.values()).map(o=>({title:o.title,score:o.score||0,focusArea:o.focusArea,date:o.date instanceof Date?o.date:new Date(o.date)})).sort((o,s)=>s.date.getTime()-o.date.getTime()).slice(0,5);return console.log("Transformed challenges:",i),i}transformBadges(t){return t.map(r=>({name:r.name,icon:r.icon||"\u{1F3C6}",description:r.description,date:new Date}))}calculateOverallProgress(t){if(!t)return 0;let r=Object.values(t.rounds).map(o=>o.score);if(r.length===0)return 0;let i=r.reduce((o,s)=>o+s,0)/r.length;return Math.round(i/100*100)}calculateChallengesCompleted(t){return t?Object.keys(t.rounds).length:0}formatSkillName(t){return t.split("-").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}calculateSkillProgress(t){return t/10*100}formatDate(t){return t.toLocaleDateString()}getTraitQuestionTitle(t){return this.traitsData?.questions?.find(r=>r.id===t)?.title||"Unknown Trait"}getAttitudeQuestionTitle(t){return this.attitudesData?.questions?.find(r=>r.id===t)?.title||"Unknown Attitude"}trackByChallenge(t,r){return r.title}static \u0275fac=function(r){return new(r||n)(L(gN),L(Ac),L(ze),L(jo),L(Tt),L(ke))};static \u0275cmp=we({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[Ee],decls:125,vars:21,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"bg-white","rounded-lg","shadow-lg","p-6","mb-8"],[1,"flex","flex-col","md:flex-row","justify-between","items-center"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-2"],[1,"mt-4","md:mt-0"],[1,"flex","items-center"],[1,"text-4xl","font-bold","text-indigo-600","mr-4"],[1,"text-sm","text-gray-600"],[1,"w-32","bg-gray-200","rounded-full","h-2.5"],[1,"bg-indigo-600","h-2.5","rounded-full"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-6","mb-8"],[1,"bg-white","rounded-lg","shadow-lg","p-6"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-3xl","font-bold","text-indigo-600"],[1,"flex","flex-col","items-center","text-center"],[1,"text-2xl","font-bold","text-gray-900","mb-4"],[1,"text-gray-600","mb-6"],["routerLink","/focus",1,"bg-indigo-600","text-white","px-8","py-4","rounded-lg","font-semibold","hover:bg-indigo-700","transition-colors","text-lg"],[1,"text-2xl","font-bold","text-gray-900","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["class","space-y-2",4,"ngFor","ngForOf"],["class","border border-gray-200 rounded-lg p-4",4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["class","border border-gray-200 rounded-lg p-4",4,"ngFor","ngForOf"],[1,"space-y-4"],["class","flex items-start",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"flex","space-x-4"],[1,"flex","items-center","text-indigo-600","hover:text-indigo-700",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"text-gray-900"],[4,"ngIf"],[1,"space-y-2"],[1,"flex","justify-between"],[1,"text-indigo-600"],[1,"w-full","bg-gray-200","rounded-full","h-2.5"],[1,"border","border-gray-200","rounded-lg","p-4"],[1,"flex","justify-between","items-start"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-right"],[1,"text-2xl","font-bold","text-indigo-600"],[1,"text-4xl","mb-2"],[1,"text-gray-600"],[1,"text-sm","text-gray-500","mt-2"],[1,"flex","items-start"],[1,"flex-shrink-0"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-indigo-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3","text-gray-700"],[1,"mt-4","space-y-3"],["class","flex items-center justify-between",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between"],[1,"text-gray-700"],[1,"w-32","bg-gray-200","rounded-full","h-2.5","mr-2"]],template:function(r,i){r&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),y(5,"Dashboard"),g(),m(6,"p",4),y(7,"Welcome back! Here's your progress overview."),g()(),m(8,"div",5)(9,"div",6)(10,"div",7),y(11),g(),m(12,"div")(13,"p",8),y(14,"Level"),g(),m(15,"div",9),ce(16,"div",10),g()()()()()(),m(17,"div",11)(18,"div",12)(19,"h3",13),y(20,"Challenges Completed"),g(),m(21,"p",14),y(22),g()(),m(23,"div",12)(24,"h3",13),y(25,"Total Badges"),g(),m(26,"p",14),y(27),g()(),m(28,"div",12)(29,"h3",13),y(30,"Streak Days"),g(),m(31,"p",14),y(32),g()(),m(33,"div",12)(34,"h3",13),y(35,"Overall Progress"),g(),m(36,"p",14),y(37),g()()(),m(38,"div",1)(39,"div",15)(40,"h2",16),y(41,"Ready for Your Next Challenge?"),g(),m(42,"p",17),y(43,"Test your skills and improve your performance with a new challenge."),g(),m(44,"button",18),y(45," Start New Challenge "),g()()(),m(46,"div",1)(47,"h2",19),y(48,"Skill Levels"),g(),m(49,"div",20),H(50,l8,8,4,"div",21),g()(),m(51,"div",1)(52,"h2",19),y(53,"Recent Challenges"),g(),m(54,"div",20),H(55,u8,10,3,"div",22),g()(),m(56,"div",1)(57,"h2",19),y(58,"Your Badges"),g(),m(59,"div",23),H(60,d8,9,4,"div",24),g()(),m(61,"div",1)(62,"h2",19),y(63,"Performance Insights"),g(),m(64,"div",25),H(65,h8,6,1,"div",26),g()(),m(66,"div",1)(67,"h2",19),y(68,"Recommendations"),g(),m(69,"div",25),H(70,f8,6,1,"div",26),g()(),m(71,"div",12)(72,"div",27)(73,"h2",28),y(74,"Your Profile"),g(),m(75,"div",29)(76,"button",30),ae("click",function(){return i.updateContext()}),Yt(),m(77,"svg",31),ce(78,"path",32),g(),y(79," Update Context "),g(),gr(),m(80,"button",30),ae("click",function(){return i.updateTraits()}),Yt(),m(81,"svg",31),ce(82,"path",32),g(),y(83," Update Traits "),g(),gr(),m(84,"button",30),ae("click",function(){return i.updateAttitudes()}),Yt(),m(85,"svg",31),ce(86,"path",32),g(),y(87," Update Attitudes "),g()()(),gr(),m(88,"div",23)(89,"div")(90,"h3",33),y(91,"Personal Information"),g(),m(92,"div",25)(93,"div")(94,"p",8),y(95,"Name"),g(),m(96,"p",34),y(97),g()(),m(98,"div")(99,"p",8),y(100,"Email"),g(),m(101,"p",34),y(102),g()(),m(103,"div")(104,"p",8),y(105,"Professional Title"),g(),m(106,"p",34),y(107),g()(),m(108,"div")(109,"p",8),y(110,"Location"),g(),m(111,"p",34),y(112),g()()()(),m(113,"div")(114,"h3",33),y(115,"Traits Assessment"),g(),m(116,"div",25),H(117,m8,8,5,"div",35)(118,g8,3,0,"div",35),g()(),m(119,"div")(120,"h3",33),y(121,"Attitudes Assessment"),g(),m(122,"div",25),H(123,v8,8,5,"div",35)(124,_8,3,0,"div",35),g()()()()()),r&2&&(I(11),q(i.dashboardData.level),I(5),vr("width",i.dashboardData.overallProgress,"%"),I(6),q(i.dashboardData.challengesCompleted),I(5),q(i.dashboardData.totalBadges),I(5),q(i.dashboardData.streakDays),I(5),J("",i.dashboardData.overallProgress,"%"),I(13),F("ngForOf",i.dashboardData.skillLevels),I(5),F("ngForOf",i.dashboardData.recentChallenges)("ngForTrackBy",i.trackByChallenge),I(5),F("ngForOf",i.dashboardData.badges),I(5),F("ngForOf",i.dashboardData.insights),I(5),F("ngForOf",i.dashboardData.recommendations),I(27),q((i.userContext==null?null:i.userContext.name)||"Not set"),I(5),q((i.userContext==null?null:i.userContext.email)||"Not set"),I(5),q((i.userContext==null?null:i.userContext.professionalTitle)||"Not set"),I(5),q((i.userContext==null?null:i.userContext.location)||"Not set"),I(5),F("ngIf",i.hasTraits),I(),F("ngIf",!i.hasTraits),I(5),F("ngIf",i.hasAttitudes),I(),F("ngIf",!i.hasAttitudes))},dependencies:[Te,et,lt,QD,Rt,$r],styles:['.dashboard-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f9fafb;padding:2rem}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:1rem}}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.dashboard-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#111827;margin-bottom:.5rem}.dashboard-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:1.1rem}.dashboard-header[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#6366f1);padding:.75rem 1.5rem;border-radius:9999px;color:#fff;font-weight:600}.dashboard-header[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]   .level-number[_ngcontent-%COMP%]{font-size:1.1rem}.progress-overview[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;gap:2rem;margin-bottom:2rem}@media (max-width: 768px){.progress-overview[_ngcontent-%COMP%]{grid-template-columns:1fr}}.progress-overview[_ngcontent-%COMP%]   .overall-progress[_ngcontent-%COMP%]{text-align:center}.progress-overview[_ngcontent-%COMP%]   .overall-progress[_ngcontent-%COMP%]   .progress-circle[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;background:conic-gradient(#4f46e5 calc(var(--progress) * 1%),#e5e7eb 0);display:flex;align-items:center;justify-content:center;margin:0 auto 1rem;position:relative}.progress-overview[_ngcontent-%COMP%]   .overall-progress[_ngcontent-%COMP%]   .progress-circle[_ngcontent-%COMP%]:before{content:"";position:absolute;width:120px;height:120px;background:#fff;border-radius:50%}.progress-overview[_ngcontent-%COMP%]   .overall-progress[_ngcontent-%COMP%]   .progress-circle[_ngcontent-%COMP%]   .progress-value[_ngcontent-%COMP%]{position:relative;font-size:2rem;font-weight:700;color:#111827}.progress-overview[_ngcontent-%COMP%]   .overall-progress[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#6b7280;font-size:1.1rem}.progress-overview[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}@media (max-width: 768px){.progress-overview[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.progress-overview[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:.75rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:transform .2s ease-in-out;text-align:center}.progress-overview[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.progress-overview[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{display:block;font-size:2rem;font-weight:700;color:#4f46e5;margin-bottom:.5rem}.progress-overview[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#6b7280;font-size:.9rem}.skills-section[_ngcontent-%COMP%]{margin-bottom:2rem}.skills-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#111827;margin-bottom:1rem}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}@media (max-width: 768px){.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:.75rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:transform .2s ease-in-out}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#111827}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-level[_ngcontent-%COMP%]{color:#4f46e5;font-weight:600}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:8px;background:#e5e7eb;border-radius:9999px;overflow:hidden}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#4f46e5,#6366f1);transition:width .3s ease-in-out}.recent-challenges[_ngcontent-%COMP%]{margin-bottom:2rem}.recent-challenges[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#111827;margin-bottom:1rem}.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}@media (max-width: 768px){.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]   .challenge-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:.75rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:transform .2s ease-in-out}.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]   .challenge-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]   .challenge-card[_ngcontent-%COMP%]   .challenge-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]   .challenge-card[_ngcontent-%COMP%]   .challenge-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#111827}.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]   .challenge-card[_ngcontent-%COMP%]   .challenge-header[_ngcontent-%COMP%]   .challenge-score[_ngcontent-%COMP%]{color:#10b981;font-weight:600}.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]   .challenge-card[_ngcontent-%COMP%]   .challenge-focus[_ngcontent-%COMP%]{color:#6b7280;font-size:.9rem;margin-bottom:.5rem}.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]   .challenge-card[_ngcontent-%COMP%]   .challenge-date[_ngcontent-%COMP%]{color:#6b7280;font-size:.8rem}.badges-section[_ngcontent-%COMP%]{margin-bottom:2rem}.badges-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#111827;margin-bottom:1rem}.badges-section[_ngcontent-%COMP%]   .badges-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}@media (max-width: 768px){.badges-section[_ngcontent-%COMP%]   .badges-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.badges-section[_ngcontent-%COMP%]   .badges-grid[_ngcontent-%COMP%]   .badge-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:.75rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:transform .2s ease-in-out;text-align:center}.badges-section[_ngcontent-%COMP%]   .badges-grid[_ngcontent-%COMP%]   .badge-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.badges-section[_ngcontent-%COMP%]   .badges-grid[_ngcontent-%COMP%]   .badge-card[_ngcontent-%COMP%]   .badge-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:1rem}.badges-section[_ngcontent-%COMP%]   .badges-grid[_ngcontent-%COMP%]   .badge-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#111827;margin-bottom:.5rem}.badges-section[_ngcontent-%COMP%]   .badges-grid[_ngcontent-%COMP%]   .badge-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;font-size:.9rem;margin-bottom:.5rem}.badges-section[_ngcontent-%COMP%]   .badges-grid[_ngcontent-%COMP%]   .badge-card[_ngcontent-%COMP%]   .badge-date[_ngcontent-%COMP%]{color:#6b7280;font-size:.8rem}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:2rem}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:.5rem;font-weight:600;transition:all .2s ease-in-out}.action-buttons[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]{background:#4f46e5;color:#fff}.action-buttons[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]:hover{background:#3a30e2}.action-buttons[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{background:#e5e7eb;color:#111827}.action-buttons[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover{background:#d7dae0}']})}return n})();function w8(n,e){if(n&1&&(m(0,"div",10)(1,"div",11)(2,"div",16)(3,"div",17)(4,"span",18),y(5),g()(),m(6,"div")(7,"h3",19),y(8),g(),m(9,"p",20),y(10),g(),m(11,"p",21),y(12),g()()()()()),n&2){let t=e.$implicit;I(5),q(t.icon),I(3),q(t.title),I(2),q(t.description),I(2),q(t.date)}}var vN=(()=>{class n{profileStats={totalChallenges:50,completedChallenges:35,winRate:75,averageScore:85,rank:"Master",experience:2500,level:5};achievements=[{id:"1",title:"Ethics Expert",description:"Completed 10 ethics challenges with perfect scores",date:"2024-03-15",icon:"\u{1F3C6}"},{id:"2",title:"Quick Thinker",description:"Solved a challenge in under 5 minutes",date:"2024-03-10",icon:"\u26A1"},{id:"3",title:"Tournament Champion",description:"Won first place in the AI Ethics Championship",date:"2024-02-28",icon:"\u{1F3AF}"}];static \u0275fac=function(r){return new(r||n)};static \u0275cmp=we({type:n,selectors:[["app-profile"]],standalone:!0,features:[Ee],decls:44,vars:8,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"flex","items-center","gap-6","mb-8"],[1,"w-24","h-24","rounded-full","bg-gray-200","flex","items-center","justify-center"],[1,"text-3xl"],[1,"text-3xl","font-bold"],[1,"text-gray-600"],[1,"flex","items-center","gap-2","mt-2"],[1,"badge","badge-primary"],[1,"text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],[1,"card"],[1,"card-body"],[1,"text-lg","font-semibold","mb-2"],[1,"text-2xl","font-bold","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","card",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","rounded-full","bg-primary/10","flex","items-center","justify-center"],[1,"text-2xl"],[1,"font-semibold"],[1,"text-sm","text-gray-600"],[1,"text-xs","text-gray-500","mt-1"]],template:function(r,i){r&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),y(4,"\u{1F464}"),g()(),m(5,"div")(6,"h1",4),y(7,"John Doe"),g(),m(8,"p",5),y(9,"AI Ethics Expert"),g(),m(10,"div",6)(11,"span",7),y(12),g(),m(13,"span",8),y(14),g()()()(),m(15,"div",9)(16,"div",10)(17,"div",11)(18,"h3",12),y(19,"Challenges"),g(),m(20,"p",4),y(21),g()()(),m(22,"div",10)(23,"div",11)(24,"h3",12),y(25,"Win Rate"),g(),m(26,"p",4),y(27),g()()(),m(28,"div",10)(29,"div",11)(30,"h3",12),y(31,"Average Score"),g(),m(32,"p",4),y(33),g()()(),m(34,"div",10)(35,"div",11)(36,"h3",12),y(37,"Rank"),g(),m(38,"p",4),y(39),g()()()(),m(40,"h2",13),y(41,"Achievements"),g(),m(42,"div",14),H(43,w8,13,4,"div",15),g()()),r&2&&(I(12),J("Level ",i.profileStats.level,""),I(2),J("",i.profileStats.experience," XP"),I(7),cs("",i.profileStats.completedChallenges,"/",i.profileStats.totalChallenges,""),I(6),J("",i.profileStats.winRate,"%"),I(6),q(i.profileStats.averageScore),I(6),q(i.profileStats.rank),I(4),F("ngForOf",i.achievements))},dependencies:[Te,et,Rt],encapsulation:2})}return n})();function E8(n,e){if(n&1&&(m(0,"option",20),y(1),g()),n&2){let t=e.$implicit;F("value",t.value),I(),J(" ",t.title," ")}}function I8(n,e){if(n&1){let t=He();m(0,"div",6)(1,"div")(2,"h3",7),y(3),g(),m(4,"p",8),y(5),g()(),m(6,"label",11)(7,"input",12),_n("ngModelChange",function(i){let o=Le(t).$implicit;return Dn(o.enabled,i)||(o.enabled=i),Ve(i)}),g(),ce(8,"span",13),g()()}if(n&2){let t=e.$implicit;I(3),q(t.title),I(2),q(t.description),I(2),vn("ngModel",t.enabled)}}var _N=(()=>{class n{themes=[{id:"1",title:"Light",value:"light"},{id:"2",title:"Dark",value:"dark"},{id:"3",title:"System",value:"system"}];selectedTheme="light";darkMode=!1;profileVisibility="public";showOnlineStatus=!0;notificationSettings=[{id:"1",title:"Challenge Invitations",description:"Get notified when you receive new challenge invitations",enabled:!0},{id:"2",title:"Tournament Updates",description:"Receive updates about tournaments you're participating in",enabled:!0},{id:"3",title:"Achievement Unlocked",description:"Get notified when you unlock new achievements",enabled:!0},{id:"4",title:"Friend Activity",description:"See when friends complete challenges or join tournaments",enabled:!1}];static \u0275fac=function(r){return new(r||n)};static \u0275cmp=we({type:n,selectors:[["app-settings"]],standalone:!0,features:[Ee],decls:61,vars:6,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-3xl","font-bold","mb-8"],[1,"card","mb-8"],[1,"card-body"],[1,"text-xl","font-semibold","mb-4"],[1,"space-y-4"],[1,"flex","items-center","justify-between"],[1,"font-medium"],[1,"text-sm","text-gray-600"],[1,"select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"switch"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"slider"],["class","flex items-center justify-between",4,"ngFor","ngForOf"],["value","public"],["value","friends"],["value","private"],[1,"flex","justify-end"],[1,"btn","btn-primary"],[3,"value"]],template:function(r,i){r&1&&(m(0,"div",0)(1,"h1",1),y(2,"Settings"),g(),m(3,"div",2)(4,"div",3)(5,"h2",4),y(6,"Theme"),g(),m(7,"div",5)(8,"div",6)(9,"div")(10,"h3",7),y(11,"Color Theme"),g(),m(12,"p",8),y(13,"Choose your preferred color theme"),g()(),m(14,"select",9),_n("ngModelChange",function(s){return Dn(i.selectedTheme,s)||(i.selectedTheme=s),s}),H(15,E8,2,2,"option",10),g()(),m(16,"div",6)(17,"div")(18,"h3",7),y(19,"Dark Mode"),g(),m(20,"p",8),y(21,"Toggle dark mode"),g()(),m(22,"label",11)(23,"input",12),_n("ngModelChange",function(s){return Dn(i.darkMode,s)||(i.darkMode=s),s}),g(),ce(24,"span",13),g()()()()(),m(25,"div",2)(26,"div",3)(27,"h2",4),y(28,"Notifications"),g(),m(29,"div",5),H(30,I8,9,3,"div",14),g()()(),m(31,"div",2)(32,"div",3)(33,"h2",4),y(34,"Privacy"),g(),m(35,"div",5)(36,"div",6)(37,"div")(38,"h3",7),y(39,"Profile Visibility"),g(),m(40,"p",8),y(41,"Control who can see your profile"),g()(),m(42,"select",9),_n("ngModelChange",function(s){return Dn(i.profileVisibility,s)||(i.profileVisibility=s),s}),m(43,"option",15),y(44,"Public"),g(),m(45,"option",16),y(46,"Friends Only"),g(),m(47,"option",17),y(48,"Private"),g()()(),m(49,"div",6)(50,"div")(51,"h3",7),y(52,"Show Online Status"),g(),m(53,"p",8),y(54,"Display when you're active"),g()(),m(55,"label",11)(56,"input",12),_n("ngModelChange",function(s){return Dn(i.showOnlineStatus,s)||(i.showOnlineStatus=s),s}),g(),ce(57,"span",13),g()()()()(),m(58,"div",18)(59,"button",19),y(60,"Save Changes"),g()()()),r&2&&(I(14),vn("ngModel",i.selectedTheme),I(),F("ngForOf",i.themes),I(8),vn("ngModel",i.darkMode),I(7),F("ngForOf",i.notificationSettings),I(12),vn("ngModel",i.profileVisibility),I(14),vn("ngModel",i.showOnlineStatus))},dependencies:[Te,et,or,Cm,Sm,WI,Sc,ei,ji],styles:['.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:34px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:34px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.select[_ngcontent-%COMP%]{border-radius:.375rem;border-width:1px;padding:.5rem .75rem}']})}return n})();function b8(n,e){if(n&1&&(m(0,"div",15)(1,"div",8)(2,"h3",18),y(3),g(),m(4,"p",10),y(5),g()()()),n&2){let t=e.$implicit;I(3),q(t.question),I(2),q(t.answer)}}function C8(n,e){if(n&1&&(m(0,"span",21),y(1),g()),n&2){let t=e.$implicit;I(),J(" ",t," ")}}function S8(n,e){if(n&1&&(m(0,"div",15)(1,"div",8)(2,"div",19),H(3,C8,2,1,"span",20),g(),m(4,"p",10),y(5),g()()()),n&2){let t=e.$implicit;I(3),F("ngForOf",t.keys),I(2),q(t.description)}}var wN=(()=>{class n{faqs=[{id:"1",question:"How do I start a challenge?",answer:"To start a challenge, navigate to the Challenges page and click on any available challenge. Follow the instructions provided to complete the challenge."},{id:"2",question:"How are scores calculated?",answer:"Scores are based on your performance in various aspects of the challenge, including accuracy, speed, and adherence to best practices."},{id:"3",question:"Can I participate in multiple tournaments?",answer:"Yes, you can participate in multiple tournaments simultaneously, as long as they don't have overlapping schedules."}];keyboardShortcuts=[{id:"1",keys:["\u2318","H"],description:"Navigate to home page"},{id:"2",keys:["\u2318","D"],description:"Navigate to dashboard"},{id:"3",keys:["\u2318","C"],description:"Navigate to challenges"},{id:"4",keys:["\u2318","T"],description:"Navigate to tournaments"},{id:"5",keys:["\u2318","R"],description:"Navigate to results"},{id:"6",keys:["\u2318","?"],description:"Open help center"}];static \u0275fac=function(r){return new(r||n)};static \u0275cmp=we({type:n,selectors:[["app-help"]],standalone:!0,features:[Ee],decls:45,vars:2,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-3xl","font-bold","mb-8"],[1,"mb-8"],[1,"relative"],["type","text","placeholder","Search for help...",1,"w-full","px-4","py-2","border","rounded-lg"],[1,"absolute","right-2","top-2"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-8"],[1,"card","cursor-pointer","hover:shadow-lg","transition-shadow"],[1,"card-body"],[1,"text-xl","font-semibold","mb-2"],[1,"text-gray-600"],[1,"text-2xl","font-bold","mb-4"],[1,"space-y-4"],["class","card",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"card"],[1,"text-gray-600","mb-4"],[1,"btn","btn-primary"],[1,"text-lg","font-semibold","mb-2"],[1,"flex","items-center","gap-2","mb-2"],["class","px-2 py-1 bg-gray-100 rounded",4,"ngFor","ngForOf"],[1,"px-2","py-1","bg-gray-100","rounded"]],template:function(r,i){r&1&&(m(0,"div",0)(1,"h1",1),y(2,"Help Center"),g(),m(3,"div",2)(4,"div",3),ce(5,"input",4),m(6,"button",5),y(7," \u{1F50D} "),g()()(),m(8,"div",6)(9,"div",7)(10,"div",8)(11,"h3",9),y(12,"Getting Started"),g(),m(13,"p",10),y(14,"Learn the basics of AI Fight Club"),g()()(),m(15,"div",7)(16,"div",8)(17,"h3",9),y(18,"Challenges"),g(),m(19,"p",10),y(20,"Understand how challenges work"),g()()(),m(21,"div",7)(22,"div",8)(23,"h3",9),y(24,"Tournaments"),g(),m(25,"p",10),y(26,"Learn about tournament rules"),g()()()(),m(27,"div",2)(28,"h2",11),y(29,"Frequently Asked Questions"),g(),m(30,"div",12),H(31,b8,6,2,"div",13),g()(),m(32,"div",2)(33,"h2",11),y(34,"Keyboard Shortcuts"),g(),m(35,"div",14),H(36,S8,6,2,"div",13),g()(),m(37,"div",15)(38,"div",8)(39,"h2",11),y(40,"Still Need Help?"),g(),m(41,"p",16),y(42," Our support team is here to help you with any questions or issues you might have. "),g(),m(43,"button",17),y(44,"Contact Support"),g()()()()),r&2&&(I(31),F("ngForOf",i.faqs),I(5),F("ngForOf",i.keyboardShortcuts))},dependencies:[Te,et,Rt],encapsulation:2})}return n})();function T8(n,e){if(n&1&&(m(0,"div",9)(1,"div",10)(2,"div",11)(3,"h3",12),y(4),g(),m(5,"span"),y(6),g()(),m(7,"p",13),y(8),g(),m(9,"div",14)(10,"div",15)(11,"span",16),y(12,"Category:"),g(),m(13,"span",17),y(14),g()(),m(15,"div",15)(16,"span",16),y(17,"Prize:"),g(),m(18,"span",17),y(19),g()(),m(20,"div",15)(21,"span",16),y(22,"Participants:"),g(),m(23,"span",17),y(24),g()(),m(25,"div",15)(26,"span",16),y(27,"Duration:"),g(),m(28,"span",17),y(29),g()()(),m(30,"div",18)(31,"button",3),y(32,"Join Tournament"),g()()()()),n&2){let t=e.$implicit,r=G();I(4),q(t.title),I(),On("badge "+r.getStatusClass(t.status)),I(),J(" ",t.status," "),I(2),q(t.description),I(6),q(t.category),I(5),q(t.prize),I(5),q(t.participants),I(5),cs("",t.startDate," - ",t.endDate,"")}}var EN=(()=>{class n{tournaments=[{id:"1",title:"AI Ethics Championship",description:"Compete in challenging scenarios focused on AI ethics and responsible AI development.",startDate:"2024-04-01",endDate:"2024-04-15",participants:128,status:"upcoming",prize:"$5,000",category:"Ethics"},{id:"2",title:"Machine Learning Masters",description:"Showcase your ML expertise in this competitive tournament.",startDate:"2024-03-15",endDate:"2024-03-30",participants:256,status:"active",prize:"$10,000",category:"Machine Learning"},{id:"3",title:"AI Safety Challenge",description:"Test your knowledge of AI safety principles and best practices.",startDate:"2024-02-01",endDate:"2024-02-15",participants:64,status:"completed",prize:"$3,000",category:"Safety"}];getStatusClass(t){switch(t){case"upcoming":return"badge upcoming";case"active":return"badge active";case"completed":return"badge completed";default:return"badge"}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=we({type:n,selectors:[["app-tournaments"]],standalone:!0,features:[Ee],decls:17,vars:1,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-3xl","font-bold"],[1,"btn","btn-primary"],[1,"flex","gap-4","mb-6"],[1,"btn","btn-outline","active"],[1,"btn","btn-outline"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-body"],[1,"flex","justify-between","items-start","mb-4"],[1,"text-xl","font-semibold"],[1,"text-gray-600","mb-4"],[1,"space-y-2","mb-4"],[1,"flex","justify-between"],[1,"text-gray-500"],[1,"font-medium"],[1,"flex","justify-end"]],template:function(r,i){r&1&&(m(0,"div",0)(1,"div",1)(2,"h1",2),y(3,"Tournaments"),g(),m(4,"button",3),y(5,"Create Tournament"),g()(),m(6,"div",4)(7,"button",5),y(8,"All"),g(),m(9,"button",6),y(10,"Upcoming"),g(),m(11,"button",6),y(12,"Active"),g(),m(13,"button",6),y(14,"Completed"),g()(),m(15,"div",7),H(16,T8,33,10,"div",8),g()()),r&2&&(I(16),F("ngForOf",i.tournaments))},dependencies:[Te,et,Rt],styles:[".badge[_ngcontent-%COMP%]{border-radius:9999px;padding:.25rem .5rem;font-size:.875rem;line-height:1.25rem;font-weight:500}.badge.upcoming[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.badge.active[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.badge.completed[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}"]})}return n})();var IN=(()=>{class n{firestore;resultsAnalysisService;challengeService;LEADERBOARD_LIMIT=100;constructor(t,r,i){this.firestore=t,this.resultsAnalysisService=r,this.challengeService=i}getLeaderboard(t="all"){return v(this,null,function*(){try{let r=jt(this.firestore,"final_results"),i=kt(r,vc("overallScore","desc"),yc(this.LEADERBOARD_LIMIT));if(t!=="all"){let a=new Date,c=new Date;switch(t){case"month":c.setMonth(a.getMonth()-1);break;case"week":c.setDate(a.getDate()-7);break;case"day":c.setDate(a.getDate()-1);break}i=kt(i,_t("timestamp",">=",c.toISOString()))}let o=yield Ht(i),s=[];for(let a=0;a<o.docs.length;a++){let u=o.docs[a].data(),d=dn(this.firestore,`users/${u.userId}`),f=yield Dr(d),w=f.exists()?f.data():null;console.log("userData",w);let E=jt(this.firestore,"challenges"),S=kt(E,_t("userId","==",u.userId)),N=(yield Ht(S)).size;s.push({rank:a+1,userId:u.userId,name:w?.name||"Anonymous User",score:u.overallScore,challenges:N,badges:u.badges.map(k=>k.name),focusArea:u.focusArea?.name||"General",recentScore:u.overallScore})}return s}catch(r){return console.error("Error fetching leaderboard data:",r),[]}})}static \u0275fac=function(r){return new(r||n)(U(Tt),U(Ac),U(ti))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function A8(n,e){n&1&&(m(0,"div",12)(1,"div",13),y(2,"Loading leaderboard data..."),g()())}function x8(n,e){n&1&&(m(0,"div",14)(1,"div",15),y(2,"Failed to load leaderboard data. Please try again later."),g()())}function M8(n,e){if(n&1&&(m(0,"span",32),y(1),g()),n&2){let t=e.$implicit;I(),J(" ",t," ")}}function R8(n,e){if(n&1&&(m(0,"tr",22)(1,"td",23)(2,"div",24),y(3),g()(),m(4,"td",23)(5,"div",25)(6,"div",26)(7,"div",27),y(8),g()(),m(9,"div",28)(10,"div",24),y(11),g()()()(),m(12,"td",23)(13,"div",29),y(14),g()(),m(15,"td",23)(16,"div",29),y(17),g()(),m(18,"td",23)(19,"div",29),y(20),g()(),m(21,"td",23)(22,"div",30),H(23,M8,2,1,"span",31),g()()()),n&2){let t=e.$implicit;I(3),q(t.rank),I(5),J(" ",t.name.charAt(0)," "),I(3),q(t.name),I(3),J("",t.score,"%"),I(3),q(t.challenges),I(3),q(t.focusArea),I(3),F("ngForOf",t.badges)}}function P8(n,e){if(n&1&&(m(0,"div",16)(1,"table",17)(2,"thead",18)(3,"tr")(4,"th",19),y(5," Rank "),g(),m(6,"th",19),y(7," Player "),g(),m(8,"th",19),y(9," Score "),g(),m(10,"th",19),y(11," Challenges "),g(),m(12,"th",19),y(13," Focus Area "),g(),m(14,"th",19),y(15," Badges "),g()()(),m(16,"tbody",20),H(17,R8,24,7,"tr",21),g()()()),n&2){let t=G();I(17),F("ngForOf",t.leaderboardData)}}var bN=(()=>{class n{leaderboardService;leaderboardData=[];loading=!0;error=!1;selectedTimeFrame="all";constructor(t){this.leaderboardService=t}ngOnInit(){this.loadLeaderboard()}loadLeaderboard(){return v(this,null,function*(){this.loading=!0,this.error=!1;try{this.leaderboardData=yield this.leaderboardService.getLeaderboard(this.selectedTimeFrame)}catch(t){console.error("Error loading leaderboard:",t),this.error=!0}finally{this.loading=!1}})}static \u0275fac=function(r){return new(r||n)(L(IN))};static \u0275cmp=we({type:n,selectors:[["app-leaderboard"]],standalone:!0,features:[Ee],decls:17,vars:4,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900"],[1,"flex","space-x-4"],[1,"border","rounded-md","px-3","py-2",3,"ngModelChange","change","ngModel"],["value","all"],["value","month"],["value","week"],["value","day"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-lg p-4 mb-8",4,"ngIf"],["class","bg-white rounded-lg shadow overflow-hidden",4,"ngIf"],[1,"flex","justify-center","items-center","py-12"],[1,"text-gray-600"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","mb-8"],[1,"text-red-600"],[1,"bg-white","rounded-lg","shadow","overflow-hidden"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"flex","items-center"],[1,"flex-shrink-0","h-10","w-10"],[1,"h-10","w-10","rounded-full","bg-gray-200","flex","items-center","justify-center"],[1,"ml-4"],[1,"text-sm","text-gray-900"],[1,"flex","space-x-1"],["class","px-2 py-1 text-xs font-medium rounded-full bg-indigo-100 text-indigo-800",4,"ngFor","ngForOf"],[1,"px-2","py-1","text-xs","font-medium","rounded-full","bg-indigo-100","text-indigo-800"]],template:function(r,i){r&1&&(m(0,"div",0)(1,"div",1)(2,"h1",2),y(3,"Leaderboard"),g(),m(4,"div",3)(5,"select",4),_n("ngModelChange",function(s){return Dn(i.selectedTimeFrame,s)||(i.selectedTimeFrame=s),s}),ae("change",function(){return i.loadLeaderboard()}),m(6,"option",5),y(7,"All Time"),g(),m(8,"option",6),y(9,"This Month"),g(),m(10,"option",7),y(11,"This Week"),g(),m(12,"option",8),y(13,"Today"),g()()()(),H(14,A8,3,0,"div",9)(15,x8,3,0,"div",10)(16,P8,18,1,"div",11),g()),r&2&&(I(5),vn("ngModel",i.selectedTimeFrame),I(9),F("ngIf",i.loading),I(),F("ngIf",i.error),I(),F("ngIf",!i.loading&&!i.error))},dependencies:[Te,et,lt,Rt,or,Cm,Sm,Sc,ei,ji],encapsulation:2})}return n})();function N8(n,e){if(n&1){let t=He();m(0,"button",25),ae("click",function(){Le(t);let i=G().$implicit,o=G();return Ve(o.startChallenge(i))}),y(1," Start Challenge "),g()}}function O8(n,e){if(n&1&&(m(0,"div",26)(1,"span",27),y(2,"Completed"),g(),m(3,"span",28),y(4),g()()),n&2){let t=G().$implicit;I(4),J("Score: ",t.score,"")}}function k8(n,e){if(n&1&&(m(0,"div",15)(1,"div",16)(2,"div",17)(3,"h3",18),y(4),g(),m(5,"span",19),y(6),g()(),m(7,"p",20),y(8),g(),m(9,"div",21)(10,"span"),y(11),g(),m(12,"span"),y(13),g(),m(14,"span"),y(15),g()(),m(16,"div",22),H(17,N8,2,0,"button",23)(18,O8,5,1,"div",24),g()()()),n&2){let t=e.$implicit,r=G();I(4),q(t.title),I(),On(r.getDifficultyClass(t.difficulty)),I(),J(" ",t.difficulty," "),I(2),q(t.description),I(3),q(t.category),I(2),J("",t.timeLimit," minutes"),I(2),J("",t.points," points"),I(2),F("ngIf",!t.completed),I(),F("ngIf",t.completed)}}var CN=(()=>{class n{challenges=[{id:"1",title:"Ethical Decision Making",description:"Navigate complex ethical scenarios and make decisions that balance multiple stakeholders.",difficulty:"Hard",category:"Ethics",points:100,timeLimit:30,completed:!1},{id:"2",title:"Creative Problem Solving",description:"Generate innovative solutions to open-ended problems using creative thinking techniques.",difficulty:"Medium",category:"Creativity",points:75,timeLimit:20,completed:!0,score:85},{id:"3",title:"Data Analysis Challenge",description:"Analyze complex datasets and draw meaningful insights to solve business problems.",difficulty:"Hard",category:"Analysis",points:100,timeLimit:45,completed:!1},{id:"4",title:"Communication Strategy",description:"Develop effective communication strategies for different audiences and contexts.",difficulty:"Medium",category:"Communication",points:75,timeLimit:25,completed:!1},{id:"5",title:"Quick Ethics Quiz",description:"Test your knowledge of ethical principles and decision-making frameworks.",difficulty:"Easy",category:"Ethics",points:50,timeLimit:15,completed:!0,score:90},{id:"6",title:"Innovation Workshop",description:"Practice creative thinking techniques to generate innovative ideas and solutions.",difficulty:"Easy",category:"Creativity",points:50,timeLimit:20,completed:!1}];constructor(){}ngOnInit(){}getDifficultyClass(t){switch(t){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}startChallenge(t){console.log("Starting challenge:",t.id)}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=we({type:n,selectors:[["app-challenges"]],standalone:!0,features:[Ee],decls:27,vars:1,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900"],[1,"flex","space-x-4"],[1,"border","rounded-md","px-3","py-2"],["value","all"],["value","ethics"],["value","creativity"],["value","analysis"],["value","communication"],["value","easy"],["value","medium"],["value","hard"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-200",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow-md","overflow-hidden","hover:shadow-lg","transition-shadow","duration-200"],[1,"p-6"],[1,"flex","justify-between","items-start","mb-4"],[1,"text-xl","font-semibold","text-gray-900"],[1,"px-2","py-1","text-xs","font-medium","rounded-full"],[1,"text-gray-600","mb-4"],[1,"flex","items-center","justify-between","text-sm","text-gray-500","mb-4"],[1,"flex","justify-between","items-center"],["class","bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors duration-200",3,"click",4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-md","hover:bg-indigo-700","transition-colors","duration-200",3,"click"],[1,"flex","items-center","space-x-2"],[1,"text-green-600","font-medium"],[1,"text-gray-600"]],template:function(r,i){r&1&&(m(0,"div",0)(1,"div",1)(2,"h1",2),y(3,"Challenges"),g(),m(4,"div",3)(5,"select",4)(6,"option",5),y(7,"All Categories"),g(),m(8,"option",6),y(9,"Ethics"),g(),m(10,"option",7),y(11,"Creativity"),g(),m(12,"option",8),y(13,"Analysis"),g(),m(14,"option",9),y(15,"Communication"),g()(),m(16,"select",4)(17,"option",5),y(18,"All Difficulties"),g(),m(19,"option",10),y(20,"Easy"),g(),m(21,"option",11),y(22,"Medium"),g(),m(23,"option",12),y(24,"Hard"),g()()()(),m(25,"div",13),H(26,k8,19,10,"div",14),g()()),r&2&&(I(26),F("ngForOf",i.challenges))},dependencies:[Te,et,lt,Rt],encapsulation:2})}return n})();var SN=[{path:"",component:qI,canActivate:[Au]},{path:"welcome",component:qI,canActivate:[Au]},{path:"context",component:sN,data:{next:"traits"},canActivate:[]},{path:"traits",component:cN,data:{next:"attitudes"}},{path:"attitudes",component:lN,data:{next:"focus"}},{path:"focus",component:dN,data:{previous:"attitudes",next:"round/1"}},{path:"round/:challengeId",component:hN,data:{title:"Round"}},{path:"results/:challengeId",component:fN,data:{next:"dashboard"}},{path:"share/:challengeId",component:mN},{path:"dashboard",component:yN},{path:"profile",component:vN},{path:"settings",component:_N},{path:"help",component:wN},{path:"tournaments",component:EN},{path:"leaderboard",component:bN},{path:"challenges",component:CN}];var TN={providers:[Iv({eventCoalescing:!0}),ex(SN),oA(),Fy(Px(()=>Nx(rr.firebase)),OR(()=>kR()),A1(()=>M1()),HR(()=>GR())),bP(),Au]};var Am=(()=>{class n{router;userService;auth;isAuthenticatedSubject=new It(!1);isAuthenticated$=this.isAuthenticatedSubject.asObservable();currentUser=null;constructor(t,r,i){this.router=t,this.userService=r,this.auth=i,R1(this.auth,o=>{this.currentUser=o,this.isAuthenticatedSubject.next(!!o),o?(localStorage.setItem("isAuthenticated","true"),localStorage.setItem("userEmail",o.email||"")):(localStorage.removeItem("isAuthenticated"),localStorage.removeItem("userEmail"))})}isAuthenticated(){return this.isAuthenticatedSubject.value}getCurrentUser(){return this.currentUser}createAccountWithEmail(t,r){return v(this,null,function*(){try{let o=(yield x1(this.auth,t,r)).user,s=this.userService.getCurrentUserId();if(s)yield this.userService.updateUserAuthId(s,o.uid);else throw console.error("No user ID found in localStorage"),new Error("User not found")}catch(i){throw console.error("Error creating account:",i),new Error(i.message||"Failed to create account")}})}signInWithEmail(t,r){return v(this,null,function*(){try{yield N1(this.auth,t,r);let i=yield this.userService.getUserByAuthId(this.currentUser?.uid||"");i&&localStorage.setItem("mereka_user_id",i.id)}catch(i){throw console.error("Error signing in:",i),new Error(i.message||"Failed to sign in")}})}signInWithGoogle(){return v(this,null,function*(){try{let t=new N_,i=(yield O1(this.auth,t)).user,o=this.userService.getCurrentUserId();if(o)yield this.userService.updateUserAuthId(o,i.uid);else{let s=yield this.userService.getUserByAuthId(i.uid);if(s)localStorage.setItem("mereka_user_id",s.id);else throw yield W_(this.auth),console.error("No user ID found in localStorage"),new Error("User not found")}}catch(t){throw console.error("Error signing in with Google:",t),new Error(t.message||"Failed to sign in with Google")}})}logout(){return v(this,null,function*(){try{yield W_(this.auth),this.userService.clearCurrentUser(),this.router.navigate(["/"])}catch(t){throw console.error("Error signing out:",t),new Error(t.message||"Failed to sign out")}})}resetPassword(t){return v(this,null,function*(){try{yield P1(this.auth,t)}catch(r){throw console.error("Error sending password reset email:",r),r}})}static \u0275fac=function(r){return new(r||n)(U(ke),U(ze),U(_s))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function F8(n,e){if(n&1){let t=He();m(0,"div")(1,"label",18),y(2,"Password"),g(),m(3,"input",19),_n("ngModelChange",function(i){Le(t);let o=G();return Dn(o.password,i)||(o.password=i),Ve(i)}),g()()}if(n&2){let t=G();I(3),vn("ngModel",t.password)}}function L8(n,e){if(n&1){let t=He();m(0,"div")(1,"label",20),y(2,"Confirm Password"),g(),m(3,"input",21),_n("ngModelChange",function(i){Le(t);let o=G();return Dn(o.confirmPassword,i)||(o.confirmPassword=i),Ve(i)}),g()()}if(n&2){let t=G();I(3),vn("ngModel",t.confirmPassword)}}function V8(n,e){if(n&1&&(m(0,"div",22),y(1),g()),n&2){let t=G();I(),q(t.error)}}function U8(n,e){if(n&1){let t=He();m(0,"button",23),ae("click",function(){Le(t);let i=G();return Ve(i.loginWithGoogle())}),ce(1,"i",24),y(2," Sign in with Google "),g()}}function j8(n,e){if(n&1){let t=He();m(0,"div")(1,"a",25),ae("click",function(){Le(t);let i=G();return Ve(i.setMode("reset-password"))}),y(2,"Forgot password?"),g()()}}function B8(n,e){if(n&1){let t=He();m(0,"div")(1,"a",25),ae("click",function(){Le(t);let i=G();return Ve(i.setMode("login"))}),y(2,"Back to sign in"),g()()}}var AN=(()=>{class n{router;authService;mode="login";close=new at;email="";password="";confirmPassword="";isProcessing=!1;error="";constructor(t,r){this.router=t,this.authService=r}onSubmit(){return v(this,null,function*(){this.error="",this.isProcessing=!0;try{switch(this.mode){case"login":yield this.login();break;case"register":yield this.register();break;case"reset-password":yield this.resetPassword();break}}catch(t){this.error=t.message||"An error occurred. Please try again."}finally{this.isProcessing=!1}})}login(){return v(this,null,function*(){if(!this.email||!this.password)throw new Error("Please enter both email and password");yield this.authService.signInWithEmail(this.email,this.password),this.close.emit(),this.router.navigate(["/dashboard"])})}register(){return v(this,null,function*(){if(!this.email||!this.password||!this.confirmPassword)throw new Error("Please fill in all fields");if(this.password!==this.confirmPassword)throw new Error("Passwords do not match");yield this.authService.createAccountWithEmail(this.email,this.password),this.close.emit(),this.router.navigate(["/dashboard"])})}resetPassword(){return v(this,null,function*(){if(!this.email)throw new Error("Please enter your email");yield this.authService.resetPassword(this.email),this.close.emit()})}loginWithGoogle(){return v(this,null,function*(){try{yield this.authService.signInWithGoogle(),this.close.emit(),this.router.navigate(["/dashboard"])}catch(t){this.error=t.message||"Failed to sign in with Google"}})}setMode(t){this.mode=t,this.error=""}static \u0275fac=function(r){return new(r||n)(L(ke),L(Am))};static \u0275cmp=we({type:n,selectors:[["app-auth-popup"]],inputs:{mode:"mode"},outputs:{close:"close"},standalone:!0,features:[Ee],decls:27,vars:11,consts:[[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white"],[1,"mt-3"],[1,"text-lg","font-medium","text-gray-900"],[1,"text-sm","text-gray-500","mt-2"],[1,"mt-4","space-y-4",3,"ngSubmit"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","required","",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-primary","focus:ring-primary",3,"ngModelChange","ngModel"],[4,"ngIf"],["class","text-red-600 text-sm",4,"ngIf"],[1,"flex","flex-col","space-y-3"],["type","submit",1,"w-full","px-4","py-2","bg-primary","text-white","rounded-md","hover:bg-primary-dark","disabled:opacity-50",3,"disabled"],["type","button","class","w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 flex items-center justify-center",3,"click",4,"ngIf"],[1,"mt-4","text-sm","text-center","space-y-2"],[1,"absolute","top-2","right-2","text-gray-400","hover:text-gray-500",3,"click"],[1,"sr-only"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","required","",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-primary","focus:ring-primary",3,"ngModelChange","ngModel"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","confirmPassword","name","confirmPassword","required","",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-primary","focus:ring-primary",3,"ngModelChange","ngModel"],[1,"text-red-600","text-sm"],["type","button",1,"w-full","px-4","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","flex","items-center","justify-center",3,"click"],[1,"fab","fa-google","mr-2","text-red-500"],[1,"text-primary","hover:text-primary-dark","cursor-pointer",3,"click"]],template:function(r,i){r&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),y(4),g(),m(5,"p",4),y(6),g(),m(7,"form",5),ae("ngSubmit",function(){return i.onSubmit()}),m(8,"div")(9,"label",6),y(10,"Email"),g(),m(11,"input",7),_n("ngModelChange",function(s){return Dn(i.email,s)||(i.email=s),s}),g()(),H(12,F8,4,1,"div",8)(13,L8,4,1,"div",8)(14,V8,2,1,"div",9),m(15,"div",10)(16,"button",11),y(17),g(),H(18,U8,3,0,"button",12),g()(),m(19,"div",13),H(20,j8,3,0,"div",8)(21,B8,3,0,"div",8),g(),m(22,"button",14),ae("click",function(){return i.close.emit()}),m(23,"span",15),y(24,"Close"),g(),Yt(),m(25,"svg",16),ce(26,"path",17),g()()()()()),r&2&&(I(4),J(" ",i.mode==="login"?"Sign In":i.mode==="register"?"Create Account":"Reset Password"," "),I(2),J(" ",i.mode==="login"?"Sign in to your account":i.mode==="register"?"Create a new account":"Enter your email to reset your password"," "),I(5),vn("ngModel",i.email),I(),F("ngIf",i.mode!=="reset-password"),I(),F("ngIf",i.mode==="register"),I(),F("ngIf",i.error),I(2),F("disabled",i.isProcessing),I(),J(" ",i.isProcessing?"Processing...":i.mode==="login"?"Sign in":i.mode==="register"?"Create Account":"Reset Password"," "),I(),F("ngIf",i.mode!=="reset-password"),I(2),F("ngIf",i.mode==="login"),I(),F("ngIf",i.mode==="reset-password"))},dependencies:[Te,lt,or,bm,Uo,ei,wm,nb,ji,ZI]})}return n})();function $8(n,e){n&1&&(m(0,"div",10)(1,"a",11),y(2," Dashboard "),g(),m(3,"a",12),y(4," Leaderboard "),g(),m(5,"a",13),y(6," Help "),g()())}function q8(n,e){if(n&1){let t=He();m(0,"button",16),ae("click",function(){Le(t);let i=G(2);return Ve(i.openAuthPopup("register"))}),y(1," Save Progress "),g()}}function z8(n,e){if(n&1){let t=He();m(0,"button",17),ae("click",function(){Le(t);let i=G(2);return Ve(i.openAuthPopup("login"))}),y(1," Login "),g()}}function H8(n,e){if(n&1&&(kn(0),H(1,q8,2,0,"button",14)(2,z8,2,0,"button",15),Fn()),n&2){let t=G();I(),F("ngIf",t.hasStartedGame),I(),F("ngIf",!t.hasStartedGame)}}function G8(n,e){if(n&1){let t=He();m(0,"div",22)(1,"div",23)(2,"p",24),y(3),g(),m(4,"p",25),y(5),g()(),m(6,"button",26),ae("click",function(){Le(t);let i=G(2);return Ve(i.logout())}),y(7," Logout "),g()()}if(n&2){let t=G(2);I(3),q(t.userName),I(2),q(t.userEmail)}}function W8(n,e){if(n&1){let t=He();m(0,"div",18)(1,"button",19),ae("click",function(){Le(t);let i=G();return Ve(i.toggleUserDropdown())}),m(2,"div",20),y(3),g()(),H(4,G8,8,2,"div",21),g()}if(n&2){let t=G();I(3),J(" ",t.userName==null?null:t.userName.charAt(0)," "),I(),F("ngIf",t.showUserDropdown)}}function K8(n,e){if(n&1){let t=He();m(0,"app-auth-popup",27),ae("close",function(){Le(t);let i=G();return Ve(i.closeAuthPopup())}),g()}if(n&2){let t=G();F("mode",t.authMode)}}var xN=(()=>{class n{router;authService;userService;isAuthenticated=!1;showAuthPopup=!1;authMode="login";hasStartedGame=!1;showUserDropdown=!1;userName="";userEmail="";routerSubscription=null;constructor(t,r,i){this.router=t,this.authService=r,this.userService=i}ngOnInit(){this.authService.isAuthenticated$.subscribe(t=>{this.isAuthenticated=t,t&&this.loadUserInfo()}),this.checkGameStarted(),this.routerSubscription=this.router.events.pipe(Ft(t=>t instanceof An)).subscribe(()=>{this.checkGameStarted()})}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}checkGameStarted(){let t=this.userService.getCurrentUserId();this.hasStartedGame=!!t}loadUserInfo(){return v(this,null,function*(){let t=this.authService.getCurrentUser();if(t){this.userEmail=t.email||"";let r=this.userService.getCurrentUserId();if(r)try{let i=yield this.userService.getUser(r);i?this.userName=i.name||t.displayName||this.getInitialsFromEmail(this.userEmail):this.userName=t.displayName||this.getInitialsFromEmail(this.userEmail)}catch(i){console.error("Error loading user data:",i),this.userName=t.displayName||this.getInitialsFromEmail(this.userEmail)}else this.userName=t.displayName||this.getInitialsFromEmail(this.userEmail)}})}getInitialsFromEmail(t){return t?t.substring(0,2).toUpperCase():"U"}logout(){this.authService.logout(),this.showUserDropdown=!1}resetGame(){confirm("Are you sure you want to reset the game? All progress will be lost.")&&(console.log("Game reset requested by user"),this.router.navigate(["/"]))}openAuthPopup(t="login"){this.authMode=t,this.showAuthPopup=!0}closeAuthPopup(){this.showAuthPopup=!1}toggleUserDropdown(){this.showUserDropdown=!this.showUserDropdown}shouldShowNavLinks(){return this.hasStartedGame||this.isAuthenticated}static \u0275fac=function(r){return new(r||n)(L(ke),L(Am),L(ze))};static \u0275cmp=we({type:n,selectors:[["app-app-header"]],standalone:!0,features:[Ee],decls:11,vars:4,consts:[[1,"bg-white","dark:bg-gray-800","border-b","border-gray-200","dark:border-gray-700"],[1,"container","mx-auto","px-4","py-3"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],["routerLink","/",1,"text-xl","font-bold","text-gray-800","dark:text-white"],["class","hidden md:flex items-center space-x-6",4,"ngIf"],[1,"flex","items-center","space-x-4"],[4,"ngIf"],["class","relative",4,"ngIf"],[3,"mode","close",4,"ngIf"],[1,"hidden","md:flex","items-center","space-x-6"],["routerLink","/dashboard",1,"text-gray-600","dark:text-gray-300","hover:text-gray-900","dark:hover:text-white"],["routerLink","/leaderboard",1,"text-gray-600","dark:text-gray-300","hover:text-gray-900","dark:hover:text-white"],["routerLink","/help",1,"text-gray-600","dark:text-gray-300","hover:text-gray-900","dark:hover:text-white"],["class","bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",3,"click",4,"ngIf"],["class","flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",3,"click",4,"ngIf"],[1,"bg-green-600","text-white","px-4","py-2","rounded-md","hover:bg-green-700","transition-colors",3,"click"],[1,"flex","items-center","justify-center","px-4","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50",3,"click"],[1,"relative"],[1,"focus:outline-none",3,"click"],[1,"w-10","h-10","rounded-full","bg-primary","text-white","flex","items-center","justify-center","font-bold"],["class","absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-10 border border-gray-200 dark:border-gray-700",4,"ngIf"],[1,"absolute","right-0","mt-2","w-48","bg-white","dark:bg-gray-800","rounded-md","shadow-lg","py-1","z-10","border","border-gray-200","dark:border-gray-700"],[1,"px-4","py-2","border-b","border-gray-200","dark:border-gray-700"],[1,"text-sm","font-medium","text-gray-900","dark:text-white"],[1,"text-xs","text-gray-500","dark:text-gray-400","truncate"],[1,"block","w-full","text-left","px-4","py-2","text-sm","text-gray-700","dark:text-gray-300","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],[3,"close","mode"]],template:function(r,i){r&1&&(m(0,"header",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"a",4),y(5," AI Fight Club "),g()(),H(6,$8,7,0,"div",5),m(7,"div",6),H(8,H8,3,2,"ng-container",7)(9,W8,5,2,"div",8),g()()()(),H(10,K8,1,1,"app-auth-popup",9)),r&2&&(I(6),F("ngIf",i.shouldShowNavLinks()),I(2),F("ngIf",!i.isAuthenticated),I(),F("ngIf",i.isAuthenticated),I(),F("ngIf",i.showAuthPopup))},dependencies:[Te,lt,Rt,$r,AN]})}return n})();function Q8(n,e){n&1&&(m(0,"div",1)(1,"div",2)(2,"div",3),ce(3,"div",4),m(4,"p",5),y(5,"Loading your data..."),g()()()())}var MN=(()=>{class n{loadingService;constructor(t){this.loadingService=t}static \u0275fac=function(r){return new(r||n)(L(jo))};static \u0275cmp=we({type:n,selectors:[["app-loading"]],standalone:!0,features:[Ee],decls:2,vars:3,consts:[["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",4,"ngIf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","p-8","rounded-lg","shadow-lg"],[1,"flex","flex-col","items-center"],[1,"animate-spin","rounded-full","h-16","w-16","border-t-2","border-b-2","border-indigo-600","mb-4"],[1,"text-gray-700"]],template:function(r,i){r&1&&(H(0,Q8,6,0,"div",0),co(1,"async")),r&2&&F("ngIf",cl(1,1,i.loadingService.loading$))},dependencies:[Te,lt,WD],encapsulation:2})}return n})();var RN=(()=>{class n{router;constructor(t){this.router=t,this.router.events.pipe(Ft(r=>r instanceof An)).subscribe(()=>{this.scrollToTop()})}scrollToTop(t="auto"){window.scrollTo({top:0,behavior:t})}scrollToElement(t,r="smooth"){let i=document.getElementById(t);i&&i.scrollIntoView({behavior:r})}static \u0275fac=function(r){return new(r||n)(U(ke))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var PN=(()=>{class n{scrollService;constructor(t){this.scrollService=t}ngOnInit(){}static \u0275fac=function(r){return new(r||n)(L(RN))};static \u0275cmp=we({type:n,selectors:[["app-root"]],standalone:!0,features:[Ee],decls:4,vars:0,template:function(r,i){r&1&&(ce(0,"app-loading")(1,"app-app-header"),m(2,"main"),ce(3,"router-outlet"),g())},dependencies:[A0,xN,MN],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100vh}main[_ngcontent-%COMP%]{flex:1}"]})}return n})();hA(PN,TN).catch(n=>console.error(n));
