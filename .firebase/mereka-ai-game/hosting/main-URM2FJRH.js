var kA=Object.defineProperty,FA=Object.defineProperties;var LA=Object.getOwnPropertyDescriptors;var hw=Object.getOwnPropertySymbols;var VA=Object.prototype.hasOwnProperty,jA=Object.prototype.propertyIsEnumerable;var fw=(n,e,t)=>e in n?kA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,V=(n,e)=>{for(var t in e||={})VA.call(e,t)&&fw(n,t,e[t]);if(hw)for(var t of hw(e))jA.call(e,t)&&fw(n,t,e[t]);return n},pe=(n,e)=>FA(n,LA(e));var b=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});var pw=null;var kf=1,Ff=Symbol("SIGNAL");function Re(n){let e=pw;return pw=n,e}var mw={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function UA(n){if(!(jf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===kf)){if(!n.producerMustRecompute(n)&&!Lf(n)){n.dirty=!1,n.lastCleanEpoch=kf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=kf}}function gw(n){return n&&(n.nextProducerIndex=0),Re(n)}function yw(n,e){if(Re(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(jf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Vf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Lf(n){Tl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(UA(t),r!==t.version))return!0}return!1}function vw(n){if(Tl(n),jf(n))for(let e=0;e<n.producerNode.length;e++)Vf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Vf(n,e){if(BA(n),Tl(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)Vf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Tl(i),i.producerIndexOfThis[r]=e}}function jf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Tl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function BA(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function $A(){throw new Error}var qA=$A;function _w(n){qA=n}function de(n){return typeof n=="function"}function qr(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var xl=qr(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ni(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var et=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(de(r))try{r()}catch(o){e=o instanceof xl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{ww(o)}catch(s){e=e??[],s instanceof xl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new xl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ww(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ni(t,e)}remove(e){let{_finalizers:t}=this;t&&Ni(t,e),e instanceof n&&e._removeParent(this)}};et.EMPTY=(()=>{let n=new et;return n.closed=!0,n})();var Uf=et.EMPTY;function Al(n){return n instanceof et||n&&"closed"in n&&de(n.remove)&&de(n.add)&&de(n.unsubscribe)}function ww(n){de(n)?n():n.unsubscribe()}var xn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var xo={setTimeout(n,e,...t){let{delegate:r}=xo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=xo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Rl(n){xo.setTimeout(()=>{let{onUnhandledError:e}=xn;if(e)e(n);else throw n})}function wa(){}var Iw=Bf("C",void 0,void 0);function bw(n){return Bf("E",void 0,n)}function Ew(n){return Bf("N",n,void 0)}function Bf(n,e,t){return{kind:n,value:e,error:t}}var Oi=null;function Ao(n){if(xn.useDeprecatedSynchronousErrorHandling){let e=!Oi;if(e&&(Oi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Oi;if(Oi=null,t)throw r}}else n()}function Cw(n){xn.useDeprecatedSynchronousErrorHandling&&Oi&&(Oi.errorThrown=!0,Oi.error=n)}var ki=class extends et{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Al(e)&&e.add(this)):this.destination=GA}static create(e,t,r){return new Ro(e,t,r)}next(e){this.isStopped?qf(Ew(e),this):this._next(e)}error(e){this.isStopped?qf(bw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?qf(Iw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},HA=Function.prototype.bind;function $f(n,e){return HA.call(n,e)}var Hf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ml(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ml(r)}else Ml(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ml(t)}}},Ro=class extends ki{constructor(e,t,r){super();let i;if(de(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&xn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&$f(e.next,o),error:e.error&&$f(e.error,o),complete:e.complete&&$f(e.complete,o)}):i=e}this.destination=new Hf(i)}};function Ml(n){xn.useDeprecatedSynchronousErrorHandling?Cw(n):Rl(n)}function zA(n){throw n}function qf(n,e){let{onStoppedNotification:t}=xn;t&&xo.setTimeout(()=>t(n,e))}var GA={closed:!0,next:wa,error:zA,complete:wa};var Mo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function jt(n){return n}function zf(...n){return Gf(n)}function Gf(n){return n.length===0?jt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=KA(t)?t:new Ro(t,r,i);return Ao(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Dw(r),new r((i,o)=>{let s=new Ro({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Mo](){return this}pipe(...t){return Gf(t)(this)}toPromise(t){return t=Dw(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Dw(n){var e;return(e=n??xn.Promise)!==null&&e!==void 0?e:Promise}function WA(n){return n&&de(n.next)&&de(n.error)&&de(n.complete)}function KA(n){return n&&n instanceof ki||WA(n)&&Al(n)}function Wf(n){return de(n?.lift)}function be(n){return e=>{if(Wf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function me(n,e,t,r,i){return new Kf(n,e,t,r,i)}var Kf=class extends ki{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Po(){return be((n,e)=>{let t=null;n._refCount++;let r=me(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var No=class extends Ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Wf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new et;let t=this.getSubject();e.add(this.source.subscribe(me(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=et.EMPTY)}return e}refCount(){return Po()(this)}};var Sw=qr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ct=(()=>{class n extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Pl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Sw}next(t){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Uf:(this.currentObservers=null,o.push(t),new et(()=>{this.currentObservers=null,Ni(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ie;return t.source=this,t}}return n.create=(e,t)=>new Pl(e,t),n})(),Pl=class extends Ct{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Uf}};var lt=class extends Ct{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Qf={now(){return(Qf.delegate||Date).now()},delegate:void 0};var Nl=class extends et{constructor(e,t){super()}schedule(e,t=0){return this}};var Ia={setInterval(n,e,...t){let{delegate:r}=Ia;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ia;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Oo=class extends Nl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ia.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ia.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ni(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ko=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ko.now=Qf.now;var Fo=class extends ko{constructor(e,t=ko.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Lo=new Fo(Oo),Yf=Lo;var Ol=class extends Oo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var kl=class extends Fo{};var Jf=new kl(Ol);var Zt=new Ie(n=>n.complete());function Fl(n){return n&&de(n.schedule)}function Tw(n){return n[n.length-1]}function Ll(n){return de(Tw(n))?n.pop():void 0}function Hr(n){return Fl(Tw(n))?n.pop():void 0}function Xf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Aw(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{u(r.next(h))}catch(g){s(g)}}function l(h){try{u(r.throw(h))}catch(g){s(g)}}function u(h){h.done?o(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function xw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fi(n){return this instanceof Fi?(this.v=n,this):new Fi(n)}function Rw(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(I){return function(R){return Promise.resolve(R).then(I,g)}}function a(I,R){r[I]&&(i[I]=function(N){return new Promise(function(O,H){o.push([I,N,O,H])>1||l(I,N)})},R&&(i[I]=R(i[I])))}function l(I,R){try{u(r[I](R))}catch(N){_(o[0][3],N)}}function u(I){I.value instanceof Fi?Promise.resolve(I.value.v).then(h,g):_(o[0][2],I)}function h(I){l("next",I)}function g(I){l("throw",I)}function _(I,R){I(R),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Mw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof xw=="function"?xw(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var Vl=n=>n&&typeof n.length=="number"&&typeof n!="function";function jl(n){return de(n?.then)}function Ul(n){return de(n[Mo])}function Bl(n){return Symbol.asyncIterator&&de(n?.[Symbol.asyncIterator])}function $l(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function QA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ql=QA();function Hl(n){return de(n?.[ql])}function zl(n){return Rw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Fi(t.read());if(i)return yield Fi(void 0);yield yield Fi(r)}}finally{t.releaseLock()}})}function Gl(n){return de(n?.getReader)}function Ge(n){if(n instanceof Ie)return n;if(n!=null){if(Ul(n))return YA(n);if(Vl(n))return JA(n);if(jl(n))return XA(n);if(Bl(n))return Pw(n);if(Hl(n))return ZA(n);if(Gl(n))return e1(n)}throw $l(n)}function YA(n){return new Ie(e=>{let t=n[Mo]();if(de(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function JA(n){return new Ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function XA(n){return new Ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Rl)})}function ZA(n){return new Ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Pw(n){return new Ie(e=>{t1(n,e).catch(t=>e.error(t))})}function e1(n){return Pw(zl(n))}function t1(n,e){var t,r,i,o;return Aw(this,void 0,void 0,function*(){try{for(t=Mw(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Dt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function zr(n,e=0){return be((t,r)=>{t.subscribe(me(r,i=>Dt(r,n,()=>r.next(i),e),()=>Dt(r,n,()=>r.complete(),e),i=>Dt(r,n,()=>r.error(i),e)))})}function Gr(n,e=0){return be((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Nw(n,e){return Ge(n).pipe(Gr(e),zr(e))}function Ow(n,e){return Ge(n).pipe(Gr(e),zr(e))}function kw(n,e){return new Ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Fw(n,e){return new Ie(t=>{let r;return Dt(t,e,()=>{r=n[ql](),Dt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>de(r?.return)&&r.return()})}function Wl(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ie(t=>{Dt(t,e,()=>{let r=n[Symbol.asyncIterator]();Dt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Lw(n,e){return Wl(zl(n),e)}function Vw(n,e){if(n!=null){if(Ul(n))return Nw(n,e);if(Vl(n))return kw(n,e);if(jl(n))return Ow(n,e);if(Bl(n))return Wl(n,e);if(Hl(n))return Fw(n,e);if(Gl(n))return Lw(n,e)}throw $l(n)}function ke(n,e){return e?Vw(n,e):Ge(n)}function Z(...n){let e=Hr(n);return ke(n,e)}function $n(n,e){let t=de(n)?n:()=>n,r=i=>i.error(t());return new Ie(e?i=>e.schedule(r,0,i):r)}function Zf(n){return!!n&&(n instanceof Ie||de(n.lift)&&de(n.subscribe))}var fr=qr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Kl(n){return n instanceof Date&&!isNaN(n)}var n1=qr(n=>function(t=null){n(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t});function ba(n,e){let{first:t,each:r,with:i=r1,scheduler:o=e??Lo,meta:s=null}=Kl(n)?{first:n}:typeof n=="number"?{each:n}:n;if(t==null&&r==null)throw new TypeError("No timeout provided.");return be((a,l)=>{let u,h,g=null,_=0,I=R=>{h=Dt(l,o,()=>{try{u.unsubscribe(),Ge(i({meta:s,lastValue:g,seen:_})).subscribe(l)}catch(N){l.error(N)}},R)};u=a.subscribe(me(l,R=>{h?.unsubscribe(),_++,l.next(g=R),r>0&&I(r)},void 0,void 0,()=>{h?.closed||h?.unsubscribe(),g=null})),!_&&I(t!=null?typeof t=="number"?t:+t-o.now():r)})}function r1(n){throw new n1(n)}function ge(n,e){return be((t,r)=>{let i=0;t.subscribe(me(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:i1}=Array;function o1(n,e){return i1(e)?n(...e):n(e)}function Ql(n){return ge(e=>o1(n,e))}var{isArray:s1}=Array,{getPrototypeOf:a1,prototype:c1,keys:l1}=Object;function Yl(n){if(n.length===1){let e=n[0];if(s1(e))return{args:e,keys:null};if(u1(e)){let t=l1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function u1(n){return n&&typeof n=="object"&&a1(n)===c1}function Jl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ea(...n){let e=Hr(n),t=Ll(n),{args:r,keys:i}=Yl(n);if(r.length===0)return ke([],e);let o=new Ie(d1(r,e,i?s=>Jl(i,s):jt));return t?o.pipe(Ql(t)):o}function d1(n,e,t=jt){return r=>{jw(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)jw(e,()=>{let u=ke(n[l],e),h=!1;u.subscribe(me(r,g=>{o[l]=g,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function jw(n,e,t){n?Dt(t,n,e):e()}function Uw(n,e,t,r,i,o,s,a){let l=[],u=0,h=0,g=!1,_=()=>{g&&!l.length&&!u&&e.complete()},I=N=>u<r?R(N):l.push(N),R=N=>{o&&e.next(N),u++;let O=!1;Ge(t(N,h++)).subscribe(me(e,H=>{i?.(H),o?I(H):e.next(H)},()=>{O=!0},void 0,()=>{if(O)try{for(u--;l.length&&u<r;){let H=l.shift();s?Dt(e,s,()=>R(H)):R(H)}_()}catch(H){e.error(H)}}))};return n.subscribe(me(e,I,()=>{g=!0,_()})),()=>{a?.()}}function nt(n,e,t=1/0){return de(e)?nt((r,i)=>ge((o,s)=>e(r,o,i,s))(Ge(n(r,i))),t):(typeof e=="number"&&(t=e),be((r,i)=>Uw(r,i,n,t)))}function Vo(n=1/0){return nt(jt,n)}function Bw(){return Vo(1)}function jo(...n){return Bw()(ke(n,Hr(n)))}function Xl(n){return new Ie(e=>{Ge(n()).subscribe(e)})}function ep(...n){let e=Ll(n),{args:t,keys:r}=Yl(n),i=new Ie(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let h=0;h<s;h++){let g=!1;Ge(t[h]).subscribe(me(o,_=>{g||(g=!0,u--),a[h]=_},()=>l--,void 0,()=>{(!l||!g)&&(u||o.next(r?Jl(r,a):a),o.complete())}))}});return e?i.pipe(Ql(e)):i}function $w(n=0,e,t=Yf){let r=-1;return e!=null&&(Fl(e)?t=e:r=e),new Ie(i=>{let o=Kl(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Gt(n,e){return be((t,r)=>{let i=0;t.subscribe(me(r,o=>n.call(e,o,i++)&&r.next(o)))})}function fn(n){return be((e,t)=>{let r=null,i=!1,o;r=e.subscribe(me(t,void 0,void 0,s=>{o=Ge(n(s,fn(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function qw(n,e,t,r,i){return(o,s)=>{let a=t,l=e,u=0;o.subscribe(me(s,h=>{let g=u++;l=a?n(l,h,g):(a=!0,h),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function pr(n,e){return de(e)?nt(n,e,1):nt(n,1)}function Wr(n){return be((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function mr(n){return n<=0?()=>Zt:be((e,t)=>{let r=0;e.subscribe(me(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function tp(n){return ge(()=>n)}function Zl(n=h1){return be((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function h1(){return new fr}function Li(n){return be((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function qn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Gt((i,o)=>n(i,o,r)):jt,mr(1),t?Wr(e):Zl(()=>new fr))}function Uo(n){return n<=0?()=>Zt:be((e,t)=>{let r=[];e.subscribe(me(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function np(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Gt((i,o)=>n(i,o,r)):jt,Uo(1),t?Wr(e):Zl(()=>new fr))}function Ca(n=1/0){let e;n&&typeof n=="object"?e=n:e={count:n};let{count:t=1/0,delay:r,resetOnSuccess:i=!1}=e;return t<=0?jt:be((o,s)=>{let a=0,l,u=()=>{let h=!1;l=o.subscribe(me(s,g=>{i&&(a=0),s.next(g)},void 0,g=>{if(a++<t){let _=()=>{l?(l.unsubscribe(),l=null,u()):h=!0};if(r!=null){let I=typeof r=="number"?$w(r):Ge(r(g,a)),R=me(s,()=>{R.unsubscribe(),_()},()=>{s.complete()});I.subscribe(R)}else _()}else s.error(g)})),h&&(l.unsubscribe(),l=null,u())};u()})}function rp(n,e){return be(qw(n,e,arguments.length>=2,!0))}function ip(...n){let e=Hr(n);return be((t,r)=>{(e?jo(n,t,e):jo(n,t)).subscribe(r)})}function mt(n,e){return be((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(me(r,l=>{i?.unsubscribe();let u=0,h=o++;Ge(n(l,h)).subscribe(i=me(r,g=>r.next(e?e(l,g,h,u++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function op(n){return be((e,t)=>{Ge(n).subscribe(me(t,()=>t.complete(),wa)),!t.closed&&e.subscribe(t)})}function rt(n,e,t){let r=de(n)||e||t?{next:n,error:e,complete:t}:n;return r?be((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(me(o,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,l),o.error(l)},()=>{var l,u;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):jt}var DI="https://g.co/ng/security#xss",J=class extends Error{constructor(e,t){super(Mu(e,t)),this.code=e}};function Mu(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Fa(n){return{toString:n}.toString()}var eu="__parameters__";function f1(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function SI(n,e,t){return Fa(()=>{let r=f1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,u,h){let g=l.hasOwnProperty(eu)?l[eu]:Object.defineProperty(l,eu,{value:[]})[eu];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(s),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Vi=globalThis;function Ue(n){for(let e in n)if(n[e]===Ue)return e;throw Error("Could not find renamed property on target object.")}function p1(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Bt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Bt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Ip(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var m1=Ue({__forward_ref__:Ue});function On(n){return n.__forward_ref__=On,n.toString=function(){return Bt(this())},n}function Ut(n){return TI(n)?n():n}function TI(n){return typeof n=="function"&&n.hasOwnProperty(m1)&&n.__forward_ref__===On}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function en(n){return{providers:n.providers||[],imports:n.imports||[]}}function Pu(n){return Hw(n,AI)||Hw(n,RI)}function xI(n){return Pu(n)!==null}function Hw(n,e){return n.hasOwnProperty(e)?n[e]:null}function g1(n){let e=n&&(n[AI]||n[RI]);return e||null}function zw(n){return n&&(n.hasOwnProperty(Gw)||n.hasOwnProperty(y1))?n[Gw]:null}var AI=Ue({\u0275prov:Ue}),Gw=Ue({\u0275inj:Ue}),RI=Ue({ngInjectableDef:Ue}),y1=Ue({ngInjectorDef:Ue}),X=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function MI(n){return n&&!!n.\u0275providers}var v1=Ue({\u0275cmp:Ue}),_1=Ue({\u0275dir:Ue}),w1=Ue({\u0275pipe:Ue}),I1=Ue({\u0275mod:Ue}),lu=Ue({\u0275fac:Ue}),Da=Ue({__NG_ELEMENT_ID__:Ue}),Ww=Ue({__NG_ENV_ID__:Ue});function Wo(n){return typeof n=="string"?n:n==null?"":String(n)}function b1(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Wo(n)}function E1(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new J(-200,n)}function lm(n,e){throw new J(-201,!1)}var Ee=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ee||{}),bp;function PI(){return bp}function Wt(n){let e=bp;return bp=n,e}function NI(n,e,t){let r=Pu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Ee.Optional)return null;if(e!==void 0)return e;lm(n,"Injector")}var C1={},Sa=C1,Ep="__NG_DI_FLAG__",uu="ngTempTokenPath",D1="ngTokenPath",S1=/\n/gm,T1="\u0275",Kw="__source",zo;function x1(){return zo}function Kr(n){let e=zo;return zo=n,e}function A1(n,e=Ee.Default){if(zo===void 0)throw new J(-203,!1);return zo===null?NI(n,void 0,e):zo.get(n,e&Ee.Optional?null:void 0,e)}function F(n,e=Ee.Default){return(PI()||A1)(Ut(n),e)}function $(n,e=Ee.Default){return F(n,Nu(e))}function Nu(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Cp(n){let e=[];for(let t=0;t<n.length;t++){let r=Ut(n[t]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let i,o=Ee.Default;for(let s=0;s<r.length;s++){let a=r[s],l=R1(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(F(i,o))}else e.push(F(r))}return e}function OI(n,e){return n[Ep]=e,n.prototype[Ep]=e,n}function R1(n){return n[Ep]}function M1(n,e,t,r){let i=n[uu];throw e[Kw]&&i.unshift(e[Kw]),n.message=P1(`
`+n.message,i,t,r),n[D1]=i,n[uu]=null,n}function P1(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==T1?n.slice(2):n;let i=Bt(e);if(Array.isArray(e))i=e.map(Bt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Bt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(S1,`
  `)}`}var gn=OI(SI("Optional"),8);var um=OI(SI("SkipSelf"),4);function Bi(n,e){let t=n.hasOwnProperty(lu);return t?n[lu]:null}function dm(n,e){n.forEach(t=>Array.isArray(t)?dm(t,e):e(t))}function kI(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function du(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function N1(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function hm(n,e,t){let r=La(n,e);return r>=0?n[r|1]=t:(r=~r,N1(n,r,e,t)),r}function sp(n,e){let t=La(n,e);if(t>=0)return n[t|1]}function La(n,e){return O1(n,e,1)}function O1(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ko={},Kt=[],Qo=new X(""),FI=new X("",-1),LI=new X(""),hu=class{get(e,t=Sa){if(t===Sa){let r=new Error(`NullInjectorError: No provider for ${Bt(e)}!`);throw r.name="NullInjectorError",r}return t}},VI=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(VI||{}),Gn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Gn||{}),St=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(St||{});function k1(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Dp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];F1(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function jI(n){return n===3||n===4||n===6}function F1(n){return n.charCodeAt(0)===64}function Ta(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Qw(n,t,i,null,e[++r]):Qw(n,t,i,null,null))}}return n}function Qw(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var UI="ng-template";function L1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&k1(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(fm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function fm(n){return n.type===4&&n.value!==UI}function V1(n,e,t){let r=n.type===4&&!t?UI:n.value;return e===r}function j1(n,e,t){let r=4,i=n.attrs,o=i!==null?$1(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!An(r)&&!An(l))return!1;if(s&&An(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!V1(n,l,t)||l===""&&e.length===1){if(An(r))return!1;s=!0}}else if(r&8){if(i===null||!L1(n,i,l,t)){if(An(r))return!1;s=!0}}else{let u=e[++a],h=U1(l,i,fm(n),t);if(h===-1){if(An(r))return!1;s=!0;continue}if(u!==""){let g;if(h>o?g="":g=i[h+1].toLowerCase(),r&2&&u!==g){if(An(r))return!1;s=!0}}}}return An(r)||s}function An(n){return(n&1)===0}function U1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return q1(e,n)}function B1(n,e,t=!1){for(let r=0;r<e.length;r++)if(j1(n,e[r],t))return!0;return!1}function $1(n){for(let e=0;e<n.length;e++){let t=n[e];if(jI(t))return e}return n.length}function q1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Yw(n,e){return n?":not("+e.trim()+")":e}function H1(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!An(s)&&(e+=Yw(o,i),i=""),r=s,o=o||!An(r);t++}return i!==""&&(e+=Yw(o,i)),e}function z1(n){return n.map(H1).join(",")}function G1(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!An(i))break;i=o}r++}return{attrs:e,classes:t}}function ne(n){return Fa(()=>{let e=GI(n),t=pe(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===VI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Gn.Emulated,styles:n.styles||Kt,_:null,schemas:n.schemas||null,tView:null,id:""});WI(t);let r=n.dependencies;return t.directiveDefs=Xw(r,!1),t.pipeDefs=Xw(r,!0),t.id=Q1(t),t})}function W1(n){return Yr(n)||$I(n)}function K1(n){return n!==null}function tn(n){return Fa(()=>({type:n.type,bootstrap:n.bootstrap||Kt,declarations:n.declarations||Kt,imports:n.imports||Kt,exports:n.exports||Kt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Jw(n,e){if(n==null)return Ko;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=St.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==St.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Ke(n){return Fa(()=>{let e=GI(n);return WI(e),e})}function BI(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Yr(n){return n[v1]||null}function $I(n){return n[_1]||null}function qI(n){return n[w1]||null}function HI(n){let e=Yr(n)||$I(n)||qI(n);return e!==null?e.standalone:!1}function zI(n,e){let t=n[I1]||null;if(!t&&e===!0)throw new Error(`Type ${Bt(n)} does not have '\u0275mod' property.`);return t}function GI(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ko,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Kt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Jw(n.inputs,e),outputs:Jw(n.outputs),debugInfo:null}}function WI(n){n.features?.forEach(e=>e(n))}function Xw(n,e){if(!n)return null;let t=e?qI:W1;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(K1)}function Q1(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function rs(n){return{\u0275providers:n}}function pm(...n){return{\u0275providers:KI(!0,n),\u0275fromNgModule:!0}}function KI(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return dm(e,s=>{let a=s;Sp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&QI(i,o),t}function QI(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];mm(i,o=>{e(o,r)})}}function Sp(n,e,t,r){if(n=Ut(n),!n)return!1;let i=null,o=zw(n),s=!o&&Yr(n);if(!o&&!s){let l=n.ngModule;if(o=zw(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)Sp(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{dm(o.imports,h=>{Sp(h,e,t,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&QI(u,e)}if(!a){let u=Bi(i)||(()=>new i);e({provide:i,useFactory:u,deps:Kt},i),e({provide:LI,useValue:i,multi:!0},i),e({provide:Qo,useValue:()=>F(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let u=n;mm(l,h=>{e(h,u)})}}else return!1;return i!==n&&n.providers!==void 0}function mm(n,e){for(let t of n)MI(t)&&(t=t.\u0275providers),Array.isArray(t)?mm(t,e):e(t)}var Y1=Ue({provide:String,useValue:Ue});function YI(n){return n!==null&&typeof n=="object"&&Y1 in n}function J1(n){return!!(n&&n.useExisting)}function X1(n){return!!(n&&n.useFactory)}function Yo(n){return typeof n=="function"}function Z1(n){return!!n.useClass}var Ou=new X(""),iu={},eR={},ap;function gm(){return ap===void 0&&(ap=new hu),ap}var Tt=class{},xa=class extends Tt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xp(e,s=>this.processProvider(s)),this.records.set(FI,Bo(void 0,this)),i.has("environment")&&this.records.set(Tt,Bo(void 0,this));let o=this.records.get(Ou);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(LI,Kt,Ee.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Re(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Re(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Kr(this),r=Wt(void 0),i;try{return e()}finally{Kr(t),Wt(r)}}get(e,t=Sa,r=Ee.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ww))return e[Ww](this);r=Nu(r);let i,o=Kr(this),s=Wt(void 0);try{if(!(r&Ee.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=oR(e)&&Pu(e);u&&this.injectableDefInScope(u)?l=Bo(Tp(e),iu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&Ee.Self?gm():this.parent;return t=r&Ee.Optional&&t===Sa?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[uu]=a[uu]||[]).unshift(Bt(e)),o)throw a;return M1(a,e,"R3InjectorError",this.source)}else throw a}finally{Wt(s),Kr(o)}}resolveInjectorInitializers(){let e=Re(null),t=Kr(this),r=Wt(void 0),i;try{let o=this.get(Qo,Kt,Ee.Self);for(let s of o)s()}finally{Kr(t),Wt(r),Re(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Bt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new J(205,!1)}processProvider(e){e=Ut(e);let t=Yo(e)?e:Ut(e&&e.provide),r=nR(e);if(!Yo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Bo(void 0,iu,!0),i.factory=()=>Cp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Re(null);try{return t.value===iu&&(t.value=eR,t.value=t.factory()),typeof t.value=="object"&&t.value&&iR(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Re(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ut(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Tp(n){let e=Pu(n),t=e!==null?e.factory:Bi(n);if(t!==null)return t;if(n instanceof X)throw new J(204,!1);if(n instanceof Function)return tR(n);throw new J(204,!1)}function tR(n){if(n.length>0)throw new J(204,!1);let t=g1(n);return t!==null?()=>t.factory(n):()=>new n}function nR(n){if(YI(n))return Bo(void 0,n.useValue);{let e=JI(n);return Bo(e,iu)}}function JI(n,e,t){let r;if(Yo(n)){let i=Ut(n);return Bi(i)||Tp(i)}else if(YI(n))r=()=>Ut(n.useValue);else if(X1(n))r=()=>n.useFactory(...Cp(n.deps||[]));else if(J1(n))r=()=>F(Ut(n.useExisting));else{let i=Ut(n&&(n.useClass||n.provide));if(rR(n))r=()=>new i(...Cp(n.deps));else return Bi(i)||Tp(i)}return r}function Bo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function rR(n){return!!n.deps}function iR(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function oR(n){return typeof n=="function"||typeof n=="object"&&n instanceof X}function xp(n,e){for(let t of n)Array.isArray(t)?xp(t,e):t&&MI(t)?xp(t.\u0275providers,e):e(t)}function kn(n,e){n instanceof xa&&n.assertNotDestroyed();let t,r=Kr(n),i=Wt(void 0);try{return e()}finally{Kr(r),Wt(i)}}function XI(){return PI()!==void 0||x1()!=null}function sR(n){if(!XI())throw new J(-203,!1)}function aR(n){return typeof n=="function"}var _r=0,Ce=1,se=2,xt=3,Mn=4,Fn=5,fu=6,Aa=7,Pn=8,Jo=9,Nn=10,tt=11,Ra=12,Zw=13,is=14,Wn=15,ku=16,$o=17,Xo=18,Fu=19,ZI=20,Qr=21,cp=22,$i=23,mn=25,eb=1;var qi=7,pu=8,mu=9,pn=10,ym=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ym||{});function ji(n){return Array.isArray(n)&&typeof n[eb]=="object"}function wr(n){return Array.isArray(n)&&n[eb]===!0}function vm(n){return(n.flags&4)!==0}function Lu(n){return n.componentOffset>-1}function Vu(n){return(n.flags&1)===1}function Jr(n){return!!n.template}function cR(n){return(n[se]&512)!==0}var Ap=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function tb(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function ei(){return nb}function nb(n){return n.type.prototype.ngOnChanges&&(n.setInput=uR),lR}ei.ngInherit=!0;function lR(){let n=ib(this),e=n?.current;if(e){let t=n.previous;if(t===Ko)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function uR(n,e,t,r,i){let o=this.declaredInputs[r],s=ib(n)||dR(n,{previous:Ko,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new Ap(u&&u.currentValue,t,l===Ko),tb(n,e,i,t)}var rb="__ngSimpleChanges__";function ib(n){return n[rb]||null}function dR(n,e){return n[rb]=e}var eI=null;var Hn=function(n,e,t){eI?.(n,e,t)},ob="svg",hR="math",fR=!1;function pR(){return fR}function Kn(n){for(;Array.isArray(n);)n=n[_r];return n}function sb(n,e){return Kn(e[n])}function yn(n,e){return Kn(e[n.index])}function ab(n,e){return n.data[e]}function cb(n,e){return n[e]}function ti(n,e){let t=e[n];return ji(t)?t:t[_r]}function _m(n){return(n[se]&128)===128}function mR(n){return wr(n[xt])}function Zo(n,e){return e==null?null:n[e]}function lb(n){n[$o]=0}function gR(n){n[se]&1024||(n[se]|=1024,_m(n)&&Ma(n))}function yR(n,e){for(;n>0;)e=e[is],n--;return e}function wm(n){return!!(n[se]&9216||n[$i]?.dirty)}function Rp(n){n[Nn].changeDetectionScheduler?.notify(1),wm(n)?Ma(n):n[se]&64&&(pR()?(n[se]|=1024,Ma(n)):n[Nn].changeDetectionScheduler?.notify())}function Ma(n){n[Nn].changeDetectionScheduler?.notify();let e=Pa(n);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!_m(e)));)e=Pa(e)}function ub(n,e){if((n[se]&256)===256)throw new J(911,!1);n[Qr]===null&&(n[Qr]=[]),n[Qr].push(e)}function vR(n,e){if(n[Qr]===null)return;let t=n[Qr].indexOf(e);t!==-1&&n[Qr].splice(t,1)}function Pa(n){let e=n[xt];return wr(e)?e[xt]:e}var ye={lFrame:vb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function _R(){return ye.lFrame.elementDepthCount}function wR(){ye.lFrame.elementDepthCount++}function IR(){ye.lFrame.elementDepthCount--}function db(){return ye.bindingsEnabled}function bR(){return ye.skipHydrationRootTNode!==null}function ER(n){return ye.skipHydrationRootTNode===n}function CR(){ye.skipHydrationRootTNode=null}function Me(){return ye.lFrame.lView}function gt(){return ye.lFrame.tView}function nn(n){return ye.lFrame.contextLView=n,n[Pn]}function rn(n){return ye.lFrame.contextLView=null,n}function $t(){let n=hb();for(;n!==null&&n.type===64;)n=n.parent;return n}function hb(){return ye.lFrame.currentTNode}function DR(){let n=ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ki(n,e){let t=ye.lFrame;t.currentTNode=n,t.isParent=e}function Im(){return ye.lFrame.isParent}function fb(){ye.lFrame.isParent=!1}function SR(){return ye.lFrame.contextLView}function pb(){let n=ye.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function TR(){return ye.lFrame.bindingIndex}function xR(n){return ye.lFrame.bindingIndex=n}function ju(){return ye.lFrame.bindingIndex++}function bm(n){let e=ye.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function AR(){return ye.lFrame.inI18n}function RR(n,e){let t=ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,Mp(e)}function MR(){return ye.lFrame.currentDirectiveIndex}function Mp(n){ye.lFrame.currentDirectiveIndex=n}function PR(n){let e=ye.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function mb(n){ye.lFrame.currentQueryIndex=n}function NR(n){let e=n[Ce];return e.type===2?e.declTNode:e.type===1?n[Fn]:null}function gb(n,e,t){if(t&Ee.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Ee.Host);)if(i=NR(o),i===null||(o=o[is],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ye.lFrame=yb();return r.currentTNode=e,r.lView=n,!0}function Em(n){let e=yb(),t=n[Ce];ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function yb(){let n=ye.lFrame,e=n===null?null:n.child;return e===null?vb(n):e}function vb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function _b(){let n=ye.lFrame;return ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var wb=_b;function Cm(){let n=_b();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function OR(n){return(ye.lFrame.contextLView=yR(n,ye.lFrame.contextLView))[Pn]}function ni(){return ye.lFrame.selectedIndex}function Hi(n){ye.lFrame.selectedIndex=n}function Dm(){let n=ye.lFrame;return ab(n.tView,n.selectedIndex)}function Va(){ye.lFrame.currentNamespace=ob}function ja(){kR()}function kR(){ye.lFrame.currentNamespace=null}function FR(){return ye.lFrame.currentNamespace}var Ib=!0;function Uu(){return Ib}function Bu(n){Ib=n}function LR(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=nb(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function $u(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function ou(n,e,t){bb(n,e,3,t)}function su(n,e,t,r){(n[se]&3)===t&&bb(n,e,t,r)}function lp(n,e){let t=n[se];(t&3)===e&&(t&=16383,t+=1,n[se]=t)}function bb(n,e,t,r){let i=r!==void 0?n[$o]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[$o]+=65536),(a<o||o==-1)&&(VR(n,t,e,l),n[$o]=(n[$o]&4294901760)+l+2),l++}function tI(n,e){Hn(4,n,e);let t=Re(null);try{e.call(n)}finally{Re(t),Hn(5,n,e)}}function VR(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[se]>>14<n[$o]>>16&&(n[se]&3)===e&&(n[se]+=16384,tI(a,o)):tI(a,o)}var Go=-1,zi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function jR(n){return n instanceof zi}function UR(n){return(n.flags&8)!==0}function BR(n){return(n.flags&16)!==0}function Eb(n){return n!==Go}function gu(n){return n&32767}function $R(n){return n>>16}function yu(n,e){let t=$R(n),r=e;for(;t>0;)r=r[is],t--;return r}var Pp=!0;function vu(n){let e=Pp;return Pp=n,e}var qR=256,Cb=qR-1,Db=5,HR=0,zn={};function zR(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Da)&&(r=t[Da]),r==null&&(r=t[Da]=HR++);let i=r&Cb,o=1<<i;e.data[n+(i>>Db)]|=o}function _u(n,e){let t=Sb(n,e);if(t!==-1)return t;let r=e[Ce];r.firstCreatePass&&(n.injectorIndex=e.length,up(r.data,n),up(e,null),up(r.blueprint,null));let i=Sm(n,e),o=n.injectorIndex;if(Eb(i)){let s=gu(i),a=yu(i,e),l=a[Ce].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=i,o}function up(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Sb(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Sm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Mb(i),r===null)return Go;if(t++,i=i[is],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Go}function Np(n,e,t){zR(n,e,t)}function GR(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(jI(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function Tb(n,e,t){if(t&Ee.Optional||n!==void 0)return n;lm(e,"NodeInjector")}function xb(n,e,t,r){if(t&Ee.Optional&&r===void 0&&(r=null),!(t&(Ee.Self|Ee.Host))){let i=n[Jo],o=Wt(void 0);try{return i?i.get(e,r,t&Ee.Optional):NI(e,r,t&Ee.Optional)}finally{Wt(o)}}return Tb(r,e,t)}function Ab(n,e,t,r=Ee.Default,i){if(n!==null){if(e[se]&2048&&!(r&Ee.Self)){let s=JR(n,e,t,r,zn);if(s!==zn)return s}let o=Rb(n,e,t,r,zn);if(o!==zn)return o}return xb(e,t,r,i)}function Rb(n,e,t,r,i){let o=QR(t);if(typeof o=="function"){if(!gb(e,n,r))return r&Ee.Host?Tb(i,t,r):xb(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&Ee.Optional))lm(t);else return s}finally{wb()}}else if(typeof o=="number"){let s=null,a=Sb(n,e),l=Go,u=r&Ee.Host?e[Wn][Fn]:null;for((a===-1||r&Ee.SkipSelf)&&(l=a===-1?Sm(n,e):e[a+8],l===Go||!rI(r,!1)?a=-1:(s=e[Ce],a=gu(l),e=yu(l,e)));a!==-1;){let h=e[Ce];if(nI(o,a,h.data)){let g=WR(a,e,t,s,r,u);if(g!==zn)return g}l=e[a+8],l!==Go&&rI(r,e[Ce].data[a+8]===u)&&nI(o,a,e)?(s=h,a=gu(l),e=yu(l,e)):a=-1}}return i}function WR(n,e,t,r,i,o){let s=e[Ce],a=s.data[n+8],l=r==null?Lu(a)&&Pp:r!=s&&(a.type&3)!==0,u=i&Ee.Host&&o===a,h=KR(a,s,t,l,u);return h!==null?es(e,s,h,a):zn}function KR(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,h=o>>20,g=r?a:a+h,_=i?a+h:u;for(let I=g;I<_;I++){let R=s[I];if(I<l&&t===R||I>=l&&R.type===t)return I}if(i){let I=s[l];if(I&&Jr(I)&&I.type===t)return l}return null}function es(n,e,t,r){let i=n[t],o=e.data;if(jR(i)){let s=i;s.resolving&&E1(b1(o[t]));let a=vu(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?Wt(s.injectImpl):null,h=gb(n,r,Ee.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&LR(t,o[t],e)}finally{u!==null&&Wt(u),vu(a),s.resolving=!1,wb()}}return i}function QR(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Da)?n[Da]:void 0;return typeof e=="number"?e>=0?e&Cb:YR:e}function nI(n,e,t){let r=1<<n;return!!(t[e+(n>>Db)]&r)}function rI(n,e){return!(n&Ee.Self)&&!(n&Ee.Host&&e)}var Ui=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ab(this._tNode,this._lView,e,Nu(r),t)}};function YR(){return new Ui($t(),Me())}function vn(n){return Fa(()=>{let e=n.prototype.constructor,t=e[lu]||Op(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[lu]||Op(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Op(n){return TI(n)?()=>{let e=Op(Ut(n));return e&&e()}:Bi(n)}function JR(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[se]&2048&&!(s[se]&512);){let a=Rb(o,s,t,r|Ee.Self,zn);if(a!==zn)return a;let l=o.parent;if(!l){let u=s[ZI];if(u){let h=u.get(t,zn,r);if(h!==zn)return h}l=Mb(s),s=s[is]}o=l}return i}function Mb(n){let e=n[Ce],t=e.type;return t===2?e.declTNode:t===1?n[Fn]:null}function Tm(n){return GR($t(),n)}function iI(n,e=null,t=null,r){let i=Pb(n,e,t,r);return i.resolveInjectorInitializers(),i}function Pb(n,e=null,t=null,r,i=new Set){let o=[t||Kt,pm(n)];return r=r||(typeof n=="object"?void 0:Bt(n)),new xa(o,e||gm(),r||null,i)}var on=(()=>{class n{static{this.THROW_IF_NOT_FOUND=Sa}static{this.NULL=new hu}static create(t,r){if(Array.isArray(t))return iI({name:""},r,t,"");{let i=t.name??"";return iI({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=q({token:n,providedIn:"any",factory:()=>F(FI)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var XR="ngOriginalError";function dp(n){return n[XR]}var Qn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&dp(e);for(;t&&dp(t);)t=dp(t);return t||null}},Nb=new X("",{providedIn:"root",factory:()=>$(Qn).handleError.bind(void 0)}),xm=(()=>{class n{static{this.__NG_ELEMENT_ID__=ZR}static{this.__NG_ENV_ID__=t=>t}}return n})(),kp=class extends xm{constructor(e){super(),this._lView=e}onDestroy(e){return ub(this._lView,e),()=>vR(this._lView,e)}};function ZR(){return new kp(Me())}function eM(){return qu($t(),Me())}function qu(n,e){return new Yn(yn(n,e))}var Yn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=eM}}return n})();var Fp=class extends Ct{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,XI()&&(this.destroyRef=$(xm,{optional:!0})??void 0)}emit(e){let t=Re(null);try{super.next(e)}finally{Re(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=hp(o),i&&(i=hp(i)),s&&(s=hp(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof et&&e.add(a),a}};function hp(n){return e=>{setTimeout(n,void 0,e)}}var it=Fp;function Ob(n){return(n.flags&128)===128}var kb=new Map,tM=0;function nM(){return tM++}function rM(n){kb.set(n[Fu],n)}function iM(n){kb.delete(n[Fu])}var oI="__ngContext__";function Xr(n,e){ji(e)?(n[oI]=e[Fu],rM(e)):n[oI]=e}function Fb(n){return Vb(n[Ra])}function Lb(n){return Vb(n[Mn])}function Vb(n){for(;n!==null&&!wr(n);)n=n[Mn];return n}var Lp;function jb(n){Lp=n}function oM(){if(Lp!==void 0)return Lp;if(typeof document<"u")return document;throw new J(210,!1)}var Am=new X("",{providedIn:"root",factory:()=>sM}),sM="ng",Rm=new X(""),_n=new X("",{providedIn:"platform",factory:()=>"unknown"});var Mm=new X("",{providedIn:"root",factory:()=>oM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var aM="h",cM="b";var lM=()=>null;function Pm(n,e,t=!1){return lM(n,e,t)}var Ub=!1,uM=new X("",{providedIn:"root",factory:()=>Ub});var tu;function dM(){if(tu===void 0&&(tu=null,Vi.trustedTypes))try{tu=Vi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return tu}function sI(n){return dM()?.createScriptURL(n)||n}var wu=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${DI})`}};function os(n){return n instanceof wu?n.changingThisBreaksApplicationSecurity:n}function Nm(n,e){let t=hM(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${DI})`)}return t===e}function hM(n){return n instanceof wu&&n.getTypeName()||null}var fM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Bb(n){return n=String(n),n.match(fM)?n:"unsafe:"+n}var Hu=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Hu||{});function pM(n){let e=qb();return e?e.sanitize(Hu.URL,n)||"":Nm(n,"URL")?os(n):Bb(Wo(n))}function mM(n){let e=qb();if(e)return sI(e.sanitize(Hu.RESOURCE_URL,n)||"");if(Nm(n,"ResourceURL"))return sI(os(n));throw new J(904,!1)}function gM(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?mM:pM}function $b(n,e,t){return gM(e,t)(n)}function qb(){let n=Me();return n&&n[Nn].sanitizer}var yM=/^>|^->|<!--|-->|--!>|<!-$/g,vM=/(<|>)/g,_M="\u200B$1\u200B";function wM(n){return n.replace(yM,e=>e.replace(vM,_M))}function Hb(n){return n instanceof Function?n():n}function IM(n){return(n??$(on)).get(_n)==="browser"}var gr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(gr||{}),bM;function Om(n,e){return bM(n,e)}function qo(n,e,t,r,i){if(r!=null){let o,s=!1;wr(r)?o=r:ji(r)&&(s=!0,r=r[_r]);let a=Kn(r);n===0&&t!==null?i==null?Qb(e,t,a):Iu(e,t,a,i||null,!0):n===1&&t!==null?Iu(e,t,a,i||null,!0):n===2?UM(e,a,s):n===3&&e.destroyNode(a),o!=null&&$M(e,n,o,t,i)}}function EM(n,e){return n.createText(e)}function CM(n,e,t){n.setValue(e,t)}function DM(n,e){return n.createComment(wM(e))}function zb(n,e,t){return n.createElement(e,t)}function SM(n,e){Gb(n,e),e[_r]=null,e[Fn]=null}function TM(n,e,t,r,i,o){r[_r]=i,r[Fn]=e,Gu(n,r,t,1,i,o)}function Gb(n,e){e[Nn].changeDetectionScheduler?.notify(1),Gu(n,e,e[tt],2,null,null)}function xM(n){let e=n[Ra];if(!e)return fp(n[Ce],n);for(;e;){let t=null;if(ji(e))t=e[Ra];else{let r=e[pn];r&&(t=r)}if(!t){for(;e&&!e[Mn]&&e!==n;)ji(e)&&fp(e[Ce],e),e=e[xt];e===null&&(e=n),ji(e)&&fp(e[Ce],e),t=e&&e[Mn]}e=t}}function AM(n,e,t,r){let i=pn+r,o=t.length;r>0&&(t[i-1][Mn]=e),r<o-pn?(e[Mn]=t[i],kI(t,pn+r,e)):(t.push(e),e[Mn]=null),e[xt]=t;let s=e[ku];s!==null&&t!==s&&RM(s,e);let a=e[Xo];a!==null&&a.insertView(n),Rp(e),e[se]|=128}function RM(n,e){let t=n[mu],i=e[xt][xt][Wn];e[Wn]!==i&&(n[se]|=ym.HasTransplantedViews),t===null?n[mu]=[e]:t.push(e)}function Wb(n,e){let t=n[mu],r=t.indexOf(e);t.splice(r,1)}function Vp(n,e){if(n.length<=pn)return;let t=pn+e,r=n[t];if(r){let i=r[ku];i!==null&&i!==n&&Wb(i,r),e>0&&(n[t-1][Mn]=r[Mn]);let o=du(n,pn+e);SM(r[Ce],r);let s=o[Xo];s!==null&&s.detachView(o[Ce]),r[xt]=null,r[Mn]=null,r[se]&=-129}return r}function Kb(n,e){if(!(e[se]&256)){let t=e[tt];t.destroyNode&&Gu(n,e,t,3,null,null),xM(e)}}function fp(n,e){if(e[se]&256)return;let t=Re(null);try{e[se]&=-129,e[se]|=256,e[$i]&&vw(e[$i]),PM(n,e),MM(n,e),e[Ce].type===1&&e[tt].destroy();let r=e[ku];if(r!==null&&wr(e[xt])){r!==e[xt]&&Wb(r,e);let i=e[Xo];i!==null&&i.detachView(n)}iM(e)}finally{Re(t)}}function MM(n,e){let t=n.cleanup,r=e[Aa];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Aa]=null);let i=e[Qr];if(i!==null){e[Qr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function PM(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof zi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Hn(4,a,l);try{l.call(a)}finally{Hn(5,a,l)}}else{Hn(4,i,o);try{o.call(i)}finally{Hn(5,i,o)}}}}}function NM(n,e,t){return OM(n,e.parent,t)}function OM(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[_r];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Gn.None||o===Gn.Emulated)return null}return yn(r,t)}}function Iu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Qb(n,e,t){n.appendChild(e,t)}function aI(n,e,t,r,i){r!==null?Iu(n,e,t,r,i):Qb(n,e,t)}function kM(n,e,t,r){n.removeChild(e,t,r)}function km(n,e){return n.parentNode(e)}function FM(n,e){return n.nextSibling(e)}function LM(n,e,t){return jM(n,e,t)}function VM(n,e,t){return n.type&40?yn(n,t):null}var jM=VM,cI;function zu(n,e,t,r){let i=NM(n,r,e),o=e[tt],s=r.parent||e[Fn],a=LM(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)aI(o,i,t[l],a,!1);else aI(o,i,t,a,!1);cI!==void 0&&cI(o,r,e,t,i)}function au(n,e){if(e!==null){let t=e.type;if(t&3)return yn(e,n);if(t&4)return jp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return au(n,r);{let i=n[e.index];return wr(i)?jp(-1,i):Kn(i)}}else{if(t&32)return Om(e,n)()||Kn(n[e.index]);{let r=Yb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Pa(n[Wn]);return au(i,r)}else return au(n,e.next)}}}return null}function Yb(n,e){if(e!==null){let r=n[Wn][Fn],i=e.projection;return r.projection[i]}return null}function jp(n,e){let t=pn+n+1;if(t<e.length){let r=e[t],i=r[Ce].firstChild;if(i!==null)return au(r,i)}return e[qi]}function UM(n,e,t){let r=km(n,e);r&&kM(n,r,e,t)}function Fm(n,e,t,r,i,o,s){for(;t!=null;){let a=r[t.index],l=t.type;if(s&&e===0&&(a&&Xr(Kn(a),r),t.flags|=2),(t.flags&32)!==32)if(l&8)Fm(n,e,t.child,r,i,o,!1),qo(e,n,i,a,o);else if(l&32){let u=Om(t,r),h;for(;h=u();)qo(e,n,i,h,o);qo(e,n,i,a,o)}else l&16?BM(n,e,r,t,i,o):qo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Gu(n,e,t,r,i,o){Fm(t,r,n.firstChild,e,i,o,!1)}function BM(n,e,t,r,i,o){let s=t[Wn],l=s[Fn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let h=l[u];qo(e,n,i,h,o)}else{let u=l,h=s[xt];Ob(r)&&(u.flags|=128),Fm(n,e,u,h,i,o,!0)}}function $M(n,e,t,r,i){let o=t[qi],s=Kn(t);o!==s&&qo(e,n,r,o,i);for(let a=pn;a<t.length;a++){let l=t[a];Gu(l[Ce],l,n,e,r,o)}}function qM(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:gr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=gr.Important),n.setStyle(t,r,i,o))}}function HM(n,e,t){n.setAttribute(e,"style",t)}function Jb(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Xb(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Dp(n,e,r),i!==null&&Jb(n,e,i),o!==null&&HM(n,e,o)}var wn={};function C(n=1){Zb(gt(),Me(),ni()+n,!1)}function Zb(n,e,t,r){if(!r)if((e[se]&3)===3){let o=n.preOrderCheckHooks;o!==null&&ou(e,o,t)}else{let o=n.preOrderHooks;o!==null&&su(e,o,0,t)}Hi(t)}function U(n,e=Ee.Default){let t=Me();if(t===null)return F(n,e);let r=$t();return Ab(r,t,Ut(n),e)}function eE(){let n="invalid";throw new Error(n)}function tE(n,e,t,r,i,o){let s=Re(null);try{let a=null;i&St.SignalBased&&(a=e[r][Ff]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&St.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):tb(e,a,r,o)}finally{Re(s)}}function zM(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Hi(~i);else{let o=i,s=t[++r],a=t[++r];RR(s,o);let l=e[o];a(2,l)}}}finally{Hi(-1)}}function Wu(n,e,t,r,i,o,s,a,l,u,h){let g=e.blueprint.slice();return g[_r]=i,g[se]=r|4|128|8|64,(u!==null||n&&n[se]&2048)&&(g[se]|=2048),lb(g),g[xt]=g[is]=n,g[Pn]=t,g[Nn]=s||n&&n[Nn],g[tt]=a||n&&n[tt],g[Jo]=l||n&&n[Jo]||null,g[Fn]=o,g[Fu]=nM(),g[fu]=h,g[ZI]=u,g[Wn]=e.type==2?n[Wn]:g,g}function Ua(n,e,t,r,i){let o=n.data[e];if(o===null)o=GM(n,e,t,r,i),AR()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=DR();o.injectorIndex=s===null?-1:s.injectorIndex}return Ki(o,!0),o}function GM(n,e,t,r,i){let o=hb(),s=Im(),a=s?o:o&&o.parent,l=n.data[e]=JM(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function nE(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function rE(n,e,t,r,i){let o=ni(),s=r&2;try{Hi(-1),s&&e.length>mn&&Zb(n,e,mn,!1),Hn(s?2:0,i),t(r,i)}finally{Hi(o),Hn(s?3:1,i)}}function Lm(n,e,t){if(vm(e)){let r=Re(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{Re(r)}}}function Vm(n,e,t){db()&&(rP(n,e,t,yn(t,e)),(t.flags&64)===64&&aE(n,e,t))}function jm(n,e,t=yn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function iE(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Um(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Um(n,e,t,r,i,o,s,a,l,u,h){let g=mn+r,_=g+i,I=WM(g,_),R=typeof u=="function"?u():u;return I[Ce]={type:n,blueprint:I,template:t,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:R,incompleteFirstPass:!1,ssrId:h}}function WM(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:wn);return t}function KM(n,e,t,r){let o=r.get(uM,Ub)||t===Gn.ShadowDom,s=n.selectRootElement(e,o);return QM(s),s}function QM(n){YM(n)}var YM=()=>null;function JM(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return bR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function lI(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,l=St.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}n===0?uI(r,t,u,a,l):uI(r,t,u,a)}return r}function uI(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function XM(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],l=null,u=null;for(let h=r;h<i;h++){let g=o[h],_=t?t.get(g):null,I=_?_.inputs:null,R=_?_.outputs:null;l=lI(0,g.inputs,h,l,I),u=lI(1,g.outputs,h,u,R);let N=l!==null&&s!==null&&!fm(e)?pP(l,h,s):null;a.push(N)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}function ZM(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function oE(n,e,t,r,i,o,s,a){let l=yn(e,t),u=e.inputs,h;!a&&u!=null&&(h=u[r])?($m(n,t,h,r,i),Lu(e)&&eP(t,e.index)):e.type&3?(r=ZM(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)):e.type&12}function eP(n,e){let t=ti(e,n);t[se]&16||(t[se]|=64)}function Bm(n,e,t,r){if(db()){let i=r===null?null:{"":-1},o=oP(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&sE(n,e,t,s,i,a),i&&sP(t,r,i)}t.mergedAttrs=Ta(t.mergedAttrs,t.attrs)}function sE(n,e,t,r,i,o){for(let u=0;u<r.length;u++)Np(_u(t,e),n,r[u].type);cP(t,n.data.length,r.length);for(let u=0;u<r.length;u++){let h=r[u];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,l=nE(n,e,r.length,null);for(let u=0;u<r.length;u++){let h=r[u];t.mergedAttrs=Ta(t.mergedAttrs,h.hostAttrs),lP(n,t,e,l,h),aP(l,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let g=h.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}XM(n,t,o)}function tP(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;nP(s)!=a&&s.push(a),s.push(t,r,o)}}function nP(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function rP(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Lu(t)&&uP(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||_u(t,e),Xr(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let l=n.data[a],u=es(e,n,a,t);if(Xr(u,e),s!==null&&fP(e,a-i,u,l,t,s),Jr(l)){let h=ti(t.index,e);h[Pn]=es(e,n,a,t)}}}function aE(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=MR();try{Hi(o);for(let a=r;a<i;a++){let l=n.data[a],u=e[a];Mp(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&iP(l,u)}}finally{Hi(-1),Mp(s)}}function iP(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function oP(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(B1(e,s.selectors,!1))if(r||(r=[]),Jr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let l=a.length;Up(n,e,l)}else r.unshift(s),Up(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Up(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function sP(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new J(-301,!1);r.push(e[i],o)}}}function aP(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Jr(e)&&(t[""]=n)}}function cP(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function lP(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Bi(i.type,!0)),s=new zi(o,Jr(i),U);n.blueprint[r]=s,t[r]=s,tP(n,e,r,nE(n,t,i.hostVars,wn),i)}function uP(n,e,t){let r=yn(e,n),i=iE(t),o=n[Nn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Ku(n,Wu(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function dP(n,e,t,r,i,o){let s=yn(n,e);hP(e[tt],s,o,n.value,t,r,i)}function hP(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Wo(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function fP(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],u=s[a++],h=s[a++],g=s[a++];tE(r,t,l,u,h,g)}}function pP(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function cE(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function lE(n,e){let t=n.contentQueries;if(t!==null){let r=Re(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];mb(o),a.contentQueries(2,e[s],s)}}}finally{Re(r)}}}function Ku(n,e){return n[Ra]?n[Zw][Mn]=e:n[Ra]=e,n[Zw]=e,e}function Bp(n,e,t){mb(0);let r=Re(null);try{e(n,t)}finally{Re(r)}}function mP(n){return n[Aa]||(n[Aa]=[])}function gP(n){return n.cleanup||(n.cleanup=[])}function uE(n,e){let t=n[Jo],r=t?t.get(Qn,null):null;r&&r.handleError(e)}function $m(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],l=t[o++],u=e[s],h=n.data[s];tE(h,u,r,a,l,i)}}function dE(n,e,t){let r=sb(e,n);CM(n[tt],r,t)}function yP(n,e){let t=ti(e,n),r=t[Ce];vP(r,t);let i=t[_r];i!==null&&t[fu]===null&&(t[fu]=Pm(i,t[Jo])),qm(r,t,t[Pn])}function vP(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function qm(n,e,t){Em(e);try{let r=n.viewQuery;r!==null&&Bp(1,r,t);let i=n.template;i!==null&&rE(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Xo]?.finishViewCreation(n),n.staticContentQueries&&lE(n,e),n.staticViewQueries&&Bp(2,n.viewQuery,t);let o=n.components;o!==null&&_P(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[se]&=-5,Cm()}}function _P(n,e){for(let t=0;t<e.length;t++)yP(n,e[t])}function wP(n,e,t,r){let i=Re(null);try{let o=e.tView,a=n[se]&4096?4096:16,l=Wu(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[ku]=u;let h=n[Xo];return h!==null&&(l[Xo]=h.createEmbeddedView(o)),qm(o,l,t),l}finally{Re(i)}}function dI(n,e){return!e||e.firstChild===null||Ob(n)}function IP(n,e,t,r=!0){let i=e[Ce];if(AM(i,e,n,t),r){let s=jp(t,n),a=e[tt],l=km(a,n[qi]);l!==null&&TM(i,n[Fn],a,e,l,s)}let o=e[fu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function bu(n,e,t,r,i=!1){for(;t!==null;){let o=e[t.index];o!==null&&r.push(Kn(o)),wr(o)&&bP(o,r);let s=t.type;if(s&8)bu(n,e,t.child,r);else if(s&32){let a=Om(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=Yb(e,t);if(Array.isArray(a))r.push(...a);else{let l=Pa(e[Wn]);bu(l[Ce],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function bP(n,e){for(let t=pn;t<n.length;t++){let r=n[t],i=r[Ce].firstChild;i!==null&&bu(r[Ce],r,i,e)}n[qi]!==n[_r]&&e.push(n[qi])}var hE=[];function EP(n){return n[$i]??CP(n)}function CP(n){let e=hE.pop()??Object.create(SP);return e.lView=n,e}function DP(n){n.lView[$i]!==n&&(n.lView=null,hE.push(n))}var SP=pe(V({},mw),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ma(n.lView)},consumerOnSignalRead(){this.lView[$i]=this}}),fE=100;function pE(n,e=!0,t=0){let r=n[Nn],i=r.rendererFactory,o=!1;o||i.begin?.();try{TP(n,t)}catch(s){throw e&&uE(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function TP(n,e){$p(n,e);let t=0;for(;wm(n);){if(t===fE)throw new J(103,!1);t++,$p(n,1)}}function xP(n,e,t,r){let i=e[se];if((i&256)===256)return;let o=!1;!o&&e[Nn].inlineEffectRunner?.flush(),Em(e);let s=null,a=null;!o&&AP(n)&&(a=EP(e),s=gw(a));try{lb(e),xR(n.bindingStartIndex),t!==null&&rE(n,e,t,2,r);let l=(i&3)===3;if(!o)if(l){let g=n.preOrderCheckHooks;g!==null&&ou(e,g,null)}else{let g=n.preOrderHooks;g!==null&&su(e,g,0,null),lp(e,0)}if(RP(e),mE(e,0),n.contentQueries!==null&&lE(n,e),!o)if(l){let g=n.contentCheckHooks;g!==null&&ou(e,g)}else{let g=n.contentHooks;g!==null&&su(e,g,1),lp(e,1)}zM(n,e);let u=n.components;u!==null&&yE(e,u,0);let h=n.viewQuery;if(h!==null&&Bp(2,h,r),!o)if(l){let g=n.viewCheckHooks;g!==null&&ou(e,g)}else{let g=n.viewHooks;g!==null&&su(e,g,2),lp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[cp]){for(let g of e[cp])g();e[cp]=null}o||(e[se]&=-73)}catch(l){throw Ma(e),l}finally{a!==null&&(yw(a,s),DP(a)),Cm()}}function AP(n){return n.type!==2}function mE(n,e){for(let t=Fb(n);t!==null;t=Lb(t))for(let r=pn;r<t.length;r++){let i=t[r];gE(i,e)}}function RP(n){for(let e=Fb(n);e!==null;e=Lb(e)){if(!(e[se]&ym.HasTransplantedViews))continue;let t=e[mu];for(let r=0;r<t.length;r++){let i=t[r],o=i[xt];gR(i)}}}function MP(n,e,t){let r=ti(e,n);gE(r,t)}function gE(n,e){_m(n)&&$p(n,e)}function $p(n,e){let r=n[Ce],i=n[se],o=n[$i],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Lf(o)),o&&(o.dirty=!1),n[se]&=-9217,s)xP(r,n,r.template,n[Pn]);else if(i&8192){mE(n,1);let a=r.components;a!==null&&yE(n,a,1)}}function yE(n,e,t){for(let r=0;r<e.length;r++)MP(n,e[r],t)}function Hm(n){for(n[Nn].changeDetectionScheduler?.notify();n;){n[se]|=64;let e=Pa(n);if(cR(n)&&!e)return n;n=e}return null}var Gi=class{get rootNodes(){let e=this._lView,t=e[Ce];return bu(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Pn]}set context(e){this._lView[Pn]=e}get destroyed(){return(this._lView[se]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[xt];if(wr(e)){let t=e[pu],r=t?t.indexOf(this):-1;r>-1&&(Vp(e,r),du(t,r))}this._attachedToViewContainer=!1}Kb(this._lView[Ce],this._lView)}onDestroy(e){ub(this._lView,e)}markForCheck(){Hm(this._cdRefInjectingView||this._lView)}detach(){this._lView[se]&=-129}reattach(){Rp(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,pE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Gb(this._lView[Ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e,Rp(this._lView)}},Qu=(()=>{class n{static{this.__NG_ELEMENT_ID__=OP}}return n})(),PP=Qu,NP=class extends PP{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=wP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Gi(i)}};function OP(){return vE($t(),Me())}function vE(n,e){return n.type&4?new NP(e,n,qu(n,e)):null}var tz=new RegExp(`^(\\d+)*(${cM}|${aM})*(.*)`);var kP=()=>null;function hI(n,e){return kP(n,e)}var Eu=class{},qp=class{},Cu=class{};function FP(n){let e=Error(`No component factory found for ${Bt(n)}.`);return e[LP]=n,e}var LP="ngComponent";var Hp=class{resolveComponentFactory(e){throw FP(e)}},Yu=(()=>{class n{static{this.NULL=new Hp}}return n})(),Na=class{},Ir=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>VP()}}return n})();function VP(){let n=Me(),e=$t(),t=ti(e.index,n);return(ji(t)?t:n)[tt]}var jP=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>null})}}return n})(),pp={};var fI=new Set;function Ju(n){fI.has(n)||(fI.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function pI(...n){}function UP(){let n=typeof Vi.requestAnimationFrame=="function",e=Vi[n?"requestAnimationFrame":"setTimeout"],t=Vi[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var Ne=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new it(!1),this.onMicrotaskEmpty=new it(!1),this.onStable=new it(!1),this.onError=new it(!1),typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=UP().nativeRequestAnimationFrame,qP(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new J(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,BP,pI,pI);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},BP={};function zm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function $P(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Vi,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,zp(n),n.isCheckStableRunning=!0,zm(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),zp(n))}function qP(n){let e=()=>{$P(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(HP(a))return t.invokeTask(i,o,s,a);try{return mI(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),gI(n)}},onInvoke:(t,r,i,o,s,a,l)=>{try{return mI(n),t.invoke(i,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),gI(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,zp(n),zm(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function zp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function mI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function gI(n){n._nesting--,zm(n)}function HP(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var Ho=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ho||{}),zP={destroy(){}};function Xu(n,e){!e&&sR(Xu);let t=e?.injector??$(on);if(!IM(t))return zP;Ju("NgAfterNextRender");let r=t.get(Gm),i=r.handler??=new Wp,o=e?.phase??Ho.MixedReadWrite,s=()=>{i.unregister(l),a()},a=t.get(xm).onDestroy(s),l=kn(t,()=>new Gp(o,()=>{s(),n()}));return i.register(l),{destroy:s}}var Gp=class{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=$(Ne),this.errorHandler=$(Qn,{optional:!0}),$(Eu,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Wp=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ho.EarlyRead]:new Set,[Ho.Write]:new Set,[Ho.MixedReadWrite]:new Set,[Ho.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let t of e)t.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Gm=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Du(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Ip(i,a);else if(o==2){let l=a,u=e[++s];r=Ip(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Su=class extends Yu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Yr(e);return new ts(t,this.ngModule)}};function yI(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function GP(n){let e=n.toLowerCase();return e==="svg"?ob:e==="math"?hR:null}var Kp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Nu(r);let i=this.injector.get(e,pp,r);return i!==pp||t===pp?i:this.parentInjector.get(e,t,r)}},ts=class extends Cu{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=yI(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return yI(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=z1(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Re(null);try{i=i||this.ngModule;let s=i instanceof Tt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Kp(e,s):e,l=a.get(Na,null);if(l===null)throw new J(407,!1);let u=a.get(jP,null),h=a.get(Gm,null),g=a.get(Eu,null),_={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:g},I=l.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",N=r?KM(I,r,this.componentDef.encapsulation,a):zb(I,R,GP(R)),O=512;this.componentDef.signals?O|=4096:this.componentDef.onPush||(O|=16);let H=null;N!==null&&(H=Pm(N,a,!0));let oe=Um(0,null,null,1,0,null,null,null,null,null,null),W=Wu(null,oe,null,O,null,null,_,I,a,null,H);Em(W);let _e,ze;try{let ue=this.componentDef,T,w=null;ue.findHostDirectiveDefs?(T=[],w=new Map,ue.findHostDirectiveDefs(ue,T,w),T.push(ue)):T=[ue];let E=WP(W,N),S=KP(E,N,ue,T,W,_,I);ze=ab(oe,mn),N&&JP(I,ue,N,r),t!==void 0&&XP(ze,this.ngContentSelectors,t),_e=YP(S,ue,T,w,W,[ZP]),qm(oe,W,null)}finally{Cm()}return new Qp(this.componentType,_e,qu(ze,W),W,ze)}finally{Re(o)}}},Qp=class extends qp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Gi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;$m(o[Ce],o,i,e,t),this.previousInputValues.set(e,t);let s=ti(this._tNode.index,o);Hm(s)}}get injector(){return new Ui(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function WP(n,e){let t=n[Ce],r=mn;return n[r]=e,Ua(t,r,2,"#host",null)}function KP(n,e,t,r,i,o,s){let a=i[Ce];QP(r,n,e,s);let l=null;e!==null&&(l=Pm(e,i[Jo]));let u=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let g=Wu(i,iE(t),null,h,i[n.index],n,o,u,null,null,l);return a.firstCreatePass&&Up(a,n,r.length-1),Ku(i,g),i[n.index]=g}function QP(n,e,t,r){for(let i of n)e.mergedAttrs=Ta(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Du(e,e.mergedAttrs,!0),t!==null&&Xb(r,t,e))}function YP(n,e,t,r,i,o){let s=$t(),a=i[Ce],l=yn(s,i);sE(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let g=s.directiveStart+h,_=es(i,a,g,s);Xr(_,i)}aE(a,i,s),l&&Xr(l,i);let u=es(i,a,s.directiveStart+s.componentOffset,s);if(n[Pn]=i[Pn]=u,o!==null)for(let h of o)h(u,e);return Lm(a,s,i),u}function JP(n,e,t,r){if(r)Dp(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=G1(e.selectors[0]);i&&Dp(n,t,i),o&&o.length>0&&Jb(n,t,o.join(" "))}}function XP(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function ZP(){let n=$t();$u(Me()[Ce],n)}var ss=(()=>{class n{static{this.__NG_ELEMENT_ID__=eN}}return n})();function eN(){let n=$t();return nN(n,Me())}var tN=ss,_E=class extends tN{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return qu(this._hostTNode,this._hostLView)}get injector(){return new Ui(this._hostTNode,this._hostLView)}get parentInjector(){let e=Sm(this._hostTNode,this._hostLView);if(Eb(e)){let t=yu(e,this._hostLView),r=gu(e),i=t[Ce].data[r+8];return new Ui(i,t)}else return new Ui(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=vI(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-pn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=hI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,dI(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!aR(e),a;if(s)a=t;else{let R=t||{};a=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef}let l=s?e:new ts(Yr(e)),u=r||this.parentInjector;if(!o&&l.ngModule==null){let N=(s?u:this.parentInjector).get(Tt,null);N&&(o=N)}let h=Yr(l.componentType??{}),g=hI(this._lContainer,h?.id??null),_=g?.firstChild??null,I=l.create(u,i,_,o);return this.insertImpl(I.hostView,a,dI(this._hostTNode,g)),I}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(mR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[xt],u=new _E(l,l[Fn],l[xt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return IP(s,i,o,r),e.attachToViewContainerRef(),kI(mp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=vI(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Vp(this._lContainer,t);r&&(du(mp(this._lContainer),t),Kb(r[Ce],r))}detach(e){let t=this._adjustIndex(e,-1),r=Vp(this._lContainer,t);return r&&du(mp(this._lContainer),t)!=null?new Gi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function vI(n){return n[pu]}function mp(n){return n[pu]||(n[pu]=[])}function nN(n,e){let t,r=e[n.index];return wr(r)?t=r:(t=cE(r,e,null,n),e[n.index]=t,Ku(e,t)),iN(t,e,n,r),new _E(t,n,e)}function rN(n,e){let t=n[tt],r=t.createComment(""),i=yn(e,n),o=km(t,i);return Iu(t,o,r,FM(t,i),!1),r}var iN=aN,oN=()=>!1;function sN(n,e,t){return oN(n,e,t)}function aN(n,e,t,r){if(n[qi])return;let i;t.type&8?i=Kn(r):i=rN(e,t),n[qi]=i}function cN(n){return typeof n=="function"&&n[Ff]!==void 0}function wE(n){return cN(n)&&typeof n.set=="function"}function lN(n){return Object.getPrototypeOf(n.prototype).constructor}function sn(n){let e=lN(n.type),t=!0,r=[n];for(;e;){let i;if(Jr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new J(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=nu(n.inputs),s.inputTransforms=nu(n.inputTransforms),s.declaredInputs=nu(n.declaredInputs),s.outputs=nu(n.outputs);let a=i.hostBindings;a&&pN(n,a);let l=i.viewQuery,u=i.contentQueries;if(l&&hN(n,l),u&&fN(n,u),uN(n,i),p1(n.outputs,i.outputs),Jr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===sn&&(t=!1)}}e=Object.getPrototypeOf(e)}dN(r)}function uN(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function dN(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ta(i.hostAttrs,t=Ta(t,i.hostAttrs))}}function nu(n){return n===Ko?{}:n===Kt?[]:n}function hN(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function fN(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function pN(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Wm(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Zr=class{},Oa=class{};var Yp=class extends Zr{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Su(this);let i=zI(e);this._bootstrapComponents=Hb(i.bootstrap),this._r3Injector=Pb(e,t,[{provide:Zr,useValue:this},{provide:Yu,useValue:this.componentFactoryResolver},...r],Bt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Jp=class extends Oa{constructor(e){super(),this.moduleType=e}create(e){return new Yp(this.moduleType,e,[])}};var Tu=class extends Zr{constructor(e){super(),this.componentFactoryResolver=new Su(this),this.instance=null;let t=new xa([...e.providers,{provide:Zr,useValue:this},{provide:Yu,useValue:this.componentFactoryResolver}],e.parent||gm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Zu(n,e,t=null){return new Tu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var as=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new lt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function IE(n){return gN(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function mN(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function gN(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function bE(n,e,t){return n[e]=t}function yN(n,e){return n[e]}function yr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function vN(n,e,t,r){let i=yr(n,e,t);return yr(n,e+1,r)||i}function _N(n){return(n.flags&32)===32}function wN(n,e,t,r,i,o,s,a,l){let u=e.consts,h=Ua(e,n,4,s||null,Zo(u,a));Bm(e,t,h,Zo(u,l)),$u(e,h);let g=h.tView=Um(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}function K(n,e,t,r,i,o,s,a){let l=Me(),u=gt(),h=n+mn,g=u.firstCreatePass?wN(h,u,l,e,t,r,i,o,s):u.data[h];Ki(g,!1);let _=IN(u,l,g,n);Uu()&&zu(u,l,_,g),Xr(_,l);let I=cE(_,l,_,g);return l[h]=I,Ku(l,I),sN(I,g,l),Vu(g)&&Vm(u,l,g),s!=null&&jm(l,g,a),K}var IN=bN;function bN(n,e,t,r){return Bu(!0),e[tt].createComment("")}function ri(n,e,t,r){let i=Me(),o=ju();if(yr(i,o,e)){let s=gt(),a=Dm();dP(a,i,n,e,t,r)}return ri}function EN(n,e,t,r){return yr(n,ju(),t)?e+Wo(t)+r:wn}function CN(n,e,t,r,i,o){let s=TR(),a=vN(n,s,t,i);return bm(2),a?e+Wo(t)+r+Wo(i)+o:wn}function ru(n,e){return n<<17|e<<2}function Wi(n){return n>>17&32767}function DN(n){return(n&2)==2}function SN(n,e){return n&131071|e<<17}function Xp(n){return n|2}function ns(n){return(n&131068)>>2}function gp(n,e){return n&-131069|e<<2}function TN(n){return(n&1)===1}function Zp(n){return n|1}function xN(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Wi(s),l=ns(s);n[r]=t;let u=!1,h;if(Array.isArray(t)){let g=t;h=g[1],(h===null||La(g,h)>0)&&(u=!0)}else h=t;if(i)if(l!==0){let _=Wi(n[a+1]);n[r+1]=ru(_,a),_!==0&&(n[_+1]=gp(n[_+1],r)),n[a+1]=SN(n[a+1],r)}else n[r+1]=ru(a,0),a!==0&&(n[a+1]=gp(n[a+1],r)),a=r;else n[r+1]=ru(l,0),a===0?a=r:n[l+1]=gp(n[l+1],r),l=r;u&&(n[r+1]=Xp(n[r+1])),_I(n,h,r,!0),_I(n,h,r,!1),AN(e,h,n,r,o),s=ru(a,l),o?e.classBindings=s:e.styleBindings=s}function AN(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&La(o,e)>=0&&(t[r+1]=Zp(t[r+1]))}function _I(n,e,t,r){let i=n[t+1],o=e===null,s=r?Wi(i):ns(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];RN(l,e)&&(a=!0,n[s+1]=r?Zp(u):Xp(u)),s=r?Wi(u):ns(u)}a&&(n[t+1]=r?Xp(i):Zp(i))}function RN(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?La(n,e)>=0:!1}var Rn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function MN(n){return n.substring(Rn.key,Rn.keyEnd)}function PN(n){return NN(n),EE(n,CE(n,0,Rn.textEnd))}function EE(n,e){let t=Rn.textEnd;return t===e?-1:(e=Rn.keyEnd=ON(n,Rn.key=e,t),CE(n,e,t))}function NN(n){Rn.key=0,Rn.keyEnd=0,Rn.value=0,Rn.valueEnd=0,Rn.textEnd=n.length}function CE(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function ON(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function j(n,e,t){let r=Me(),i=ju();if(yr(r,i,e)){let o=gt(),s=Dm();oE(o,s,r,n,e,r[tt],t,!1)}return j}function em(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";$m(n,t,o[s],s,r)}function br(n,e,t){return DE(n,e,t,!1),br}function Er(n,e){return DE(n,e,null,!0),Er}function Cr(n){FN($N,kN,n,!0)}function kN(n,e){for(let t=PN(e);t>=0;t=EE(e,t))hm(n,MN(e),!0)}function DE(n,e,t,r){let i=Me(),o=gt(),s=bm(2);if(o.firstUpdatePass&&TE(o,n,s,r),e!==wn&&yr(i,s,e)){let a=o.data[ni()];xE(o,a,i,i[tt],n,i[s+1]=HN(e,t),r,s)}}function FN(n,e,t,r){let i=gt(),o=bm(2);i.firstUpdatePass&&TE(i,null,o,r);let s=Me();if(t!==wn&&yr(s,o,t)){let a=i.data[ni()];if(AE(a,r)&&!SE(i,o)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=Ip(l,t||"")),em(i,a,s,t,r)}else qN(i,a,s,s[tt],s[o+1],s[o+1]=BN(n,e,t),r,o)}}function SE(n,e){return e>=n.expandoStartIndex}function TE(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ni()],s=SE(n,t);AE(o,r)&&e===null&&!s&&(e=!1),e=LN(i,o,e,r),xN(i,o,e,t,s,r)}}function LN(n,e,t,r){let i=PR(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=yp(null,n,e,t,r),t=ka(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=yp(i,n,e,t,r),o===null){let l=VN(n,e,r);l!==void 0&&Array.isArray(l)&&(l=yp(null,n,e,l[1],r),l=ka(l,e.attrs,r),jN(n,e,r,l))}else o=UN(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function VN(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ns(r)!==0)return n[Wi(r)]}function jN(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Wi(i)]=r}function UN(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ka(r,s,t)}return ka(r,e.attrs,t)}function yp(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=ka(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ka(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),hm(n,s,t?!0:e[++o]))}return n===void 0?null:n}function BN(n,e,t){if(t==null||t==="")return Kt;let r=[],i=os(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function $N(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&hm(n,r,t)}function qN(n,e,t,r,i,o,s,a){i===wn&&(i=Kt);let l=0,u=0,h=0<i.length?i[0]:null,g=0<o.length?o[0]:null;for(;h!==null||g!==null;){let _=l<i.length?i[l+1]:void 0,I=u<o.length?o[u+1]:void 0,R=null,N;h===g?(l+=2,u+=2,_!==I&&(R=g,N=I)):g===null||h!==null&&h<g?(l+=2,R=h):(u+=2,R=g,N=I),R!==null&&xE(n,e,t,r,R,N,s,a),h=l<i.length?i[l]:null,g=u<o.length?o[u]:null}}function xE(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],h=TN(u)?wI(l,e,t,i,ns(u),s):void 0;if(!xu(h)){xu(o)||DN(u)&&(o=wI(l,null,t,i,a,s));let g=sb(ni(),t);qM(r,s,g,i,o)}}function wI(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let l=n[i],u=Array.isArray(l),h=u?l[1]:l,g=h===null,_=t[i+1];_===wn&&(_=g?Kt:void 0);let I=g?sp(_,r):h===r?_:void 0;if(u&&!xu(I)&&(I=sp(l,r)),xu(I)&&(a=I,s))return a;let R=n[i+1];i=s?Wi(R):ns(R)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=sp(l,r))}return a}function xu(n){return n!==void 0}function HN(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Bt(os(n)))),n}function AE(n,e){return(n.flags&(e?8:16))!==0}function zN(n,e,t,r,i,o){let s=e.consts,a=Zo(s,i),l=Ua(e,n,2,r,a);return Bm(e,t,l,Zo(s,o)),l.attrs!==null&&Du(l,l.attrs,!1),l.mergedAttrs!==null&&Du(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function p(n,e,t,r){let i=Me(),o=gt(),s=mn+n,a=i[tt],l=o.firstCreatePass?zN(s,o,i,e,t,r):o.data[s],u=GN(o,i,l,a,e,n);i[s]=u;let h=Vu(l);return Ki(l,!0),Xb(a,u,l),!_N(l)&&Uu()&&zu(o,i,u,l),_R()===0&&Xr(u,i),wR(),h&&(Vm(o,i,l),Lm(o,l,i)),r!==null&&jm(i,l),p}function m(){let n=$t();Im()?fb():(n=n.parent,Ki(n,!1));let e=n;ER(e)&&CR(),IR();let t=gt();return t.firstCreatePass&&($u(t,n),vm(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&UR(e)&&em(t,e,Me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&BR(e)&&em(t,e,Me(),e.stylesWithoutHost,!1),m}function he(n,e,t,r){return p(n,e,t,r),m(),he}var GN=(n,e,t,r,i,o)=>(Bu(!0),zb(r,i,FR()));function WN(n,e,t,r,i){let o=e.consts,s=Zo(o,r),a=Ua(e,n,8,"ng-container",s);s!==null&&Du(a,s,!0);let l=Zo(o,i);return Bm(e,t,a,l),e.queries!==null&&e.queries.elementStart(e,a),a}function Qt(n,e,t){let r=Me(),i=gt(),o=n+mn,s=i.firstCreatePass?WN(o,i,r,e,t):i.data[o];Ki(s,!0);let a=KN(i,r,s,n);return r[o]=a,Uu()&&zu(i,r,a,s),Xr(a,r),Vu(s)&&(Vm(i,r,s),Lm(i,s,r)),t!=null&&jm(r,s),Qt}function Yt(){let n=$t(),e=gt();return Im()?fb():(n=n.parent,Ki(n,!1)),e.firstCreatePass&&($u(e,n),vm(n)&&e.queries.elementEnd(n)),Yt}var KN=(n,e,t,r)=>(Bu(!0),DM(e[tt],""));function In(){return Me()}var Au="en-US";var QN=Au;function YN(n){typeof n=="string"&&(QN=n.toLowerCase().replace(/_/g,"-"))}function te(n,e,t,r){let i=Me(),o=gt(),s=$t();return RE(o,i,i[tt],s,n,e,r),te}function JN(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Aa],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function RE(n,e,t,r,i,o,s){let a=Vu(r),u=n.firstCreatePass&&gP(n),h=e[Pn],g=mP(e),_=!0;if(r.type&3||s){let N=yn(r,e),O=s?s(N):N,H=g.length,oe=s?_e=>s(Kn(_e[r.index])):r.index,W=null;if(!s&&a&&(W=JN(n,e,i,r.index)),W!==null){let _e=W.__ngLastListenerFn__||W;_e.__ngNextListenerFn__=o,W.__ngLastListenerFn__=o,_=!1}else{o=bI(r,e,h,o,!1);let _e=t.listen(O,i,o);g.push(o,_e),u&&u.push(i,oe,H,H+1)}}else o=bI(r,e,h,o,!1);let I=r.outputs,R;if(_&&I!==null&&(R=I[i])){let N=R.length;if(N)for(let O=0;O<N;O+=2){let H=R[O],oe=R[O+1],ze=e[H][oe].subscribe(o),ue=g.length;g.push(o,ze),u&&u.push(i,r.index,ue,-(ue+1))}}}function II(n,e,t,r){let i=Re(null);try{return Hn(6,e,t),t(r)!==!1}catch(o){return uE(n,o),!1}finally{Hn(7,e,t),Re(i)}}function bI(n,e,t,r,i){return function o(s){if(s===Function)return r;let a=n.componentOffset>-1?ti(n.index,e):e;Hm(a);let l=II(e,t,r,s),u=o.__ngNextListenerFn__;for(;u;)l=II(e,t,u,s)&&l,u=u.__ngNextListenerFn__;return i&&l===!1&&s.preventDefault(),l}}function we(n=1){return OR(n)}function XN(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Ba(n){let e=SR();return cb(e,mn+n)}function y(n,e=""){let t=Me(),r=gt(),i=n+mn,o=r.firstCreatePass?Ua(r,i,1,e,null):r.data[i],s=ZN(r,t,o,e,n);t[i]=s,Uu()&&zu(r,t,s,o),Ki(o,!1)}var ZN=(n,e,t,r,i)=>(Bu(!0),EM(e[tt],r));function Y(n){return G("",n,""),Y}function G(n,e,t){let r=Me(),i=EN(r,n,e,t);return i!==wn&&dE(r,ni(),i),G}function Qi(n,e,t,r,i){let o=Me(),s=CN(o,n,e,t,r,i);return s!==wn&&dE(o,ni(),s),Qi}function Le(n,e,t){wE(e)&&(e=e());let r=Me(),i=ju();if(yr(r,i,e)){let o=gt(),s=Dm();oE(o,s,r,n,e,r[tt],t,!1)}return Le}function Be(n,e){let t=wE(n);return t&&n.set(e),t}function Ve(n,e){let t=Me(),r=gt(),i=$t();return RE(r,t,t[tt],i,n,e),Ve}function eO(n,e,t){let r=gt();if(r.firstCreatePass){let i=Jr(n);tm(t,r.data,r.blueprint,i,!0),tm(e,r.data,r.blueprint,i,!1)}}function tm(n,e,t,r,i){if(n=Ut(n),Array.isArray(n))for(let o=0;o<n.length;o++)tm(n[o],e,t,r,i);else{let o=gt(),s=Me(),a=$t(),l=Yo(n)?n:Ut(n.provide),u=JI(n),h=a.providerIndexes&1048575,g=a.directiveStart,_=a.providerIndexes>>20;if(Yo(n)||!n.multi){let I=new zi(u,i,U),R=_p(l,e,i?h:h+_,g);R===-1?(Np(_u(a,s),o,l),vp(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(I),s.push(I)):(t[R]=I,s[R]=I)}else{let I=_p(l,e,h+_,g),R=_p(l,e,h,h+_),N=I>=0&&t[I],O=R>=0&&t[R];if(i&&!O||!i&&!N){Np(_u(a,s),o,l);let H=rO(i?nO:tO,t.length,i,r,u);!i&&O&&(t[R].providerFactory=H),vp(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(H),s.push(H)}else{let H=ME(t[i?R:I],u,!i&&r);vp(o,n,I>-1?I:R,H)}!i&&r&&O&&t[R].componentProviders++}}}function vp(n,e,t,r){let i=Yo(e),o=Z1(e);if(i||o){let l=(o?Ut(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(t);h===-1?u.push(t,[r,l]):u[h+1].push(r,l)}else u.push(t,l)}}}function ME(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function _p(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function tO(n,e,t,r){return nm(this.multi,[])}function nO(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=es(t,t[Ce],this.providerFactory.index,r);o=a.slice(0,s),nm(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],nm(i,o);return o}function nm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function rO(n,e,t,r,i){let o=new zi(n,t,U);return o.multi=[],o.index=e,o.componentProviders=0,ME(o,i,r&&!t),o}function Dr(n,e=[]){return t=>{t.providersResolver=(r,i)=>eO(r,i?i(n):n,e)}}var iO=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=KI(!1,t.type),i=r.length>0?Zu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(F(Tt))})}}return n})();function re(n){Ju("NgStandalone"),n.getStandaloneInjector=e=>e.get(iO).getOrCreateStandaloneInjector(n)}function Sr(n,e,t){let r=pb()+n,i=Me();return i[r]===wn?bE(i,r,t?e.call(t):e()):yN(i,r)}function oO(n,e){let t=n[e];return t===wn?void 0:t}function sO(n,e,t,r,i,o){let s=e+t;return yr(n,s,i)?bE(n,s+1,o?r.call(o,i):r(i)):oO(n,s+1)}function Km(n,e){let t=gt(),r,i=n+mn;t.firstCreatePass?(r=aO(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Bi(r.type,!0)),s,a=Wt(U);try{let l=vu(!1),u=o();return vu(l),XN(t,Me(),i,u),u}finally{Wt(a)}}function aO(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Qm(n,e,t){let r=n+mn,i=Me(),o=cb(i,r);return cO(i,r)?sO(i,pb(),e,o.transform,t,o):o.transform(t)}function cO(n,e){return n[Ce].data[e].pure}function $a(n,e){return vE(n,e)}var vr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},PE=new vr("17.3.12"),ed=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var NE=new X("");function Yi(n){return!!n&&typeof n.then=="function"}function OE(n){return!!n&&typeof n.subscribe=="function"}var td=new X(""),kE=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=$(td,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Yi(o))t.push(o);else if(OE(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qa=new X("");function lO(){_w(()=>{throw new J(600,!1)})}function uO(n){return n.isBoundToModule}function dO(n,e,t){try{let r=t();return Yi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var cs=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$(Nb),this.afterRenderEffectManager=$(Gm),this.externalTestViews=new Set,this.beforeRender=new Ct,this.afterTick=new Ct,this.componentTypes=[],this.components=[],this.isStable=$(as).hasPendingTasks.pipe(ge(t=>!t)),this._injector=$(Tt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Cu;if(!this._injector.get(kE).done){let _=!i&&HI(t),I=!1;throw new J(405,I)}let s;i?s=t:s=this._injector.get(Yu).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=uO(s)?void 0:this._injector.get(Zr),l=r||s.selector,u=s.create(on.NULL,[],l,a),h=u.location.nativeElement,g=u.injector.get(NE,null);return g?.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),wp(this.components,u),g?.unregisterApplication(h)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new J(101,!1);let r=Re(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,Re(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===fE)throw new J(103,!1);if(t){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)hO(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>rm(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>rm(o))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;wp(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(qa,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>wp(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new J(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wp(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function hO(n,e,t){!e&&!rm(n)||fO(n,t,e)}function rm(n){return wm(n)}function fO(n,e,t){let r;t?(r=0,n[se]|=1024):n[se]&64?r=0:r=1,pE(n,e,r)}var im=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},nd=(()=>{class n{compileModuleSync(t){return new Jp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=zI(t),o=Hb(i.declarations).reduce((s,a)=>{let l=Yr(a);return l&&s.push(new ts(l)),s},[]);return new im(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var pO=(()=>{class n{constructor(){this.zone=$(Ne),this.applicationRef=$(cs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function mO(n){return[{provide:Ne,useFactory:n},{provide:Qo,multi:!0,useFactory:()=>{let e=$(pO,{optional:!0});return()=>e.initialize()}},{provide:Qo,multi:!0,useFactory:()=>{let e=$(vO);return()=>{e.initialize()}}},{provide:Nb,useFactory:gO}]}function gO(){let n=$(Ne),e=$(Qn);return t=>n.runOutsideAngular(()=>e.handleError(t))}function Ym(n){let e=mO(()=>new Ne(yO(n)));return rs([[],e])}function yO(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var vO=(()=>{class n{constructor(){this.subscription=new et,this.initialized=!1,this.zone=$(Ne),this.pendingTasks=$(as)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ne.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _O(){return typeof $localize<"u"&&$localize.locale||Au}var Jm=new X("",{providedIn:"root",factory:()=>$(Jm,Ee.Optional|Ee.SkipSelf)||_O()});var FE=new X("");var cu=null;function wO(n=[],e){return on.create({name:e,providers:[{provide:Ou,useValue:"platform"},{provide:FE,useValue:new Set([()=>cu=null])},...n]})}function IO(n=[]){if(cu)return cu;let e=wO(n);return cu=e,lO(),bO(e),e}function bO(n){n.get(Rm,null)?.forEach(t=>t())}var Ji=(()=>{class n{static{this.__NG_ELEMENT_ID__=EO}}return n})();function EO(n){return CO($t(),Me(),(n&16)===16)}function CO(n,e,t){if(Lu(n)&&!t){let r=ti(n.index,e);return new Gi(r,r)}else if(n.type&47){let r=e[Wn];return new Gi(r,e)}return null}var om=class{constructor(){}supports(e){return IE(e)}create(e){return new sm(e)}},DO=(n,e)=>e,sm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||DO}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<EI(r,i,o)?t:r,a=EI(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,h=l-i;if(u!=h){for(let _=0;_<u;_++){let I=_<o.length?o[_]:o[_]=0,R=I+_;h<=R&&R<u&&(o[_]=I+1)}let g=s.previousIndex;o[g]=h-u}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!IE(e))throw new J(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,mN(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new am(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ru),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ru),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},am=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},cm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Ru=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new cm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function EI(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function CI(){return new Xm([new om])}var Xm=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:CI})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||CI()),deps:[[n,new um,new gn]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new J(901,!1)}}return n})();function LE(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=IO(r),o=[Ym(),...t||[]],a=new Tu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Ne);return l.run(()=>{a.resolveInjectorInitializers();let u=a.get(Qn,null),h;l.runOutsideAngular(()=>{h=l.onError.subscribe({next:I=>{u.handleError(I)}})});let g=()=>a.destroy(),_=i.get(FE);return _.add(g),a.onDestroy(()=>{h.unsubscribe(),_.delete(g)}),dO(u,l,()=>{let I=a.get(kE);return I.runInitializers(),I.donePromise.then(()=>{let R=a.get(Jm,Au);YN(R||Au);let N=a.get(cs);return e!==void 0&&N.bootstrap(e),N})})})}catch(e){return Promise.reject(e)}}function ii(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function VE(n){let e=Yr(n);if(!e)return null;let t=new ts(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var qE=null;function xr(){return qE}function HE(n){qE??=n}var rd=class{};var At=new X(""),rg=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>$(SO),providedIn:"platform"})}}return n})(),zE=new X(""),SO=(()=>{class n extends rg{constructor(){super(),this._doc=$(At),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xr().getBaseHref(this._doc)}onPopState(t){let r=xr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=xr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function ig(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function jE(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Tr(n){return n&&n[0]!=="?"?"?"+n:n}var Ar=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>$(og),providedIn:"root"})}}return n})(),GE=new X(""),og=(()=>{class n extends Ar{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??$(At).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ig(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Tr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Tr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Tr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(F(rg),F(GE,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),WE=(()=>{class n extends Ar{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=ig(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Tr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Tr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(F(rg),F(GE,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),us=(()=>{class n{constructor(t){this._subject=new it,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=AO(jE(UE(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Tr(r))}normalize(t){return n.stripTrailingSlash(xO(this._basePath,UE(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Tr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Tr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Tr}static{this.joinWithSlash=ig}static{this.stripTrailingSlash=jE}static{this.\u0275fac=function(r){return new(r||n)(F(Ar))}}static{this.\u0275prov=q({token:n,factory:()=>TO(),providedIn:"root"})}}return n})();function TO(){return new us(F(Ar))}function xO(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function UE(n){return n.replace(/\/index.html$/,"")}function AO(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function id(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Zm=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Je=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Zm(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),BE(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);BE(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(U(ss),U(Qu),U(Xm))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function BE(n,e){n.context.$implicit=e.item}var ut=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new eg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$E("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$E("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(U(ss),U(Qu))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),eg=class{constructor(){this.$implicit=null,this.ngIf=null}};function $E(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Bt(e)}'.`)}function RO(n,e){return new J(2100,!1)}var MO=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,KE=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw RO(n,t);return t.replace(MO,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=BI({name:"titlecase",type:n,pure:!0,standalone:!0})}}return n})();var ae=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=tn({type:n})}static{this.\u0275inj=en({})}}return n})(),sg="browser",PO="server";function NO(n){return n===sg}function od(n){return n===PO}var QE=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>NO($(_n))?new tg($(At),window):new ng})}}return n})(),tg=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=OO(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function OO(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var ng=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ls=class{};var za=class{},ad=class{},Xi=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var cg=class{encodeKey(e){return YE(e)}encodeValue(e){return YE(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function LO(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var VO=/%(\d[a-f0-9])/gi,jO={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function YE(n){return encodeURIComponent(n).replace(VO,(e,t)=>jO[t]??e)}function sd(n){return`${n}`}var oi=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new cg,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=LO(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(sd):[sd(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(sd(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(sd(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var lg=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function UO(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function JE(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function XE(n){return typeof Blob<"u"&&n instanceof Blob}function ZE(n){return typeof FormData<"u"&&n instanceof FormData}function BO(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Ha=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(UO(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Xi,this.context??=new lg,!this.params)this.params=new oi,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||JE(this.body)||XE(this.body)||ZE(this.body)||BO(this.body)?this.body:this.body instanceof oi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||ZE(this.body)?null:XE(this.body)?this.body.type||null:JE(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof oi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,h=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((_,I)=>_.set(I,e.setHeaders[I]),u)),e.setParams&&(h=Object.keys(e.setParams).reduce((_,I)=>_.set(I,e.setParams[I]),h)),new n(t,r,s,{params:h,headers:u,context:g,reportProgress:l,responseType:i,withCredentials:a,transferCache:o})}},ds=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ds||{}),Ga=class{constructor(e,t=ud.Ok,r="OK"){this.headers=e.headers||new Xi,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},ug=class n extends Ga{constructor(e={}){super(e),this.type=ds.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},cd=class n extends Ga{constructor(e={}){super(e),this.type=ds.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ld=class extends Ga{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},ud=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(ud||{});function ag(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Rr=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Ha)o=t;else{let l;i.headers instanceof Xi?l=i.headers:l=new Xi(i.headers);let u;i.params&&(i.params instanceof oi?u=i.params:u=new oi({fromObject:i.params})),o=new Ha(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=Z(o).pipe(pr(l=>this.handler.handle(l)));if(t instanceof Ha||i.observe==="events")return s;let a=s.pipe(Gt(l=>l instanceof cd));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ge(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(ge(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(ge(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(ge(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new oi().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,ag(i,r))}post(t,r,i={}){return this.request("POST",t,ag(i,r))}put(t,r,i={}){return this.request("PUT",t,ag(i,r))}static{this.\u0275fac=function(r){return new(r||n)(F(za))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function $O(n,e){return e(n)}function qO(n,e,t){return(r,i)=>kn(t,()=>e(r,o=>n(o,i)))}var nC=new X(""),HO=new X(""),zO=new X("");var eC=(()=>{class n extends za{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=$(as);let i=$(zO,{optional:!0});this.backend=i??t}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(nC),...this.injector.get(HO,[])]));this.chain=i.reduceRight((o,s)=>qO(o,s,this.injector),$O)}let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Li(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(F(ad),F(Tt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();var GO=/^\)\]\}',?\n/;function WO(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var tC=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new J(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?ke(r.\u0275loadImpl()):Z(null)).pipe(mt(()=>new Ie(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((N,O)=>s.setRequestHeader(N,O.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let N=t.detectContentTypeHeader();N!==null&&s.setRequestHeader("Content-Type",N)}if(t.responseType){let N=t.responseType.toLowerCase();s.responseType=N!=="json"?N:"text"}let a=t.serializeBody(),l=null,u=()=>{if(l!==null)return l;let N=s.statusText||"OK",O=new Xi(s.getAllResponseHeaders()),H=WO(s)||t.url;return l=new ug({headers:O,status:s.status,statusText:N,url:H}),l},h=()=>{let{headers:N,status:O,statusText:H,url:oe}=u(),W=null;O!==ud.NoContent&&(W=typeof s.response>"u"?s.responseText:s.response),O===0&&(O=W?ud.Ok:0);let _e=O>=200&&O<300;if(t.responseType==="json"&&typeof W=="string"){let ze=W;W=W.replace(GO,"");try{W=W!==""?JSON.parse(W):null}catch(ue){W=ze,_e&&(_e=!1,W={error:ue,text:W})}}_e?(o.next(new cd({body:W,headers:N,status:O,statusText:H,url:oe||void 0})),o.complete()):o.error(new ld({error:W,headers:N,status:O,statusText:H,url:oe||void 0}))},g=N=>{let{url:O}=u(),H=new ld({error:N,status:s.status||0,statusText:s.statusText||"Unknown Error",url:O||void 0});o.error(H)},_=!1,I=N=>{_||(o.next(u()),_=!0);let O={type:ds.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(O.total=N.total),t.responseType==="text"&&s.responseText&&(O.partialText=s.responseText),o.next(O)},R=N=>{let O={type:ds.UploadProgress,loaded:N.loaded};N.lengthComputable&&(O.total=N.total),o.next(O)};return s.addEventListener("load",h),s.addEventListener("error",g),s.addEventListener("timeout",g),s.addEventListener("abort",g),t.reportProgress&&(s.addEventListener("progress",I),a!==null&&s.upload&&s.upload.addEventListener("progress",R)),s.send(a),o.next({type:ds.Sent}),()=>{s.removeEventListener("error",g),s.removeEventListener("abort",g),s.removeEventListener("load",h),s.removeEventListener("timeout",g),t.reportProgress&&(s.removeEventListener("progress",I),a!==null&&s.upload&&s.upload.removeEventListener("progress",R)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(F(ls))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),rC=new X(""),KO="XSRF-TOKEN",QO=new X("",{providedIn:"root",factory:()=>KO}),YO="X-XSRF-TOKEN",JO=new X("",{providedIn:"root",factory:()=>YO}),dd=class{},XO=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=id(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(F(At),F(_n),F(QO))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function ZO(n,e){let t=n.url.toLowerCase();if(!$(rC)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=$(dd).getToken(),i=$(JO);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function iC(...n){let e=[Rr,tC,eC,{provide:za,useExisting:eC},{provide:ad,useExisting:tC},{provide:nC,useValue:ZO,multi:!0},{provide:rC,useValue:!0},{provide:dd,useClass:XO}];for(let t of n)e.push(...t.\u0275providers);return rs(e)}var fg=class extends rd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},pg=class n extends fg{static makeCurrent(){HE(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=ek();return t==null?null:tk(t)}resetBaseElement(){Wa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return id(document.cookie,e)}},Wa=null;function ek(){return Wa=Wa||document.querySelector("base"),Wa?Wa.getAttribute("href"):null}function tk(n){return new URL(n,document.baseURI).pathname}var nk=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),mg=new X(""),cC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new J(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(F(mg),F(Ne))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),fd=class{constructor(e){this._doc=e}},dg="ng-app-id",lC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=od(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${dg}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(dg),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(dg,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(F(At),F(Am),F(Mm,8),F(_n))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),hg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yg=/%COMP%/g,uC="%COMP%",rk=`_nghost-${uC}`,ik=`_ngcontent-${uC}`,ok=!0,sk=new X("",{providedIn:"root",factory:()=>ok});function ak(n){return ik.replace(yg,n)}function ck(n){return rk.replace(yg,n)}function dC(n,e){return e.map(t=>t.replace(yg,n))}var oC=(()=>{class n{constructor(t,r,i,o,s,a,l,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=od(a),this.defaultRenderer=new Ka(t,s,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Gn.ShadowDom&&(r=pe(V({},r),{encapsulation:Gn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof pd?i.applyToHost(t):i instanceof Qa&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Gn.Emulated:o=new pd(l,u,r,this.appId,h,s,a,g);break;case Gn.ShadowDom:return new gg(l,u,t,r,s,a,this.nonce,g);default:o=new Qa(l,u,r,h,s,a,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(F(cC),F(lC),F(Am),F(sk),F(At),F(_n),F(Ne),F(Mm))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Ka=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(hg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(sC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(sC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new J(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=hg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=hg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(gr.DashCase|gr.Important)?e.style.setProperty(t,r,i&gr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&gr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=xr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function sC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var gg=class extends Ka{constructor(e,t,r,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=dC(i.id,i.styles);for(let h of u){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Qa=class extends Ka{constructor(e,t,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?dC(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},pd=class extends Qa{constructor(e,t,r,i,o,s,a,l){let u=i+"-"+r.id;super(e,t,r,o,s,a,l,u),this.contentAttr=ak(u),this.hostAttr=ck(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},lk=(()=>{class n extends fd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(F(At))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),aC=["alt","control","meta","shift"],uk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},hk=(()=>{class n extends fd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xr().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),aC.forEach(u=>{let h=r.indexOf(u);h>-1&&(r.splice(h,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=uk[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),aC.forEach(s=>{if(s!==i){let a=dk[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(F(At))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function hC(n,e){return LE(V({rootComponent:n},fk(e)))}function fk(n){return{appProviders:[...vk,...n?.providers??[]],platformProviders:yk}}function pk(){pg.makeCurrent()}function mk(){return new Qn}function gk(){return jb(document),document}var yk=[{provide:_n,useValue:sg},{provide:Rm,useValue:pk,multi:!0},{provide:At,useFactory:gk,deps:[]}];var vk=[{provide:Ou,useValue:"root"},{provide:Qn,useFactory:mk,deps:[]},{provide:mg,useClass:lk,multi:!0,deps:[At,Ne,_n]},{provide:mg,useClass:hk,multi:!0,deps:[At]},oC,lC,cC,{provide:Na,useExisting:oC},{provide:ls,useClass:nk,deps:[]},[]];var fC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(F(At))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ve="primary",dc=Symbol("RouteTitle"),bg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function gs(n){return new bg(n)}function wk(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ik(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Jn(n[t],e[t]))return!1;return!0}function Jn(n,e){let t=n?Eg(n):void 0,r=e?Eg(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!bC(n[i],e[i]))return!1;return!0}function Eg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function bC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function EC(n){return n.length>0?n[n.length-1]:null}function li(n){return Zf(n)?n:Yi(n)?ke(Promise.resolve(n)):Z(n)}var bk={exact:DC,subset:SC},CC={exact:Ek,subset:Ck,ignored:()=>!0};function pC(n,e,t){return bk[t.paths](n.root,e.root,t.matrixParams)&&CC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Ek(n,e){return Jn(n,e)}function DC(n,e,t){if(!eo(n.segments,e.segments)||!yd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!DC(n.children[r],e.children[r],t))return!1;return!0}function Ck(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>bC(n[t],e[t]))}function SC(n,e,t){return TC(n,e,e.segments,t)}function TC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!eo(i,t)||e.hasChildren()||!yd(i,t,r))}else if(n.segments.length===t.length){if(!eo(n.segments,t)||!yd(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!SC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!eo(n.segments,i)||!yd(n.segments,i,r)||!n.children[ve]?!1:TC(n.children[ve],e,o,r)}}function yd(n,e,t){return e.every((r,i)=>CC[t](n[i].parameters,r.parameters))}var si=class{constructor(e=new Oe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=gs(this.queryParams),this._queryParamMap}toString(){return Tk.serialize(this)}},Oe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vd(this)}},Zi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=gs(this.parameters),this._parameterMap}toString(){return AC(this)}};function Dk(n,e){return eo(n,e)&&n.every((t,r)=>Jn(t.parameters,e[r].parameters))}function eo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Sk(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ve&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ve&&(t=t.concat(e(i,r)))}),t}var hc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new nc,providedIn:"root"})}}return n})(),nc=class{parse(e){let t=new Dg(e);return new si(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ya(e.root,!0)}`,r=Rk(e.queryParams),i=typeof e.fragment=="string"?`#${xk(e.fragment)}`:"";return`${t}${r}${i}`}},Tk=new nc;function vd(n){return n.segments.map(e=>AC(e)).join("/")}function Ya(n,e){if(!n.hasChildren())return vd(n);if(e){let t=n.children[ve]?Ya(n.children[ve],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ve&&r.push(`${i}:${Ya(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Sk(n,(r,i)=>i===ve?[Ya(n.children[ve],!1)]:[`${i}:${Ya(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ve]!=null?`${vd(n)}/${t[0]}`:`${vd(n)}/(${t.join("//")})`}}function xC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function md(n){return xC(n).replace(/%3B/gi,";")}function xk(n){return encodeURI(n)}function Cg(n){return xC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _d(n){return decodeURIComponent(n)}function mC(n){return _d(n.replace(/\+/g,"%20"))}function AC(n){return`${Cg(n.path)}${Ak(n.parameters)}`}function Ak(n){return Object.entries(n).map(([e,t])=>`;${Cg(e)}=${Cg(t)}`).join("")}function Rk(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${md(t)}=${md(i)}`).join("&"):`${md(t)}=${md(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Mk=/^[^\/()?;#]+/;function vg(n){let e=n.match(Mk);return e?e[0]:""}var Pk=/^[^\/()?;=#]+/;function Nk(n){let e=n.match(Pk);return e?e[0]:""}var Ok=/^[^=?&#]+/;function kk(n){let e=n.match(Ok);return e?e[0]:""}var Fk=/^[^&#]+/;function Lk(n){let e=n.match(Fk);return e?e[0]:""}var Dg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Oe([],{}):new Oe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ve]=new Oe(e,t)),r}parseSegment(){let e=vg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new J(4009,!1);return this.capture(e),new Zi(_d(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Nk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=vg(this.remaining);i&&(r=i,this.capture(r))}e[_d(t)]=_d(r)}parseQueryParam(e){let t=kk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Lk(this.remaining);s&&(r=s,this.capture(r))}let i=mC(t),o=mC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=vg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new J(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ve);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ve]:new Oe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new J(4011,!1)}};function RC(n){return n.segments.length>0?new Oe([],{[ve]:n}):n}function MC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=MC(i);if(r===ve&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Oe(n.segments,e);return Vk(t)}function Vk(n){if(n.numberOfChildren===1&&n.children[ve]){let e=n.children[ve];return new Oe(n.segments.concat(e.segments),e.children)}return n}function ys(n){return n instanceof si}function jk(n,e,t=null,r=null){let i=PC(n);return NC(i,e,t,r)}function PC(n){let e;function t(o){let s={};for(let l of o.children){let u=t(l);s[l.outlet]=u}let a=new Oe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=RC(r);return e??i}function NC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return _g(i,i,i,t,r);let o=Uk(e);if(o.toRoot())return _g(i,i,new Oe([],{}),t,r);let s=Bk(o,i,n),a=s.processChildren?Za(s.segmentGroup,s.index,o.commands):kC(s.segmentGroup,s.index,o.commands);return _g(i,s.segmentGroup,a,t,r)}function wd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function rc(n){return typeof n=="object"&&n!=null&&n.outlets}function _g(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let s;n===e?s=t:s=OC(n,e,t);let a=RC(MC(s));return new si(a,o,i)}function OC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=OC(o,e,t)}),new Oe(n.segments,r)}var Id=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&wd(r[0]))throw new J(4003,!1);let i=r.find(rc);if(i&&i!==EC(r))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Uk(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Id(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Id(t,e,r)}var ps=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Bk(n,e,t){if(n.isAbsolute)return new ps(e,!0,0);if(!t)return new ps(e,!1,NaN);if(t.parent===null)return new ps(t,!0,0);let r=wd(n.commands[0])?0:1,i=t.segments.length-1+r;return $k(t,i,n.numberOfDoubleDots)}function $k(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new J(4005,!1);i=r.segments.length}return new ps(r,!1,i-o)}function qk(n){return rc(n[0])?n[0].outlets:{[ve]:n}}function kC(n,e,t){if(n??=new Oe([],{}),n.segments.length===0&&n.hasChildren())return Za(n,e,t);let r=Hk(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Oe(n.segments.slice(0,r.pathIndex),{});return o.children[ve]=new Oe(n.segments.slice(r.pathIndex),n.children),Za(o,0,i)}else return r.match&&i.length===0?new Oe(n.segments,{}):r.match&&!n.hasChildren()?Sg(n,e,t):r.match?Za(n,0,i):Sg(n,e,t)}function Za(n,e,t){if(t.length===0)return new Oe(n.segments,{});{let r=qk(t),i={};if(Object.keys(r).some(o=>o!==ve)&&n.children[ve]&&n.numberOfChildren===1&&n.children[ve].segments.length===0){let o=Za(n.children[ve],e,t);return new Oe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=kC(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Oe(n.segments,i)}}function Hk(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(rc(a))break;let l=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!yC(l,u,s))return o;r+=2}else{if(!yC(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Sg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(rc(o)){let l=zk(o.outlets);return new Oe(r,l)}if(i===0&&wd(t[0])){let l=n.segments[e];r.push(new Zi(l.path,gC(t[0]))),i++;continue}let s=rc(o)?o.outlets[ve]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&wd(a)?(r.push(new Zi(s,gC(a))),i+=2):(r.push(new Zi(s,{})),i++)}return new Oe(r,{})}function zk(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Sg(new Oe([],{}),0,r))}),e}function gC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function yC(n,e,t){return n==t.path&&Jn(e,t.parameters)}var ec="imperative",dt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(dt||{}),bn=class{constructor(e,t){this.id=e,this.url=t}},vs=class extends bn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=dt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Xn=class extends bn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=dt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},cn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(cn||{}),bd=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(bd||{}),ai=class extends bn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=dt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ci=class extends bn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=dt.NavigationSkipped}},ic=class extends bn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=dt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ed=class extends bn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tg=class extends bn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xg=class extends bn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=dt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ag=class extends bn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rg=class extends bn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mg=class{constructor(e){this.route=e,this.type=dt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Pg=class{constructor(e){this.route=e,this.type=dt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ng=class{constructor(e){this.snapshot=e,this.type=dt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Og=class{constructor(e){this.snapshot=e,this.type=dt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kg=class{constructor(e){this.snapshot=e,this.type=dt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fg=class{constructor(e){this.snapshot=e,this.type=dt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cd=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=dt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},oc=class{},sc=class{constructor(e){this.url=e}};var Lg=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new fc,this.attachRef=null}},fc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Lg,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Vg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Vg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=jg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return jg(e,this._root).map(t=>t.value)}};function Vg(n,e){if(n===e.value)return e;for(let t of e.children){let r=Vg(n,t);if(r)return r}return null}function jg(n,e){if(n===e.value)return[e];for(let t of e.children){let r=jg(n,t);if(r.length)return r.unshift(e),r}return[]}var an=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function fs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Sd=class extends Dd{constructor(e,t){super(e),this.snapshot=t,Qg(this,e)}toString(){return this.snapshot.toString()}};function FC(n){let e=Gk(n),t=new lt([new Zi("",{})]),r=new lt({}),i=new lt({}),o=new lt({}),s=new lt(""),a=new ot(t,r,o,s,i,ve,n,e.root);return a.snapshot=e.root,new Sd(new an(a,[]),e)}function Gk(n){let e={},t={},r={},i="",o=new ac([],e,r,i,t,ve,n,null,{});return new Td("",new an(o,[]))}var ot=class{constructor(e,t,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ge(u=>u[dc]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ge(e=>gs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ge(e=>gs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Kg(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&VC(i)&&(r.resolve[dc]=i.title),r}var ac=class{get title(){return this.data?.[dc]}constructor(e,t,r,i,o,s,a,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=gs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=gs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Td=class extends Dd{constructor(e,t){super(t),this.url=e,Qg(this,t)}toString(){return LC(this._root)}};function Qg(n,e){e.value._routerState=n,e.children.forEach(t=>Qg(n,t))}function LC(n){let e=n.children.length>0?` { ${n.children.map(LC).join(", ")} } `:"";return`${n.value}${e}`}function wg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Jn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Jn(e.params,t.params)||n.paramsSubject.next(t.params),Ik(e.url,t.url)||n.urlSubject.next(t.url),Jn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ug(n,e){let t=Jn(n.params,e.params)&&Dk(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Ug(n.parent,e.parent))}function VC(n){return typeof n.title=="string"||n.title===null}var pc=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ve,this.activateEvents=new it,this.deactivateEvents=new it,this.attachEvents=new it,this.detachEvents=new it,this.parentContexts=$(fc),this.location=$(ss),this.changeDetector=$(Ji),this.environmentInjector=$(Tt),this.inputBinder=$(Md,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new J(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Bg(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ke({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ei]})}}return n})(),Bg=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ot?this.route:e===fc?this.childContexts:this.parent.get(e,t)}},Md=new X(""),vC=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ea([r.queryParams,r.params,r.data]).pipe(mt(([o,s,a],l)=>(a=V(V(V({},o),s),a),l===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=VE(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function Wk(n,e,t){let r=cc(n,e._root,t?t._root:void 0);return new Sd(r,e)}function cc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Kk(n,e,t);return new an(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>cc(n,a)),s}}let r=Qk(e.value),i=e.children.map(o=>cc(n,o));return new an(r,i)}}function Kk(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return cc(n,r,i);return cc(n,r)})}function Qk(n){return new ot(new lt(n.url),new lt(n.params),new lt(n.queryParams),new lt(n.fragment),new lt(n.data),n.outlet,n.component,n)}var jC="ngNavigationCancelingError";function UC(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ys(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=BC(!1,cn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function BC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[jC]=!0,t.cancellationCode=e,t}function Yk(n){return $C(n)&&ys(n.url)}function $C(n){return!!n&&n[jC]}var Jk=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ne({type:n,selectors:[["ng-component"]],standalone:!0,features:[re],decls:1,vars:0,template:function(r,i){r&1&&he(0,"router-outlet")},dependencies:[pc],encapsulation:2})}}return n})();function Xk(n,e){return n.providers&&!n._injector&&(n._injector=Zu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Yg(n){let e=n.children&&n.children.map(Yg),t=e?pe(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ve&&(t.component=Jk),t}function Zn(n){return n.outlet||ve}function Zk(n,e){let t=n.filter(r=>Zn(r)===e);return t.push(...n.filter(r=>Zn(r)!==e)),t}function mc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var eF=(n,e,t,r)=>ge(i=>(new $g(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),$g=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=fs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=fs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=fs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=fs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Fg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Og(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(wg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),wg(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=mc(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},xd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ms=class{constructor(e,t){this.component=e,this.route=t}};function tF(n,e,t){let r=n._root,i=e?e._root:null;return Ja(r,i,t,[r.value])}function nF(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ws(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!xI(n)?n:e.get(n):r}function Ja(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=fs(e);return n.children.forEach(s=>{rF(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>tc(a,t.getContext(s),i)),i}function rF(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=iF(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new xd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ja(n,e,a?a.children:null,r,i):Ja(n,e,t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ms(a.outlet.component,s))}else s&&tc(e,a,i),i.canActivateChecks.push(new xd(r)),o.component?Ja(n,null,a?a.children:null,r,i):Ja(n,null,t,r,i);return i}function iF(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!eo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!eo(n.url,e.url)||!Jn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ug(n,e)||!Jn(n.queryParams,e.queryParams);case"paramsChange":default:return!Ug(n,e)}}function tc(n,e,t){let r=fs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?tc(s,e.children.getContext(o),t):tc(s,null,t):tc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ms(e.outlet.component,i)):t.canDeactivateChecks.push(new ms(null,i)):t.canDeactivateChecks.push(new ms(null,i))}function gc(n){return typeof n=="function"}function oF(n){return typeof n=="boolean"}function sF(n){return n&&gc(n.canLoad)}function aF(n){return n&&gc(n.canActivate)}function cF(n){return n&&gc(n.canActivateChild)}function lF(n){return n&&gc(n.canDeactivate)}function uF(n){return n&&gc(n.canMatch)}function qC(n){return n instanceof fr||n?.name==="EmptyError"}var gd=Symbol("INITIAL_VALUE");function _s(){return mt(n=>Ea(n.map(e=>e.pipe(mr(1),ip(gd)))).pipe(ge(e=>{for(let t of e)if(t!==!0){if(t===gd)return gd;if(t===!1||t instanceof si)return t}return!0}),Gt(e=>e!==gd),mr(1)))}function dF(n,e){return nt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(pe(V({},t),{guardsResult:!0})):hF(s,r,i,n).pipe(nt(a=>a&&oF(a)?fF(r,o,n,e):Z(a)),ge(a=>pe(V({},t),{guardsResult:a})))})}function hF(n,e,t,r){return ke(n).pipe(nt(i=>vF(i.component,i.route,t,e,r)),qn(i=>i!==!0,!0))}function fF(n,e,t,r){return ke(e).pipe(pr(i=>jo(mF(i.route.parent,r),pF(i.route,r),yF(n,i.path,t),gF(n,i.route,t))),qn(i=>i!==!0,!0))}function pF(n,e){return n!==null&&e&&e(new kg(n)),Z(!0)}function mF(n,e){return n!==null&&e&&e(new Ng(n)),Z(!0)}function gF(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>Xl(()=>{let s=mc(e)??t,a=ws(o,s),l=aF(a)?a.canActivate(e,n):kn(s,()=>a(e,n));return li(l).pipe(qn())}));return Z(i).pipe(_s())}function yF(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>nF(s)).filter(s=>s!==null).map(s=>Xl(()=>{let a=s.guards.map(l=>{let u=mc(s.node)??t,h=ws(l,u),g=cF(h)?h.canActivateChild(r,n):kn(u,()=>h(r,n));return li(g).pipe(qn())});return Z(a).pipe(_s())}));return Z(o).pipe(_s())}function vF(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let l=mc(e)??i,u=ws(a,l),h=lF(u)?u.canDeactivate(n,e,t,r):kn(l,()=>u(n,e,t,r));return li(h).pipe(qn())});return Z(s).pipe(_s())}function _F(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=ws(s,n),l=sF(a)?a.canLoad(e,t):kn(n,()=>a(e,t));return li(l)});return Z(o).pipe(_s(),HC(r))}function HC(n){return zf(rt(e=>{if(ys(e))throw UC(n,e)}),ge(e=>e===!0))}function wF(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=ws(s,n),l=uF(a)?a.canMatch(e,t):kn(n,()=>a(e,t));return li(l)});return Z(o).pipe(_s(),HC(r))}var lc=class{constructor(e){this.segmentGroup=e||null}},Ad=class extends Error{constructor(e){super(),this.urlTree=e}};function hs(n){return $n(new lc(n))}function IF(n){return $n(new J(4e3,!1))}function bF(n){return $n(BC(!1,cn.GuardRejected))}var qg=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[ve])return IF(e.redirectTo);i=i.children[ve]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new Ad(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new si(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new Oe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new J(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Hg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function EF(n,e,t,r,i){let o=Jg(n,e,t);return o.matched?(r=Xk(e,r),wF(r,e,t,i).pipe(ge(s=>s===!0?o:V({},Hg)))):Z(o)}function Jg(n,e,t){if(e.path==="**")return CF(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},Hg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||wk)(t,n,e);if(!i)return V({},Hg);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function CF(n){return{matched:!0,parameters:n.length>0?EC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function _C(n,e,t,r){return t.length>0&&TF(n,t,r)?{segmentGroup:new Oe(e,SF(r,new Oe(t,n.children))),slicedSegments:[]}:t.length===0&&xF(n,t,r)?{segmentGroup:new Oe(n.segments,DF(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Oe(n.segments,n.children),slicedSegments:t}}function DF(n,e,t,r){let i={};for(let o of t)if(Pd(n,e,o)&&!r[Zn(o)]){let s=new Oe([],{});i[Zn(o)]=s}return V(V({},r),i)}function SF(n,e){let t={};t[ve]=e;for(let r of n)if(r.path===""&&Zn(r)!==ve){let i=new Oe([],{});t[Zn(r)]=i}return t}function TF(n,e,t){return t.some(r=>Pd(n,e,r)&&Zn(r)!==ve)}function xF(n,e,t){return t.some(r=>Pd(n,e,r))}function Pd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function AF(n,e,t,r){return Zn(n)!==r&&(r===ve||!Pd(e,t,n))?!1:Jg(e,n,t).matched}function RF(n,e,t){return e.length===0&&!n.children[t]}var zg=class{};function MF(n,e,t,r,i,o,s="emptyOnly"){return new Gg(n,e,t,r,i,s,o).recognize()}var PF=31,Gg=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new qg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new J(4002,`'${e.segmentGroup}'`)}recognize(){let e=_C(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ge(t=>{let r=new ac([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,{},ve,this.rootComponentType,null,{}),i=new an(r,t),o=new Td("",i),s=jk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ve).pipe(fn(r=>{if(r instanceof Ad)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof lc?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=Kg(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(ge(o=>o instanceof an?[o]:[]))}processChildren(e,t,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ke(i).pipe(pr(o=>{let s=r.children[o],a=Zk(t,o);return this.processSegmentGroup(e,a,s,o)}),rp((o,s)=>(o.push(...s),o)),Wr(null),np(),nt(o=>{if(o===null)return hs(r);let s=zC(o);return NF(s),Z(s)}))}processSegment(e,t,r,i,o,s){return ke(t).pipe(pr(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,o,s).pipe(fn(l=>{if(l instanceof lc)return Z(null);throw l}))),qn(a=>!!a),fn(a=>{if(qC(a))return RF(r,i,o)?Z(new zg):hs(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,o,s,a){return AF(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s):hs(i):hs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){let{matched:a,consumedSegments:l,positionalParamSegments:u,remainingSegments:h}=Jg(t,i,o);if(!a)return hs(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>PF&&(this.allowRedirects=!1));let g=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,g).pipe(nt(_=>this.processSegment(e,r,t,_.concat(h),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){let s=EF(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),s.pipe(mt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(mt(({routes:l})=>{let u=r._loadedInjector??e,{consumedSegments:h,remainingSegments:g,parameters:_}=a,I=new ac(h,_,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,kF(r),Zn(r),r.component??r._loadedComponent??null,r,FF(r)),{segmentGroup:R,slicedSegments:N}=_C(t,h,g,l);if(N.length===0&&R.hasChildren())return this.processChildren(u,l,R).pipe(ge(H=>H===null?null:new an(I,H)));if(l.length===0&&N.length===0)return Z(new an(I,[]));let O=Zn(r)===o;return this.processSegment(u,l,R,N,O?ve:o,!0).pipe(ge(H=>new an(I,H instanceof an?[H]:[])))}))):hs(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):_F(e,t,r,this.urlSerializer).pipe(nt(i=>i?this.configLoader.loadChildren(e,t).pipe(rt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):bF(t))):Z({routes:[],injector:e})}};function NF(n){n.sort((e,t)=>e.value.outlet===ve?-1:t.value.outlet===ve?1:e.value.outlet.localeCompare(t.value.outlet))}function OF(n){let e=n.value.routeConfig;return e&&e.path===""}function zC(n){let e=[],t=new Set;for(let r of n){if(!OF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=zC(r.children);e.push(new an(r.value,i))}return e.filter(r=>!t.has(r))}function kF(n){return n.data||{}}function FF(n){return n.resolve||{}}function LF(n,e,t,r,i,o){return nt(s=>MF(n,e,t,r,s.extractedUrl,i,o).pipe(ge(({state:a,tree:l})=>pe(V({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function VF(n,e){return nt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of GC(l))s.add(u);let a=0;return ke(s).pipe(pr(l=>o.has(l)?jF(l,r,n,e):(l.data=Kg(l,l.parent,n).resolve,Z(void 0))),rt(()=>a++),Uo(1),nt(l=>a===s.size?Z(t):Zt))})}function GC(n){let e=n.children.map(t=>GC(t)).flat();return[n,...e]}function jF(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!VC(i)&&(o[dc]=i.title),UF(o,n,e,r).pipe(ge(s=>(n._resolvedData=s,n.data=Kg(n,n.parent,t).resolve,null)))}function UF(n,e,t,r){let i=Eg(n);if(i.length===0)return Z({});let o={};return ke(i).pipe(nt(s=>BF(n[s],e,t,r).pipe(qn(),rt(a=>{o[s]=a}))),Uo(1),tp(o),fn(s=>qC(s)?Zt:$n(s)))}function BF(n,e,t,r){let i=mc(e)??r,o=ws(n,i),s=o.resolve?o.resolve(e,t):kn(i,()=>o(e,t));return li(s)}function Ig(n){return mt(e=>{let t=n(e);return t?ke(t).pipe(ge(()=>e)):Z(e)})}var WC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ve);return r}getResolvedTitleForRoute(t){return t.data[dc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>$($F),providedIn:"root"})}}return n})(),$F=(()=>{class n extends WC{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(F(fC))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yc=new X("",{providedIn:"root",factory:()=>({})}),uc=new X(""),Xg=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=$(nd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=li(t.loadComponent()).pipe(ge(KC),rt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Li(()=>{this.componentLoaders.delete(t)})),i=new No(r,()=>new Ct).pipe(Po());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=qF(r,this.compiler,t,this.onLoadEndListener).pipe(Li(()=>{this.childrenLoaders.delete(r)})),s=new No(o,()=>new Ct).pipe(Po());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function qF(n,e,t,r){return li(n.loadChildren()).pipe(ge(KC),nt(i=>i instanceof Oa||Array.isArray(i)?Z(i):ke(e.compileModuleAsync(i))),ge(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(uc,[],{optional:!0,self:!0}).flat()),{routes:s.map(Yg),injector:o}}))}function HF(n){return n&&typeof n=="object"&&"default"in n}function KC(n){return HF(n)?n.default:n}var Zg=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>$(zF),providedIn:"root"})}}return n})(),zF=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),QC=new X(""),YC=new X("");function GF(n,e,t){let r=n.get(YC),i=n.get(At);return n.get(Ne).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),WF(n))),{onViewTransitionCreated:l}=r;return l&&kn(n,()=>l({transition:a,from:e,to:t})),s})}function WF(n){return new Promise(e=>{Xu(e,{injector:n})})}var ey=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ct,this.transitionAbortSubject=new Ct,this.configLoader=$(Xg),this.environmentInjector=$(Tt),this.urlSerializer=$(hc),this.rootContexts=$(fc),this.location=$(us),this.inputBindingEnabled=$(Md,{optional:!0})!==null,this.titleStrategy=$(WC),this.options=$(yc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=$(Zg),this.createViewTransition=$(QC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Mg(i)),r=i=>this.events.next(new Pg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(pe(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new lt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ec,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Gt(o=>o.id!==0),ge(o=>pe(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),mt(o=>{let s=!1,a=!1;return Z(o).pipe(mt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",cn.SupersededByNewNavigation),Zt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?pe(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&h!=="reload"){let g="";return this.events.next(new ci(l.id,this.urlSerializer.serialize(l.rawUrl),g,bd.IgnoredSameUrlNavigation)),l.resolve(null),Zt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Z(l).pipe(mt(g=>{let _=this.transitions?.getValue();return this.events.next(new vs(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),_!==this.transitions?.getValue()?Zt:Promise.resolve(g)}),LF(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),rt(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=pe(V({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let _=new Ed(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:_,source:I,restoredState:R,extras:N}=l,O=new vs(g,this.urlSerializer.serialize(_),I,R);this.events.next(O);let H=FC(this.rootComponentType).snapshot;return this.currentTransition=o=pe(V({},l),{targetSnapshot:H,urlAfterRedirects:_,extras:pe(V({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,Z(o)}else{let g="";return this.events.next(new ci(l.id,this.urlSerializer.serialize(l.extractedUrl),g,bd.IgnoredByUrlHandlingStrategy)),l.resolve(null),Zt}}),rt(l=>{let u=new Tg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ge(l=>(this.currentTransition=o=pe(V({},l),{guards:tF(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),dF(this.environmentInjector,l=>this.events.next(l)),rt(l=>{if(o.guardsResult=l.guardsResult,ys(l.guardsResult))throw UC(this.urlSerializer,l.guardsResult);let u=new xg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Gt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",cn.GuardRejected),!1)),Ig(l=>{if(l.guards.canActivateChecks.length)return Z(l).pipe(rt(u=>{let h=new Ag(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),mt(u=>{let h=!1;return Z(u).pipe(VF(this.paramsInheritanceStrategy,this.environmentInjector),rt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",cn.NoDataFromResolver)}}))}),rt(u=>{let h=new Rg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),Ig(l=>{let u=h=>{let g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(rt(_=>{h.component=_}),ge(()=>{})));for(let _ of h.children)g.push(...u(_));return g};return Ea(u(l.targetSnapshot.root)).pipe(Wr(null),mr(1))}),Ig(()=>this.afterPreactivation()),mt(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,h=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return h?ke(h).pipe(ge(()=>o)):Z(o)}),ge(l=>{let u=Wk(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=pe(V({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),rt(()=>{this.events.next(new oc)}),eF(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),mr(1),rt({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Xn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),op(this.transitionAbortSubject.pipe(rt(l=>{throw l}))),Li(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",cn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),fn(l=>{if(a=!0,$C(l))this.events.next(new ai(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),Yk(l)?this.events.next(new sc(l.url)):o.resolve(!1);else{this.events.next(new ic(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Zt}))}))}cancelNavigationTransition(t,r,i){let o=new ai(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function KF(n){return n!==ec}var QF=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>$(YF),providedIn:"root"})}}return n})(),Wg=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},YF=(()=>{class n extends Wg{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vn(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),JC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>$(JF),providedIn:"root"})}}return n})(),JF=(()=>{class n extends JC{constructor(){super(...arguments),this.location=$(us),this.urlSerializer=$(hc),this.options=$(yc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=$(Zg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new si,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=FC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof vs)this.stateMemento=this.createStateMemento();else if(t instanceof ci)this.rawUrlTree=r.initialUrl;else if(t instanceof Ed){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof oc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof ai&&(t.code===cn.GuardRejected||t.code===cn.NoDataFromResolver)?this.restoreHistory(r):t instanceof ic?this.restoreHistory(r,!0):t instanceof Xn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vn(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Xa=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Xa||{});function XC(n,e){n.events.pipe(Gt(t=>t instanceof Xn||t instanceof ai||t instanceof ic||t instanceof ci),ge(t=>t instanceof Xn||t instanceof ci?Xa.COMPLETE:(t instanceof ai?t.code===cn.Redirect||t.code===cn.SupersededByNewNavigation:!1)?Xa.REDIRECTING:Xa.FAILED),Gt(t=>t!==Xa.REDIRECTING),mr(1)).subscribe(()=>{e()})}function XF(n){throw n}var ZF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$e=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=$(ed),this.stateManager=$(JC),this.options=$(yc,{optional:!0})||{},this.pendingTasks=$(as),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=$(ey),this.urlSerializer=$(hc),this.location=$(us),this.urlHandlingStrategy=$(Zg),this._events=new Ct,this.errorHandler=this.options.errorHandler||XF,this.navigated=!1,this.routeReuseStrategy=$(QF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=$(uc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!$(Md,{optional:!0}),this.eventsSubscription=new et,this.isNgZoneEnabled=$(Ne)instanceof Ne&&Ne.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ai&&r.code!==cn.Redirect&&r.code!==cn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Xn)this.navigated=!0;else if(r instanceof sc){let s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||KF(i.source)};this.scheduleNavigation(s,ec,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}nL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ec,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=V({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Yg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:s,h=null;switch(a){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let g;try{let _=i?i.snapshot:this.routerState.snapshot.root;g=PC(_)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),g=this.currentUrlTree.root}return NC(g,t,h,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ys(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ec,null,r)}navigate(t,r={skipLocationChange:!1}){return tL(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},ZF):r===!1?i=V({},eL):i=r,ys(t))return pC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return pC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((g,_)=>{a=g,l=_});let h=this.pendingTasks.add();return XC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(g=>Promise.reject(g))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tL(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new J(4008,!1)}function nL(n){return!(n instanceof oc)&&!(n instanceof sc)}var Rt=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new Ct,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Xn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t!=null?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:$b(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(U($e),U(ot),Tm("tabindex"),U(Ir),U(Yn),U(Ar))}}static{this.\u0275dir=Ke({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&te("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&ri("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[St.HasDecoratorInputTransform,"preserveFragment","preserveFragment",ii],skipLocationChange:[St.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",ii],replaceUrl:[St.HasDecoratorInputTransform,"replaceUrl","replaceUrl",ii],routerLink:"routerLink"},standalone:!0,features:[Wm,ei]})}}return n})();var Rd=class{};var rL=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Gt(t=>t instanceof Xn),pr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Zu(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ke(i).pipe(Vo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe(nt(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ke([o,s]).pipe(Vo())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(F($e),F(nd),F(Tt),F(Rd),F(Xg))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ZC=new X(""),iL=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=$(Tt),s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof vs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Xn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ci&&t.code===bd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Cd&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>b(this,null,function*(){yield new Promise(i=>{setTimeout(()=>{i()}),Xu(()=>{i()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Cd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){eE()}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function eD(n,...e){return rs([{provide:uc,multi:!0,useValue:n},[],{provide:ot,useFactory:tD,deps:[$e]},{provide:qa,multi:!0,useFactory:nD},e.map(t=>t.\u0275providers)])}function tD(n){return n.routerState.root}function vc(n,e){return{\u0275kind:n,\u0275providers:e}}function nD(){let n=$(on);return e=>{let t=n.get(cs);if(e!==t.components[0])return;let r=n.get($e),i=n.get(rD);n.get(ty)===1&&r.initialNavigation(),n.get(iD,null,Ee.Optional)?.setUpPreloading(),n.get(ZC,null,Ee.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var rD=new X("",{factory:()=>new Ct}),ty=new X("",{providedIn:"root",factory:()=>1});function oL(){return vc(2,[{provide:ty,useValue:0},{provide:td,multi:!0,deps:[on],useFactory:e=>{let t=e.get(zE,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get($e),o=e.get(rD);XC(i,()=>{r(!0)}),e.get(ey).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))}}])}function sL(){return vc(3,[{provide:td,multi:!0,useFactory:()=>{let e=$($e);return()=>{e.setUpLocationChangeListener()}}},{provide:ty,useValue:2}])}var iD=new X("");function aL(n){return vc(0,[{provide:iD,useExisting:rL},{provide:Rd,useExisting:n}])}function cL(){return vc(8,[vC,{provide:Md,useExisting:vC}])}function lL(n){let e=[{provide:QC,useValue:GF},{provide:YC,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return vc(9,e)}var wC=new X("ROUTER_FORROOT_GUARD"),uL=[us,{provide:hc,useClass:nc},$e,fc,{provide:ot,useFactory:tD,deps:[$e]},Xg,[]],qe=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[uL,[],{provide:uc,multi:!0,useValue:t},{provide:wC,useFactory:pL,deps:[[$e,new gn,new um]]},{provide:yc,useValue:r||{}},r?.useHash?hL():fL(),dL(),r?.preloadingStrategy?aL(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?mL(r):[],r?.bindToComponentInputs?cL().\u0275providers:[],r?.enableViewTransitions?lL().\u0275providers:[],gL()]}}static forChild(t){return{ngModule:n,providers:[{provide:uc,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(F(wC,8))}}static{this.\u0275mod=tn({type:n})}static{this.\u0275inj=en({})}}return n})();function dL(){return{provide:ZC,useFactory:()=>{let n=$(QE),e=$(Ne),t=$(yc),r=$(ey),i=$(hc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new iL(i,r,n,e,t)}}}function hL(){return{provide:Ar,useClass:WE}}function fL(){return{provide:Ar,useClass:og}}function pL(n){return"guarded"}function mL(n){return[n.initialNavigation==="disabled"?sL().\u0275providers:[],n.initialNavigation==="enabledBlocking"?oL().\u0275providers:[]]}var IC=new X("");function gL(){return[{provide:IC,useFactory:nD},{provide:qa,multi:!0,useExisting:IC}]}var sD=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},yL=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},aD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,h=o>>2,g=(o&3)<<4|a>>4,_=(a&15)<<2|u>>6,I=u&63;l||(I=64,s||(_=64)),r.push(t[h],t[g],t[_],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sD(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):yL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||g==null)throw new ry;let _=o<<2|a>>4;if(r.push(_),u!==64){let I=a<<4&240|u>>2;if(r.push(I),g!==64){let R=u<<6&192|g;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ry=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},vL=function(n){let e=sD(n);return aD.encodeByteArray(e,!0)},_c=function(n){return vL(n).replace(/\./g,"")},oy=function(n){try{return aD.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _L(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var wL=()=>_L().__FIREBASE_DEFAULTS__,IL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},bL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&oy(n[1]);return e&&JSON.parse(e)},Od=()=>{try{return wL()||IL()||bL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cD=n=>{var e,t;return(t=(e=Od())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},lD=n=>{let e=cD(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},sy=()=>{var n;return(n=Od())===null||n===void 0?void 0:n.config},uD=n=>{var e;return(e=Od())===null||e===void 0?void 0:e[`_${n}`]};var Nd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function dD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_c(JSON.stringify(t)),_c(JSON.stringify(s)),""].join(".")}function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function EL(){var n;let e=(n=Od())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pD(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function mD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gD(){return!EL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ay(){try{return typeof indexedDB=="object"}catch{return!1}}function yD(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var CL="FirebaseError",En=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=CL,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mr.prototype.create)}},Mr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?DL(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new En(i,a,r)}};function DL(n,e){return n.replace(SL,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var SL=/\{\$([^}]+)}/g;function Is(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(oD(o)&&oD(s)){if(!Is(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function oD(n){return n!==null&&typeof n=="object"}function cy(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vD(n,e){let t=new iy(n,e);return t.subscribe.bind(t)}var iy=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");TL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ny),i.error===void 0&&(i.error=ny),i.complete===void 0&&(i.complete=ny);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function TL(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ny(){}var T8=4*60*60*1e3;function qt(n){return n&&n._delegate?n._delegate:n}var Cn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var to="[DEFAULT]";var ly=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Nd;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AL(e))try{this.getOrInitializeService({instanceIdentifier:to})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=to){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=to){return this.instances.has(e)}getOptions(e=to){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=to){return this.component?this.component.multipleInstances?e:to:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function xL(n){return n===to?void 0:n}function AL(n){return n.instantiationMode==="EAGER"}var kd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ly(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var RL=[],De=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(De||{}),ML={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},PL=De.INFO,NL={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},OL=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=NL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ui=class{constructor(e){this.name=e,this._logLevel=PL,this._logHandler=OL,this._userLogHandler=null,RL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ML[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}};var kL=(n,e)=>e.some(t=>n instanceof t),_D,wD;function FL(){return _D||(_D=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LL(){return wD||(wD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ID=new WeakMap,dy=new WeakMap,bD=new WeakMap,uy=new WeakMap,fy=new WeakMap;function VL(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(er(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&ID.set(t,n)}).catch(()=>{}),fy.set(e,n),e}function jL(n){if(dy.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});dy.set(n,e)}var hy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||bD.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return er(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ED(n){hy=n(hy)}function UL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Fd(this),e,...t);return bD.set(r,e.sort?e.sort():[e]),er(r)}:LL().includes(n)?function(...e){return n.apply(Fd(this),e),er(ID.get(this))}:function(...e){return er(n.apply(Fd(this),e))}}function BL(n){return typeof n=="function"?UL(n):(n instanceof IDBTransaction&&jL(n),kL(n,FL())?new Proxy(n,hy):n)}function er(n){if(n instanceof IDBRequest)return VL(n);if(uy.has(n))return uy.get(n);let e=BL(n);return e!==n&&(uy.set(n,e),fy.set(e,n)),e}var Fd=n=>fy.get(n);function DD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=er(s);return r&&s.addEventListener("upgradeneeded",l=>{r(er(s.result),l.oldVersion,l.newVersion,er(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var $L=["get","getKey","getAll","getAllKeys","count"],qL=["put","add","delete","clear"],py=new Map;function CD(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(py.get(e))return py.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=qL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$L.includes(t)))return;let o=function(s,...a){return b(this,null,function*(){let l=this.transaction(s,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&l.done]))[0]})};return py.set(e,o),o}ED(n=>pe(V({},n),{get:(e,t,r)=>CD(e,t)||n.get(e,t,r),has:(e,t)=>!!CD(e,t)||n.has(e,t)}));var gy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(HL(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function HL(n){let e=n.getComponent();return e?.type==="VERSION"}var yy="@firebase/app",SD="0.10.13";var Pr=new ui("@firebase/app"),zL="@firebase/app-compat",GL="@firebase/analytics-compat",WL="@firebase/analytics",KL="@firebase/app-check-compat",QL="@firebase/app-check",YL="@firebase/auth",JL="@firebase/auth-compat",XL="@firebase/database",ZL="@firebase/data-connect",e2="@firebase/database-compat",t2="@firebase/functions",n2="@firebase/functions-compat",r2="@firebase/installations",i2="@firebase/installations-compat",o2="@firebase/messaging",s2="@firebase/messaging-compat",a2="@firebase/performance",c2="@firebase/performance-compat",l2="@firebase/remote-config",u2="@firebase/remote-config-compat",d2="@firebase/storage",h2="@firebase/storage-compat",f2="@firebase/firestore",p2="@firebase/vertexai-preview",m2="@firebase/firestore-compat",g2="firebase",y2="10.14.1";var vy="[DEFAULT]",v2={[yy]:"fire-core",[zL]:"fire-core-compat",[WL]:"fire-analytics",[GL]:"fire-analytics-compat",[QL]:"fire-app-check",[KL]:"fire-app-check-compat",[YL]:"fire-auth",[JL]:"fire-auth-compat",[XL]:"fire-rtdb",[ZL]:"fire-data-connect",[e2]:"fire-rtdb-compat",[t2]:"fire-fn",[n2]:"fire-fn-compat",[r2]:"fire-iid",[i2]:"fire-iid-compat",[o2]:"fire-fcm",[s2]:"fire-fcm-compat",[a2]:"fire-perf",[c2]:"fire-perf-compat",[l2]:"fire-rc",[u2]:"fire-rc-compat",[d2]:"fire-gcs",[h2]:"fire-gcs-compat",[f2]:"fire-fst",[m2]:"fire-fst-compat",[p2]:"fire-vertex","fire-js":"fire-js",[g2]:"fire-js-all"};var wc=new Map,_2=new Map,_y=new Map;function TD(n,e){try{n.container.addComponent(e)}catch(t){Pr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function hi(n){let e=n.name;if(_y.has(e))return Pr.debug(`There were multiple attempts to register component ${e}.`),!1;_y.set(e,n);for(let t of wc.values())TD(t,n);for(let t of _2.values())TD(t,n);return!0}function Ey(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bs(n){return n.settings!==void 0}var w2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},di=new Mr("app","Firebase",w2);var wy=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}};var Es=y2;function Cy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:vy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw di.create("bad-app-name",{appName:String(i)});if(t||(t=sy()),!t)throw di.create("no-options");let o=wc.get(i);if(o){if(Is(t,o.options)&&Is(r,o.config))return o;throw di.create("duplicate-app",{appName:i})}let s=new kd(i);for(let l of _y.values())s.addComponent(l);let a=new wy(t,r,s);return wc.set(i,a),a}function bc(n=vy){let e=wc.get(n);if(!e&&n===vy&&sy())return Cy();if(!e)throw di.create("no-app",{appName:n});return e}function Ld(){return Array.from(wc.values())}function ht(n,e,t){var r;let i=(r=v2[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pr.warn(a.join(" "));return}hi(new Cn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var I2="firebase-heartbeat-database",b2=1,Ic="firebase-heartbeat-store",my=null;function MD(){return my||(my=DD(I2,b2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ic)}catch(t){console.warn(t)}}}}).catch(n=>{throw di.create("idb-open",{originalErrorMessage:n.message})})),my}function E2(n){return b(this,null,function*(){try{let t=(yield MD()).transaction(Ic),r=yield t.objectStore(Ic).get(PD(n));return yield t.done,r}catch(e){if(e instanceof En)Pr.warn(e.message);else{let t=di.create("idb-get",{originalErrorMessage:e?.message});Pr.warn(t.message)}}})}function xD(n,e){return b(this,null,function*(){try{let r=(yield MD()).transaction(Ic,"readwrite");yield r.objectStore(Ic).put(e,PD(n)),yield r.done}catch(t){if(t instanceof En)Pr.warn(t.message);else{let r=di.create("idb-set",{originalErrorMessage:t?.message});Pr.warn(r.message)}}})}function PD(n){return`${n.name}!${n.options.appId}`}var C2=1024,D2=30*24*60*60*1e3,Iy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new by(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=AD();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=D2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Pr.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=AD(),{heartbeatsToSend:r,unsentEntries:i}=S2(this._heartbeatsCache.heartbeats),o=_c(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Pr.warn(t),""}})}};function AD(){return new Date().toISOString().substring(0,10)}function S2(n,e=C2){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),RD(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),RD(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var by=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return ay()?yD().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield E2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return xD(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return xD(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function RD(n){return _c(JSON.stringify({version:2,heartbeats:n})).length}function T2(n){hi(new Cn("platform-logger",e=>new gy(e),"PRIVATE")),hi(new Cn("heartbeat",e=>new Iy(e),"PRIVATE")),ht(yy,SD,n),ht(yy,SD,"esm2017"),ht("fire-js","")}T2("");var x2="firebase",A2="10.14.1";ht(x2,A2,"app");var Ds=new vr("ANGULARFIRE2_VERSION");function Sy(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Cc=(n,e)=>{let t=e?[e]:Ld(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ec=class{constructor(){return Cc(R2)}},R2="app-check";function Cs(){}var Vd=class{zone;delegate;constructor(e,t=Jf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Dy=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Cs,{},Cs,Cs)),t.pipe(rt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Dc=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Vd(Zone.current)),this.insideAngular=t.run(()=>new Vd(Zone.current,Lo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(F(Ne))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jd(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function M2(n){return jd().ngZone.runOutsideAngular(()=>n())}function no(n){return jd().ngZone.run(()=>n())}function P2(n){return N2(jd())(n)}function N2(n){return function(t){return t=t.lift(new Dy(n.ngZone)),t.pipe(Gr(n.outsideAngular),zr(n.insideAngular))}}var O2=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),no(()=>n.apply(void 0,r))},Pt=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=no(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Cs,{},Cs,Cs))),r[o]=O2(r[o],t));let i=M2(()=>n.apply(this,r));if(!e)if(i instanceof Ie){let o=jd();return i.pipe(Gr(o.outsideAngular),zr(o.insideAngular))}else return no(()=>i);return i instanceof Ie?i.pipe(P2):i instanceof Promise?no(()=>new Promise((o,s)=>i.then(a=>no(()=>o(a)),a=>no(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:no(()=>i)};var ro=class{constructor(e){return e}},Sc=class{constructor(){return Ld()}};function k2(n){return n&&n.length===1?n[0]:new ro(bc())}var Ty=new X("angularfire2._apps"),F2={provide:ro,useFactory:k2,deps:[[new gn,Ty]]},L2={provide:Sc,deps:[[new gn,Ty]]};function V2(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ro(r)}}var j2=(()=>{class n{constructor(t){ht("angularfire",Ds.full,"core"),ht("angularfire",Ds.full,"app"),ht("angular",PE.full,t.toString())}static \u0275fac=function(r){return new(r||n)(F(_n))};static \u0275mod=tn({type:n});static \u0275inj=en({providers:[F2,L2]})}return n})();function ND(n,...e){return{ngModule:j2,providers:[{provide:Ty,useFactory:V2(n),multi:!0,deps:[Ne,on,Dc,...e]}]}}var OD=Pt(Cy,!0);function $D(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var qD=$D,HD=new Mr("auth","Firebase",$D());var qd=new ui("@firebase/auth");function B2(n,...e){qd.logLevel<=De.WARN&&qd.warn(`Auth (${Es}): ${n}`,...e)}function Bd(n,...e){qd.logLevel<=De.ERROR&&qd.error(`Auth (${Es}): ${n}`,...e)}function kD(n,...e){throw jy(n,...e)}function Vy(n,...e){return jy(n,...e)}function zD(n,e,t){let r=Object.assign(Object.assign({},qD()),{[e]:t});return new Mr("auth","Firebase",r).create(e,{appName:n.name})}function $d(n){return zD(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jy(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return HD.create(n,...e)}function Pe(n,e,...t){if(!n)throw jy(e,...t)}function Tc(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Bd(e),new Error(e)}function Hd(n,e){n||Tc(e)}function $2(){return FD()==="http:"||FD()==="https:"}function FD(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function q2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($2()||pD()||"connection"in navigator)?navigator.onLine:!0}function H2(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var oo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hd(t>e,"Short delay should be less than long delay!"),this.isMobile=hD()||mD()}get(){return q2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function z2(n,e){Hd(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var zd=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var G2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var W2=new oo(3e4,6e4);function GD(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Qd(o,s,a,l){return b(this,arguments,function*(n,e,t,r,i={}){return WD(n,i,()=>b(this,null,function*(){let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});let g=cy(Object.assign({key:n.config.apiKey},h)).slice(1),_=yield n._getAdditionalHeaders();_["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode);let I=Object.assign({method:e,headers:_},u);return fD()||(I.referrerPolicy="no-referrer"),zd.fetch()(KD(n,n.config.apiHost,t,g),I)}))})}function WD(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},G2),e);try{let i=new Ry(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Ud(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ud(n,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Ud(n,"email-already-in-use",s);if(l==="USER_DISABLED")throw Ud(n,"user-disabled",s);let h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw zD(n,h,u);kD(n,h)}}catch(i){if(i instanceof En)throw i;kD(n,"network-request-failed",{message:String(i)})}})}function KD(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?z2(n.config,i):`${n.config.apiScheme}://${i}`}var Ry=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Vy(this.auth,"network-request-failed")),W2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ud(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Vy(n,e,r);return i.customData._tokenResponse=t,i}function K2(n,e){return b(this,null,function*(){return Qd(n,"POST","/v1/accounts:delete",e)})}function QD(n,e){return b(this,null,function*(){return Qd(n,"POST","/v1/accounts:lookup",e)})}function xc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Uy(n,e=!1){return b(this,null,function*(){let t=qt(n),r=yield t.getIdToken(e),i=YD(r);Pe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:xc(xy(i.auth_time)),issuedAtTime:xc(xy(i.iat)),expirationTime:xc(xy(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function xy(n){return Number(n)*1e3}function YD(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Bd("JWT malformed, contained fewer than 3 sections"),null;try{let i=oy(t);return i?JSON.parse(i):(Bd("Failed to decode base64 JWT payload"),null)}catch(i){return Bd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function LD(n){let e=YD(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function My(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof En&&Q2(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Q2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Py=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Rc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xc(this.lastLoginAt),this.creationTime=xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Gd(n){return b(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield My(n,QD(t,{idToken:r}));Pe(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?JD(o.providerUserInfo):[],a=Y2(n.providerData,s),l=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,h=l?u:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Rc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,g)})}function By(n){return b(this,null,function*(){let e=qt(n);yield Gd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Y2(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function JD(n){return n.map(e=>{var{providerId:t}=e,r=Xf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function J2(n,e){return b(this,null,function*(){let t=yield WD(n,{},()=>b(this,null,function*(){let r=cy({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=KD(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",zd.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function X2(n,e){return b(this,null,function*(){return Qd(n,"POST","/v2/accounts:revokeToken",GD(n,e))})}var Ac=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");let t=LD(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield J2(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Pe(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Pe(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Tc("not implemented")}};function fi(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Mc=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Xf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Py(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Rc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield My(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Uy(this,e)}reload(){return By(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Gd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(bs(this.auth.app))return Promise.reject($d(this.auth));let e=yield this.getIdToken();return yield My(this,K2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,l,u,h;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,I=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,R=(s=t.photoURL)!==null&&s!==void 0?s:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,O=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,H=(u=t.createdAt)!==null&&u!==void 0?u:void 0,oe=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:W,emailVerified:_e,isAnonymous:ze,providerData:ue,stsTokenManager:T}=t;Pe(W&&T,e,"internal-error");let w=Ac.fromJSON(this.name,T);Pe(typeof W=="string",e,"internal-error"),fi(g,e.name),fi(_,e.name),Pe(typeof _e=="boolean",e,"internal-error"),Pe(typeof ze=="boolean",e,"internal-error"),fi(I,e.name),fi(R,e.name),fi(N,e.name),fi(O,e.name),fi(H,e.name),fi(oe,e.name);let E=new n({uid:W,auth:e,email:_,emailVerified:_e,displayName:g,isAnonymous:ze,photoURL:R,phoneNumber:I,tenantId:N,stsTokenManager:w,createdAt:H,lastLoginAt:oe});return ue&&Array.isArray(ue)&&(E.providerData=ue.map(S=>Object.assign({},S))),O&&(E._redirectEventId=O),E}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new Ac;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Gd(o),o})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];Pe(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?JD(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Ac;a.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Rc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(l,u),l})}};var VD=new Map;function io(n){Hd(n instanceof Function,"Expected a class definition");let e=VD.get(n);return e?(Hd(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,VD.set(n,e),e)}var Z2=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Ny=Z2;function Ay(n,e,t){return`firebase:${n}:${e}:${t}`}var Wd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ay(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ay("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Mc._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(io(Ny),e,r);let i=(yield Promise.all(t.map(u=>b(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||io(Ny),s=Ay(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let h=yield u._get(s);if(h){let g=Mc._fromJSON(e,h);u!==o&&(a=g),o=u;break}}catch{}let l=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new n(o,e,r):(o=l[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>b(this,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function jD(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oV(e))return"Blackberry";if(sV(e))return"Webos";if(tV(e))return"Safari";if((e.includes("chrome/")||nV(e))&&!e.includes("edge/"))return"Chrome";if(iV(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function eV(n=ln()){return/firefox\//i.test(n)}function tV(n=ln()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nV(n=ln()){return/crios\//i.test(n)}function rV(n=ln()){return/iemobile/i.test(n)}function iV(n=ln()){return/android/i.test(n)}function oV(n=ln()){return/blackberry/i.test(n)}function sV(n=ln()){return/webos/i.test(n)}function XD(n,e=[]){let t;switch(n){case"Browser":t=jD(ln());break;case"Worker":t=`${jD(ln())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Es}/${r}`}var Oy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let l=e(o);s(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function aV(t){return b(this,arguments,function*(n,e={}){return Qd(n,"GET","/v2/passwordPolicy",GD(n,e))})}var cV=6,ky=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:cV,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Fy=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kd(this),this.idTokenSubscription=new Kd(this),this.beforeStateQueue=new Oy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=io(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Wd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield QD(this,{idToken:e}),r=yield Mc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(bs(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!s||s===a)&&l?.user&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield Gd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=H2()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(bs(this.app))return Promise.reject($d(this));let t=e?qt(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return bs(this.app)?Promise.reject($d(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return bs(this.app)?Promise.reject($d(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(io(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield aV(this),t=new ky(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield X2(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&io(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=yield Wd.create(this,[io(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{s=!0,l()}}else{let l=e.addObserver(t);return()=>{s=!0,l()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return b(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&B2(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function lV(n){return qt(n)}var Kd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=vD(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var uV={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dV(n){uV=n}function hV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function fV(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(io);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var EG=hV("rcb"),CG=new oo(3e4,6e4);var DG=new oo(2e3,1e4);var SG=10*60*1e3;var TG=new oo(3e4,6e4);var xG=new oo(5e3,15e3);var AG=encodeURIComponent("fac");var UD="@firebase/auth",BD="1.7.9";var Ly=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function pV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mV(n){hi(new Cn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Pe(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XD(n)},u=new Fy(r,i,o,l);return fV(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),hi(new Cn("auth-internal",e=>{let t=lV(e.getProvider("auth").getImmediate());return(r=>new Ly(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ht(UD,BD,pV(n)),ht(UD,BD,"esm2017")}var gV=5*60,RG=uD("authIdTokenMaxAge")||gV;function yV(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}dV({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Vy("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",yV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mV("Browser");var gj="auth";var Yd=class{constructor(){return Cc(gj)}};var ZD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},eS={};var pi,$y;(function(){var n;function e(T,w){function E(){}E.prototype=w.prototype,T.D=w.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(S,x,M){for(var D=Array(arguments.length-2),ur=2;ur<arguments.length;ur++)D[ur-2]=arguments[ur];return w.prototype[x].apply(S,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,w,E){E||(E=0);var S=Array(16);if(typeof w=="string")for(var x=0;16>x;++x)S[x]=w.charCodeAt(E++)|w.charCodeAt(E++)<<8|w.charCodeAt(E++)<<16|w.charCodeAt(E++)<<24;else for(x=0;16>x;++x)S[x]=w[E++]|w[E++]<<8|w[E++]<<16|w[E++]<<24;w=T.g[0],E=T.g[1],x=T.g[2];var M=T.g[3],D=w+(M^E&(x^M))+S[0]+3614090360&4294967295;w=E+(D<<7&4294967295|D>>>25),D=M+(x^w&(E^x))+S[1]+3905402710&4294967295,M=w+(D<<12&4294967295|D>>>20),D=x+(E^M&(w^E))+S[2]+606105819&4294967295,x=M+(D<<17&4294967295|D>>>15),D=E+(w^x&(M^w))+S[3]+3250441966&4294967295,E=x+(D<<22&4294967295|D>>>10),D=w+(M^E&(x^M))+S[4]+4118548399&4294967295,w=E+(D<<7&4294967295|D>>>25),D=M+(x^w&(E^x))+S[5]+1200080426&4294967295,M=w+(D<<12&4294967295|D>>>20),D=x+(E^M&(w^E))+S[6]+2821735955&4294967295,x=M+(D<<17&4294967295|D>>>15),D=E+(w^x&(M^w))+S[7]+4249261313&4294967295,E=x+(D<<22&4294967295|D>>>10),D=w+(M^E&(x^M))+S[8]+1770035416&4294967295,w=E+(D<<7&4294967295|D>>>25),D=M+(x^w&(E^x))+S[9]+2336552879&4294967295,M=w+(D<<12&4294967295|D>>>20),D=x+(E^M&(w^E))+S[10]+4294925233&4294967295,x=M+(D<<17&4294967295|D>>>15),D=E+(w^x&(M^w))+S[11]+2304563134&4294967295,E=x+(D<<22&4294967295|D>>>10),D=w+(M^E&(x^M))+S[12]+1804603682&4294967295,w=E+(D<<7&4294967295|D>>>25),D=M+(x^w&(E^x))+S[13]+4254626195&4294967295,M=w+(D<<12&4294967295|D>>>20),D=x+(E^M&(w^E))+S[14]+2792965006&4294967295,x=M+(D<<17&4294967295|D>>>15),D=E+(w^x&(M^w))+S[15]+1236535329&4294967295,E=x+(D<<22&4294967295|D>>>10),D=w+(x^M&(E^x))+S[1]+4129170786&4294967295,w=E+(D<<5&4294967295|D>>>27),D=M+(E^x&(w^E))+S[6]+3225465664&4294967295,M=w+(D<<9&4294967295|D>>>23),D=x+(w^E&(M^w))+S[11]+643717713&4294967295,x=M+(D<<14&4294967295|D>>>18),D=E+(M^w&(x^M))+S[0]+3921069994&4294967295,E=x+(D<<20&4294967295|D>>>12),D=w+(x^M&(E^x))+S[5]+3593408605&4294967295,w=E+(D<<5&4294967295|D>>>27),D=M+(E^x&(w^E))+S[10]+38016083&4294967295,M=w+(D<<9&4294967295|D>>>23),D=x+(w^E&(M^w))+S[15]+3634488961&4294967295,x=M+(D<<14&4294967295|D>>>18),D=E+(M^w&(x^M))+S[4]+3889429448&4294967295,E=x+(D<<20&4294967295|D>>>12),D=w+(x^M&(E^x))+S[9]+568446438&4294967295,w=E+(D<<5&4294967295|D>>>27),D=M+(E^x&(w^E))+S[14]+3275163606&4294967295,M=w+(D<<9&4294967295|D>>>23),D=x+(w^E&(M^w))+S[3]+4107603335&4294967295,x=M+(D<<14&4294967295|D>>>18),D=E+(M^w&(x^M))+S[8]+1163531501&4294967295,E=x+(D<<20&4294967295|D>>>12),D=w+(x^M&(E^x))+S[13]+2850285829&4294967295,w=E+(D<<5&4294967295|D>>>27),D=M+(E^x&(w^E))+S[2]+4243563512&4294967295,M=w+(D<<9&4294967295|D>>>23),D=x+(w^E&(M^w))+S[7]+1735328473&4294967295,x=M+(D<<14&4294967295|D>>>18),D=E+(M^w&(x^M))+S[12]+2368359562&4294967295,E=x+(D<<20&4294967295|D>>>12),D=w+(E^x^M)+S[5]+4294588738&4294967295,w=E+(D<<4&4294967295|D>>>28),D=M+(w^E^x)+S[8]+2272392833&4294967295,M=w+(D<<11&4294967295|D>>>21),D=x+(M^w^E)+S[11]+1839030562&4294967295,x=M+(D<<16&4294967295|D>>>16),D=E+(x^M^w)+S[14]+4259657740&4294967295,E=x+(D<<23&4294967295|D>>>9),D=w+(E^x^M)+S[1]+2763975236&4294967295,w=E+(D<<4&4294967295|D>>>28),D=M+(w^E^x)+S[4]+1272893353&4294967295,M=w+(D<<11&4294967295|D>>>21),D=x+(M^w^E)+S[7]+4139469664&4294967295,x=M+(D<<16&4294967295|D>>>16),D=E+(x^M^w)+S[10]+3200236656&4294967295,E=x+(D<<23&4294967295|D>>>9),D=w+(E^x^M)+S[13]+681279174&4294967295,w=E+(D<<4&4294967295|D>>>28),D=M+(w^E^x)+S[0]+3936430074&4294967295,M=w+(D<<11&4294967295|D>>>21),D=x+(M^w^E)+S[3]+3572445317&4294967295,x=M+(D<<16&4294967295|D>>>16),D=E+(x^M^w)+S[6]+76029189&4294967295,E=x+(D<<23&4294967295|D>>>9),D=w+(E^x^M)+S[9]+3654602809&4294967295,w=E+(D<<4&4294967295|D>>>28),D=M+(w^E^x)+S[12]+3873151461&4294967295,M=w+(D<<11&4294967295|D>>>21),D=x+(M^w^E)+S[15]+530742520&4294967295,x=M+(D<<16&4294967295|D>>>16),D=E+(x^M^w)+S[2]+3299628645&4294967295,E=x+(D<<23&4294967295|D>>>9),D=w+(x^(E|~M))+S[0]+4096336452&4294967295,w=E+(D<<6&4294967295|D>>>26),D=M+(E^(w|~x))+S[7]+1126891415&4294967295,M=w+(D<<10&4294967295|D>>>22),D=x+(w^(M|~E))+S[14]+2878612391&4294967295,x=M+(D<<15&4294967295|D>>>17),D=E+(M^(x|~w))+S[5]+4237533241&4294967295,E=x+(D<<21&4294967295|D>>>11),D=w+(x^(E|~M))+S[12]+1700485571&4294967295,w=E+(D<<6&4294967295|D>>>26),D=M+(E^(w|~x))+S[3]+2399980690&4294967295,M=w+(D<<10&4294967295|D>>>22),D=x+(w^(M|~E))+S[10]+4293915773&4294967295,x=M+(D<<15&4294967295|D>>>17),D=E+(M^(x|~w))+S[1]+2240044497&4294967295,E=x+(D<<21&4294967295|D>>>11),D=w+(x^(E|~M))+S[8]+1873313359&4294967295,w=E+(D<<6&4294967295|D>>>26),D=M+(E^(w|~x))+S[15]+4264355552&4294967295,M=w+(D<<10&4294967295|D>>>22),D=x+(w^(M|~E))+S[6]+2734768916&4294967295,x=M+(D<<15&4294967295|D>>>17),D=E+(M^(x|~w))+S[13]+1309151649&4294967295,E=x+(D<<21&4294967295|D>>>11),D=w+(x^(E|~M))+S[4]+4149444226&4294967295,w=E+(D<<6&4294967295|D>>>26),D=M+(E^(w|~x))+S[11]+3174756917&4294967295,M=w+(D<<10&4294967295|D>>>22),D=x+(w^(M|~E))+S[2]+718787259&4294967295,x=M+(D<<15&4294967295|D>>>17),D=E+(M^(x|~w))+S[9]+3951481745&4294967295,T.g[0]=T.g[0]+w&4294967295,T.g[1]=T.g[1]+(x+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+x&4294967295,T.g[3]=T.g[3]+M&4294967295}r.prototype.u=function(T,w){w===void 0&&(w=T.length);for(var E=w-this.blockSize,S=this.B,x=this.h,M=0;M<w;){if(x==0)for(;M<=E;)i(this,T,M),M+=this.blockSize;if(typeof T=="string"){for(;M<w;)if(S[x++]=T.charCodeAt(M++),x==this.blockSize){i(this,S),x=0;break}}else for(;M<w;)if(S[x++]=T[M++],x==this.blockSize){i(this,S),x=0;break}}this.h=x,this.o+=w},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var w=1;w<T.length-8;++w)T[w]=0;var E=8*this.o;for(w=T.length-8;w<T.length;++w)T[w]=E&255,E/=256;for(this.u(T),T=Array(16),w=E=0;4>w;++w)for(var S=0;32>S;S+=8)T[E++]=this.g[w]>>>S&255;return T};function o(T,w){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=w(T)}function s(T,w){this.h=w;for(var E=[],S=!0,x=T.length-1;0<=x;x--){var M=T[x]|0;S&&M==w||(E[x]=M,S=!1)}this.g=E}var a={};function l(T){return-128<=T&&128>T?o(T,function(w){return new s([w|0],0>w?-1:0)}):new s([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return O(u(-T));for(var w=[],E=1,S=0;T>=E;S++)w[S]=T/E|0,E*=4294967296;return new s(w,0)}function h(T,w){if(T.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(T.charAt(0)=="-")return O(h(T.substring(1),w));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=u(Math.pow(w,8)),S=g,x=0;x<T.length;x+=8){var M=Math.min(8,T.length-x),D=parseInt(T.substring(x,x+M),w);8>M?(M=u(Math.pow(w,M)),S=S.j(M).add(u(D))):(S=S.j(E),S=S.add(u(D)))}return S}var g=l(0),_=l(1),I=l(16777216);n=s.prototype,n.m=function(){if(N(this))return-O(this).m();for(var T=0,w=1,E=0;E<this.g.length;E++){var S=this.i(E);T+=(0<=S?S:4294967296+S)*w,w*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(R(this))return"0";if(N(this))return"-"+O(this).toString(T);for(var w=u(Math.pow(T,6)),E=this,S="";;){var x=_e(E,w).g;E=H(E,x.j(w));var M=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=x,R(E))return M+S;for(;6>M.length;)M="0"+M;S=M+S}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function R(T){if(T.h!=0)return!1;for(var w=0;w<T.g.length;w++)if(T.g[w]!=0)return!1;return!0}function N(T){return T.h==-1}n.l=function(T){return T=H(this,T),N(T)?-1:R(T)?0:1};function O(T){for(var w=T.g.length,E=[],S=0;S<w;S++)E[S]=~T.g[S];return new s(E,~T.h).add(_)}n.abs=function(){return N(this)?O(this):this},n.add=function(T){for(var w=Math.max(this.g.length,T.g.length),E=[],S=0,x=0;x<=w;x++){var M=S+(this.i(x)&65535)+(T.i(x)&65535),D=(M>>>16)+(this.i(x)>>>16)+(T.i(x)>>>16);S=D>>>16,M&=65535,D&=65535,E[x]=D<<16|M}return new s(E,E[E.length-1]&-2147483648?-1:0)};function H(T,w){return T.add(O(w))}n.j=function(T){if(R(this)||R(T))return g;if(N(this))return N(T)?O(this).j(O(T)):O(O(this).j(T));if(N(T))return O(this.j(O(T)));if(0>this.l(I)&&0>T.l(I))return u(this.m()*T.m());for(var w=this.g.length+T.g.length,E=[],S=0;S<2*w;S++)E[S]=0;for(S=0;S<this.g.length;S++)for(var x=0;x<T.g.length;x++){var M=this.i(S)>>>16,D=this.i(S)&65535,ur=T.i(x)>>>16,ta=T.i(x)&65535;E[2*S+2*x]+=D*ta,oe(E,2*S+2*x),E[2*S+2*x+1]+=M*ta,oe(E,2*S+2*x+1),E[2*S+2*x+1]+=D*ur,oe(E,2*S+2*x+1),E[2*S+2*x+2]+=M*ur,oe(E,2*S+2*x+2)}for(S=0;S<w;S++)E[S]=E[2*S+1]<<16|E[2*S];for(S=w;S<2*w;S++)E[S]=0;return new s(E,0)};function oe(T,w){for(;(T[w]&65535)!=T[w];)T[w+1]+=T[w]>>>16,T[w]&=65535,w++}function W(T,w){this.g=T,this.h=w}function _e(T,w){if(R(w))throw Error("division by zero");if(R(T))return new W(g,g);if(N(T))return w=_e(O(T),w),new W(O(w.g),O(w.h));if(N(w))return w=_e(T,O(w)),new W(O(w.g),w.h);if(30<T.g.length){if(N(T)||N(w))throw Error("slowDivide_ only works with positive integers.");for(var E=_,S=w;0>=S.l(T);)E=ze(E),S=ze(S);var x=ue(E,1),M=ue(S,1);for(S=ue(S,2),E=ue(E,2);!R(S);){var D=M.add(S);0>=D.l(T)&&(x=x.add(E),M=D),S=ue(S,1),E=ue(E,1)}return w=H(T,x.j(w)),new W(x,w)}for(x=g;0<=T.l(w);){for(E=Math.max(1,Math.floor(T.m()/w.m())),S=Math.ceil(Math.log(E)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),M=u(E),D=M.j(w);N(D)||0<D.l(T);)E-=S,M=u(E),D=M.j(w);R(M)&&(M=_),x=x.add(M),T=H(T,D)}return new W(x,T)}n.A=function(T){return _e(this,T).h},n.and=function(T){for(var w=Math.max(this.g.length,T.g.length),E=[],S=0;S<w;S++)E[S]=this.i(S)&T.i(S);return new s(E,this.h&T.h)},n.or=function(T){for(var w=Math.max(this.g.length,T.g.length),E=[],S=0;S<w;S++)E[S]=this.i(S)|T.i(S);return new s(E,this.h|T.h)},n.xor=function(T){for(var w=Math.max(this.g.length,T.g.length),E=[],S=0;S<w;S++)E[S]=this.i(S)^T.i(S);return new s(E,this.h^T.h)};function ze(T){for(var w=T.g.length+1,E=[],S=0;S<w;S++)E[S]=T.i(S)<<1|T.i(S-1)>>>31;return new s(E,T.h)}function ue(T,w){var E=w>>5;w%=32;for(var S=T.g.length-E,x=[],M=0;M<S;M++)x[M]=0<w?T.i(M+E)>>>w|T.i(M+E+1)<<32-w:T.i(M+E);return new s(x,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$y=eS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,pi=eS.Integer=s}).apply(typeof ZD<"u"?ZD:typeof self<"u"?self:typeof window<"u"?window:{});var Jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Nr={};var qy,yj,Ss,Hy,Pc,Xd,zy,Gy,Wy;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jd=="object"&&Jd];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var v=0;v<c.length-1;v++){var A=c[v];if(!(A in f))break e;f=f[A]}c=c[c.length-1],v=f[c],d=d(v),d!=v&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,v=!1,A={next:function(){if(!v&&f<c.length){var P=f++;return{value:d(P,c[P]),done:!1}}return v=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function l(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function u(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function g(c,d,f){if(!c)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,v),c.apply(d,A)}}return function(){return c.apply(d,arguments)}}function _(c,d,f){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,_.apply(null,arguments)}function I(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),c.apply(this,v)}}function R(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(v,A,P){for(var B=Array(arguments.length-2),je=2;je<arguments.length;je++)B[je-2]=arguments[je];return d.prototype[A].apply(v,B)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let v=0;v<d;v++)f[v]=c[v];return f}return[]}function O(c,d){for(let f=1;f<arguments.length;f++){let v=arguments[f];if(l(v)){let A=c.length||0,P=v.length||0;c.length=A+P;for(let B=0;B<P;B++)c[A+B]=v[B]}else c.push(v)}}class H{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function oe(c){return/^[\s\xa0]*$/.test(c)}function W(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function _e(c){return _e[" "](c),c}_e[" "]=function(){};var ze=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ue(c,d,f){for(let v in c)d.call(f,c[v],v,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function w(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(c,d){let f,v;for(let A=1;A<arguments.length;A++){v=arguments[A];for(f in v)c[f]=v[f];for(let P=0;P<E.length;P++)f=E[P],Object.prototype.hasOwnProperty.call(v,f)&&(c[f]=v[f])}}function x(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function M(c){a.setTimeout(()=>{throw c},0)}function D(){var c=uf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class ur{constructor(){this.h=this.g=null}add(d,f){let v=ta.get();v.set(d,f),this.h?this.h.next=v:this.g=v,this.h=v}}var ta=new H(()=>new tA,c=>c.reset());class tA{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let na,ra=!1,uf=new ur,d_=()=>{let c=a.Promise.resolve(void 0);na=()=>{c.then(nA)}};var nA=()=>{for(var c;c=D();){try{c.h.call(c.g)}catch(f){M(f)}var d=ta;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ra=!1};function jr(){this.s=this.s,this.C=this.C}jr.prototype.s=!1,jr.prototype.ma=function(){this.s||(this.s=!0,this.N())},jr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function wt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}wt.prototype.h=function(){this.defaultPrevented=!0};var rA=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function ia(c,d){if(wt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,v=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ze){e:{try{_e(d.nodeName);var A=!0;break e}catch{}A=!1}A||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:iA[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ia.aa.h.call(this)}}R(ia,wt);var iA={2:"touch",3:"pen",4:"mouse"};ia.prototype.h=function(){ia.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var oa="closure_listenable_"+(1e6*Math.random()|0),oA=0;function sA(c,d,f,v,A){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!v,this.ha=A,this.key=++oA,this.da=this.fa=!1}function ul(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function dl(c){this.src=c,this.g={},this.h=0}dl.prototype.add=function(c,d,f,v,A){var P=c.toString();c=this.g[P],c||(c=this.g[P]=[],this.h++);var B=hf(c,d,v,A);return-1<B?(d=c[B],f||(d.fa=!1)):(d=new sA(d,this.src,P,!!v,A),d.fa=f,c.push(d)),d};function df(c,d){var f=d.type;if(f in c.g){var v=c.g[f],A=Array.prototype.indexOf.call(v,d,void 0),P;(P=0<=A)&&Array.prototype.splice.call(v,A,1),P&&(ul(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function hf(c,d,f,v){for(var A=0;A<c.length;++A){var P=c[A];if(!P.da&&P.listener==d&&P.capture==!!f&&P.ha==v)return A}return-1}var ff="closure_lm_"+(1e6*Math.random()|0),pf={};function h_(c,d,f,v,A){if(v&&v.once)return p_(c,d,f,v,A);if(Array.isArray(d)){for(var P=0;P<d.length;P++)h_(c,d[P],f,v,A);return null}return f=vf(f),c&&c[oa]?c.K(d,f,u(v)?!!v.capture:!!v,A):f_(c,d,f,!1,v,A)}function f_(c,d,f,v,A,P){if(!d)throw Error("Invalid event type");var B=u(A)?!!A.capture:!!A,je=gf(c);if(je||(c[ff]=je=new dl(c)),f=je.add(d,f,v,B,P),f.proxy)return f;if(v=aA(),f.proxy=v,v.src=c,v.listener=f,c.addEventListener)rA||(A=B),A===void 0&&(A=!1),c.addEventListener(d.toString(),v,A);else if(c.attachEvent)c.attachEvent(g_(d.toString()),v);else if(c.addListener&&c.removeListener)c.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function aA(){function c(f){return d.call(c.src,c.listener,f)}let d=cA;return c}function p_(c,d,f,v,A){if(Array.isArray(d)){for(var P=0;P<d.length;P++)p_(c,d[P],f,v,A);return null}return f=vf(f),c&&c[oa]?c.L(d,f,u(v)?!!v.capture:!!v,A):f_(c,d,f,!0,v,A)}function m_(c,d,f,v,A){if(Array.isArray(d))for(var P=0;P<d.length;P++)m_(c,d[P],f,v,A);else v=u(v)?!!v.capture:!!v,f=vf(f),c&&c[oa]?(c=c.i,d=String(d).toString(),d in c.g&&(P=c.g[d],f=hf(P,f,v,A),-1<f&&(ul(P[f]),Array.prototype.splice.call(P,f,1),P.length==0&&(delete c.g[d],c.h--)))):c&&(c=gf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=hf(d,f,v,A)),(f=-1<c?d[c]:null)&&mf(f))}function mf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[oa])df(d.i,c);else{var f=c.type,v=c.proxy;d.removeEventListener?d.removeEventListener(f,v,c.capture):d.detachEvent?d.detachEvent(g_(f),v):d.addListener&&d.removeListener&&d.removeListener(v),(f=gf(d))?(df(f,c),f.h==0&&(f.src=null,d[ff]=null)):ul(c)}}}function g_(c){return c in pf?pf[c]:pf[c]="on"+c}function cA(c,d){if(c.da)c=!0;else{d=new ia(d,this);var f=c.listener,v=c.ha||c.src;c.fa&&mf(c),c=f.call(v,d)}return c}function gf(c){return c=c[ff],c instanceof dl?c:null}var yf="__closure_events_fn_"+(1e9*Math.random()>>>0);function vf(c){return typeof c=="function"?c:(c[yf]||(c[yf]=function(d){return c.handleEvent(d)}),c[yf])}function It(){jr.call(this),this.i=new dl(this),this.M=this,this.F=null}R(It,jr),It.prototype[oa]=!0,It.prototype.removeEventListener=function(c,d,f,v){m_(this,c,d,f,v)};function Lt(c,d){var f,v=c.F;if(v)for(f=[];v;v=v.F)f.push(v);if(c=c.M,v=d.type||d,typeof d=="string")d=new wt(d,c);else if(d instanceof wt)d.target=d.target||c;else{var A=d;d=new wt(v,c),S(d,A)}if(A=!0,f)for(var P=f.length-1;0<=P;P--){var B=d.g=f[P];A=hl(B,v,!0,d)&&A}if(B=d.g=c,A=hl(B,v,!0,d)&&A,A=hl(B,v,!1,d)&&A,f)for(P=0;P<f.length;P++)B=d.g=f[P],A=hl(B,v,!1,d)&&A}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],v=0;v<f.length;v++)ul(f[v]);delete c.g[d],c.h--}}this.F=null},It.prototype.K=function(c,d,f,v){return this.i.add(String(c),d,!1,f,v)},It.prototype.L=function(c,d,f,v){return this.i.add(String(c),d,!0,f,v)};function hl(c,d,f,v){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var A=!0,P=0;P<d.length;++P){var B=d[P];if(B&&!B.da&&B.capture==f){var je=B.listener,pt=B.ha||B.src;B.fa&&df(c.i,B),A=je.call(pt,v)!==!1&&A}}return A&&!v.defaultPrevented}function y_(c,d,f){if(typeof c=="function")f&&(c=_(c,f));else if(c&&typeof c.handleEvent=="function")c=_(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function v_(c){c.g=y_(()=>{c.g=null,c.i&&(c.i=!1,v_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class lA extends jr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:v_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sa(c){jr.call(this),this.h=c,this.g={}}R(sa,jr);var __=[];function w_(c){ue(c.g,function(d,f){this.g.hasOwnProperty(f)&&mf(d)},c),c.g={}}sa.prototype.N=function(){sa.aa.N.call(this),w_(this)},sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _f=a.JSON.stringify,uA=a.JSON.parse,dA=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function wf(){}wf.prototype.h=null;function I_(c){return c.h||(c.h=c.i())}function b_(){}var aa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function If(){wt.call(this,"d")}R(If,wt);function bf(){wt.call(this,"c")}R(bf,wt);var Ai={},E_=null;function fl(){return E_=E_||new It}Ai.La="serverreachability";function C_(c){wt.call(this,Ai.La,c)}R(C_,wt);function ca(c){let d=fl();Lt(d,new C_(d))}Ai.STAT_EVENT="statevent";function D_(c,d){wt.call(this,Ai.STAT_EVENT,c),this.stat=d}R(D_,wt);function Vt(c){let d=fl();Lt(d,new D_(d,c))}Ai.Ma="timingevent";function S_(c,d){wt.call(this,Ai.Ma,c),this.size=d}R(S_,wt);function la(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ua(){this.g=!0}ua.prototype.xa=function(){this.g=!1};function hA(c,d,f,v,A,P){c.info(function(){if(c.g)if(P)for(var B="",je=P.split("&"),pt=0;pt<je.length;pt++){var xe=je[pt].split("=");if(1<xe.length){var bt=xe[0];xe=xe[1];var Et=bt.split("_");B=2<=Et.length&&Et[1]=="type"?B+(bt+"="+xe+"&"):B+(bt+"=redacted&")}}else B=null;else B=P;return"XMLHTTP REQ ("+v+") [attempt "+A+"]: "+d+`
`+f+`
`+B})}function fA(c,d,f,v,A,P,B){c.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+A+"]: "+d+`
`+f+`
`+P+" "+B})}function Co(c,d,f,v){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+mA(c,f)+(v?" "+v:"")})}function pA(c,d){c.info(function(){return"TIMEOUT: "+d})}ua.prototype.info=function(){};function mA(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var v=f[c];if(!(2>v.length)){var A=v[1];if(Array.isArray(A)&&!(1>A.length)){var P=A[0];if(P!="noop"&&P!="stop"&&P!="close")for(var B=1;B<A.length;B++)A[B]=""}}}}return _f(f)}catch{return d}}var pl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},T_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ef;function ml(){}R(ml,wf),ml.prototype.g=function(){return new XMLHttpRequest},ml.prototype.i=function(){return{}},Ef=new ml;function Ur(c,d,f,v){this.j=c,this.i=d,this.l=f,this.R=v||1,this.U=new sa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new x_}function x_(){this.i=null,this.g="",this.h=!1}var A_={},Cf={};function Df(c,d,f){c.L=1,c.v=_l(dr(d)),c.m=f,c.P=!0,R_(c,null)}function R_(c,d){c.F=Date.now(),gl(c),c.A=dr(c.v);var f=c.A,v=c.R;Array.isArray(v)||(v=[String(v)]),H_(f.i,"t",v),c.C=0,f=c.j.J,c.h=new x_,c.g=cw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new lA(_(c.Y,c,c.g),c.O)),d=c.U,f=c.g,v=c.ca;var A="readystatechange";Array.isArray(A)||(A&&(__[0]=A.toString()),A=__);for(var P=0;P<A.length;P++){var B=h_(f,A[P],v||d.handleEvent,!1,d.h||d);if(!B)break;d.g[B.key]=B}d=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ca(),hA(c.i,c.u,c.A,c.l,c.R,c.m)}Ur.prototype.ca=function(c){c=c.target;let d=this.M;d&&hr(c)==3?d.j():this.Y(c)},Ur.prototype.Y=function(c){try{if(c==this.g)e:{let Et=hr(this.g);var d=this.g.Ba();let To=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||J_(this.g)))){this.J||Et!=4||d==7||(d==8||0>=To?ca(3):ca(2)),Sf(this);var f=this.g.Z();this.X=f;t:if(M_(this)){var v=J_(this.g);c="";var A=v.length,P=hr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ri(this),da(this);var B="";break t}this.h.i=new a.TextDecoder}for(d=0;d<A;d++)this.h.h=!0,c+=this.h.i.decode(v[d],{stream:!(P&&d==A-1)});v.length=0,this.h.g+=c,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=f==200,fA(this.i,this.u,this.A,this.l,this.R,Et,f),this.o){if(this.T&&!this.K){t:{if(this.g){var je,pt=this.g;if((je=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(je)){var xe=je;break t}}xe=null}if(f=xe)Co(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tf(this,f);else{this.o=!1,this.s=3,Vt(12),Ri(this),da(this);break e}}if(this.P){f=!0;let Tn;for(;!this.J&&this.C<B.length;)if(Tn=gA(this,B),Tn==Cf){Et==4&&(this.s=4,Vt(14),f=!1),Co(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==A_){this.s=4,Vt(15),Co(this.i,this.l,B,"[Invalid Chunk]"),f=!1;break}else Co(this.i,this.l,Tn,null),Tf(this,Tn);if(M_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||B.length!=0||this.h.h||(this.s=1,Vt(16),f=!1),this.o=this.o&&f,!f)Co(this.i,this.l,B,"[Invalid Chunked Response]"),Ri(this),da(this);else if(0<B.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Nf(bt),bt.M=!0,Vt(11))}}else Co(this.i,this.l,B,null),Tf(this,B);Et==4&&Ri(this),this.o&&!this.J&&(Et==4?iw(this.j,this):(this.o=!1,gl(this)))}else NA(this.g),f==400&&0<B.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),Ri(this),da(this)}}}catch{}finally{}};function M_(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function gA(c,d){var f=c.C,v=d.indexOf(`
`,f);return v==-1?Cf:(f=Number(d.substring(f,v)),isNaN(f)?A_:(v+=1,v+f>d.length?Cf:(d=d.slice(v,v+f),c.C=v+f,d)))}Ur.prototype.cancel=function(){this.J=!0,Ri(this)};function gl(c){c.S=Date.now()+c.I,P_(c,c.I)}function P_(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=la(_(c.ba,c),d)}function Sf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ur.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(pA(this.i,this.A),this.L!=2&&(ca(),Vt(17)),Ri(this),this.s=2,da(this)):P_(this,this.S-c)};function da(c){c.j.G==0||c.J||iw(c.j,c)}function Ri(c){Sf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,w_(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Tf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||xf(f.h,c))){if(!c.K&&xf(f.h,c)&&f.G==3){try{var v=f.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var A=v;if(A[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Cl(f),bl(f);else break e;Pf(f),Vt(18)}}else f.za=A[1],0<f.za-f.T&&37500>A[2]&&f.F&&f.v==0&&!f.C&&(f.C=la(_(f.Za,f),6e3));if(1>=k_(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Pi(f,11)}else if((c.K||f.g==c)&&Cl(f),!oe(d))for(A=f.Da.g.parse(d),d=0;d<A.length;d++){let xe=A[d];if(f.T=xe[0],xe=xe[1],f.G==2)if(xe[0]=="c"){f.K=xe[1],f.ia=xe[2];let bt=xe[3];bt!=null&&(f.la=bt,f.j.info("VER="+f.la));let Et=xe[4];Et!=null&&(f.Aa=Et,f.j.info("SVER="+f.Aa));let To=xe[5];To!=null&&typeof To=="number"&&0<To&&(v=1.5*To,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;let Tn=c.g;if(Tn){let Sl=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sl){var P=v.h;P.g||Sl.indexOf("spdy")==-1&&Sl.indexOf("quic")==-1&&Sl.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(Af(P,P.h),P.h=null))}if(v.D){let Of=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Of&&(v.ya=Of,He(v.I,v.D,Of))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var B=c;if(v.qa=aw(v,v.J?v.ia:null,v.W),B.K){F_(v.h,B);var je=B,pt=v.L;pt&&(je.I=pt),je.B&&(Sf(je),gl(je)),v.g=B}else nw(v);0<f.i.length&&El(f)}else xe[0]!="stop"&&xe[0]!="close"||Pi(f,7);else f.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?Pi(f,7):Mf(f):xe[0]!="noop"&&f.l&&f.l.ta(xe),f.v=0)}}ca(4)}catch{}}var yA=class{constructor(c,d){this.g=c,this.map=d}};function N_(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function O_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function k_(c){return c.h?1:c.g?c.g.size:0}function xf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Af(c,d){c.g?c.g.add(d):c.h=d}function F_(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}N_.prototype.cancel=function(){if(this.i=L_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function L_(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function vA(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var d=[],f=c.length,v=0;v<f;v++)d.push(c[v]);return d}d=[],f=0;for(v in c)d[f++]=c[v];return d}function _A(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let v in c)d[f++]=v;return d}}}function V_(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=_A(c),v=vA(c),A=v.length,P=0;P<A;P++)d.call(void 0,v[P],f&&f[P],c)}var j_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wA(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var v=c[f].indexOf("="),A=null;if(0<=v){var P=c[f].substring(0,v);A=c[f].substring(v+1)}else P=c[f];d(P,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Mi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Mi){this.h=c.h,yl(this,c.j),this.o=c.o,this.g=c.g,vl(this,c.s),this.l=c.l;var d=c.i,f=new pa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),U_(this,f),this.m=c.m}else c&&(d=String(c).match(j_))?(this.h=!1,yl(this,d[1]||"",!0),this.o=ha(d[2]||""),this.g=ha(d[3]||"",!0),vl(this,d[4]),this.l=ha(d[5]||"",!0),U_(this,d[6]||"",!0),this.m=ha(d[7]||"")):(this.h=!1,this.i=new pa(null,this.h))}Mi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(fa(d,B_,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(fa(d,B_,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(fa(f,f.charAt(0)=="/"?EA:bA,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",fa(f,DA)),c.join("")};function dr(c){return new Mi(c)}function yl(c,d,f){c.j=f?ha(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function vl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function U_(c,d,f){d instanceof pa?(c.i=d,SA(c.i,c.h)):(f||(d=fa(d,CA)),c.i=new pa(d,c.h))}function He(c,d,f){c.i.set(d,f)}function _l(c){return He(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ha(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function fa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,IA),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function IA(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var B_=/[#\/\?@]/g,bA=/[#\?:]/g,EA=/[#\?]/g,CA=/[#\?@]/g,DA=/#/g;function pa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Br(c){c.g||(c.g=new Map,c.h=0,c.i&&wA(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=pa.prototype,n.add=function(c,d){Br(this),this.i=null,c=Do(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function $_(c,d){Br(c),d=Do(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function q_(c,d){return Br(c),d=Do(c,d),c.g.has(d)}n.forEach=function(c,d){Br(this),this.g.forEach(function(f,v){f.forEach(function(A){c.call(d,A,v,this)},this)},this)},n.na=function(){Br(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let v=0;v<d.length;v++){let A=c[v];for(let P=0;P<A.length;P++)f.push(d[v])}return f},n.V=function(c){Br(this);let d=[];if(typeof c=="string")q_(this,c)&&(d=d.concat(this.g.get(Do(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Br(this),this.i=null,c=Do(this,c),q_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function H_(c,d,f){$_(c,d),0<f.length&&(c.i=null,c.g.set(Do(c,d),N(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var v=d[f];let P=encodeURIComponent(String(v)),B=this.V(v);for(v=0;v<B.length;v++){var A=P;B[v]!==""&&(A+="="+encodeURIComponent(String(B[v]))),c.push(A)}}return this.i=c.join("&")};function Do(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function SA(c,d){d&&!c.j&&(Br(c),c.i=null,c.g.forEach(function(f,v){var A=v.toLowerCase();v!=A&&($_(this,v),H_(this,A,f))},c)),c.j=d}function TA(c,d){let f=new ua;if(a.Image){let v=new Image;v.onload=I($r,f,"TestLoadImage: loaded",!0,d,v),v.onerror=I($r,f,"TestLoadImage: error",!1,d,v),v.onabort=I($r,f,"TestLoadImage: abort",!1,d,v),v.ontimeout=I($r,f,"TestLoadImage: timeout",!1,d,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=c}else d(!1)}function xA(c,d){let f=new ua,v=new AbortController,A=setTimeout(()=>{v.abort(),$r(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:v.signal}).then(P=>{clearTimeout(A),P.ok?$r(f,"TestPingServer: ok",!0,d):$r(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(A),$r(f,"TestPingServer: error",!1,d)})}function $r(c,d,f,v,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),v(f)}catch{}}function AA(){this.g=new dA}function RA(c,d,f){let v=f||"";try{V_(c,function(A,P){let B=A;u(A)&&(B=_f(A)),d.push(v+P+"="+encodeURIComponent(B))})}catch(A){throw d.push(v+"type="+encodeURIComponent("_badmap")),A}}function ma(c){this.l=c.Ub||null,this.j=c.eb||!1}R(ma,wf),ma.prototype.g=function(){return new wl(this.l,this.j)},ma.prototype.i=function(c){return function(){return c}}({});function wl(c,d){It.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(wl,It),n=wl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ya(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ga(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ya(this)),this.g&&(this.readyState=3,ya(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;z_(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function z_(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ga(this):ya(this),this.readyState==3&&z_(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,ga(this))},n.Qa=function(c){this.g&&(this.response=c,ga(this))},n.ga=function(){this.g&&ga(this)};function ga(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ya(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function ya(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function G_(c){let d="";return ue(c,function(f,v){d+=v,d+=":",d+=f,d+=`\r
`}),d}function Rf(c,d,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=G_(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):He(c,d,f))}function Ye(c){It.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Ye,It);var MA=/^https?$/i,PA=["POST","PUT"];n=Ye.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ef.g(),this.v=this.o?I_(this.o):I_(Ef),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(P){W_(this,P);return}if(c=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var A in v)f.set(A,v[A]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let P of v.keys())f.set(P,v.get(P));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(P=>P.toLowerCase()=="content-type"),A=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(PA,d,void 0))||v||A||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[P,B]of f)this.g.setRequestHeader(P,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Y_(this),this.u=!0,this.g.send(c),this.u=!1}catch(P){W_(this,P)}};function W_(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,K_(c),Il(c)}function K_(c){c.A||(c.A=!0,Lt(c,"complete"),Lt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Lt(this,"complete"),Lt(this,"abort"),Il(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Il(this,!0)),Ye.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Q_(this):this.bb())},n.bb=function(){Q_(this)};function Q_(c){if(c.h&&typeof s<"u"&&(!c.v[1]||hr(c)!=4||c.Z()!=2)){if(c.u&&hr(c)==4)y_(c.Ea,0,c);else if(Lt(c,"readystatechange"),hr(c)==4){c.h=!1;try{let B=c.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var v;if(v=B===0){var A=String(c.D).match(j_)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),v=!MA.test(A?A.toLowerCase():"")}f=v}if(f)Lt(c,"complete"),Lt(c,"success");else{c.m=6;try{var P=2<hr(c)?c.g.statusText:""}catch{P=""}c.l=P+" ["+c.Z()+"]",K_(c)}}finally{Il(c)}}}}function Il(c,d){if(c.g){Y_(c);let f=c.g,v=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Lt(c,"ready");try{f.onreadystatechange=v}catch{}}}function Y_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function hr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<hr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),uA(d)}};function J_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function NA(c){let d={};c=(c.g&&2<=hr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<c.length;v++){if(oe(c[v]))continue;var f=x(c[v]);let A=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let P=d[A]||[];d[A]=P,P.push(f)}T(d,function(v){return v.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function va(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function X_(c){this.Aa=0,this.i=[],this.j=new ua,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=va("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=va("baseRetryDelayMs",5e3,c),this.cb=va("retryDelaySeedMs",1e4,c),this.Wa=va("forwardChannelMaxRetries",2,c),this.wa=va("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new N_(c&&c.concurrentRequestLimit),this.Da=new AA,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=X_.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,v){Vt(0),this.W=c,this.H=d||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=aw(this,null,this.W),El(this)};function Mf(c){if(Z_(c),c.G==3){var d=c.U++,f=dr(c.I);if(He(f,"SID",c.K),He(f,"RID",d),He(f,"TYPE","terminate"),_a(c,f),d=new Ur(c,c.j,d),d.L=2,d.v=_l(dr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=cw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),gl(d)}sw(c)}function bl(c){c.g&&(Nf(c),c.g.cancel(),c.g=null)}function Z_(c){bl(c),c.u&&(a.clearTimeout(c.u),c.u=null),Cl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function El(c){if(!O_(c.h)&&!c.s){c.s=!0;var d=c.Ga;na||d_(),ra||(na(),ra=!0),uf.add(d,c),c.B=0}}function OA(c,d){return k_(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=la(_(c.Ga,c,d),ow(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let A=new Ur(this,this.j,c),P=this.o;if(this.S&&(P?(P=w(P),S(P,this.S)):P=this.S),this.m!==null||this.O||(A.H=P,P=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=tw(this,A,d),f=dr(this.I),He(f,"RID",c),He(f,"CVER",22),this.D&&He(f,"X-HTTP-Session-Id",this.D),_a(this,f),P&&(this.O?d="headers="+encodeURIComponent(String(G_(P)))+"&"+d:this.m&&Rf(f,this.m,P)),Af(this.h,A),this.Ua&&He(f,"TYPE","init"),this.P?(He(f,"$req",d),He(f,"SID","null"),A.T=!0,Df(A,f,null)):Df(A,f,d),this.G=2}}else this.G==3&&(c?ew(this,c):this.i.length==0||O_(this.h)||ew(this))};function ew(c,d){var f;d?f=d.l:f=c.U++;let v=dr(c.I);He(v,"SID",c.K),He(v,"RID",f),He(v,"AID",c.T),_a(c,v),c.m&&c.o&&Rf(v,c.m,c.o),f=new Ur(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=tw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Af(c.h,f),Df(f,v,d)}function _a(c,d){c.H&&ue(c.H,function(f,v){He(d,v,f)}),c.l&&V_({},function(f,v){He(d,v,f)})}function tw(c,d,f){f=Math.min(c.i.length,f);var v=c.l?_(c.l.Na,c.l,c):null;e:{var A=c.i;let P=-1;for(;;){let B=["count="+f];P==-1?0<f?(P=A[0].g,B.push("ofs="+P)):P=0:B.push("ofs="+P);let je=!0;for(let pt=0;pt<f;pt++){let xe=A[pt].g,bt=A[pt].map;if(xe-=P,0>xe)P=Math.max(0,A[pt].g-100),je=!1;else try{RA(bt,B,"req"+xe+"_")}catch{v&&v(bt)}}if(je){v=B.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,v}function nw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;na||d_(),ra||(na(),ra=!0),uf.add(d,c),c.v=0}}function Pf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=la(_(c.Fa,c),ow(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,rw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=la(_(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),bl(this),rw(this))};function Nf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function rw(c){c.g=new Ur(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=dr(c.qa);He(d,"RID","rpc"),He(d,"SID",c.K),He(d,"AID",c.T),He(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&He(d,"TO",c.ja),He(d,"TYPE","xmlhttp"),_a(c,d),c.m&&c.o&&Rf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=_l(dr(d)),f.m=null,f.P=!0,R_(f,c)}n.Za=function(){this.C!=null&&(this.C=null,bl(this),Pf(this),Vt(19))};function Cl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function iw(c,d){var f=null;if(c.g==d){Cl(c),Nf(c),c.g=null;var v=2}else if(xf(c.h,d))f=d.D,F_(c.h,d),v=1;else return;if(c.G!=0){if(d.o)if(v==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var A=c.B;v=fl(),Lt(v,new S_(v,f)),El(c)}else nw(c);else if(A=d.s,A==3||A==0&&0<d.X||!(v==1&&OA(c,d)||v==2&&Pf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),A){case 1:Pi(c,5);break;case 4:Pi(c,10);break;case 3:Pi(c,6);break;default:Pi(c,2)}}}function ow(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Pi(c,d){if(c.j.info("Error code "+d),d==2){var f=_(c.fb,c),v=c.Xa;let A=!v;v=new Mi(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||yl(v,"https"),_l(v),A?TA(v.toString(),f):xA(v.toString(),f)}else Vt(2);c.G=0,c.l&&c.l.sa(d),sw(c),Z_(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function sw(c){if(c.G=0,c.ka=[],c.l){let d=L_(c.h);(d.length!=0||c.i.length!=0)&&(O(c.ka,d),O(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function aw(c,d,f){var v=f instanceof Mi?dr(f):new Mi(f);if(v.g!="")d&&(v.g=d+"."+v.g),vl(v,v.s);else{var A=a.location;v=A.protocol,d=d?d+"."+A.hostname:A.hostname,A=+A.port;var P=new Mi(null);v&&yl(P,v),d&&(P.g=d),A&&vl(P,A),f&&(P.l=f),v=P}return f=c.D,d=c.ya,f&&d&&He(v,f,d),He(v,"VER",c.la),_a(c,v),v}function cw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ye(new ma({eb:f})):new Ye(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function lw(){}n=lw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Dl(){}Dl.prototype.g=function(c,d){return new Xt(c,d)};function Xt(c,d){It.call(this),this.g=new X_(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!oe(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!oe(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new So(this)}R(Xt,It),Xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){Mf(this.g)},Xt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=_f(c),c=f);d.i.push(new yA(d.Ya++,c)),d.G==3&&El(d)},Xt.prototype.N=function(){this.g.l=null,delete this.j,Mf(this.g),delete this.g,Xt.aa.N.call(this)};function uw(c){If.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}R(uw,If);function dw(){bf.call(this),this.status=1}R(dw,bf);function So(c){this.g=c}R(So,lw),So.prototype.ua=function(){Lt(this.g,"a")},So.prototype.ta=function(c){Lt(this.g,new uw(c))},So.prototype.sa=function(c){Lt(this.g,new dw)},So.prototype.ra=function(){Lt(this.g,"b")},Dl.prototype.createWebChannel=Dl.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,Wy=Nr.createWebChannelTransport=function(){return new Dl},Gy=Nr.getStatEventTarget=function(){return fl()},zy=Nr.Event=Ai,Xd=Nr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pl.NO_ERROR=0,pl.TIMEOUT=8,pl.HTTP_ERROR=6,Pc=Nr.ErrorCode=pl,T_.COMPLETE="complete",Hy=Nr.EventType=T_,b_.EventType=aa,aa.OPEN="a",aa.CLOSE="b",aa.ERROR="c",aa.MESSAGE="d",It.prototype.listen=It.prototype.K,Ss=Nr.WebChannel=b_,yj=Nr.FetchXmlHttpFactory=ma,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,qy=Nr.XhrIo=Ye}).apply(typeof Jd<"u"?Jd:typeof self<"u"?self:typeof window<"u"?window:{});var tS="@firebase/firestore";var ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");var zs="10.14.0";var lo=new ui("@firebase/firestore");function Nc(){return lo.logLevel}function Q(n,...e){if(lo.logLevel<=De.DEBUG){let t=e.map(P0);lo.debug(`Firestore (${zs}): ${n}`,...t)}}function Or(n,...e){if(lo.logLevel<=De.ERROR){let t=e.map(P0);lo.error(`Firestore (${zs}): ${n}`,...t)}}function Ns(n,...e){if(lo.logLevel<=De.WARN){let t=e.map(P0);lo.warn(`Firestore (${zs}): ${n}`,...t)}}function P0(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ie(n="Unexpected state"){let e=`FIRESTORE (${zs}) INTERNAL ASSERTION FAILED: `+n;throw Or(e),new Error(e)}function Fe(n,e){n||ie()}function le(n,e){return n}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends En{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ln=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var rh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Xy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ft.UNAUTHENTICATED))}shutdown(){}},Zy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ev=class{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Fe(this.o===void 0);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new Ln;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ln,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>b(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ln)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe(typeof r.accessToken=="string"),new rh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new ft(e)}},tv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},nv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new tv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}},rv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},iv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Fe(this.o===void 0);let r=o=>{o.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,Q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Fe(typeof t.token=="string"),this.R=t.token,new rv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function vj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ih=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=vj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function Ae(n,e){return n<e?-1:n>e?1:0}function Os(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var vt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var fe=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new vt(0,0))}static max(){return new n(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var oh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ie(),r===void 0?r=e.length-t:r>e.length-t&&ie(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Qe=class n extends oh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},_j=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dn=class n extends oh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return _j.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new z(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ee=class n{constructor(e){this.path=e}static fromPath(e){return new n(Qe.fromString(e))}static fromName(e){return new n(Qe.fromString(e).popFirst(5))}static empty(){return new n(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Qe(e.slice()))}};var ov=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};ov.UNKNOWN_ID=-1;function wj(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=fe.fromTimestamp(r===1e9?new vt(t+1,0):new vt(t,r));return new uo(i,ee.empty(),e)}function Ij(n){return new uo(n.readTime,n.key,-1)}var uo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(fe.min(),ee.empty(),-1)}static max(){return new n(fe.max(),ee.empty(),-1)}};function bj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(n.documentKey,e.documentKey),t!==0?t:Ae(n.largestBatchId,e.largestBatchId))}var Ej="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Jc(n){return b(this,null,function*(){if(n.code!==k.FAILED_PRECONDITION||n.message!==Ej)throw n;Q("LocalStore","Unexpectedly lost primary lease")})}var L=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let u=l;t(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function Cj(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xc(n){return n.name==="IndexedDbTransactionError"}var kS=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Vh(n){return n==null}function jc(n){return n===0&&1/n==-1/0}function Dj(n){return typeof n=="number"&&Number.isInteger(n)&&!jc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Sj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],MW=[...Sj,"documentOverlays"],Tj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xj=Tj,Aj=[...xj,"indexConfiguration","indexState","indexEntries"];var PW=[...Aj,"globals"];function nS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _o(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function FS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Xe=class n{constructor(e,t){this.comparator=e,this.root=t||nr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rs(this.root,e,this.comparator,!0)}},Rs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},nr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();let e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}};nr.EMPTY=null,nr.RED=!0,nr.BLACK=!1;nr.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,t,r,i,o){return this}insert(e,t,r){return new nr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ot=class n{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sh(this.data.getIterator())}getIteratorFrom(e){return new sh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},sh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Dn=class n{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ot(dn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Os(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var ah=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var kt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ah("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};kt.EMPTY_BYTE_STRING=new kt("");var Rj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(n){if(Fe(!!n),typeof n=="string"){let e=0,t=Rj.exec(n);if(Fe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(n.seconds),nanos:We(n.nanos)}}function We(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yi(n){return typeof n=="string"?kt.fromBase64String(n):kt.fromUint8Array(n)}function N0(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function O0(n){let e=n.mapValue.fields.__previous_value__;return N0(e)?O0(e):e}function Uc(n){let e=kr(n.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}var av=class{constructor(e,t,r,i,o,s,a,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}},ch=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Zd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ho(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?N0(n)?4:VS(n)?9007199254740991:LS(n)?10:11:ie()}function or(n,e){if(n===e)return!0;let t=ho(n);if(t!==ho(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uc(n).isEqual(Uc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=kr(i.timestampValue),a=kr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return yi(i.bytesValue).isEqual(yi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return We(i.geoPointValue.latitude)===We(o.geoPointValue.latitude)&&We(i.geoPointValue.longitude)===We(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return We(i.integerValue)===We(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=We(i.doubleValue),a=We(o.doubleValue);return s===a?jc(s)===jc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Os(n.arrayValue.values||[],e.arrayValue.values||[],or);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(nS(s)!==nS(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!or(s[l],a[l])))return!1;return!0}(n,e);default:return ie()}}function Bc(n,e){return(n.values||[]).find(t=>or(t,e))!==void 0}function ks(n,e){if(n===e)return 0;let t=ho(n),r=ho(e);if(t!==r)return Ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=We(o.integerValue||o.doubleValue),l=We(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return rS(n.timestampValue,e.timestampValue);case 4:return rS(Uc(n),Uc(e));case 5:return Ae(n.stringValue,e.stringValue);case 6:return function(o,s){let a=yi(o),l=yi(s);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){let h=Ae(a[u],l[u]);if(h!==0)return h}return Ae(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Ae(We(o.latitude),We(s.latitude));return a!==0?a:Ae(We(o.longitude),We(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return iS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,u,h;let g=o.fields||{},_=s.fields||{},I=(a=g.value)===null||a===void 0?void 0:a.arrayValue,R=(l=_.value)===null||l===void 0?void 0:l.arrayValue,N=Ae(((u=I?.values)===null||u===void 0?void 0:u.length)||0,((h=R?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:iS(I,R)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Zd.mapValue&&s===Zd.mapValue)return 0;if(o===Zd.mapValue)return 1;if(s===Zd.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),u=s.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let g=0;g<l.length&&g<h.length;++g){let _=Ae(l[g],h[g]);if(_!==0)return _;let I=ks(a[l[g]],u[h[g]]);if(I!==0)return I}return Ae(l.length,h.length)}(n.mapValue,e.mapValue);default:throw ie()}}function rS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ae(n,e);let t=kr(n),r=kr(e),i=Ae(t.seconds,r.seconds);return i!==0?i:Ae(t.nanos,r.nanos)}function iS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ks(t[i],r[i]);if(o)return o}return Ae(t.length,r.length)}function Fs(n){return cv(n)}function cv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=kr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return yi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=cv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${cv(t.fields[s])}`;return i+"}"}(n.mapValue):ie()}function oS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function lv(n){return!!n&&"integerValue"in n}function k0(n){return!!n&&"arrayValue"in n}function sS(n){return!!n&&"nullValue"in n}function aS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function th(n){return!!n&&"mapValue"in n}function LS(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function kc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return _o(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=kc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function VS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var un=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!th(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kc(t)}setAll(e){let t=dn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=kc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());th(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];th(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){_o(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(kc(this.value))}};function jS(n){let e=[];return _o(n.fields,(t,r)=>{let i=new dn([t]);if(th(r)){let o=jS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Dn(e)}var Vn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,fe.min(),fe.min(),fe.min(),un.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,fe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,fe.min(),fe.min(),un.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,fe.min(),fe.min(),un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ls=class{constructor(e,t){this.position=e,this.inclusive=t}};function cS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ee.comparator(ee.fromName(s.referenceValue),t.key):r=ks(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function lS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!or(n.position[t],e.position[t]))return!1;return!0}var fo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Mj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var lh=class{},ct=class n extends lh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new dv(e,t,r):t==="array-contains"?new pv(e,r):t==="in"?new mv(e,r):t==="not-in"?new gv(e,r):t==="array-contains-any"?new yv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new hv(e,r):new fv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ks(t,this.value)):t!==null&&ho(this.value)===ho(t)&&this.matchesComparison(ks(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},jn=class n extends lh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return US(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function US(n){return n.op==="and"}function BS(n){return Pj(n)&&US(n)}function Pj(n){for(let e of n.filters)if(e instanceof jn)return!1;return!0}function uv(n){if(n instanceof ct)return n.field.canonicalString()+n.op.toString()+Fs(n.value);if(BS(n))return n.filters.map(e=>uv(e)).join(",");{let e=n.filters.map(t=>uv(t)).join(",");return`${n.op}(${e})`}}function $S(n,e){return n instanceof ct?function(r,i){return i instanceof ct&&r.op===i.op&&r.field.isEqual(i.field)&&or(r.value,i.value)}(n,e):n instanceof jn?function(r,i){return i instanceof jn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&$S(s,i.filters[a]),!0):!1}(n,e):void ie()}function qS(n){return n instanceof ct?function(t){return`${t.field.canonicalString()} ${t.op} ${Fs(t.value)}`}(n):n instanceof jn?function(t){return t.op.toString()+" {"+t.getFilters().map(qS).join(" ,")+"}"}(n):"Filter"}var dv=class extends ct{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){let t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}},hv=class extends ct{constructor(e,t){super(e,"in",t),this.keys=HS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},fv=class extends ct{constructor(e,t){super(e,"not-in",t),this.keys=HS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function HS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ee.fromName(r.referenceValue))}var pv=class extends ct{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return k0(t)&&Bc(t.arrayValue,this.value)}},mv=class extends ct{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Bc(this.value.arrayValue,t)}},gv=class extends ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Bc(this.value.arrayValue,t)}},yv=class extends ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!k0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bc(this.value.arrayValue,r))}};var vv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function uS(n,e=null,t=[],r=[],i=null,o=null,s=null){return new vv(n,e,t,r,i,o,s)}function F0(n){let e=le(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>uv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Vh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fs(r)).join(",")),e.ue=t}return e.ue}function L0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Mj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$S(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lS(n.startAt,e.startAt)&&lS(n.endAt,e.endAt)}function _v(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var vi=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Nj(n,e,t,r,i,o,s,a){return new vi(n,e,t,r,i,o,s,a)}function V0(n){return new vi(n)}function dS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zS(n){return n.collectionGroup!==null}function Fc(n){let e=le(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ot(dn.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new fo(o,r))}),t.has(dn.keyField().canonicalString())||e.ce.push(new fo(dn.keyField(),r))}return e.ce}function rr(n){let e=le(n);return e.le||(e.le=Oj(e,Fc(n))),e.le}function Oj(n,e){if(n.limitType==="F")return uS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new fo(i.field,o)});let t=n.endAt?new Ls(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ls(n.startAt.position,n.startAt.inclusive):null;return uS(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function wv(n,e){let t=n.filters.concat([e]);return new vi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function uh(n,e,t){return new vi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jh(n,e){return L0(rr(n),rr(e))&&n.limitType===e.limitType}function GS(n){return`${F0(rr(n))}|lt:${n.limitType}`}function Ts(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>qS(i)).join(", ")}]`),Vh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Fs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Fs(i)).join(",")),`Target(${r})`}(rr(n))}; limitType=${n.limitType})`}function Uh(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Fc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){let u=cS(s,a,l);return s.inclusive?u<=0:u<0}(r.startAt,Fc(r),i)||r.endAt&&!function(s,a,l){let u=cS(s,a,l);return s.inclusive?u>=0:u>0}(r.endAt,Fc(r),i))}(n,e)}function kj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function WS(n){return(e,t)=>{let r=!1;for(let i of Fc(n)){let o=Fj(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Fj(n,e,t){let r=n.field.isKeyField()?ee.comparator(e.key,t.key):function(o,s,a){let l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?ks(l,u):ie()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}var _i=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_o(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return FS(this.inner)}size(){return this.innerSize}};var Lj=new Xe(ee.comparator);function Fr(){return Lj}var KS=new Xe(ee.comparator);function Oc(...n){let e=KS;for(let t of n)e=e.insert(t.key,t);return e}function QS(n){let e=KS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function so(){return Lc()}function YS(){return Lc()}function Lc(){return new _i(n=>n.toString(),(n,e)=>n.isEqual(e))}var Vj=new Xe(ee.comparator),jj=new Ot(ee.comparator);function Se(...n){let e=jj;for(let t of n)e=e.add(t);return e}var Uj=new Ot(Ae);function Bj(){return Uj}function j0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jc(e)?"-0":e}}function JS(n){return{integerValue:""+n}}function $j(n,e){return Dj(e)?JS(e):j0(n,e)}var Vs=class{constructor(){this._=void 0}};function qj(n,e,t){return n instanceof po?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&N0(o)&&(o=O0(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof mo?ZS(n,e):n instanceof go?eT(n,e):function(i,o){let s=XS(i,o),a=hS(s)+hS(i.Pe);return lv(s)&&lv(i.Pe)?JS(a):j0(i.serializer,a)}(n,e)}function Hj(n,e,t){return n instanceof mo?ZS(n,e):n instanceof go?eT(n,e):t}function XS(n,e){return n instanceof js?function(r){return lv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var po=class extends Vs{},mo=class extends Vs{constructor(e){super(),this.elements=e}};function ZS(n,e){let t=tT(e);for(let r of n.elements)t.some(i=>or(i,r))||t.push(r);return{arrayValue:{values:t}}}var go=class extends Vs{constructor(e){super(),this.elements=e}};function eT(n,e){let t=tT(e);for(let r of n.elements)t=t.filter(i=>!or(i,r));return{arrayValue:{values:t}}}var js=class extends Vs{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function hS(n){return We(n.integerValue||n.doubleValue)}function tT(n){return k0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Iv=class{constructor(e,t){this.field=e,this.transform=t}};function zj(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof mo&&i instanceof mo||r instanceof go&&i instanceof go?Os(r.elements,i.elements,or):r instanceof js&&i instanceof js?or(r.Pe,i.Pe):r instanceof po&&i instanceof po}(n.transform,e.transform)}var bv=class{constructor(e,t){this.version=e,this.transformResults=t}},mi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function nh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Us=class{};function nT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new dh(n.key,mi.none()):new yo(n.key,n.data,mi.none());{let t=n.data,r=un.empty(),i=new Ot(dn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new sr(n.key,r,new Dn(i.toArray()),mi.none())}}function Gj(n,e,t){n instanceof yo?function(i,o,s){let a=i.value.clone(),l=pS(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof sr?function(i,o,s){if(!nh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=pS(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(rT(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Vc(n,e,t,r){return n instanceof yo?function(o,s,a,l){if(!nh(o.precondition,s))return a;let u=o.value.clone(),h=mS(o.fieldTransforms,l,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof sr?function(o,s,a,l){if(!nh(o.precondition,s))return a;let u=mS(o.fieldTransforms,l,s),h=s.data;return h.setAll(rT(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(o,s,a){return nh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function Wj(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=XS(r.transform,i||null);o!=null&&(t===null&&(t=un.empty()),t.set(r.field,o))}return t||null}function fS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Os(r,i,(o,s)=>zj(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var yo=class extends Us{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},sr=class extends Us{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function rT(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function pS(n,e,t){let r=new Map;Fe(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Hj(s,a,t[i]))}return r}function mS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,qj(o,s,e))}return r}var dh=class extends Us{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ev=class extends Us{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Cv=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Gj(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Vc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=YS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let l=nT(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Se())}isEqual(e){return this.batchId===e.batchId&&Os(this.mutations,e.mutations,(t,r)=>fS(t,r))&&Os(this.baseMutations,e.baseMutations,(t,r)=>fS(t,r))}},Dv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Fe(e.mutations.length===r.length);let i=function(){return Vj}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Sv=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Tv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var st,Te;function Kj(n){switch(n){default:return ie();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0}}function iT(n){if(n===void 0)return Or("GRPC error has no .code"),k.UNKNOWN;switch(n){case st.OK:return k.OK;case st.CANCELLED:return k.CANCELLED;case st.UNKNOWN:return k.UNKNOWN;case st.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case st.INTERNAL:return k.INTERNAL;case st.UNAVAILABLE:return k.UNAVAILABLE;case st.UNAUTHENTICATED:return k.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case st.NOT_FOUND:return k.NOT_FOUND;case st.ALREADY_EXISTS:return k.ALREADY_EXISTS;case st.PERMISSION_DENIED:return k.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case st.ABORTED:return k.ABORTED;case st.OUT_OF_RANGE:return k.OUT_OF_RANGE;case st.UNIMPLEMENTED:return k.UNIMPLEMENTED;case st.DATA_LOSS:return k.DATA_LOSS;default:return ie()}}(Te=st||(st={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";var gS=null;function Qj(){return new TextEncoder}var Yj=new pi([4294967295,4294967295],0);function yS(n){let e=Qj().encode(n),t=new $y;return t.update(e),new Uint8Array(t.digest())}function vS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new pi([t,r],0),new pi([i,o],0)]}var xv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ao(`Invalid padding: ${t}`);if(r<0)throw new ao(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ao(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ao(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=pi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(pi.fromNumber(r)));return i.compare(Yj)===1&&(i=new pi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=yS(e),[r,i]=vS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=yS(e),[r,i]=vS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ao=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var hh=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,$c.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(fe.min(),i,new Xe(Ae),Fr(),Se())}},$c=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Se(),Se(),Se())}};var Ms=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},fh=class{constructor(e,t){this.targetId=e,this.me=t}},ph=class{constructor(e,t,r=kt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},mh=class{constructor(){this.fe=0,this.ge=wS(),this.pe=kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Se(),t=Se(),r=Se();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ie()}}),new $c(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=wS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Av=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fr(),this.qe=_S(),this.Qe=new Xe(Ae)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(_v(o))if(r===0){let s=new ee(o.path);this.Ue(t,s,Vn.newNoDocument(s,fe.min()))}else Fe(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),l=a?this.Xe(a,e,s):1;if(l!==0){this.je(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}gS?.et(function(h,g,_,I,R){var N,O,H,oe,W,_e;let ze={localCacheCount:h,existenceFilterCount:g.count,databaseId:_.database,projectId:_.projectId},ue=g.unchangedNames;return ue&&(ze.bloomFilter={applied:R===0,hashCount:(N=ue?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(oe=(H=(O=ue?.bits)===null||O===void 0?void 0:O.bitmap)===null||H===void 0?void 0:H.length)!==null&&oe!==void 0?oe:0,padding:(_e=(W=ue?.bits)===null||W===void 0?void 0:W.padding)!==null&&_e!==void 0?_e:0,mightContain:T=>{var w;return(w=I?.mightContain(T))!==null&&w!==void 0&&w}}),ze}(s,e.me,this.Le.tt(),a,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=yi(r).toUint8Array()}catch(l){if(l instanceof ah)return Ns("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new xv(s,i,o)}catch(l){return Ns(l instanceof ao?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&_v(a.target)){let l=new ee(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,Vn.newNoDocument(l,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=Se();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new hh(e,t,this.Qe,this.ke,r);return this.ke=Fr(),this.qe=_S(),this.Qe=new Xe(Ae),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new mh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ot(Ae),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||Q("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new mh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function _S(){return new Xe(ee.comparator)}function wS(){return new Xe(ee.comparator)}var Jj={asc:"ASCENDING",desc:"DESCENDING"},Xj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zj={and:"AND",or:"OR"},Rv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Mv(n,e){return n.useProto3Json||Vh(e)?e:{value:e}}function gh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function eU(n,e){return gh(n,e.toTimestamp())}function ir(n){return Fe(!!n),fe.fromTimestamp(function(t){let r=kr(t);return new vt(r.seconds,r.nanos)}(n))}function U0(n,e){return Pv(n,e).canonicalString()}function Pv(n,e){let t=function(i){return new Qe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function sT(n){let e=Qe.fromString(n);return Fe(dT(e)),e}function Nv(n,e){return U0(n.databaseId,e.path)}function Ky(n,e){let t=sT(e);if(t.get(1)!==n.databaseId.projectId)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ee(cT(t))}function aT(n,e){return U0(n.databaseId,e)}function tU(n){let e=sT(n);return e.length===4?Qe.emptyPath():cT(e)}function Ov(n){return new Qe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cT(n){return Fe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function IS(n,e,t){return{name:Nv(n,e),fields:t.value.mapValue.fields}}function nU(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(Fe(h===void 0||typeof h=="string"),kt.fromBase64String(h||"")):(Fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),kt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let h=u.code===void 0?k.UNKNOWN:iT(u.code);return new z(h,u.message||"")}(s);t=new ph(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ky(n,r.document.name),o=ir(r.document.updateTime),s=r.document.createTime?ir(r.document.createTime):fe.min(),a=new un({mapValue:{fields:r.document.fields}}),l=Vn.newFoundDocument(i,o,s,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new Ms(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ky(n,r.document),o=r.readTime?ir(r.readTime):fe.min(),s=Vn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ms([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ky(n,r.document),o=r.removedTargetIds||[];t=new Ms([],o,i,null)}else{if(!("filter"in e))return ie();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Tv(i,o),a=r.targetId;t=new fh(a,s)}}return t}function rU(n,e){let t;if(e instanceof yo)t={update:IS(n,e.key,e.value)};else if(e instanceof dh)t={delete:Nv(n,e.key)};else if(e instanceof sr)t={update:IS(n,e.key,e.data),updateMask:hU(e.fieldMask)};else{if(!(e instanceof Ev))return ie();t={verify:Nv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof po)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof mo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof go)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof js)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ie()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:eU(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ie()}(n,e.precondition)),t}function iU(n,e){return n&&n.length>0?(Fe(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?ir(i.updateTime):ir(o);return s.isEqual(fe.min())&&(s=ir(o)),new bv(s,i.transformResults||[])}(t,e))):[]}function oU(n,e){return{documents:[aT(n,e.path)]}}function sU(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=aT(n,i);let o=function(u){if(u.length!==0)return uT(jn.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(h=>function(_){return{field:xs(_.field),direction:lU(_.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Mv(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function aU(n){let e=tU(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Fe(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(g){let _=lT(g);return _ instanceof jn&&BS(_)?_.getFilters():[_]}(t.where));let s=[];t.orderBy&&(s=function(g){return g.map(_=>function(R){return new fo(As(R.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(_))}(t.orderBy));let a=null;t.limit&&(a=function(g){let _;return _=typeof g=="object"?g.value:g,Vh(_)?null:_}(t.limit));let l=null;t.startAt&&(l=function(g){let _=!!g.before,I=g.values||[];return new Ls(I,_)}(t.startAt));let u=null;return t.endAt&&(u=function(g){let _=!g.before,I=g.values||[];return new Ls(I,_)}(t.endAt)),Nj(e,i,s,o,a,"F",l,u)}function cU(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=As(t.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=As(t.unaryFilter.field);return ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=As(t.unaryFilter.field);return ct.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=As(t.unaryFilter.field);return ct.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(n):n.fieldFilter!==void 0?function(t){return ct.create(As(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return jn.create(t.compositeFilter.filters.map(r=>lT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ie()}}(t.compositeFilter.op))}(n):ie()}function lU(n){return Jj[n]}function uU(n){return Xj[n]}function dU(n){return Zj[n]}function xs(n){return{fieldPath:n.canonicalString()}}function As(n){return dn.fromServerFormat(n.fieldPath)}function uT(n){return n instanceof ct?function(t){if(t.op==="=="){if(aS(t.value))return{unaryFilter:{field:xs(t.field),op:"IS_NAN"}};if(sS(t.value))return{unaryFilter:{field:xs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(aS(t.value))return{unaryFilter:{field:xs(t.field),op:"IS_NOT_NAN"}};if(sS(t.value))return{unaryFilter:{field:xs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xs(t.field),op:uU(t.op),value:t.value}}}(n):n instanceof jn?function(t){let r=t.getFilters().map(i=>uT(i));return r.length===1?r[0]:{compositeFilter:{op:dU(t.op),filters:r}}}(n):ie()}function hU(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function dT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var qc=class n{constructor(e,t,r,i,o=fe.min(),s=fe.min(),a=kt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var kv=class{constructor(e){this.ct=e}};function fU(n){let e=aU({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?uh(e,e.limit,"L"):e}var yh=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(We(e.integerValue));else if("doubleValue"in e){let r=We(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),jc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=kr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(yi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?VS(e)?this.dt(t,Number.MAX_SAFE_INTEGER):LS(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ie()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(We(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ee.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};yh.vt=new yh;var Fv=class{constructor(){this.un=new Lv}addToCollectionParentIndex(e,t){return this.un.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(uo.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(uo.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}},Lv=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ot(Qe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ot(Qe.comparator)).toArray()}};var OW=new Uint8Array(0);var tr=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};tr.DEFAULT_COLLECTION_PERCENTILE=10,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tr.DEFAULT=new tr(41943040,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tr.DISABLED=new tr(-1,0,0);var Hc=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Vv=class{constructor(){this.changes=new _i(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var jv=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Uv=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Vc(r.mutation,i,Dn.empty(),vt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Se()){let i=so();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Oc();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=so();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Se()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Fr(),s=Lc(),a=function(){return Lc()}();return t.forEach((l,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof sr)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),Vc(h.mutation,u,h.mutation.getFieldMask(),vt.now())):s.set(u.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,h)=>s.set(u,h)),t.forEach((u,h)=>{var g;return a.set(u,new jv(h,(g=s.get(u))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Lc(),i=new Xe((s,a)=>s-a),o=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let h=r.get(l)||Dn.empty();h=a.applyToLocalView(u,h),r.set(l,h);let g=(i.get(a.batchId)||Se()).add(l);i=i.insert(a.batchId,g)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,h=l.value,g=YS();h.forEach(_=>{if(!o.has(_)){let I=nT(t.get(_),r.get(_));I!==null&&g.set(_,I),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,g))}return L.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):L.resolve(so()),a=-1,l=o;return s.next(u=>L.forEach(u,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(_=>{l=l.insert(h,_)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,Se())).next(h=>({batchId:a,changes:QS(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(r=>{let i=Oc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Oc();return this.indexManager.getCollectionParents(e,o).next(a=>L.forEach(a,l=>{let u=function(g,_){return new vi(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((g,_)=>{s=s.insert(g,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,Vn.newInvalidDocument(h)))});let a=Oc();return s.forEach((l,u)=>{let h=o.get(l);h!==void 0&&Vc(h.mutation,u,Dn.empty(),vt.now()),Uh(t,u)&&(a=a.insert(l,u))}),a})}};var Bv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return L.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ir(i.createTime)}}(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:fU(i.bundledQuery),readTime:ir(i.readTime)}}(t)),L.resolve()}};var $v=class{constructor(){this.overlays=new Xe(ee.comparator),this.Ir=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){let r=so();return L.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),L.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){let i=so(),o=t.length+1,s=new ee(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Xe((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=so(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=so(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return L.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Sv(t,r));let o=this.Ir.get(t);o===void 0&&(o=Se(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var qv=class{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}};var zc=class{constructor(){this.Tr=new Ot(at.Er),this.dr=new Ot(at.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new at(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new at(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new ee(new Qe([])),r=new at(t,e),i=new at(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new ee(new Qe([])),r=new at(t,e),i=new at(t,e+1),o=Se();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new at(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},at=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ee.comparator(e.key,t.key)||Ae(e.wr,t.wr)}static Ar(e,t){return Ae(e.wr,t.wr)||ee.comparator(e.key,t.key)}};var Hv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ot(at.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Cv(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new at(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(s)}lookupMutationBatch(e,t){return L.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return L.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new at(t,0),i=new at(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),L.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ot(Ae);return t.forEach(i=>{let o=new at(i,0),s=new at(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),L.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ee.isDocumentKey(o)||(o=o.child(""));let s=new at(new ee(o),0),a=new Ot(Ae);return this.br.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},s),L.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Fe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return L.forEach(t.mutations,i=>{let o=new at(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new at(t,0),i=this.br.firstAfterOrEqual(r);return L.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var zv=class{constructor(e){this.Mr=e,this.docs=function(){return new Xe(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():Vn.newInvalidDocument(t))}getEntries(e,t){let r=Fr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Vn.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Fr(),s=t.path,a=new ee(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:h}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||bj(Ij(h),r)<=0||(i.has(h.key)||Uh(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return L.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ie()}Or(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Gv(this)}getSize(e){return L.resolve(this.size)}},Gv=class extends Vv{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Wv=class{constructor(e){this.persistence=e,this.Nr=new _i(t=>F0(t),L0),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new zc,this.targetCount=0,this.kr=Hc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),L.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Hc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Kn(t),L.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(o).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),L.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),L.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.Br.containsKey(t))}};var Kv=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new kS(0),this.Kr=!1,this.Kr=!0,this.$r=new qv,this.referenceDelegate=e(this),this.Ur=new Wv(this),this.indexManager=new Fv,this.remoteDocumentCache=function(i){return new zv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new kv(t),this.Gr=new Bv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $v,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Hv(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Q("MemoryPersistence","Starting transaction:",e);let i=new Qv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return L.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Qv=class extends sv{constructor(e){super(),this.currentSequenceNumber=e}},Yv=class n{constructor(e){this.persistence=e,this.Jr=new zc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),L.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,r=>{let i=ee.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,fe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return L.or([()=>L.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Jv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Se(),i=Se();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Xv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Zv=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return gD()?8:Cj(ln())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Xv;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Nc()<=De.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Ts(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(Nc()<=De.DEBUG&&Q("QueryEngine","Query:",Ts(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Nc()<=De.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Ts(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rr(t))):L.resolve())}Yi(e,t){if(dS(t))return L.resolve(null);let r=rr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=uh(t,null,"F"),r=rr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Se(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.ts(t,a);return this.ns(t,u,s,l.readTime)?this.Yi(e,uh(t,null,"F")):this.rs(e,u,t,l)}))})))}Zi(e,t,r,i){return dS(t)||i.isEqual(fe.min())?L.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?L.resolve(null):(Nc()<=De.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ts(t)),this.rs(e,s,t,wj(i,-1)).next(a=>a))})}ts(e,t){let r=new Ot(WS(e));return t.forEach((i,o)=>{Uh(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Nc()<=De.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Ts(t)),this.Ji.getDocumentsMatchingQuery(e,t,uo.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var e0=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Xe(Ae),this._s=new _i(o=>F0(o),L0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Uv(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function pU(n,e,t,r){return new e0(n,e,t,r)}function hT(n,e){return b(this,null,function*(){let t=le(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],l=Se();for(let u of i){s.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function mU(n,e){let t=le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){let g=u.batch,_=g.keys(),I=L.resolve();return _.forEach(R=>{I=I.next(()=>h.getEntry(l,R)).next(N=>{let O=u.docVersions.get(R);Fe(O!==null),N.version.compareTo(O)<0&&(g.applyToRemoteDocument(N,u),N.isValidDocument()&&(N.setReadTime(u.commitVersion),h.addEntry(N)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(l,g))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Se();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function fT(n){let e=le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function gU(n,e){let t=le(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,g)=>{let _=i.get(g);if(!_)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,g)));let I=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?I=I.withResumeToken(kt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):h.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(h.resumeToken,r)),i=i.insert(g,I),function(N,O,H){return N.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(_,I,h)&&a.push(t.Ur.updateTargetData(o,I))});let l=Fr(),u=Se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(yU(o,s,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!r.isEqual(fe.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(g=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(t.os=i,o))}function yU(n,e,t){let r=Se(),i=Se();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Fr();return t.forEach((a,l)=>{let u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(fe.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:s,Is:i}})}function vU(n,e){let t=le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _U(n,e){let t=le(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,L.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new qc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function t0(n,e,t){return b(this,null,function*(){let r=le(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Xc(s))throw s;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function bS(n,e,t){let r=le(n),i=fe.min(),o=Se();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,h){let g=le(l),_=g._s.get(h);return _!==void 0?L.resolve(g.os.get(_)):g.Ur.getTargetData(u,h)}(r,s,rr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:fe.min(),t?o:Se())).next(a=>(wU(r,kj(e),a),{documents:a,Ts:o})))}function wU(n,e,t){let r=n.us.get(e)||fe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var vh=class{constructor(){this.activeTargetIds=Bj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var n0=class{constructor(){this.so=new vh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new vh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var r0=class{_o(e){}shutdown(){}};var _h=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var eh=null;function Qy(){return eh===null?eh=function(){return 268435456+Math.round(2147483648*Math.random())}():eh++,"0x"+eh.toString(16)}var IU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var i0=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Nt="WebChannelConnection",o0=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Qy(),l=this.xo(t,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,s),this.No(t,l,u,i).then(h=>(Q("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Ns("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=IU[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Qy();return new Promise((s,a)=>{let l=new qy;l.setWithCredentials(!0),l.listenOnce(Hy.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Pc.NO_ERROR:let h=l.getResponseJson();Q(Nt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Pc.TIMEOUT:Q(Nt,`RPC '${e}' ${o} timed out`),a(new z(k.DEADLINE_EXCEEDED,"Request time out"));break;case Pc.HTTP_ERROR:let g=l.getStatus();if(Q(Nt,`RPC '${e}' ${o} failed with status:`,g,"response text:",l.getResponseText()),g>0){let _=l.getResponseJson();Array.isArray(_)&&(_=_[0]);let I=_?.error;if(I&&I.status&&I.message){let R=function(O){let H=O.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(H)>=0?H:k.UNKNOWN}(I.status);a(new z(R,I.message))}else a(new z(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new z(k.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{Q(Nt,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);Q(Nt,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",u,r,15)})}Bo(e,t,r){let i=Qy(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Wy(),a=Gy(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let h=o.join("");Q(Nt,`Creating RPC '${e}' stream ${i}: ${h}`,l);let g=s.createWebChannel(h,l),_=!1,I=!1,R=new i0({Io:O=>{I?Q(Nt,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(_||(Q(Nt,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),Q(Nt,`RPC '${e}' stream ${i} sending:`,O),g.send(O))},To:()=>g.close()}),N=(O,H,oe)=>{O.listen(H,W=>{try{oe(W)}catch(_e){setTimeout(()=>{throw _e},0)}})};return N(g,Ss.EventType.OPEN,()=>{I||(Q(Nt,`RPC '${e}' stream ${i} transport opened.`),R.yo())}),N(g,Ss.EventType.CLOSE,()=>{I||(I=!0,Q(Nt,`RPC '${e}' stream ${i} transport closed`),R.So())}),N(g,Ss.EventType.ERROR,O=>{I||(I=!0,Ns(Nt,`RPC '${e}' stream ${i} transport errored:`,O),R.So(new z(k.UNAVAILABLE,"The operation could not be completed")))}),N(g,Ss.EventType.MESSAGE,O=>{var H;if(!I){let oe=O.data[0];Fe(!!oe);let W=oe,_e=W.error||((H=W[0])===null||H===void 0?void 0:H.error);if(_e){Q(Nt,`RPC '${e}' stream ${i} received error:`,_e);let ze=_e.status,ue=function(E){let S=st[E];if(S!==void 0)return iT(S)}(ze),T=_e.message;ue===void 0&&(ue=k.INTERNAL,T="Unknown error status: "+ze+" with message "+_e.message),I=!0,R.So(new z(ue,T)),g.close()}else Q(Nt,`RPC '${e}' stream ${i} received:`,oe),R.bo(oe)}}),N(a,zy.STAT_EVENT,O=>{O.stat===Xd.PROXY?Q(Nt,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Xd.NOPROXY&&Q(Nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}};function Yy(){return typeof document<"u"?document:null}function Bh(n){return new Rv(n,!0)}var wh=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Ih=class{constructor(e,t,r,i,o,s,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new wh(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return b(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return b(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return b(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===k.RESOURCE_EXHAUSTED?(Or(t.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new z(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>b(this,null,function*(){this.state=0,this.start()}))}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},s0=class extends Ih{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=nU(this.serializer,e),r=function(o){if(!("targetChange"in o))return fe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?fe.min():s.readTime?ir(s.readTime):fe.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Ov(this.serializer),t.addTarget=function(o,s){let a,l=s.target;if(a=_v(l)?{documents:oU(o,l)}:{query:sU(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=oT(o,s.resumeToken);let u=Mv(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(fe.min())>0){a.readTime=gh(o,s.snapshotVersion.toTimestamp());let u=Mv(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=cU(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Ov(this.serializer),t.removeTarget=e,this.a_(t)}},a0=class extends Ih{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=iU(e.writeResults,e.commitTime),r=ir(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Ov(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>rU(this.serializer,r))};this.a_(t)}};var c0=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Pv(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(k.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Pv(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(k.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},l0=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Or(t),this.D_=!1):Q("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var u0=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>b(this,null,function*(){wo(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),yield function(l){return b(this,null,function*(){let u=le(l);u.L_.add(4),yield Zc(u),u.q_.set("Unknown"),u.L_.delete(4),yield $h(u)})}(this))}))}),this.q_=new l0(r,i)}};function $h(n){return b(this,null,function*(){if(wo(n))for(let e of n.B_)yield e(!0)})}function Zc(n){return b(this,null,function*(){for(let e of n.B_)yield e(!1)})}function pT(n,e){let t=le(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),H0(t)?q0(t):Gs(t).r_()&&$0(t,e))}function B0(n,e){let t=le(n),r=Gs(t);t.N_.delete(e),r.r_()&&mT(t,e),t.N_.size===0&&(r.r_()?r.o_():wo(t)&&t.q_.set("Unknown"))}function $0(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gs(n).A_(e)}function mT(n,e){n.Q_.xe(e),Gs(n).R_(e)}function q0(n){n.Q_=new Av({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Gs(n).start(),n.q_.v_()}function H0(n){return wo(n)&&!Gs(n).n_()&&n.N_.size>0}function wo(n){return le(n).L_.size===0}function gT(n){n.Q_=void 0}function bU(n){return b(this,null,function*(){n.q_.set("Online")})}function EU(n){return b(this,null,function*(){n.N_.forEach((e,t)=>{$0(n,e)})})}function CU(n,e){return b(this,null,function*(){gT(n),H0(n)?(n.q_.M_(e),q0(n)):n.q_.set("Unknown")})}function DU(n,e,t){return b(this,null,function*(){if(n.q_.set("Online"),e instanceof ph&&e.state===2&&e.cause)try{yield function(i,o){return b(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bh(n,r)}else if(e instanceof Ms?n.Q_.Ke(e):e instanceof fh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(fe.min()))try{let r=yield fT(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let h=o.N_.get(u);h&&o.N_.set(u,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{let h=o.N_.get(l);if(!h)return;o.N_.set(l,h.withResumeToken(kt.EMPTY_BYTE_STRING,h.snapshotVersion)),mT(o,l);let g=new qc(h.target,l,u,h.sequenceNumber);$0(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),yield bh(n,r)}})}function bh(n,e,t){return b(this,null,function*(){if(!Xc(e))throw e;n.L_.add(1),yield Zc(n),n.q_.set("Offline"),t||(t=()=>fT(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){Q("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield $h(n)}))})}function yT(n,e){return e().catch(t=>bh(n,t,e))}function qh(n){return b(this,null,function*(){let e=le(n),t=wi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;SU(e);)try{let i=yield vU(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,TU(e,i)}catch(i){yield bh(e,i)}vT(e)&&_T(e)})}function SU(n){return wo(n)&&n.O_.length<10}function TU(n,e){n.O_.push(e);let t=wi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function vT(n){return wo(n)&&!wi(n).n_()&&n.O_.length>0}function _T(n){wi(n).start()}function xU(n){return b(this,null,function*(){wi(n).p_()})}function AU(n){return b(this,null,function*(){let e=wi(n);for(let t of n.O_)e.m_(t.mutations)})}function RU(n,e,t){return b(this,null,function*(){let r=n.O_.shift(),i=Dv.from(r,e,t);yield yT(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield qh(n)})}function MU(n,e){return b(this,null,function*(){e&&wi(n).V_&&(yield function(r,i){return b(this,null,function*(){if(function(s){return Kj(s)&&s!==k.ABORTED}(i.code)){let o=r.O_.shift();wi(r).s_(),yield yT(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield qh(r)}})}(n,e)),vT(n)&&_T(n)})}function ES(n,e){return b(this,null,function*(){let t=le(n);t.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");let r=wo(t);t.L_.add(3),yield Zc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield $h(t)})}function PU(n,e){return b(this,null,function*(){let t=le(n);e?(t.L_.delete(2),yield $h(t)):e||(t.L_.add(2),yield Zc(t),t.q_.set("Unknown"))})}function Gs(n){return n.K_||(n.K_=function(t,r,i){let o=le(t);return o.w_(),new s0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:bU.bind(null,n),Ro:EU.bind(null,n),mo:CU.bind(null,n),d_:DU.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.K_.s_(),H0(n)?q0(n):n.q_.set("Unknown")):(yield n.K_.stop(),gT(n))}))),n.K_}function wi(n){return n.U_||(n.U_=function(t,r,i){let o=le(t);return o.w_(),new a0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:xU.bind(null,n),mo:MU.bind(null,n),f_:AU.bind(null,n),g_:RU.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.U_.s_(),yield qh(n)):(yield n.U_.stop(),n.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var d0=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function z0(n,e){if(Or("AsyncQueue",`${e}: ${n}`),Xc(n))return new z(k.UNAVAILABLE,`${e}: ${n}`);throw n}var Eh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=Oc(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Ch=class{constructor(){this.W_=new Xe(ee.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Bs=class n{constructor(e,t,r,i,o,s,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Eh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var h0=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},f0=class{constructor(){this.queries=CS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=le(t),o=i.queries;i.queries=CS(),o.forEach((s,a)=>{for(let l of a.j_)l.onError(r)})})(this,new z(k.ABORTED,"Firestore shutting down"))}};function CS(){return new _i(n=>GS(n),jh)}function wT(n,e){return b(this,null,function*(){let t=le(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new h0,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=z0(s,`Initialization of query '${Ts(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&G0(t)})}function IT(n,e){return b(this,null,function*(){let t=le(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function NU(n,e){let t=le(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&G0(t)}function OU(n,e,t){let r=le(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function G0(n){n.Y_.forEach(e=>{e.next()})}var p0,DS;(DS=p0||(p0={})).ea="default",DS.Cache="cache";var Dh=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==p0.Cache}};var Sh=class{constructor(e){this.key=e}},Th=class{constructor(e){this.key=e}},m0=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Se(),this.mutatedKeys=Se(),this.Aa=WS(e),this.Ra=new Eh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Ch,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let _=i.get(h),I=Uh(this.query,g)?g:null,R=!!_&&this.mutatedKeys.has(_.key),N=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),O=!1;_&&I?_.data.isEqual(I.data)?R!==N&&(r.track({type:3,doc:I}),O=!0):this.ga(_,I)||(r.track({type:2,doc:I}),O=!0,(l&&this.Aa(I,l)>0||u&&this.Aa(I,u)<0)&&(a=!0)):!_&&I?(r.track({type:0,doc:I}),O=!0):_&&!I&&(r.track({type:1,doc:_}),O=!0,(l||u)&&(a=!0)),O&&(I?(s=s.add(I),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,g)=>function(I,R){let N=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return N(I)-N(R)}(h.type,g.type)||this.Aa(h.doc,g.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,s.length!==0||u?{snapshot:new Bs(this.query,e.Ra,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ch,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Th(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Sh(r))}),t}ba(e){this.Ta=e.Ts,this.da=Se();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Bs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},g0=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},y0=class{constructor(e){this.key=e,this.va=!1}},v0=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new _i(a=>GS(a),jh),this.Ma=new Map,this.xa=new Set,this.Oa=new Xe(ee.comparator),this.Na=new Map,this.La=new zc,this.Ba={},this.ka=new Map,this.qa=Hc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function kU(n,e,t=!0){return b(this,null,function*(){let r=TT(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield bT(r,e,t,!0),i})}function FU(n,e){return b(this,null,function*(){let t=TT(n);yield bT(t,e,!0,!1)})}function bT(n,e,t,r){return b(this,null,function*(){let i=yield _U(n.localStore,rr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield LU(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&pT(n.remoteStore,i),a})}function LU(n,e,t,r,i){return b(this,null,function*(){n.Ka=(g,_,I)=>function(N,O,H,oe){return b(this,null,function*(){let W=O.view.ma(H);W.ns&&(W=yield bS(N.localStore,O.query,!1).then(({documents:T})=>O.view.ma(T,W)));let _e=oe&&oe.targetChanges.get(O.targetId),ze=oe&&oe.targetMismatches.get(O.targetId)!=null,ue=O.view.applyChanges(W,N.isPrimaryClient,_e,ze);return TS(N,O.targetId,ue.wa),ue.snapshot})}(n,g,_,I);let o=yield bS(n.localStore,e,!0),s=new m0(e,o.Ts),a=s.ma(o.documents),l=$c.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,l);TS(n,t,u.wa);let h=new g0(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot})}function VU(n,e,t){return b(this,null,function*(){let r=le(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!jh(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield t0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&B0(r.remoteStore,i.targetId),_0(r,i.targetId)}).catch(Jc))):(_0(r,i.targetId),yield t0(r.localStore,i.targetId,!0))})}function jU(n,e){return b(this,null,function*(){let t=le(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),B0(t.remoteStore,r.targetId))})}function UU(n,e,t){return b(this,null,function*(){let r=WU(n);try{let i=yield function(s,a){let l=le(s),u=vt.now(),h=a.reduce((I,R)=>I.add(R.key),Se()),g,_;return l.persistence.runTransaction("Locally write mutations","readwrite",I=>{let R=Fr(),N=Se();return l.cs.getEntries(I,h).next(O=>{R=O,R.forEach((H,oe)=>{oe.isValidDocument()||(N=N.add(H))})}).next(()=>l.localDocuments.getOverlayedDocuments(I,R)).next(O=>{g=O;let H=[];for(let oe of a){let W=Wj(oe,g.get(oe.key).overlayedDocument);W!=null&&H.push(new sr(oe.key,W,jS(W.value.mapValue),mi.exists(!0)))}return l.mutationQueue.addMutationBatch(I,u,H,a)}).next(O=>{_=O;let H=O.applyToLocalDocumentSet(g,N);return l.documentOverlayCache.saveOverlays(I,O.batchId,H)})}).then(()=>({batchId:_.batchId,changes:QS(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let u=s.Ba[s.currentUser.toKey()];u||(u=new Xe(Ae)),u=u.insert(a,l),s.Ba[s.currentUser.toKey()]=u}(r,i.batchId,t),yield el(r,i.changes),yield qh(r.remoteStore)}catch(i){let o=z0(i,"Failed to persist write");t.reject(o)}})}function ET(n,e){return b(this,null,function*(){let t=le(n);try{let r=yield gU(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Fe(s.va):i.removedDocuments.size>0&&(Fe(s.va),s.va=!1))}),yield el(t,r,e)}catch(r){yield Jc(r)}})}function SS(n,e,t){let r=le(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let l=le(s);l.onlineState=a;let u=!1;l.queries.forEach((h,g)=>{for(let _ of g.j_)_.Z_(a)&&(u=!0)}),u&&G0(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function BU(n,e,t){return b(this,null,function*(){let r=le(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Xe(ee.comparator);s=s.insert(o,Vn.newNoDocument(o,fe.min()));let a=Se().add(o),l=new hh(fe.min(),new Map,new Xe(Ae),s,a);yield ET(r,l),r.Oa=r.Oa.remove(o),r.Na.delete(e),W0(r)}else yield t0(r.localStore,e,!1).then(()=>_0(r,e,t)).catch(Jc)})}function $U(n,e){return b(this,null,function*(){let t=le(n),r=e.batch.batchId;try{let i=yield mU(t.localStore,e);DT(t,r,null),CT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield el(t,i)}catch(i){yield Jc(i)}})}function qU(n,e,t){return b(this,null,function*(){let r=le(n);try{let i=yield function(s,a){let l=le(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(g=>(Fe(g!==null),h=g.keys(),l.mutationQueue.removeMutationBatch(u,g))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);DT(r,e,t),CT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield el(r,i)}catch(i){yield Jc(i)}})}function CT(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function DT(n,e,t){let r=le(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function _0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||ST(n,r)})}function ST(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(B0(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),W0(n))}function TS(n,e,t){for(let r of t)r instanceof Sh?(n.La.addReference(r.key,e),HU(n,r)):r instanceof Th?(Q("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||ST(n,r.key)):ie()}function HU(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Q("SyncEngine","New document in limbo: "+t),n.xa.add(r),W0(n))}function W0(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new ee(Qe.fromString(e)),r=n.qa.next();n.Na.set(r,new y0(t)),n.Oa=n.Oa.insert(t,r),pT(n.remoteStore,new qc(rr(V0(t.path)),r,"TargetPurposeLimboResolution",kS.oe))}}function el(n,e,t){return b(this,null,function*(){let r=le(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{s.push(r.Ka(l,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){let g=u?!u.fromCache:(h=t?.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(u){i.push(u);let g=Jv.Wi(l.targetId,u);o.push(g)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(l,u){return b(this,null,function*(){let h=le(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>L.forEach(u,_=>L.forEach(_.$i,I=>h.persistence.referenceDelegate.addReference(g,_.targetId,I)).next(()=>L.forEach(_.Ui,I=>h.persistence.referenceDelegate.removeReference(g,_.targetId,I)))))}catch(g){if(!Xc(g))throw g;Q("LocalStore","Failed to update sequence numbers: "+g)}for(let g of u){let _=g.targetId;if(!g.fromCache){let I=h.os.get(_),R=I.snapshotVersion,N=I.withLastLimboFreeSnapshotVersion(R);h.os=h.os.insert(_,N)}}})}(r.localStore,o))})}function zU(n,e){return b(this,null,function*(){let t=le(n);if(!t.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());let r=yield hT(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(l=>{l.reject(new z(k.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield el(t,r.hs)}})}function GU(n,e){let t=le(n),r=t.Na.get(e);if(r&&r.va)return Se().add(r.key);{let i=Se(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function TT(n){let e=le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ET.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BU.bind(null,e),e.Ca.d_=NU.bind(null,e.eventManager),e.Ca.$a=OU.bind(null,e.eventManager),e}function WU(n){let e=le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$U.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qU.bind(null,e),e}var xS=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=Bh(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return pU(this.persistence,new Zv,t.initialUser,this.serializer)}Ga(t){return new Kv(Yv.Zr,this.serializer)}Wa(t){return new n0}terminate(){return b(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var KU=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>SS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=zU.bind(null,this.syncEngine),yield PU(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new f0}()}createDatastore(t){let r=Bh(t.databaseInfo.databaseId),i=function(s){return new o0(s)}(t.databaseInfo);return function(s,a,l,u){return new c0(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,l){return new u0(i,o,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,r=>SS(this.syncEngine,r,0),function(){return _h.D()?new _h:new r0}())}createSyncEngine(t,r){return function(o,s,a,l,u,h,g){let _=new v0(o,s,a,l,u,h);return g&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var t,r;yield function(o){return b(this,null,function*(){let s=le(o);Q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Zc(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var xh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var w0=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ft.UNAUTHENTICATED,this.clientId=ih.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>b(this,null,function*(){Q("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(Q("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=z0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Jy(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield hT(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function AS(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield QU(n);Q("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ES(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>ES(e.remoteStore,i)),n._onlineComponents=e})}function QU(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Jy(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ns("Error using user provided cache. Falling back to memory cache: "+t),yield Jy(n,new xS)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),yield Jy(n,new xS);return n._offlineComponents})}function xT(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),yield AS(n,n._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),yield AS(n,new KU))),n._onlineComponents})}function YU(n){return xT(n).then(e=>e.syncEngine)}function AT(n){return b(this,null,function*(){let e=yield xT(n),t=e.eventManager;return t.onListen=kU.bind(null,e.syncEngine),t.onUnlisten=VU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=FU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jU.bind(null,e.syncEngine),t})}function JU(n,e,t={}){let r=new Ln;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(o,s,a,l,u){let h=new xh({next:_=>{h.Za(),s.enqueueAndForget(()=>IT(o,g));let I=_.docs.has(a);!I&&_.fromCache?u.reject(new z(k.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&_.fromCache&&l&&l.source==="server"?u.reject(new z(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),g=new Dh(V0(a.path),h,{includeMetadataChanges:!0,_a:!0});return wT(o,g)}(yield AT(n),n.asyncQueue,e,t,r)})),r.promise}function XU(n,e,t={}){let r=new Ln;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(o,s,a,l,u){let h=new xh({next:_=>{h.Za(),s.enqueueAndForget(()=>IT(o,g)),_.fromCache&&l.source==="server"?u.reject(new z(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),g=new Dh(a,h,{includeMetadataChanges:!0,_a:!0});return wT(o,g)}(yield AT(n),n.asyncQueue,e,t,r)})),r.promise}function RT(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var RS=new Map;function MT(n,e,t){if(!t)throw new z(k.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ZU(n,e,t,r){if(e===!0&&r===!0)throw new z(k.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MS(n){if(!ee.isDocumentKey(n))throw new z(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function PS(n){if(ee.isDocumentKey(n))throw new z(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Hh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ie()}function Lr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Hh(n);throw new z(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function e4(n,e){if(e<=0)throw new z(k.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Ah=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},$s=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ah({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ah(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Xy;switch(r.type){case"firstParty":return new nv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=RS.get(t);r&&(Q("ComponentProvider","Removing Datastore"),RS.delete(t),r.terminate())}(this),Promise.resolve()}};function PT(n,e,t,r={}){var i;let o=(n=Lr(n,$s))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Ns("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ft.MOCK_USER;else{a=dD(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new z(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ft(u)}n._authCredentials=new Zy(new rh(a,l))}}var Ii=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ht=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},gi=class n extends Ii{constructor(e,t,r){super(e,t,V0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new ee(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function NT(n,e,...t){if(n=qt(n),MT("collection","path",e),n instanceof $s){let r=Qe.fromString(e,...t);return PS(r),new gi(n,null,r)}{if(!(n instanceof Ht||n instanceof gi))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Qe.fromString(e,...t));return PS(r),new gi(n.firestore,null,r)}}function OT(n,e,...t){if(n=qt(n),arguments.length===1&&(e=ih.newId()),MT("doc","path",e),n instanceof $s){let r=Qe.fromString(e,...t);return MS(r),new Ht(n,null,new ee(r))}{if(!(n instanceof Ht||n instanceof gi))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Qe.fromString(e,...t));return MS(r),new Ht(n.firestore,n instanceof gi?n.converter:null,new ee(r))}}var Rh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new wh(this,"async_queue_retry"),this.Vu=()=>{let r=Yy();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Yy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Yy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Ln;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return b(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Xc(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Or("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=d0.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ie()}verifyOperationInProgress(){}wu(){return b(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var vo=class extends $s{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Rh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Rh(e),this._firestoreClient=void 0,yield e}})}};function kT(n,e){let t=typeof n=="object"?n:bc(),r=typeof n=="string"?n:e||"(default)",i=Ey(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=lD("firestore");o&&PT(i,...o)}return i}function K0(n){if(n._terminated)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||t4(n),n._firestoreClient}function t4(n){var e,t,r;let i=n._freezeSettings(),o=function(a,l,u,h){return new av(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,RT(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new w0(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}var Gc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(kt.fromBase64String(e))}catch(t){throw new z(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var qs=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Hs=class{constructor(e){this._methodName=e}};var Wc=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}};var Kc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var n4=/^__.*__$/,I0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new sr(e,this.data,this.fieldMask,t,this.fieldTransforms):new yo(e,this.data,t,this.fieldTransforms)}},Mh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new sr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function FT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}var b0=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Nh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(FT(this.Cu)&&n4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},E0=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Bh(e)}Qu(e,t,r,i=!1){return new b0({Cu:e,methodName:t,qu:r,path:dn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Q0(n){let e=n._freezeSettings(),t=Bh(n._databaseId);return new E0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function r4(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);Y0("Data must be an object, but it was:",s,r);let a=LT(r,s),l,u;if(o.merge)l=new Dn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let g of o.mergeFields){let _=D0(e,g,t);if(!s.contains(_))throw new z(k.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);jT(h,_)||h.push(_)}l=new Dn(h),u=s.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,u=s.fieldTransforms;return new I0(new un(a),l,u)}var Ph=class n extends Hs{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var C0=class n extends Hs{_toFieldTransform(e){return new Iv(e.path,new po)}isEqual(e){return e instanceof n}};function i4(n,e,t,r){let i=n.Qu(1,e,t);Y0("Data must be an object, but it was:",i,r);let o=[],s=un.empty();_o(r,(l,u)=>{let h=J0(e,l,t);u=qt(u);let g=i.Nu(h);if(u instanceof Ph)o.push(h);else{let _=tl(u,g);_!=null&&(o.push(h),s.set(h,_))}});let a=new Dn(o);return new Mh(s,a,i.fieldTransforms)}function o4(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[D0(e,r,t)],l=[i];if(o.length%2!=0)throw new z(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)a.push(D0(e,o[_])),l.push(o[_+1]);let u=[],h=un.empty();for(let _=a.length-1;_>=0;--_)if(!jT(u,a[_])){let I=a[_],R=l[_];R=qt(R);let N=s.Nu(I);if(R instanceof Ph)u.push(I);else{let O=tl(R,N);O!=null&&(u.push(I),h.set(I,O))}}let g=new Dn(u);return new Mh(h,g,s.fieldTransforms)}function s4(n,e,t,r=!1){return tl(t,n.Qu(r?4:3,e))}function tl(n,e){if(VT(n=qt(n)))return Y0("Unsupported field value:",e,n),LT(n,e);if(n instanceof Hs)return function(r,i){if(!FT(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let l=tl(a,i.Lu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $j(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=vt.fromDate(r);return{timestampValue:gh(i.serializer,o)}}if(r instanceof vt){let o=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gh(i.serializer,o)}}if(r instanceof Wc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gc)return{bytesValue:oT(i.serializer,r._byteString)};if(r instanceof Ht){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:U0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Kc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return j0(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Hh(r)}`)}(n,e)}function LT(n,e){let t={};return FS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_o(n,(r,i)=>{let o=tl(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function VT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vt||n instanceof Wc||n instanceof Gc||n instanceof Ht||n instanceof Hs||n instanceof Kc)}function Y0(n,e,t){if(!VT(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Hh(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function D0(n,e,t){if((e=qt(e))instanceof qs)return e._internalPath;if(typeof e=="string")return J0(n,e);throw Nh("Field path arguments must be of type string or ",n,!1,void 0,t)}var a4=new RegExp("[~\\*/\\[\\]]");function J0(n,e,t){if(e.search(a4)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qs(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new z(k.INVALID_ARGUMENT,a+n+l)}function jT(n,e){return n.some(t=>t.isEqual(e))}var Oh=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new S0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(zh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},S0=class extends Oh{data(){return super.data()}};function zh(n,e){return typeof e=="string"?J0(n,e):e instanceof qs?e._internalPath:e._delegate._internalPath}function c4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qc=class{},Yc=class extends Qc{};function UT(n,e,...t){let r=[];e instanceof Qc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(l=>l instanceof T0).length,a=o.filter(l=>l instanceof kh).length;if(s>1||s>0&&a>0)throw new z(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var kh=class n extends Yc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return HT(e._query,t),new Ii(e.firestore,e.converter,wv(e._query,t))}_parse(e){let t=Q0(e.firestore);return function(o,s,a,l,u,h,g){let _;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){OS(g,h);let I=[];for(let R of g)I.push(NS(l,o,R));_={arrayValue:{values:I}}}else _=NS(l,o,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||OS(g,h),_=s4(a,s,g,h==="in"||h==="not-in");return ct.create(u,h,_)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function BT(n,e,t){let r=e,i=zh("where",n);return kh._create(i,r,t)}var T0=class n extends Qc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:jn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let l of a)HT(s,l),s=wv(s,l)}(e._query,t),new Ii(e.firestore,e.converter,wv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var x0=class n extends Yc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fo(o,s)}(e._query,this._field,this._direction);return new Ii(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new vi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function $T(n,e="asc"){let t=e,r=zh("orderBy",n);return x0._create(r,t)}var A0=class n extends Yc{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Ii(e.firestore,e.converter,uh(e._query,this._limit,this._limitType))}};function qT(n){return e4("limit",n),A0._create("limit",n,"F")}function NS(n,e,t){if(typeof(t=qt(t))=="string"){if(t==="")throw new z(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zS(e)&&t.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Qe.fromString(t));if(!ee.isDocumentKey(r))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return oS(n,new ee(r))}if(t instanceof Ht)return oS(n,t._key);throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hh(t)}.`)}function OS(n,e){if(!Array.isArray(n)||n.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HT(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var R0=class{convertValue(e,t="none"){switch(ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return _o(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>We(s.doubleValue));return new Kc(o)}convertGeoPoint(e){return new Wc(We(e.latitude),We(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=O0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Uc(e));default:return null}}convertTimestamp(e){let t=kr(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Qe.fromString(e);Fe(dT(r));let i=new ch(r.get(1),r.get(3)),o=new ee(r.popFirst(5));return i.isEqual(t)||Or(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function l4(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var co=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Fh=class extends Oh{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ps(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(zh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ps=class extends Fh{data(e={}){return super.data(e)}},M0=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new co(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ps(this._firestore,this._userDataWriter,r.key,r,new co(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let l=new Ps(i._firestore,i._userDataWriter,a.doc.key,a.doc,new co(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new Ps(i._firestore,i._userDataWriter,a.doc.key,a.doc,new co(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:u4(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function u4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}function zT(n){n=Lr(n,Ht);let e=Lr(n.firestore,vo);return JU(K0(e),n._key).then(t=>d4(e,n,t))}var Lh=class extends R0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}};function GT(n){n=Lr(n,Ii);let e=Lr(n.firestore,vo),t=K0(e),r=new Lh(e);return c4(n._query),XU(t,n._query).then(i=>new M0(e,r,n,i))}function WT(n,e,t){n=Lr(n,Ht);let r=Lr(n.firestore,vo),i=l4(n.converter,e,t);return QT(r,[r4(Q0(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,mi.none())])}function KT(n,e,t,...r){n=Lr(n,Ht);let i=Lr(n.firestore,vo),o=Q0(i),s;return s=typeof(e=qt(e))=="string"||e instanceof qs?o4(o,"updateDoc",n._key,e,t,r):i4(o,"updateDoc",n._key,e),QT(i,[s.toMutation(n._key,mi.exists(!0))])}function QT(n,e){return function(r,i){let o=new Ln;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return UU(yield YU(r),i,o)})),o.promise}(K0(n),e)}function d4(n,e,t){let r=t.docs.get(e._key),i=new Lh(n);return new Fh(n,i,e._key,r,new co(t.hasPendingWrites,t.fromCache),e.converter)}function YT(){return new C0("serverTimestamp")}(function(e,t=!0){(function(i){zs=i})(Es),hi(new Cn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new vo(new ev(r.getProvider("auth-internal")),new iv(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new z(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ch(u.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ht(tS,"4.7.3",e),ht(tS,"4.7.3","esm2017")})();var _t=class{constructor(e){return e}},JT="firestore",X0=class{constructor(){return Cc(JT)}};var Z0=new X("angularfire2.firestore-instances");function h4(n,e){let t=Sy(JT,n,e);return t&&new _t(t)}function f4(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new _t(r)}}var p4={provide:X0,deps:[[new gn,Z0]]},m4={provide:_t,useFactory:h4,deps:[[new gn,Z0],ro]},g4=(()=>{class n{constructor(){ht("angularfire",Ds.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=tn({type:n});static \u0275inj=en({providers:[m4,p4]})}return n})();function XT(n,...e){return{ngModule:g4,providers:[{provide:Z0,useFactory:f4(n),multi:!0,deps:[Ne,on,Dc,Sc,[new gn,Yd],[new gn,Ec],...e]}]}}var bi=Pt(NT,!0);var Un=Pt(OT,!0);var Ei=Pt(zT,!0);var Io=Pt(GT,!0);var ZT=Pt(kT,!0);var ex=Pt(qT,!0);var tx=Pt($T,!0);var Ci=Pt(UT,!0);var Gh=Pt(YT,!0),Wh=Pt(WT,!0);var nx=Pt(KT,!0);var Di=Pt(BT,!0);var ar={production:!1,apiUrl:"https://us-central1-mereka-ai-game.cloudfunctions.net",firebase:{apiKey:"AIzaSyD7esOuznHY_x0r1XsalWSZBoOJTspuABA",authDomain:"mereka-ai-game.firebaseapp.com",projectId:"mereka-ai-game",storageBucket:"mereka-ai-game.firebasestorage.app",messagingSenderId:"939508804715",appId:"1:939508804715:web:71ccc7faab3879aff5552e",measurementId:"G-NJWRDG4PWP",databaseURL:"https://mereka-ai-game.firebaseio.com"}};function y4(n,e){if(n&1&&(p(0,"div",14)(1,"div"),y(2),m(),p(3,"p",15),y(4),m()()),n&2){let t=e.$implicit;C(),Cr("flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center "+(t.number===1?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300")),C(),G(" ",t.number," "),C(2),Y(t.text)}}var e_=(()=>{class n{steps=[{number:1,text:"Complete a short personality assessment to discover your AI traits"},{number:2,text:"Choose your focus area for the challenge based on your strengths"},{number:3,text:"Compete in three rounds against the AI to test your abilities"},{number:4,text:"Receive your personalized AI profile with detailed insights"},{number:5,text:"Share your results and compare with others in the community"}];static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ne({type:n,selectors:[["app-welcome"]],standalone:!0,features:[re],decls:23,vars:1,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-4xl","w-full","space-y-8","text-center"],[1,"space-y-4"],[1,"text-6xl","font-bold","text-gray-900","dark:text-white","relative","inline-block"],[1,"absolute","inset-0","blur-lg","bg-blue-400","opacity-20","-z-10"],[1,"text-2xl","text-blue-600","dark:text-blue-400"],[1,"bg-white","dark:bg-gray-800","shadow-lg","rounded-lg","p-8","mt-8"],[1,"space-y-6"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-2","text-lg","text-gray-600","dark:text-gray-300"],[1,"mt-8"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white","mb-6"],["class","flex items-start",4,"ngFor","ngForOf"],["routerLink","/context",1,"inline-flex","items-center","px-6","py-3","border","border-transparent","text-base","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","transition-colors"],[1,"flex","items-start"],[1,"ml-4","text-lg","text-gray-600","dark:text-gray-300"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),y(4," AI Fight Club "),he(5,"div",4),m(),p(6,"p",5),y(7," Discover Your Competitive Edge in the Age of AI "),m()(),p(8,"div",6)(9,"div",7)(10,"div")(11,"h2",8),y(12," Welcome, Challenger "),m(),p(13,"p",9),y(14," Discover your AI personality traits and challenge the system "),m()(),p(15,"div",10)(16,"h3",11),y(17," How It Works "),m(),p(18,"div",2),K(19,y4,5,4,"div",12),m()(),p(20,"div",10)(21,"a",13),y(22," Get Started "),m()()()()()()),r&2&&(C(19),j("ngForOf",i.steps))},dependencies:[ae,Je,qe,Rt]})}return n})();var hx=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(U(Ir),U(Yn))}}static{this.\u0275dir=Ke({type:n})}}return n})(),ef=(()=>{class n extends hx{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vn(n)))(i||n)}})()}static{this.\u0275dir=Ke({type:n,features:[sn]})}}return n})(),sl=new X(""),v4={provide:sl,useExisting:On(()=>bo),multi:!0},bo=(()=>{class n extends ef{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vn(n)))(i||n)}})()}static{this.\u0275dir=Ke({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&te("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},features:[Dr([v4]),sn]})}}return n})(),_4={provide:sl,useExisting:On(()=>Sn),multi:!0};function w4(){let n=xr()?xr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var I4=new X(""),Sn=(()=>{class n extends hx{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!w4())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(U(Ir),U(Yn),U(I4,8))}}static{this.\u0275dir=Ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&te("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Dr([_4]),sn]})}}return n})();function b4(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var tf=new X(""),fx=new X("");function E4(n){return b4(n.value)?{required:!0}:null}function C4(n){return n.value===!0?null:{required:!0}}function rx(n){return null}function px(n){return n!=null}function mx(n){return Yi(n)?ke(n):n}function gx(n){let e={};return n.forEach(t=>{e=t!=null?V(V({},e),t):e}),Object.keys(e).length===0?null:e}function yx(n,e){return e.map(t=>t(n))}function D4(n){return!n.validate}function vx(n){return n.map(e=>D4(e)?e:t=>e.validate(t))}function S4(n){if(!n)return null;let e=n.filter(px);return e.length==0?null:function(t){return gx(yx(t,e))}}function n_(n){return n!=null?S4(vx(n)):null}function T4(n){if(!n)return null;let e=n.filter(px);return e.length==0?null:function(t){let r=yx(t,e).map(mx);return ep(r).pipe(ge(gx))}}function r_(n){return n!=null?T4(vx(n)):null}function ix(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function x4(n){return n._rawValidators}function A4(n){return n._rawAsyncValidators}function t_(n){return n?Array.isArray(n)?n:[n]:[]}function Qh(n,e){return Array.isArray(n)?n.includes(e):n===e}function ox(n,e){let t=t_(e);return t_(n).forEach(i=>{Qh(t,i)||t.push(i)}),t}function sx(n,e){return t_(e).filter(t=>!Qh(n,t))}var Yh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=n_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=r_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Qs=class extends Yh{get formDirective(){return null}get path(){return null}},ol=class extends Yh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Jh=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},R4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},mK=pe(V({},R4),{"[class.ng-submitted]":"isSubmitted"}),Jt=(()=>{class n extends Jh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(U(ol,2))}}static{this.\u0275dir=Ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Er("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[sn]})}}return n})(),Si=(()=>{class n extends Jh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(U(Qs,10))}}static{this.\u0275dir=Ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Er("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[sn]})}}return n})();var nl="VALID",Kh="INVALID",Ks="PENDING",rl="DISABLED";function _x(n){return(nf(n)?n.validators:n)||null}function M4(n){return Array.isArray(n)?n_(n):n||null}function wx(n,e){return(nf(e)?e.asyncValidators:n)||null}function P4(n){return Array.isArray(n)?r_(n):n||null}function nf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function N4(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new J(1e3,"");if(!r[t])throw new J(1001,"")}function O4(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new J(1002,"")})}var Xh=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===nl}get invalid(){return this.status===Kh}get pending(){return this.status==Ks}get disabled(){return this.status===rl}get enabled(){return this.status!==rl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ox(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ox(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sx(e,this._rawAsyncValidators))}hasValidator(e){return Qh(this._rawValidators,e)}hasAsyncValidator(e){return Qh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ks,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=rl,this.errors=null,this._forEachChild(r=>{r.disable(pe(V({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(V({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=nl,this._forEachChild(r=>{r.enable(pe(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pe(V({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===nl||this.status===Ks)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rl:nl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ks,this._hasOwnPendingAsyncValidator=!0;let t=mx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new it,this.statusChanges=new it}_calculateStatus(){return this._allControlsDisabled()?rl:this.errors?Kh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ks)?Ks:this._anyControlsHaveStatus(Kh)?Kh:nl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){nf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=M4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=P4(this._rawAsyncValidators)}},Zh=class extends Xh{constructor(e,t,r){super(_x(t),wx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){O4(this,!0,e),Object.keys(e).forEach(r=>{N4(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var i_=new X("CallSetDisabledState",{providedIn:"root",factory:()=>o_}),o_="always";function k4(n,e){return[...e.path,n]}function Ix(n,e,t=o_){bx(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),L4(n,e),j4(n,e),V4(n,e),F4(n,e)}function ax(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function F4(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function bx(n,e){let t=x4(n);e.validator!==null?n.setValidators(ix(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=A4(n);e.asyncValidator!==null?n.setAsyncValidators(ix(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();ax(e._rawValidators,i),ax(e._rawAsyncValidators,i)}function L4(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Ex(n,e)})}function V4(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Ex(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Ex(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function j4(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function U4(n,e){n==null,bx(n,e)}function B4(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function $4(n){return Object.getPrototypeOf(n.constructor)===ef}function q4(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function H4(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Sn?t=o:$4(o)?r=o:i=o}),i||r||t||null}var z4={provide:Qs,useExisting:On(()=>Vr)},il=Promise.resolve(),Vr=(()=>{class n extends Qs{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new it,this.form=new Zh({},n_(t),r_(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){il.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Ix(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){il.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){il.then(()=>{let r=this._findContainer(t.path),i=new Zh({});U4(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){il.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){il.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,q4(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(U(tf,10),U(fx,10),U(i_,8))}}static{this.\u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&te("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[St.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Dr([z4]),sn]})}}return n})();function cx(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function lx(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var G4=class extends Xh{constructor(e=null,t,r){super(_x(t),wx(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(lx(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){cx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){cx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){lx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var W4={provide:ol,useExisting:On(()=>zt)},ux=Promise.resolve(),zt=(()=>{class n extends ol{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new G4,this._registered=!1,this.name="",this.update=new it,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=H4(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),B4(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ix(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){ux.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ii(r);ux.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?k4(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(U(Qs,9),U(tf,10),U(fx,10),U(sl,10),U(Ji,8),U(i_,8))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[St.None,"disabled","isDisabled"],model:[St.None,"ngModel","model"],options:[St.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Dr([W4]),sn,ei]})}}return n})(),Ti=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var K4={provide:sl,useExisting:On(()=>Ys),multi:!0};function Cx(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Q4(n){return n.split(":")[0]}var Ys=(()=>{class n extends ef{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=Cx(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Q4(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vn(n)))(i||n)}})()}static{this.\u0275dir=Ke({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&te("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Dr([K4]),sn]})}}return n})(),rf=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Cx(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(U(Yn),U(Ir),U(Ys,9))}}static{this.\u0275dir=Ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),Y4={provide:sl,useExisting:On(()=>Dx),multi:!0};function dx(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function J4(n){return n.split(":")[0]}var Dx=(()=>{class n extends ef{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=J4(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vn(n)))(i||n)}})()}static{this.\u0275dir=Ke({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&te("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Dr([Y4]),sn]})}}return n})(),of=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(dx(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(dx(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(U(Yn),U(Ir),U(Dx,9))}}static{this.\u0275dir=Ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var X4=(()=>{class n{constructor(){this._validator=rx}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):rx,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ke({type:n,features:[ei]})}}return n})();var Z4={provide:tf,useExisting:On(()=>cr),multi:!0},e3={provide:tf,useExisting:On(()=>s_),multi:!0},cr=(()=>{class n extends X4{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ii,this.createValidator=t=>E4}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vn(n)))(i||n)}})()}static{this.\u0275dir=Ke({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ri("required",i._enabled?"":null)},inputs:{required:"required"},features:[Dr([Z4]),sn]})}}return n})(),s_=(()=>{class n extends cr{constructor(){super(...arguments),this.createValidator=t=>C4}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vn(n)))(i||n)}})()}static{this.\u0275dir=Ke({type:n,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ri("required",i._enabled?"":null)},features:[Dr([e3]),sn]})}}return n})();var t3=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=tn({type:n})}static{this.\u0275inj=en({})}}return n})();var Ft=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:i_,useValue:t.callSetDisabledState??o_}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=tn({type:n})}static{this.\u0275inj=en({imports:[t3]})}}return n})();var xi=(()=>{class n{firestore;constructor(t){this.firestore=t}createDocument(t,r){return b(this,null,function*(){let i=Un(bi(this.firestore,t)),o=i.id;return yield Wh(i,pe(V({},r),{id:o,createdAt:Gh(),updatedAt:Gh()})),o})}updateDocument(t,r,i){return b(this,null,function*(){try{let o=Un(this.firestore,t,r);yield nx(o,pe(V({},i),{updatedAt:Gh()}))}catch(o){throw console.error("Error updating document:",o),o}})}getDocument(t,r){return b(this,null,function*(){let i=Un(this.firestore,t,r),o=yield Ei(i);return o.exists()?o.data():null})}queryDocuments(t,r,i){return b(this,null,function*(){let o=Ci(bi(this.firestore,t),Di(r,"==",i));return(yield Io(o)).docs.map(a=>V({id:a.id},a.data()))})}static \u0275fac=function(r){return new(r||n)(F(_t))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ze=(()=>{class n extends xi{COLLECTION="users";createUser(t){return b(this,null,function*(){let r=yield this.createDocument(this.COLLECTION,pe(V({},t),{currentRoute:"/traits",isAnonymous:!0}));return localStorage.setItem("mereka_user_id",r),r})}updateUserRoute(t,r){return b(this,null,function*(){console.log(`Updating user ${t} route to: ${r}`);let i=r?r.startsWith("/")?r:`/${r}`:"";yield this.updateDocument(this.COLLECTION,t,{currentRoute:i})})}getUser(t){return b(this,null,function*(){return this.getDocument(this.COLLECTION,t)})}getCurrentUserId(){return localStorage.getItem("mereka_user_id")}clearCurrentUser(){localStorage.removeItem("mereka_user_id")}static \u0275fac=(()=>{let t;return function(i){return(t||(t=vn(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var lr=(()=>{class n{loadingSubject=new lt(!1);loading$=this.loadingSubject.asObservable();show(){this.loadingSubject.next(!0)}hide(){this.loadingSubject.next(!1)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Js=(()=>{class n{router;userService;loadingService;constructor(t,r,i){this.router=t,this.userService=r,this.loadingService=i}navigateToNextRoute(t,r){return b(this,null,function*(){this.loadingService.show(),console.log(`Navigating from ${t} to ${r}`);let i=this.userService.getCurrentUserId();if(!i){console.error("No user ID found, redirecting to context"),this.router.navigate(["/context"]),this.loadingService.hide();return}try{let o=r.startsWith("/")?r:`/${r}`;console.log(`Updating user route to: ${o}`),yield this.userService.updateUserRoute(i,o),console.log(`Navigating to: ${o}`),this.router.navigate([o])}catch(o){console.error("Error navigating to next route:",o)}finally{this.loadingService.hide()}})}navigateToPreviousRoute(t,r){return b(this,null,function*(){this.loadingService.show();let i=this.userService.getCurrentUserId();if(!i){this.router.navigate(["/context"]),this.loadingService.hide();return}try{yield this.userService.updateUserRoute(i,`/${r}`),this.router.navigate([`/${r}`])}catch(o){console.error("Error navigating to previous route:",o)}finally{this.loadingService.hide()}})}navigateToNextRound(t,r){return b(this,null,function*(){if(console.log(`Navigating to next round: current=${t}, max=${r}`),t<r){let i=`round/${t+1}`;console.log(`Next route: ${i}`),yield this.navigateToNextRoute(`round/${t}`,i)}else console.log("Navigating to results"),yield this.navigateToNextRoute(`round/${t}`,"results")})}static \u0275fac=function(r){return new(r||n)(F($e),F(Ze),F(lr))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Sx=(()=>{class n{router;route;userService;navigationService;userContext={name:"",email:"",professionalTitle:"",location:""};isSubmitting=!1;constructor(t,r,i,o){this.router=t,this.route=r,this.userService=i,this.navigationService=o}onSubmit(){return b(this,null,function*(){if(!this.isSubmitting){this.isSubmitting=!0;try{let t=yield this.userService.createUser(this.userContext),r=this.route.snapshot.data.next;yield this.navigationService.navigateToNextRoute("context",r)}catch(t){console.error("Error saving context:",t)}finally{this.isSubmitting=!1}}})}static \u0275fac=function(r){return new(r||n)(U($e),U(ot),U(Ze),U(Js))};static \u0275cmp=ne({type:n,selectors:[["app-context"]],standalone:!0,features:[re],decls:35,vars:4,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-4xl","w-full","space-y-8"],[1,"text-center"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"mt-2","text-lg","text-gray-600","dark:text-gray-400"],[1,"bg-white","dark:bg-gray-800","shadow","rounded-lg","p-8"],[1,"max-w-md","mx-auto"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white","text-center","mb-2"],[1,"text-gray-600","dark:text-gray-400","text-center","mb-8"],[1,"space-y-6",3,"ngSubmit"],["for","name",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","name","name","name","placeholder","Your name","required","",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","email",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","email","id","email","name","email","placeholder","your.email@example.com","required","",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","professionalTitle",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","professionalTitle","name","professionalTitle","placeholder","e.g. Software Engineer, Designer, Manager","required","",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["for","location",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","location","name","location","placeholder","City, Country","required","",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","flex","justify-center","py-3","px-4","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","transition-colors"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),y(4," Personal Context "),m(),p(5,"p",4),y(6," Before we assess your human edge, we need to understand your professional context. "),he(7,"br"),y(8," This helps us provide more relevant insights tailored to your specific situation. "),m()(),p(9,"div",5)(10,"div",6)(11,"h2",7),y(12," Tell Us About Yourself "),m(),p(13,"p",8),y(14," This information helps us personalize your human edge profile "),m(),p(15,"form",9),te("ngSubmit",function(){return i.onSubmit()}),p(16,"div")(17,"label",10),y(18," Name "),m(),p(19,"input",11),Ve("ngModelChange",function(s){return Be(i.userContext.name,s)||(i.userContext.name=s),s}),m()(),p(20,"div")(21,"label",12),y(22," Email "),m(),p(23,"input",13),Ve("ngModelChange",function(s){return Be(i.userContext.email,s)||(i.userContext.email=s),s}),m()(),p(24,"div")(25,"label",14),y(26," Professional Title "),m(),p(27,"input",15),Ve("ngModelChange",function(s){return Be(i.userContext.professionalTitle,s)||(i.userContext.professionalTitle=s),s}),m()(),p(28,"div")(29,"label",16),y(30," Location "),m(),p(31,"input",17),Ve("ngModelChange",function(s){return Be(i.userContext.location,s)||(i.userContext.location=s),s}),m()(),p(32,"div")(33,"button",18),y(34," Continue "),m()()()()()()()),r&2&&(C(19),Le("ngModel",i.userContext.name),C(4),Le("ngModel",i.userContext.email),C(4),Le("ngModel",i.userContext.professionalTitle),C(4),Le("ngModel",i.userContext.location))},dependencies:[ae,Ft,Ti,Sn,Jt,Si,cr,zt,Vr]})}return n})();var Tx=()=>[];function n3(n,e){if(n&1&&(Qt(0),p(1,"div",18)(2,"div"),y(3),m()(),Yt()),n&2){let t=e.index,r=we();C(2),Cr("w-8 h-8 flex items-center justify-center rounded-full text-sm font-medium "+(t<r.currentQuestionIndex?"bg-blue-500 text-white":t===r.currentQuestionIndex?"bg-blue-500 text-white ring-2 ring-blue-300":"bg-blue-100 text-blue-600")),C(),G(" ",t+1," ")}}function r3(n,e){if(n&1){let t=In();Qt(0),p(1,"button",23),te("click",function(){let i=nn(t).index,o=we(2);return rn(o.onAnswerChange(i+o.question.options.min))}),y(2),m(),Yt()}if(n&2){let t=e.index,r=we(2);C(),Cr("w-12 h-12 rounded-full text-lg font-medium transition-colors duration-200 "+(r.answer===t+r.question.options.min?"bg-blue-500 text-white transform scale-110":"bg-gray-100 text-gray-600 hover:bg-blue-100 hover:scale-105")),C(),G(" ",t+r.question.options.min," ")}}function i3(n,e){if(n&1&&(p(0,"div")(1,"h3",19),y(2),m(),p(3,"div",20)(4,"span",21),y(5),m(),p(6,"div",22),K(7,r3,3,3,"ng-container",6),m(),p(8,"span",21),y(9),m()()()),n&2){let t=we();C(2),Y(t.question.title),C(3),Y(t.question.options.minLabel),C(2),j("ngForOf",Sr(4,Tx).constructor(t.question.options.max-t.question.options.min+1)),C(2),Y(t.question.options.maxLabel)}}function o3(n,e){if(n&1&&(p(0,"div",24)(1,"div",25)(2,"div",26)(3,"h4",27),y(4),m(),p(5,"p",28),y(6),m()()()()),n&2){let t=we();C(4),Y(t.question.about.title),C(2),Y(t.question.about.description)}}var sf=(()=>{class n{currentQuestionIndex=0;totalQuestions=5;question;answer;answerChange=new it;nextQuestion=new it;previousQuestion=new it;get progressPercentage(){return(this.currentQuestionIndex+1)/this.totalQuestions*100}onAnswerChange(t){this.answerChange.emit(t)}onNext(){this.nextQuestion.emit()}onPrevious(){this.previousQuestion.emit()}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ne({type:n,selectors:[["app-questionnaire"]],inputs:{currentQuestionIndex:"currentQuestionIndex",totalQuestions:"totalQuestions",question:"question",answer:"answer"},outputs:{answerChange:"answerChange",nextQuestion:"nextQuestion",previousQuestion:"previousQuestion"},standalone:!0,features:[re],decls:23,vars:11,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-4xl","w-full","space-y-8"],[1,"relative"],[1,"overflow-hidden","h-2","mb-4","text-xs","flex","rounded","bg-blue-100"],[1,"shadow-none","flex","flex-col","text-center","whitespace-nowrap","text-white","justify-center","bg-blue-500"],[1,"flex","justify-between","-mt-2"],[4,"ngFor","ngForOf"],[1,"text-right","text-sm","text-gray-500","mt-2"],[1,"bg-white","shadow-lg","rounded-lg","p-8"],[1,"space-y-6"],[1,"text-center","mb-8"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"text-gray-600","mt-2"],[4,"ngIf"],["class","mt-8 pt-6 border-t border-gray-200",4,"ngIf"],[1,"flex","justify-between","mt-6"],[1,"px-4","py-2","border","border-gray-300","rounded-md","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors","duration-200",3,"click","disabled"],[1,"px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-blue-600","hover:bg-blue-700","transition-colors","duration-200",3,"click"],[1,"flex","flex-col","items-center"],[1,"text-xl","font-medium","text-gray-900","mb-4"],[1,"flex","justify-between","items-center","space-x-4"],[1,"text-sm","text-gray-500"],[1,"flex-1","flex","justify-between"],[3,"click"],[1,"mt-8","pt-6","border-t","border-gray-200"],[1,"flex","items-start","space-x-3"],[1,"flex-1"],[1,"text-lg","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),he(4,"div",4),m(),p(5,"div",5),K(6,n3,4,3,"ng-container",6),m(),p(7,"div",7),y(8),m()(),p(9,"div",8)(10,"div",9)(11,"div",10)(12,"h2",11),y(13),m(),p(14,"p",12),y(15),m()(),K(16,i3,10,5,"div",13)(17,o3,7,2,"div",14),m()(),p(18,"div",15)(19,"button",16),te("click",function(){return i.onPrevious()}),y(20," Previous "),m(),p(21,"button",17),te("click",function(){return i.onNext()}),y(22),m()()()()),r&2&&(C(4),br("width",i.progressPercentage,"%"),C(2),j("ngForOf",Sr(10,Tx).constructor(i.totalQuestions)),C(2),G(" ",i.progressPercentage,"% Complete "),C(5),G("Question ",i.currentQuestionIndex+1,""),C(2),Y(i.question.subtitle),C(),j("ngIf",i.question.type==="rating"&&i.question.options),C(),j("ngIf",i.question.about),C(2),j("disabled",i.currentQuestionIndex===0),C(3),G(" ",i.currentQuestionIndex===i.totalQuestions-1?"Finish":"Next Question"," "))},dependencies:[ae,Je,ut,Ft],styles:["@keyframes _ngcontent-%COMP%_progress{0%{width:0}to{width:100%}}.rating-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.rating-button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.rating-button.selected[_ngcontent-%COMP%]{transform:scale(1.1)}.question-container[_ngcontent-%COMP%], .step-indicator[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.step-indicator.completed[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.step-indicator.current[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff;box-shadow:0 0 0 3px #3b82f680}.about-section[_ngcontent-%COMP%]{border-left:4px solid #3B82F6;padding-left:1rem;margin-top:2rem}.about-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#1f2937;margin-bottom:.5rem}.about-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem;line-height:1.5}"]})}return n})();var Xs=(()=>{class n extends xi{firestore;userService;COLLECTION="traits";constructor(t,r){super(t),this.firestore=t,this.userService=r}saveTraits(t,r){return b(this,null,function*(){yield this.createDocument(this.COLLECTION,V({userId:t},r)),yield this.userService.updateUserRoute(t,"/attitudes")})}getTraits(t){return b(this,null,function*(){return this.getDocument(this.COLLECTION,t)})}static \u0275fac=function(r){return new(r||n)(F(_t),F(Ze))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xx=(()=>{class n{router;route;traitsService;userService;currentQuestionIndex=0;answers=[];isSubmitting=!1;questions=[{id:1,title:"How creative do you consider yourself to be?",subtitle:"Creativity Assessment",type:"rating",options:{min:1,max:5,minLabel:"Not creative",maxLabel:"Highly creative"},about:{title:"About creativity",description:"Your ability to generate novel ideas and solutions."}},{id:2,title:"How empathetic are you toward others?",subtitle:"Empathy Assessment",type:"rating",options:{min:1,max:5,minLabel:"Not empathetic",maxLabel:"Highly empathetic"},about:{title:"About empathy",description:"Your ability to understand and share the feelings of others."}},{id:3,title:"How analytical is your thinking style?",subtitle:"Analytical Thinking Assessment",type:"rating",options:{min:1,max:5,minLabel:"Not analytical",maxLabel:"Highly analytical"},about:{title:"About analytical thinking",description:"Your tendency to break down complex problems into components."}},{id:4,title:"How adaptable are you to new situations?",subtitle:"Adaptability Assessment",type:"rating",options:{min:1,max:5,minLabel:"Not adaptable",maxLabel:"Highly adaptable"},about:{title:"About adaptability",description:"Your ability to adjust to new conditions or environments."}},{id:5,title:"How would you rate your communication skills?",subtitle:"Communication Assessment",type:"rating",options:{min:1,max:5,minLabel:"Basic",maxLabel:"Advanced"},about:{title:"About communication",description:"Your ability to convey ideas clearly and effectively."}}];constructor(t,r,i,o){this.router=t,this.route=r,this.traitsService=i,this.userService=o,this.answers=new Array(this.questions.length).fill(null)}ngOnInit(){if(!this.userService.getCurrentUserId()){this.router.navigate(["/context"]);return}}onAnswerChange(t){this.answers[this.currentQuestionIndex]=t}onNextQuestion(){return b(this,null,function*(){if(!this.isSubmitting)if(this.currentQuestionIndex<this.questions.length-1)this.currentQuestionIndex++;else{this.isSubmitting=!0;try{let t=this.userService.getCurrentUserId();if(!t){this.router.navigate(["/context"]);return}let r={answers:this.answers.map((o,s)=>({questionId:this.questions[s].id,answer:o})),questions:this.questions};yield this.traitsService.saveTraits(t,r);let i=this.route.snapshot.data.next;this.router.navigate(["/"+i])}catch(t){console.error("Error saving traits data:",t)}finally{this.isSubmitting=!1}}})}onPreviousQuestion(){this.currentQuestionIndex>0&&this.currentQuestionIndex--}static \u0275fac=function(r){return new(r||n)(U($e),U(ot),U(Xs),U(Ze))};static \u0275cmp=ne({type:n,selectors:[["app-traits"]],standalone:!0,features:[re],decls:1,vars:4,consts:[[3,"answerChange","nextQuestion","previousQuestion","currentQuestionIndex","totalQuestions","question","answer"]],template:function(r,i){r&1&&(p(0,"app-questionnaire",0),te("answerChange",function(s){return i.onAnswerChange(s)})("nextQuestion",function(){return i.onNextQuestion()})("previousQuestion",function(){return i.onPreviousQuestion()}),m()),r&2&&j("currentQuestionIndex",i.currentQuestionIndex)("totalQuestions",i.questions.length)("question",i.questions[i.currentQuestionIndex])("answer",i.answers[i.currentQuestionIndex])},dependencies:[ae,sf],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}"]})}return n})();var Zs=(()=>{class n extends xi{firestore;userService;COLLECTION="attitudes";constructor(t,r){super(t),this.firestore=t,this.userService=r}saveAttitudes(t,r){return b(this,null,function*(){yield this.createDocument(this.COLLECTION,V({userId:t},r)),yield this.userService.updateUserRoute(t,"/focus")})}getAttitudes(t){return b(this,null,function*(){return this.getDocument(this.COLLECTION,t)})}static \u0275fac=function(r){return new(r||n)(F(_t),F(Ze))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ax=(()=>{class n{router;route;attitudesService;userService;currentQuestionIndex=0;answers=[];isSubmitting=!1;questions=[{id:1,title:"How much do you trust AI systems with important tasks?",subtitle:"AI Trust Assessment",type:"rating",options:{min:1,max:5,minLabel:"Highly skeptical",maxLabel:"Completely trust"},about:{title:"About AI Trust",description:"Your level of confidence in AI's reliability and safety."}},{id:2,title:"How concerned are you about AI's impact on jobs?",subtitle:"AI Impact Assessment",type:"rating",options:{min:1,max:5,minLabel:"Not concerned",maxLabel:"Extremely concerned"},about:{title:"About AI Impact",description:"Your level of worry about AI replacing human roles."}},{id:3,title:"How much do you believe AI will improve humanity's future?",subtitle:"AI Optimism Assessment",type:"rating",options:{min:1,max:5,minLabel:"Pessimistic",maxLabel:"Very optimistic"},about:{title:"About AI Optimism",description:"Your optimism about AI's positive effects on society."}},{id:4,title:"How comfortable are you working with AI tools?",subtitle:"AI Collaboration Assessment",type:"rating",options:{min:1,max:5,minLabel:"Uncomfortable",maxLabel:"Very comfortable"},about:{title:"About AI Collaboration",description:"Your openness to collaborating with AI in your work."}},{id:5,title:"How much autonomy should AI systems have?",subtitle:"AI Autonomy Assessment",type:"rating",options:{min:1,max:5,minLabel:"Always human oversight",maxLabel:"Full autonomy when appropriate"},about:{title:"About AI Autonomy",description:"Your view on AI's independence in decision-making."}}];constructor(t,r,i,o){this.router=t,this.route=r,this.attitudesService=i,this.userService=o,this.answers=new Array(this.questions.length).fill(null)}ngOnInit(){if(!this.userService.getCurrentUserId()){this.router.navigate(["/context"]);return}}onAnswerChange(t){this.answers[this.currentQuestionIndex]=t}onNextQuestion(){return b(this,null,function*(){if(!this.isSubmitting)if(this.currentQuestionIndex<this.questions.length-1)this.currentQuestionIndex++;else{this.isSubmitting=!0;try{let t=this.userService.getCurrentUserId();if(!t){this.router.navigate(["/context"]);return}let r={answers:this.answers.map((o,s)=>({questionId:this.questions[s].id,answer:o})),questions:this.questions};yield this.attitudesService.saveAttitudes(t,r);let i=this.route.snapshot.data.next;this.router.navigate(["/"+i])}catch(t){console.error("Error saving attitudes data:",t)}finally{this.isSubmitting=!1}}})}onPreviousQuestion(){this.currentQuestionIndex>0&&this.currentQuestionIndex--}static \u0275fac=function(r){return new(r||n)(U($e),U(ot),U(Zs),U(Ze))};static \u0275cmp=ne({type:n,selectors:[["app-attitudes"]],standalone:!0,features:[re],decls:1,vars:4,consts:[[3,"answerChange","nextQuestion","previousQuestion","currentQuestionIndex","totalQuestions","question","answer"]],template:function(r,i){r&1&&(p(0,"app-questionnaire",0),te("answerChange",function(s){return i.onAnswerChange(s)})("nextQuestion",function(){return i.onNextQuestion()})("previousQuestion",function(){return i.onPreviousQuestion()}),m()),r&2&&j("currentQuestionIndex",i.currentQuestionIndex)("totalQuestions",i.questions.length)("question",i.questions[i.currentQuestionIndex])("answer",i.answers[i.currentQuestionIndex])},dependencies:[ae,sf],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}"]})}return n})();var cl={userId:"user123",focusType:"leadership",context:"Generate a challenge focused on leadership in a professional setting",traits:{answers:[{questionId:1,answer:4},{questionId:2,answer:3},{questionId:3,answer:5},{questionId:4,answer:2},{questionId:5,answer:4}],questions:[{id:1,text:"How do you handle stress?",options:["Very poorly","Poorly","Neutral","Well","Very well"]},{id:2,text:"How creative do you consider yourself?",options:["Not at all","Slightly","Moderately","Very","Extremely"]},{id:3,text:"How do you approach problem-solving?",options:["Avoid it","With difficulty","Neutral","With confidence","With enthusiasm"]},{id:4,text:"How do you work in teams?",options:["Prefer to work alone","With difficulty","Neutral","Well","Very well"]},{id:5,text:"How do you handle change?",options:["Very poorly","Poorly","Neutral","Well","Very well"]}]},attitudes:{answers:[{questionId:1,answer:5},{questionId:2,answer:4},{questionId:3,answer:3},{questionId:4,answer:5},{questionId:5,answer:4}],questions:[{id:1,text:"How important is leadership to you?",options:["Not at all","Slightly","Moderately","Very","Extremely"]},{id:2,text:"How do you feel about taking initiative?",options:["Avoid it","Reluctant","Neutral","Comfortable","Enthusiastic"]},{id:3,text:"How do you view authority?",options:["Distrust","Skeptical","Neutral","Respect","Embrace"]},{id:4,text:"How do you feel about responsibility?",options:["Avoid it","Reluctant","Neutral","Accept it","Seek it"]},{id:5,text:"How do you view teamwork?",options:["Prefer to work alone","Reluctant","Neutral","Enjoy it","Essential"]}]},userProfile:{name:"John Doe",email:"john.doe@example.com",professionalTitle:"Project Manager",location:"New York, USA",currentRoute:"/focus",isAnonymous:!1},options:{roundTypes:["scenario","reflection","problem-solving","decision-making","self-assessment","hypothetical","analytical","creative"],difficultyLevels:["beginner","intermediate","advanced","expert"],contextCategories:["personal","professional","educational","social","emotional","ethical","cultural","environmental"],focusAreas:["leadership","communication","teamwork","problem-solving","adaptability","creativity","emotional intelligence","critical thinking"],challengeFormats:["multiple-choice","open-ended","scenario-based","reflection","self-assessment","hypothetical","analytical","creative"],answerTypes:["single-select","multi-select","text","rating","ranking"]}};var Rx=(()=>{class n{http;traitsService;attitudesService;userService;CLOUD_FUNCTION_URL=`${ar.apiUrl}/processRequest`;constructor(t,r,i,o){this.http=t,this.traitsService=r,this.attitudesService=i,this.userService=o}generateRound(t,r,i){return b(this,null,function*(){try{let o=yield this.traitsService.getTraits(t),s=yield this.attitudesService.getAttitudes(t),a=yield this.userService.getUser(t),l={userId:t,focusType:r,context:i||`Generate a challenge focused on ${r}`,traits:o||cl.traits,attitudes:s||cl.attitudes,userProfile:a||cl.userProfile,options:cl.options},u=this.createSimpleRequest(l),h=yield this.http.post(this.CLOUD_FUNCTION_URL,u).toPromise();if(!h||!h.success)throw new Error("No valid response from Cloud Function");let g=h.data.choices[0].message.content,_=[];try{_=JSON.parse(g)}catch(I){console.error("Error parsing content as JSON:",I);let R=g.match(/"([^"]+)"/g);if(R)_=R.map(N=>N.replace(/"/g,""));else throw new Error("Could not extract questions from response")}return this.convertToRoundResponse(_,r)}catch(o){throw console.error("Error generating round:",o),o}})}createSimpleRequest(t){let r=t.options.focusAreas.join(", "),i=t.options.contextCategories.join(", "),o=t.options.roundTypes.join(", "),s=t.options.challengeFormats.join(", "),a=this.summarizeTraitsAndAttitudes(t.traits,t.attitudes),l={role:"system",content:`You are an AI game assistant that generates personalized challenges and questions for users.

      IMPORTANT INSTRUCTIONS:
      1. Generate a round of challenges based on the user's profile, traits, and attitudes.
      2. The round should focus on the specified focus type: ${t.focusType}.
      3. The context for the challenges should be: ${t.context}.
      4. Use the following information about the user to personalize the challenges:
         - User Profile: ${JSON.stringify(t.userProfile)}
         - Traits Summary: ${a}
      5. The challenges should be appropriate for the user's level based on their traits and attitudes.
      6. Your response MUST be an array of strings, where each string is a question for a challenge.
      7. Generate 2 questions that progressively increase in difficulty.
      8. Each question should be clear, concise, and focused on the specified focus type.
      9. The questions should be open-ended and encourage thoughtful responses.

      Available focus areas: ${r}
      Available context categories: ${i}
      Available round types: ${o}
      Available challenge formats: ${s}`},u={role:"user",content:`Generate a round of challenges for a user with the following focus type: ${t.focusType}.`};return{model:"gpt-4o",messages:[l,u],temperature:.4}}summarizeTraitsAndAttitudes(t,r){if(!t||!r)return"No traits or attitudes data available.";let i="Traits: ";if(t.answers&&t.answers.length>0){let s=t.answers.map(a=>{let l=t.questions.find(u=>u.id===a.questionId);return`${l?l.text:"Unknown trait"}: ${a.answer}/5`});i+=s.join(", ")}else i+="No trait answers available.";let o="Attitudes: ";if(r.answers&&r.answers.length>0){let s=r.answers.map(a=>{let l=r.questions.find(u=>u.id===a.questionId);return`${l?l.text:"Unknown attitude"}: ${a.answer}/5`});o+=s.join(", ")}else o+="No attitude answers available.";return`${i}. ${o}`}convertToRoundResponse(t,r){let i="round-"+Date.now(),o=t.map((s,a)=>({id:`challenge-${a+1}`,question:s,type:"open-ended",points:10+a*5}));return{id:i,title:`${r.charAt(0).toUpperCase()+r.slice(1)} Challenge`,description:`A series of challenges focused on ${r}`,type:"scenario",context:"general",difficulty:3,challenges:o,estimatedTime:20}}static \u0275fac=function(r){return new(r||n)(F(Rr),F(Xs),F(Zs),F(Ze))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var af=(()=>{class n{http;traitsService;attitudesService;userService;CLOUD_FUNCTION_URL=`${ar.apiUrl}/processRequest`;MAX_RETRIES=3;TIMEOUT_MS=3e4;constructor(t,r,i,o){this.http=t,this.traitsService=r,this.attitudesService=i,this.userService=o}evaluateResponse(t){return b(this,null,function*(){try{let r=yield this.traitsService.getTraits(t.userId),i=yield this.attitudesService.getAttitudes(t.userId),o=yield this.userService.getUser(t.userId);if(!o)throw new Error("User profile not found");let s=this.createSimpleRequest(t,r,i,o),a=yield this.callCloudFunctionWithRetry(s);if(!this.isValidEvaluationResponse(a))throw new Error("Invalid evaluation response structure");return a.badges=this.assignBadges(a.metrics),a}catch(r){return console.error("Error evaluating response:",r),this.createDefaultEvaluation(t)}})}callCloudFunctionWithRetry(t){return b(this,null,function*(){let r=0,i=null;for(;r<this.MAX_RETRIES;)try{let o=yield this.http.post(this.CLOUD_FUNCTION_URL,t).pipe(ba(this.TIMEOUT_MS),Ca(1),fn(l=>(console.error(`Attempt ${r+1} failed:`,l),i=l,$n(l)))).toPromise();if(!o||!o.success)throw new Error("No valid response from evaluation service");let s=o.data.choices[0].message.content,a;try{if(a=JSON.parse(s),this.isValidEvaluationResponse(a))return a.badges=this.assignBadges(a.metrics),a;throw new Error("Invalid evaluation response structure")}catch(l){throw console.error("Error parsing evaluation response:",l),new Error("Invalid evaluation response format")}}catch(o){if(i=o,r++,r<this.MAX_RETRIES){let s=Math.pow(2,r)*1e3;console.log(`Retrying in ${s}ms... (Attempt ${r+1}/${this.MAX_RETRIES})`),yield new Promise(a=>setTimeout(a,s))}}throw i||new Error("Failed to get a valid evaluation response after multiple attempts")})}isValidEvaluationResponse(t){return!(!t||!t.metrics||!t.feedback||!t.strengths||!t.improvements||!t.comparison||!t.badges||!t.metrics.creativity||!t.metrics.practicality||!t.metrics.depth||!t.metrics.humanEdge||!t.metrics.overall||!t.comparison.userScore||!t.comparison.rivalScore||!t.comparison.advantage||!t.comparison.advantageReason||!Array.isArray(t.feedback)||!Array.isArray(t.strengths)||!Array.isArray(t.improvements)||!Array.isArray(t.badges)||!["user","rival","tie"].includes(t.comparison.advantage))}assignBadges(t){let r=[];return r.push("Participant"),t.overall>=80?r.push("Excellence"):t.overall>=60&&r.push("Proficiency"),t.creativity>=80?r.push("Innovator"):t.creativity>=60&&r.push("Creative Thinker"),t.practicality>=80?r.push("Problem Solver"):t.practicality>=60&&r.push("Practical Mind"),t.depth>=80?r.push("Deep Thinker"):t.depth>=60&&r.push("Analytical"),t.humanEdge>=80?r.push("Human Touch"):t.humanEdge>=60&&r.push("Empathetic"),r}createSimpleRequest(t,r,i,o){let s=this.summarizeTraitsAndAttitudes(r,i),a={role:"system",content:`You are an AI evaluator that assesses user responses to challenges.

      IMPORTANT INSTRUCTIONS:
      1. Evaluate the user's response based on their profile, traits, and attitudes.
      2. The question being evaluated is: ${t.question}
      3. The user's response is: ${t.userResponse}
      4. The AI's response for comparison is: ${t.aiResponse}
      5. Use the following information about the user to personalize the evaluation:
         - User Profile: ${JSON.stringify(o)}
         - Traits Summary: ${s}
      6. Your response MUST be a JSON object with the following structure:
         {
           "metrics": {
             "creativity": number (0-100),
             "practicality": number (0-100),
             "depth": number (0-100),
             "humanEdge": number (0-100),
             "overall": number (0-100)
           },
           "feedback": string[],
           "strengths": string[],
           "improvements": string[],
           "comparison": {
             "userScore": number (0-100),
             "rivalScore": number (0-100),
             "advantage": "user" | "rival" | "tie",
             "advantageReason": string
           },
           "badges": string[]
         }
      7. Provide specific, actionable feedback based on the user's response.
      8. Compare the user's response with the AI's response and explain the advantage.
      9. Award badges based on the quality and uniqueness of the response.
      10. ALWAYS include at least one badge in the badges array.`},l={role:"user",content:`Evaluate the user's response to the question: ${t.question}`};return{model:"gpt-4o",messages:[a,l],temperature:.4}}summarizeTraitsAndAttitudes(t,r){if(!t||!r)return"No traits or attitudes data available.";let i="Traits: ";if(t.answers&&t.answers.length>0){let s=t.answers.map(a=>{let l=t.questions.find(u=>u.id===a.questionId);return`${l?l.text:"Unknown trait"}: ${a.answer}/5`});i+=s.join(", ")}else i+="No trait answers available.";let o="Attitudes: ";if(r.answers&&r.answers.length>0){let s=r.answers.map(a=>{let l=r.questions.find(u=>u.id===a.questionId);return`${l?l.text:"Unknown attitude"}: ${a.answer}/5`});o+=s.join(", ")}else o+="No attitude answers available.";return`${i}. ${o}`}createDefaultEvaluation(t){let r=t.userResponse.length,i=r>0,o=30;return r>100?o=50:r>50?o=40:i&&(o=35),{metrics:{creativity:o,practicality:o,depth:o,humanEdge:o,overall:o},feedback:["We encountered an issue while evaluating your response.","Your response has been recorded, but we couldn't generate a detailed evaluation at this time.","Please try again later for a complete evaluation."],strengths:i?["Your response was submitted successfully."]:["Your participation is appreciated."],improvements:["Try providing more detailed responses in the future.","Consider expanding on your thoughts with specific examples.","Engage more deeply with the questions to get better evaluations."],comparison:{userScore:o,rivalScore:50,advantage:"rival",advantageReason:"Evaluation could not be completed at this time."},badges:["Participant"]}}static \u0275fac=function(r){return new(r||n)(F(Rr),F(Xs),F(Zs),F(Ze))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ea=(()=>{class n extends xi{firestore;userService;roundGeneratorService;roundEvaluationService;COLLECTION="challenges";COLLECTION_NAME="challenges";DEFAULT_ROUNDS=4;constructor(t,r,i,o){super(t),this.firestore=t,this.userService=r,this.roundGeneratorService=i,this.roundEvaluationService=o}generateChallenge(t){return b(this,null,function*(){let r={id:"",title:`Challenge for ${t}`,description:`A challenge focused on ${t}`,aiResponse:"",steps:[]},i=yield this.createDocument(this.COLLECTION_NAME,r);return r.id=i,r})}generateAIResponse(t){return b(this,null,function*(){return`This is a mock AI response for challenge ${t}`})}evaluateResponse(t,r,i){return b(this,null,function*(){try{let o=this.userService.getCurrentUserId();if(!o)throw new Error("No user ID found");let s=yield this.getChallenge(i);if(!s)throw new Error("Challenge not found");let a=s.questions[t-1];if(!a)throw new Error("No question found for this round");let l=yield this.generateAIResponse(i);return yield this.roundEvaluationService.evaluateResponse({userId:o,challengeId:i,roundNumber:t,question:a,userResponse:r,aiResponse:l})}catch(o){return console.error("Error evaluating response:",o),{metrics:{creativity:Math.random()*100,practicality:Math.random()*100,depth:Math.random()*100,humanEdge:Math.random()*100,overall:Math.random()*100},feedback:["An error occurred during evaluation."],strengths:["Response submitted successfully."],improvements:["Try again with a more detailed response."],comparison:{userScore:Math.random()*100,rivalScore:Math.random()*100,advantage:"tie",advantageReason:"Evaluation could not be completed."},badges:["Participant"]}}})}saveRoundResponse(t,r,i){return b(this,null,function*(){console.log(`Saving response for user ${t}, round ${r}`);let o={userId:t,roundNumber:r,challengeId:i.challengeId,question:i.question||"",response:i.response,aiResponse:i.aiResponse||"",evaluation:i.evaluation||null,timestamp:new Date};yield this.createDocument(this.COLLECTION,o),console.log("Response saved successfully");let a=(yield this.getChallenge(i.challengeId))?.questions.length||4;console.log(`Max rounds: ${a}`);let l=r<a?`/round/${r+1}`:"/results";console.log(`Updating user route to: ${l}`),yield this.userService.updateUserRoute(t,l)})}getRoundResponse(t,r){return b(this,null,function*(){return this.getDocument(this.COLLECTION,`${t}_round${r}`)})}getAllRoundResponses(t){return b(this,null,function*(){let r=localStorage.getItem("currentChallengeId");if(!r)return[];let i=yield this.getChallenge(r);if(!i)return[];let o=i.questions.length,s=[];for(let a=1;a<=o;a++){let l=yield this.getRoundResponse(t,a);l&&s.push(l)}return s})}createChallenge(t){return b(this,null,function*(){let r=this.userService.getCurrentUserId();if(!r)throw new Error("User not found");console.log("Creating challenge for user:",r);let i=yield this.roundGeneratorService.generateRound(r,t.focusArea);console.log("Generated round:",i);let o=i.challenges.map(u=>u.question),s=o.length;console.log(`Generated ${s} questions for focus area: ${t.focusArea}`);let a=[];for(let u=1;u<=s;u++)a.push({roundNumber:u,question:o[u-1]||"No question available",answer:""});let l={id:"",userId:r,focus:t,rounds:a,description:t.description,questions:o,currentRound:1,createdAt:new Date,updatedAt:new Date};try{let u=yield this.createDocument(this.COLLECTION,l);console.log("Challenge document created with ID:",u),yield this.updateDocument(this.COLLECTION,u,{id:u});let h="/round/1";return console.log(`Updating user route to: ${h}`),yield this.userService.updateUserRoute(r,h),yield this.updateDocument("users",r,{currentChallengeId:u}),u}catch(u){throw console.error("Error creating challenge:",u),u}})}addRound(t,r){return b(this,null,function*(){yield this.updateDocument(this.COLLECTION_NAME,t,{[`rounds.${r.roundNumber}`]:r})})}getChallenge(t){return b(this,null,function*(){return this.getDocument(this.COLLECTION,t)})}getUserChallenges(t){return b(this,null,function*(){return this.queryDocuments(this.COLLECTION,"userId",t)})}saveResponse(t){return b(this,null,function*(){yield this.createDocument("responses",t)})}getCurrentRound(){return b(this,null,function*(){let t=localStorage.getItem("mereka_challenge_id");return t&&(yield this.getChallenge(t))?.currentRound||1})}setCurrentRound(t){let r=localStorage.getItem("mereka_challenge_id");r&&this.updateDocument(this.COLLECTION,r,{currentRound:t})}submitResponse(t,r){return b(this,null,function*(){let i=yield this.getChallenge(t);if(!i)throw new Error("Challenge not found");let o=i.currentRound;if(console.log("Current round:",o),!i.questions||!i.questions[o-1])throw console.error("No question found for round:",o),new Error("No question found for this round");let s=yield this.generateAIResponse(t),a=yield this.evaluateResponse(o,r,t),l={roundNumber:o,question:i.questions[o-1],answer:r,aiResponse:s,evaluation:a},u=i.rounds||[],h=u.findIndex(I=>I.roundNumber===o);h>=0?u[h]=l:u.push(l),yield this.updateDocument(this.COLLECTION,t,{rounds:u,currentRound:o+1,updatedAt:new Date});let g={challengeId:t,response:r,aiResponse:s,evaluation:a,question:i.questions[o-1]};yield this.saveResponse(g);let _=this.userService.getCurrentUserId();if(_){let I=i.questions.length,R=o<I?`/round/${o+1}`:"/results";yield this.userService.updateUserRoute(_,R)}return g})}static \u0275fac=function(r){return new(r||n)(F(_t),F(Ze),F(Rx),F(af))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function a3(n,e){n&1&&(p(0,"div",12)(1,"p")(2,"strong"),y(3,"Challenge Focus:"),m(),y(4," Your creative thinking will be tested through specialized AI challenges designed to measure human capabilities."),m()())}function c3(n,e){n&1&&(p(0,"div",12)(1,"p")(2,"strong"),y(3,"Challenge Focus:"),m(),y(4," Your analytical reasoning will be tested through specialized AI challenges designed to measure human capabilities."),m()())}function l3(n,e){n&1&&(p(0,"div",12)(1,"p")(2,"strong"),y(3,"Challenge Focus:"),m(),y(4," Your emotional intelligence will be tested through specialized AI challenges designed to measure human capabilities."),m()())}function u3(n,e){n&1&&(p(0,"div",12)(1,"p")(2,"strong"),y(3,"Challenge Focus:"),m(),y(4," Your ethical decision-making will be tested through specialized AI challenges designed to measure human capabilities."),m()())}var Px=(()=>{class n{router;route;challengeService;navigationService;loadingService;selectedFocusArea=null;focusAreas=[{id:"creative",name:"Creative Thinking",description:"Test your creative problem-solving abilities against AI systems.",matchLevel:85,icon:"\u{1F3A8}",color:"var(--ai-purple)"},{id:"analytical",name:"Analytical Reasoning",description:"Challenge your logical and analytical skills in AI-driven scenarios.",matchLevel:90,icon:"\u{1F9E0}",color:"var(--ai-blue)"},{id:"emotional",name:"Emotional Intelligence",description:"Explore how your emotional intelligence compares to AI capabilities.",matchLevel:75,icon:"\u2764\uFE0F",color:"var(--ai-red)"},{id:"ethical",name:"Ethical Decision Making",description:"Navigate complex ethical dilemmas that test both human and AI judgment.",matchLevel:80,icon:"\u2696\uFE0F",color:"var(--ai-green)"}];constructor(t,r,i,o,s){this.router=t,this.route=r,this.challengeService=i,this.navigationService=o,this.loadingService=s}selectFocusArea(t){this.selectedFocusArea=t}onContinue(){return b(this,null,function*(){if(!this.selectedFocusArea)return;this.loadingService.show(),console.log("Creating challenge for focus area:",this.selectedFocusArea.id);let t={focusArea:this.selectedFocusArea.id,description:this.selectedFocusArea.description};try{let r=yield this.challengeService.createChallenge(t);console.log("Challenge created with ID:",r),localStorage.setItem("currentChallengeId",r),console.log("Navigating to round 1"),this.router.navigate(["/round",1])}catch(r){console.error("Error creating challenge:",r)}finally{this.loadingService.hide()}})}onBack(){let t=this.route.snapshot.data.previous;this.navigationService.navigateToPreviousRoute("focus",t)}static \u0275fac=function(r){return new(r||n)(U($e),U(ot),U(ea),U(Js),U(lr))};static \u0275cmp=ne({type:n,selectors:[["app-focus"]],standalone:!0,features:[re],decls:45,vars:14,consts:[[1,"focus-container"],[1,"title"],[1,"subtitle"],[1,"focus-grid"],[1,"focus-card",3,"click"],[1,"focus-header"],[1,"focus-icon"],[1,"focus-title"],[1,"focus-description"],["class","challenge-focus",4,"ngIf"],[1,"action-button"],[1,"begin-button",3,"click","disabled"],[1,"challenge-focus"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"h1",1),y(2,"Focus Selection"),m(),p(3,"p",2),y(4,"Your choice will determine the type of challenges you'll face"),m(),p(5,"div",3)(6,"div",4),te("click",function(){return i.selectFocusArea(i.focusAreas[0])}),p(7,"div",5)(8,"span",6),y(9,"\u{1F3A8}"),m(),p(10,"h2",7),y(11,"Creative Thinking"),m()(),p(12,"p",8),y(13,"Test your creative problem-solving abilities against AI systems."),m(),K(14,a3,5,0,"div",9),m(),p(15,"div",4),te("click",function(){return i.selectFocusArea(i.focusAreas[1])}),p(16,"div",5)(17,"span",6),y(18,"\u{1F9E0}"),m(),p(19,"h2",7),y(20,"Analytical Reasoning"),m()(),p(21,"p",8),y(22,"Challenge your logical and analytical skills in AI-driven scenarios."),m(),K(23,c3,5,0,"div",9),m(),p(24,"div",4),te("click",function(){return i.selectFocusArea(i.focusAreas[2])}),p(25,"div",5)(26,"span",6),y(27,"\u2764\uFE0F"),m(),p(28,"h2",7),y(29,"Emotional Intelligence"),m()(),p(30,"p",8),y(31,"Explore how your emotional intelligence compares to AI capabilities."),m(),K(32,l3,5,0,"div",9),m(),p(33,"div",4),te("click",function(){return i.selectFocusArea(i.focusAreas[3])}),p(34,"div",5)(35,"span",6),y(36,"\u2696\uFE0F"),m(),p(37,"h2",7),y(38,"Ethical Decision Making"),m()(),p(39,"p",8),y(40,"Navigate complex ethical dilemmas that test both human and AI judgment."),m(),K(41,u3,5,0,"div",9),m()(),p(42,"div",10)(43,"button",11),te("click",function(){return i.onContinue()}),y(44),m()()()),r&2&&(C(6),Er("selected",(i.selectedFocusArea==null?null:i.selectedFocusArea.id)==="creative"),C(8),j("ngIf",(i.selectedFocusArea==null?null:i.selectedFocusArea.id)==="creative"),C(),Er("selected",(i.selectedFocusArea==null?null:i.selectedFocusArea.id)==="analytical"),C(8),j("ngIf",(i.selectedFocusArea==null?null:i.selectedFocusArea.id)==="analytical"),C(),Er("selected",(i.selectedFocusArea==null?null:i.selectedFocusArea.id)==="emotional"),C(8),j("ngIf",(i.selectedFocusArea==null?null:i.selectedFocusArea.id)==="emotional"),C(),Er("selected",(i.selectedFocusArea==null?null:i.selectedFocusArea.id)==="ethical"),C(8),j("ngIf",(i.selectedFocusArea==null?null:i.selectedFocusArea.id)==="ethical"),C(2),j("disabled",!i.selectedFocusArea),C(),G(" Begin ",(i.selectedFocusArea==null?null:i.selectedFocusArea.name)||"Creative Thinking"," "))},dependencies:[ae,ut],styles:[".focus-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem;display:flex;flex-direction:column;align-items:center;min-height:100vh;background-color:#f8f9fa}.title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#1a1a1a;margin-bottom:1rem;text-align:center}.subtitle[_ngcontent-%COMP%]{font-size:1.25rem;color:#666;margin-bottom:3rem;text-align:center}.focus-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:2rem;width:100%;max-width:1000px;margin-bottom:3rem}.focus-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:1.5rem;box-shadow:0 4px 6px #0000000d;transition:all .3s ease;cursor:pointer;border:2px solid transparent;position:relative;overflow:hidden}.focus-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 15px #0000001a}.focus-card.selected[_ngcontent-%COMP%]{border-color:#4a90e2;background:linear-gradient(135deg,#4a90e21a,#4a90e20d)}.focus-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}.focus-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-right:1rem}.focus-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1a1a1a}.focus-description[_ngcontent-%COMP%]{color:#666;font-size:1rem;line-height:1.5;margin-bottom:1rem}.challenge-focus[_ngcontent-%COMP%]{background:#4a90e21a;border-radius:.5rem;padding:1rem;margin-top:1rem}.challenge-focus[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#4a4a4a;font-size:.9rem;line-height:1.4}.challenge-focus[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a1a1a}.action-button[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin-top:2rem}.begin-button[_ngcontent-%COMP%]{background:#4a90e2;color:#fff;font-size:1.25rem;font-weight:600;padding:1rem 3rem;border-radius:.5rem;border:none;cursor:pointer;transition:all .3s ease}.begin-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#357abd;transform:translateY(-2px)}.begin-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.focus-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.title[_ngcontent-%COMP%]{font-size:2rem}.subtitle[_ngcontent-%COMP%]{font-size:1.1rem}.focus-card[_ngcontent-%COMP%]{padding:1.25rem}.focus-icon[_ngcontent-%COMP%]{font-size:2rem}.focus-title[_ngcontent-%COMP%]{font-size:1.25rem}}"]})}return n})();function d3(n,e){n&1&&(p(0,"div",4)(1,"div",5),y(2," Loading challenge... "),m()())}function h3(n,e){if(n&1&&(p(0,"div",22)(1,"h3",23),y(2,"Your Previous Response:"),m(),p(3,"p",24),y(4),m()()),n&2){let t=we(2);C(4),G(" ",t.previousResponses[t.currentRoundNumber-1]," ")}}function f3(n,e){if(n&1){let t=In();p(0,"button",25),te("click",function(){nn(t);let i=we(2);return rn(i.navigateBack())}),y(1," Back "),m()}}function p3(n,e){if(n&1){let t=In();p(0,"div",6)(1,"div",7)(2,"h2",8),y(3),m(),p(4,"p",9),y(5),m()(),p(6,"div",10)(7,"div",11)(8,"div",12),he(9,"div",13),m(),p(10,"div",14),y(11),m()(),K(12,h3,5,1,"div",15),p(13,"div",16)(14,"h3",17),y(15,"Your Response:"),m(),p(16,"textarea",18),Ve("ngModelChange",function(i){nn(t);let o=we();return Be(o.userResponse,i)||(o.userResponse=i),rn(i)}),m()()(),p(17,"div",19),K(18,f3,2,0,"button",20),p(19,"button",21),te("click",function(){nn(t);let i=we();return rn(i.submitResponse())}),y(20),m()()()}if(n&2){let t=we();C(3),G("Round ",t.currentRoundNumber,""),C(2),G(" ",t.currentRound==null?null:t.currentRound.question," "),C(4),br("width",t.progress,"%"),C(2),G(" ",t.getFormattedTime()," "),C(),j("ngIf",t.previousResponses[t.currentRoundNumber-1]),C(4),Le("ngModel",t.userResponse),C(2),j("ngIf",t.currentRoundNumber===1),C(),j("disabled",t.isSubmitting||!t.userResponse.trim()),C(),G(" ",t.isSubmitting?"Submitting...":"Submit Response"," ")}}function m3(n,e){if(n&1&&(p(0,"div",43)(1,"div",11)(2,"span"),y(3),Km(4,"titlecase"),m(),p(5,"span"),y(6),m()(),p(7,"div",44),he(8,"div",13),m()()),n&2){let t=e.$implicit,r=we(2);C(3),Y(Qm(4,4,t)),C(3),G("",r.getMetricValue(t),"%"),C(2),br("width",r.getMetricValue(t),"%")}}function g3(n,e){if(n&1&&(p(0,"p",45),y(1),m()),n&2){let t=e.$implicit;C(),G(" ",t," ")}}function y3(n,e){if(n&1&&(p(0,"li",24),y(1),m()),n&2){let t=e.$implicit;C(),G(" ",t," ")}}function v3(n,e){if(n&1&&(p(0,"li",24),y(1),m()),n&2){let t=e.$implicit;C(),G(" ",t," ")}}function _3(n,e){if(n&1&&(p(0,"span",49),y(1),Km(2,"titlecase"),m()),n&2){let t=e.$implicit;C(),G(" ",Qm(2,1,t)," ")}}function w3(n,e){if(n&1&&(p(0,"div",46)(1,"h3",38),y(2,"Badges Earned"),m(),p(3,"div",47),K(4,_3,3,3,"span",48),m()()),n&2){let t=we(2);C(4),j("ngForOf",t.getBadges())}}function I3(n,e){if(n&1){let t=In();p(0,"div",6)(1,"div",7)(2,"h2",8),y(3),m()(),p(4,"div",10)(5,"div",26)(6,"div",27)(7,"h3",17),y(8,"Your Performance"),m(),K(9,m3,9,6,"div",28),m(),p(10,"div",27)(11,"h3",17),y(12,"Feedback"),m(),p(13,"div",29),K(14,g3,2,1,"p",30),m(),p(15,"h3",31),y(16,"Comparison with AI"),m(),p(17,"div",32)(18,"div",33)(19,"span"),y(20,"Your Score"),m(),p(21,"span",34),y(22),m()(),p(23,"div",35)(24,"span"),y(25,"AI Score"),m(),p(26,"span",34),y(27),m()(),p(28,"p",24)(29,"span",36),y(30,"Advantage: "),m(),y(31),m(),p(32,"p",37),y(33),m()()()(),p(34,"div",26)(35,"div")(36,"h3",38),y(37,"Your Strengths"),m(),p(38,"ul",39),K(39,y3,2,1,"li",40),m()(),p(40,"div")(41,"h3",38),y(42,"Areas for Improvement"),m(),p(43,"ul",39),K(44,v3,2,1,"li",40),m()()(),K(45,w3,5,1,"div",41),m(),p(46,"div",19)(47,"button",42),te("click",function(){nn(t);let i=we();return rn(i.handleContinue())}),y(48),m()()()}if(n&2){let t=we();C(3),G("Round ",t.currentRoundNumber," Evaluation"),C(6),j("ngForOf",t.metrics),C(5),j("ngForOf",t.getFeedback()),C(8),G("",t.getComparison().userScore,"%"),C(5),G("",t.getComparison().rivalScore,"%"),C(4),G(" ",t.getComparison().advantage==="user"?"You":t.getComparison().advantage==="rival"?"AI":"Tie"," "),C(2),G(" ",t.getComparison().advantageReason," "),C(6),j("ngForOf",t.getStrengths()),C(5),j("ngForOf",t.getImprovements()),C(),j("ngIf",t.getBadges().length),C(3),G(" ",t.currentRoundNumber===t.maxRounds?"View Results":"Continue to Round "+(t.currentRoundNumber+1)," ")}}function b3(n,e){n&1&&(p(0,"div",50)(1,"div",51)(2,"h3",52),y(3,"AI is analyzing your response"),m(),p(4,"p",53),y(5," The AI is evaluating your response to identify your human edge. "),m()()())}var Nx=(()=>{class n{challengeService;router;route;navigationService;currentRound=null;userResponse="";isSubmitting=!1;roundNumber=1;evaluation=null;showAiThinking=!1;previousResponses={};currentRoundNumber=1;isLoading=!0;maxRounds=4;timeLeft=300;timerInterval;progress=100;metrics=["creativity","practicality","depth","humanEdge","overall"];constructor(t,r,i,o){this.challengeService=t,this.router=r,this.route=i,this.navigationService=o}ngOnInit(){console.log("DynamicRoundComponent initialized"),this.route.params.subscribe(t=>{console.log("Route params:",t);let r=parseInt(t.round,10);console.log("Parsed round number:",r),r?(this.currentRoundNumber=r,this.loadCurrentRound()):(console.error("No round number found in route params"),this.router.navigate(["/focus"]))}),console.log("Current route:",this.route.snapshot.url),console.log("Route config:",this.route.snapshot.routeConfig),this.startTimer()}ngOnDestroy(){this.timerInterval&&clearInterval(this.timerInterval)}startTimer(){this.timeLeft=300,this.progress=100,this.timerInterval=setInterval(()=>{this.timeLeft>0?(this.timeLeft--,this.progress=this.timeLeft/300*100):(clearInterval(this.timerInterval),this.submitResponse())},1e3)}getFormattedTime(){let t=Math.floor(this.timeLeft/60),r=this.timeLeft%60;return`${t}:${r.toString().padStart(2,"0")}`}loadCurrentRound(){return b(this,null,function*(){let t=localStorage.getItem("currentChallengeId");if(!t){console.error("No challenge ID found"),this.router.navigate(["/focus"]);return}this.isLoading=!0,this.evaluation=null,this.userResponse="",this.showAiThinking=!1;try{let r=yield this.challengeService.getChallenge(t);if(!r){console.error("Challenge not found"),this.router.navigate(["/focus"]);return}this.maxRounds=r.questions.length,(!r.rounds||!Array.isArray(r.rounds))&&(r.rounds=[]);let i=r.rounds.find(o=>o.roundNumber===this.currentRoundNumber);i||(i={roundNumber:this.currentRoundNumber,question:r.questions[this.currentRoundNumber-1]||"No question available",answer:""},yield this.challengeService.addRound(t,i)),this.currentRound=i,this.loadPreviousResponses(r)}catch(r){console.error("Error loading round:",r),this.router.navigate(["/focus"])}finally{this.isLoading=!1}})}loadPreviousResponses(t){this.previousResponses={},t.rounds.forEach(r=>{r.roundNumber<this.currentRoundNumber&&r.answer&&(this.previousResponses[r.roundNumber]=r.answer)})}submitResponse(){return b(this,null,function*(){if(!(!this.currentRound||!this.userResponse)){this.isSubmitting=!0,this.showAiThinking=!0;try{let t=localStorage.getItem("currentChallengeId");if(!t)throw new Error("No challenge ID found");this.evaluation=yield this.challengeService.submitResponse(t,this.userResponse)}catch(t){console.error("Error submitting response:",t)}finally{this.isSubmitting=!1,this.showAiThinking=!1}}})}handleContinue(){console.log(`Current round: ${this.currentRoundNumber}, Max rounds: ${this.maxRounds}`),this.currentRoundNumber<this.maxRounds?(console.log("Navigating to next round"),this.navigationService.navigateToNextRound(this.currentRoundNumber,this.maxRounds)):(console.log("Navigating to results page"),this.router.navigate(["/results"]))}getMetricValue(t){return this.evaluation?.evaluation?.metrics&&this.evaluation.evaluation.metrics[t]||0}getFeedback(){return this.evaluation?.evaluation?.feedback||[]}getStrengths(){return this.evaluation?.evaluation?.strengths||[]}getImprovements(){return this.evaluation?.evaluation?.improvements||[]}getBadges(){return this.evaluation?.evaluation?.badges||[]}getComparison(){return this.evaluation?.evaluation?.comparison||{userScore:0,rivalScore:0,advantage:"tie",advantageReason:""}}navigateBack(){this.router.navigate(["/focus"])}static \u0275fac=function(r){return new(r||n)(U(ea),U($e),U(ot),U(Js))};static \u0275cmp=ne({type:n,selectors:[["app-dynamic-round"]],standalone:!0,features:[re],decls:5,vars:4,consts:[[1,"container","mx-auto","px-4","py-8","space-y-8"],["class","flex justify-center items-center min-h-[50vh]",4,"ngIf"],["class","card w-full max-w-4xl mx-auto shadow-lg",4,"ngIf"],["class","fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",4,"ngIf"],[1,"flex","justify-center","items-center","min-h-[50vh]"],[1,"text-lg","text-gray-600","dark:text-gray-300"],[1,"card","w-full","max-w-4xl","mx-auto","shadow-lg"],[1,"card-header"],[1,"text-2xl","font-bold","text-primary"],[1,"text-gray-600","dark:text-gray-300"],[1,"card-content","space-y-6"],[1,"flex","justify-between","items-center"],[1,"progress-bar","w-2/3"],[1,"h-2","bg-primary"],[1,"timer"],["class","border-l-4 border-primary p-4 bg-gray-50 dark:bg-gray-800",4,"ngIf"],[1,"space-y-3"],[1,"font-semibold","text-lg"],["placeholder","Type your response here...",1,"w-full","min-h-[150px]","p-3","border","rounded-lg","resize-y",3,"ngModelChange","ngModel"],[1,"card-footer"],["class","btn btn-outline",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click","disabled"],[1,"border-l-4","border-primary","p-4","bg-gray-50","dark:bg-gray-800"],[1,"font-semibold","text-lg","mb-2"],[1,"text-gray-800","dark:text-gray-200"],[1,"btn","btn-outline",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-4"],["class","space-y-2",4,"ngFor","ngForOf"],[1,"border","p-4","rounded-lg","bg-white","dark:bg-gray-800"],["class","mb-2 text-gray-800 dark:text-gray-200",4,"ngFor","ngForOf"],[1,"font-semibold","text-lg","mt-4"],[1,"border","p-4","rounded-lg","bg-gray-50","dark:bg-gray-800"],[1,"flex","justify-between","items-center","mb-2"],[1,"font-bold"],[1,"flex","justify-between","items-center","mb-4"],[1,"font-semibold"],[1,"text-gray-800","dark:text-gray-200","mt-2"],[1,"font-semibold","text-lg","mb-3"],[1,"list-disc","pl-5","space-y-1"],["class","text-gray-800 dark:text-gray-200",4,"ngFor","ngForOf"],["class","mt-6",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"space-y-2"],[1,"progress-bar"],[1,"mb-2","text-gray-800","dark:text-gray-200"],[1,"mt-6"],[1,"flex","flex-wrap","gap-2"],["class","badge badge-secondary",4,"ngFor","ngForOf"],[1,"badge","badge-secondary"],[1,"fixed","inset-0","bg-black/50","backdrop-blur-sm","flex","items-center","justify-center","z-50"],[1,"bg-white","dark:bg-gray-800","p-8","rounded-lg","max-w-md","w-full","text-center"],[1,"text-xl","font-bold","mb-4"],[1,"mt-4","text-gray-600","dark:text-gray-300"]],template:function(r,i){r&1&&(p(0,"div",0),K(1,d3,3,0,"div",1)(2,p3,21,10,"div",2)(3,I3,49,11,"div",2)(4,b3,6,0,"div",3),m()),r&2&&(C(),j("ngIf",i.isLoading),C(),j("ngIf",!i.isLoading&&!i.evaluation),C(),j("ngIf",i.evaluation),C(),j("ngIf",i.showAiThinking))},dependencies:[ae,Je,ut,KE,Ft,Sn,Jt,zt],styles:["[_nghost-%COMP%]{display:block;width:100%;max-width:800px;margin:0 auto;padding:20px}.challenge-container[_ngcontent-%COMP%]{background-color:var(--surface-color);border-radius:12px;padding:24px;box-shadow:0 4px 12px #0000001a;margin-bottom:24px}.challenge-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin-bottom:16px;color:var(--text-primary)}.challenge-description[_ngcontent-%COMP%]{font-size:18px;line-height:1.5;margin-bottom:24px;color:var(--text-secondary)}.steps-container[_ngcontent-%COMP%]{margin-bottom:24px}.step-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:12px;font-size:16px;color:var(--text-secondary)}.step-number[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:50%;background-color:var(--primary-color);color:#fff;margin-right:12px;font-weight:600}.response-container[_ngcontent-%COMP%]{margin-bottom:24px}.response-label[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:500;margin-bottom:12px;color:var(--text-primary)}.response-textarea[_ngcontent-%COMP%]{width:100%;min-height:200px;padding:16px;border-radius:8px;border:1px solid var(--border-color);background-color:var(--input-bg);color:var(--text-primary);font-size:16px;line-height:1.5;resize:vertical}.submit-button[_ngcontent-%COMP%]{display:block;width:100%;padding:14px;background-color:var(--primary-color);color:#fff;border:none;border-radius:8px;font-size:18px;font-weight:600;cursor:pointer;transition:background-color .2s}.submit-button[_ngcontent-%COMP%]:hover{background-color:var(--primary-color-dark)}.submit-button[_ngcontent-%COMP%]:disabled{background-color:var(--disabled-color);cursor:not-allowed}.ai-thinking[_ngcontent-%COMP%]{text-align:center;margin:24px 0;color:var(--text-secondary)}.evaluation-container[_ngcontent-%COMP%]{background-color:var(--surface-color);border-radius:12px;padding:24px;box-shadow:0 4px 12px #0000001a;margin-top:24px}.evaluation-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin-bottom:16px;color:var(--text-primary)}.metrics-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:16px;margin-bottom:24px}.metric-item[_ngcontent-%COMP%]{background-color:var(--card-bg);border-radius:8px;padding:16px;text-align:center}.metric-label[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary);margin-bottom:8px}.metric-value[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:var(--primary-color)}.feedback-container[_ngcontent-%COMP%]{margin-bottom:24px}.feedback-title[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin-bottom:12px;color:var(--text-primary)}.feedback-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.feedback-item[_ngcontent-%COMP%]{padding:12px;background-color:var(--card-bg);border-radius:8px;margin-bottom:8px;color:var(--text-secondary)}.continue-button[_ngcontent-%COMP%]{display:block;width:100%;padding:14px;background-color:var(--secondary-color);color:#fff;border:none;border-radius:8px;font-size:18px;font-weight:600;cursor:pointer;transition:background-color .2s}.continue-button[_ngcontent-%COMP%]:hover{background-color:var(--secondary-color-dark)}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px}.previous-responses[_ngcontent-%COMP%]{margin-bottom:24px}.previous-response-title[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin-bottom:12px;color:var(--text-primary)}.previous-response-item[_ngcontent-%COMP%]{background-color:var(--card-bg);border-radius:8px;padding:16px;margin-bottom:12px}.previous-response-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-secondary);margin-bottom:8px}.previous-response-content[_ngcontent-%COMP%]{font-size:16px;line-height:1.5;color:var(--text-primary)}.card[_ngcontent-%COMP%]{border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1.5rem}@media (prefers-color-scheme: dark){.card[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}}.card-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.card-content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.card-footer[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;align-items:center;justify-content:space-between}.progress-bar[_ngcontent-%COMP%]{height:.5rem;width:100%;overflow:hidden;border-radius:9999px;--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.progress-bar[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}}.progress-bar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%;background-color:var(--primary-color)}.timer[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem;font-weight:600;--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}@media (prefers-color-scheme: dark){.timer[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}}.btn[_ngcontent-%COMP%]{border-radius:.5rem;padding:.5rem 1rem;font-weight:500}.btn.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary-color);--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.btn.btn-primary[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.btn.btn-primary[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.btn.btn-outline[_ngcontent-%COMP%]{border-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.btn.btn-outline[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.btn.btn-outline[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity, 1));--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.btn.btn-outline[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}}.badge[_ngcontent-%COMP%]{border-radius:9999px;padding:.25rem .75rem;font-size:.875rem;line-height:1.25rem;font-weight:500}.badge.badge-secondary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}@media (prefers-color-scheme: dark){.badge.badge-secondary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}}.previous-response[_ngcontent-%COMP%]{border-left-width:4px;border-color:var(--primary-color);--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1));padding:1rem}@media (prefers-color-scheme: dark){.previous-response[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}}textarea[_ngcontent-%COMP%]{min-height:150px;width:100%;resize:vertical;border-radius:.5rem;border-width:1px;padding:.75rem}textarea[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.loading-state[_ngcontent-%COMP%]{display:flex;min-height:50vh;align-items:center;justify-content:center}.ai-thinking-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:50;display:flex;align-items:center;justify-content:center;background-color:#00000080;--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}"]})}return n})();var cf=(()=>{class n{http;firestore;roundEvaluationService;CLOUD_FUNCTION_URL=`${ar.apiUrl}/processRequest`;MAX_RETRIES=3;TIMEOUT_MS=5e4;RESULTS_COLLECTION="final_results";constructor(t,r,i){this.http=t,this.firestore=r,this.roundEvaluationService=i}analyzeResults(t,r){return console.log("analyzeResults called with userId:",t,"challengeId:",r),ke(this.getCachedResults(t,r)).pipe(mt(i=>i?(console.log("Using cached results:",i),Z(i)):(console.log("No cached results found, fetching round evaluations"),ke(this.fetchRoundEvaluations(t,r)).pipe(mt(o=>(console.log("Fetched round evaluations:",o),ke(this.generateFinalReport(t,r,o))))))))}getCachedResults(t,r){return b(this,null,function*(){try{let i=bi(this.firestore,this.RESULTS_COLLECTION),o=Ci(i,Di("userId","==",t),Di("challengeId","==",r)),s=yield Io(o);return s.empty?null:s.docs[0].data()}catch(i){return console.error("Error fetching cached results:",i),null}})}fetchRoundEvaluations(t,r){return b(this,null,function*(){try{let i=Un(this.firestore,`challenges/${r}`),o=yield Ei(i);if(!o.exists())return console.warn("Challenge document not found"),[this.createDefaultEvaluation(t,r,1)];let l=(o.data().rounds||[]).map(u=>{let h=u.evaluation||{};return{metrics:{creativity:h.creativity||5,practicality:h.practicality||5,depth:h.depth||5,humanEdge:h.humanEdge||5,overall:h.overall||5},feedback:Array.isArray(h.feedback)?h.feedback:[],strengths:Array.isArray(h.strengths)?h.strengths:[],improvements:Array.isArray(h.improvements)?h.improvements:[],comparison:{userScore:h.userScore||5,rivalScore:h.rivalScore||10,advantage:h.advantage||"rival",advantageReason:h.advantageReason||""},badges:Array.isArray(h.badges)?h.badges:["Participant"]}});return l.length===0?[this.createDefaultEvaluation(t,r,1),this.createDefaultEvaluation(t,r,2),this.createDefaultEvaluation(t,r,3)]:l}catch(i){return console.error("Error fetching challenge evaluation:",i),[this.createDefaultEvaluation(t,r,1),this.createDefaultEvaluation(t,r,2),this.createDefaultEvaluation(t,r,3)]}})}generateFinalReport(t,r,i){return b(this,null,function*(){try{let o=Un(this.firestore,`challenges/${r}`),s=yield Ei(o),a=s.exists()?s.data():null,l=Un(this.firestore,`users/${t}`),u=yield Ei(l),h=u.exists()?u.data():null,g=this.createAnalysisRequest(t,r,i,a,h);console.log("Request to cloud function:",JSON.stringify(g,null,2));let _=yield this.callCloudFunctionWithRetry(g);console.log("Response from cloud function:",JSON.stringify(_,null,2)),console.log("Response content to parse:",_.data.choices[0].message.content);let I;try{I=JSON.parse(_.data.choices[0].message.content),console.log("Parsed final results:",JSON.stringify(I,null,2))}catch(R){console.error("Error parsing AI response:",R),I=this.createDefaultFinalResults(i)}return I=this.ensureValidResultsStructure(I,i),a?.focus&&(I.focus=a.focus),h&&(I.traits=h.traits||[],I.attitudes=h.attitudes||[]),yield this.cacheResults(t,r,I),I}catch(o){return console.error("Error generating final report:",o),this.createDefaultFinalResults(i)}})}callCloudFunctionWithRetry(t){return b(this,null,function*(){let r=0,i=null;for(;r<this.MAX_RETRIES;)try{console.log(`Attempt ${r+1} to call cloud function`),console.log("Cloud function URL:",this.CLOUD_FUNCTION_URL);let o=yield this.http.post(this.CLOUD_FUNCTION_URL,t).pipe(ba(this.TIMEOUT_MS),Ca(1),fn(s=>(console.error(`Attempt ${r+1} failed:`,s),i=s,$n(s)))).toPromise();if(console.log("Raw response from cloud function:",o),!o||!o.success)throw console.error("Invalid response from cloud function:",o),new Error("No valid response from analysis service");return o}catch(o){if(i=o,r++,r<this.MAX_RETRIES){let s=Math.pow(2,r)*1e3;console.log(`Retrying in ${s}ms... (Attempt ${r+1}/${this.MAX_RETRIES})`),yield new Promise(a=>setTimeout(a,s))}}throw i||new Error("Failed to get a valid analysis response after multiple attempts")})}createAnalysisRequest(t,r,i,o,s){let a={role:"system",content:`You are an AI analyst that evaluates a user's performance across multiple rounds of a challenge.
      Focus on analyzing the following aspects:
      1. Overall performance and progression across rounds
      2. Strengths and areas for improvement
      3. Comparison with AI responses
      4. Integration with user's traits and attitudes
      5. Alignment with challenge focus area

      Your response MUST be valid JSON matching the following structure EXACTLY:
      {
        "overallScore": number,
        "focusArea": {
          "name": string,
          "description": string
        },
        "rounds": {
          "round1": {
            "score": number,
            "strengths": string[],
            "areas": string[],
            "comparison": {
              "humanScore": number,
              "aiScore": number,
              "difference": number
            }
          },
          "round2": { ... same structure as round1 ... },
          "round3": { ... same structure as round1 ... }
        },
        "badges": [
          {
            "name": string,
            "icon": string,
            "description": string
          }
        ],
        "insights": string[],
        "recommendations": string[]
      }

      Do not include any text outside of this JSON structure.`},l={role:"user",content:`Analyze the following data:
      User ID: ${t}
      Challenge ID: ${r}
      Challenge Data: ${JSON.stringify(o)}
      User Data: ${JSON.stringify(s)}
      Evaluations: ${JSON.stringify(i)}`};return{model:"gpt-4",messages:[a,l],temperature:.7,max_tokens:1e4}}cacheResults(t,r,i){return b(this,null,function*(){try{let o=`${t}_${r}`,s=pe(V({},i),{userId:t,challengeId:r,timestamp:new Date().toISOString()});yield Wh(Un(this.firestore,this.RESULTS_COLLECTION,o),s)}catch(o){console.error("Error caching results:",o)}})}createDefaultEvaluation(t,r,i){return{metrics:{creativity:50,practicality:50,depth:50,humanEdge:50,overall:50},feedback:["No evaluation data available for this round.","Your response has been recorded, but we couldn't generate a detailed evaluation at this time."],strengths:["Your participation is appreciated."],improvements:["Try providing more detailed responses in the future.","Consider expanding on your thoughts with specific examples."],comparison:{userScore:50,rivalScore:50,advantage:"tie",advantageReason:"Evaluation could not be completed at this time."},badges:["Participant"]}}createDefaultFinalResults(t){let r=t.map(l=>l.metrics.overall),i=r.length>0?r.reduce((l,u)=>l+u,0)/r.length:50,o={name:"General Improvement",description:"Focus on developing a balanced approach to all aspects of your responses."},s={};t.forEach((l,u)=>{let h=`round${u+1}`;s[h]={score:l.metrics.overall,strengths:l.strengths,areas:l.improvements,comparison:{humanScore:l.comparison.userScore,aiScore:l.comparison.rivalScore,difference:l.comparison.userScore-l.comparison.rivalScore}}});let a=[{name:"Participant",icon:"\u{1F3C6}",description:"You completed the challenge!"}];return i>=80?a.push({name:"Excellence",icon:"\u{1F31F}",description:"Outstanding performance across all rounds!"}):i>=60&&a.push({name:"Proficiency",icon:"\u2B50",description:"Good performance with room for improvement."}),{overallScore:Math.round(i),focusArea:o,rounds:s,badges:a,insights:["Your performance shows potential for growth.","Consistency across rounds is important for improvement.","Consider the feedback from each round to enhance your approach."],recommendations:["Practice responding to similar challenges to build your skills.","Take time to reflect on your performance after each round.","Focus on the areas identified for improvement in future challenges."]}}ensureValidResultsStructure(t,r){return typeof t.overallScore!="number"&&(t.overallScore=50),!t.focusArea||typeof t.focusArea!="object"?t.focusArea={name:"General Improvement",description:"Focus on developing a balanced approach to all aspects of your responses."}:(typeof t.focusArea.name!="string"&&(t.focusArea.name="General Improvement"),typeof t.focusArea.description!="string"&&(t.focusArea.description="Focus on developing a balanced approach to all aspects of your responses.")),(!t.rounds||typeof t.rounds!="object")&&(t.rounds={}),r.forEach((i,o)=>{let s=`round${o+1}`;t.rounds[s]?(typeof t.rounds[s].score!="number"&&(t.rounds[s].score=i.metrics.overall),Array.isArray(t.rounds[s].strengths)||(t.rounds[s].strengths=i.strengths||[]),Array.isArray(t.rounds[s].areas)||(t.rounds[s].areas=i.improvements||[]),!t.rounds[s].comparison||typeof t.rounds[s].comparison!="object"?t.rounds[s].comparison={humanScore:i.comparison.userScore,aiScore:i.comparison.rivalScore,difference:i.comparison.userScore-i.comparison.rivalScore}:(typeof t.rounds[s].comparison.humanScore!="number"&&(t.rounds[s].comparison.humanScore=i.comparison.userScore),typeof t.rounds[s].comparison.aiScore!="number"&&(t.rounds[s].comparison.aiScore=i.comparison.rivalScore),typeof t.rounds[s].comparison.difference!="number"&&(t.rounds[s].comparison.difference=t.rounds[s].comparison.humanScore-t.rounds[s].comparison.aiScore))):t.rounds[s]={score:i.metrics.overall,strengths:i.strengths||[],areas:i.improvements||[],comparison:{humanScore:i.comparison.userScore,aiScore:i.comparison.rivalScore,difference:i.comparison.userScore-i.comparison.rivalScore}}}),Array.isArray(t.badges)?t.badges=t.badges.map(i=>typeof i!="object"?{name:"Participant",icon:"\u{1F3C6}",description:"You completed the challenge!"}:{name:typeof i.name=="string"?i.name:"Participant",icon:typeof i.icon=="string"?i.icon:"\u{1F3C6}",description:typeof i.description=="string"?i.description:"You completed the challenge!"}):t.badges=[{name:"Participant",icon:"\u{1F3C6}",description:"You completed the challenge!"}],Array.isArray(t.insights)||(t.insights=["Your performance shows potential for growth.","Consistency across rounds is important for improvement.","Consider the feedback from each round to enhance your approach."]),Array.isArray(t.recommendations)||(t.recommendations=["Practice responding to similar challenges to build your skills.","Take time to reflect on your performance after each round.","Focus on the areas identified for improvement in future challenges."]),t}static \u0275fac=function(r){return new(r||n)(F(Rr),F(_t),F(af))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ll=()=>[];function E3(n,e){n&1&&(p(0,"div",9),he(1,"div",10),m())}function C3(n,e){n&1&&(p(0,"div",11)(1,"h2",12),y(2,"Unable to Load Results"),m(),p(3,"p",13),y(4,"We encountered an issue loading your results. Please try again later."),m(),p(5,"button",14),y(6," Return to Dashboard "),m()())}function D3(n,e){if(n&1&&(p(0,"li"),y(1),m()),n&2){let t=e.$implicit;C(),Y(t)}}function S3(n,e){if(n&1&&(p(0,"li"),y(1),m()),n&2){let t=e.$implicit;C(),Y(t)}}function T3(n,e){if(n&1&&(Qt(0),p(1,"div",35)(2,"h3",36),y(3),m(),p(4,"div",37),y(5),m(),p(6,"div",29)(7,"div")(8,"h4",38),y(9,"Strengths"),m(),p(10,"ul",39),K(11,D3,2,1,"li",34),m()(),p(12,"div")(13,"h4",38),y(14,"Areas for Improvement"),m(),p(15,"ul",39),K(16,S3,2,1,"li",34),m()(),p(17,"div",40)(18,"h4",38),y(19,"Human vs AI Comparison"),m(),p(20,"div",41)(21,"span",42),y(22,"You"),m(),p(23,"span",43),y(24),m()(),p(25,"div",41)(26,"span",42),y(27,"AI"),m(),p(28,"span",44),y(29),m()(),p(30,"div",45),y(31),m()()()(),Yt()),n&2){let t=e.$implicit,r=we(3);C(3),G("Round ",t.slice(-1),""),C(2),G("",(r.results==null||r.results.rounds==null||r.results.rounds[t]==null?null:r.results.rounds[t].score)||0,"%"),C(6),j("ngForOf",(r.results==null||r.results.rounds==null||r.results.rounds[t]==null?null:r.results.rounds[t].strengths)||Sr(8,ll)),C(5),j("ngForOf",(r.results==null||r.results.rounds==null||r.results.rounds[t]==null?null:r.results.rounds[t].areas)||Sr(9,ll)),C(8),G("",(r.results==null||r.results.rounds==null||r.results.rounds[t]==null||r.results.rounds[t].comparison==null?null:r.results.rounds[t].comparison.humanScore)||0,"%"),C(5),G("",(r.results==null||r.results.rounds==null||r.results.rounds[t]==null||r.results.rounds[t].comparison==null?null:r.results.rounds[t].comparison.aiScore)||0,"%"),C(2),Qi(" Difference: ",((r.results==null||r.results.rounds==null||r.results.rounds[t]==null||r.results.rounds[t].comparison==null?null:r.results.rounds[t].comparison.difference)||0)>0?"+":"","",(r.results==null||r.results.rounds==null||r.results.rounds[t]==null||r.results.rounds[t].comparison==null?null:r.results.rounds[t].comparison.difference)||0,"% ")}}function x3(n,e){if(n&1&&(Qt(0),K(1,T3,32,10,"ng-container",34),Yt()),n&2){let t=we(2);C(),j("ngForOf",t.rounds)}}function A3(n,e){n&1&&(p(0,"div",46)(1,"p",42),y(2,"No round data available."),m()())}function R3(n,e){if(n&1&&(p(0,"div",48)(1,"div",49),y(2),m(),p(3,"h3",50),y(4),m(),p(5,"p",42),y(6),m()()),n&2){let t=e.$implicit;C(2),Y((t==null?null:t.icon)||"\u{1F3C6}"),C(2),Y((t==null?null:t.name)||"Participant"),C(2),Y((t==null?null:t.description)||"You completed the challenge!")}}function M3(n,e){if(n&1&&(Qt(0),K(1,R3,7,3,"div",47),Yt()),n&2){let t=we(2);C(),j("ngForOf",(t.results==null?null:t.results.badges)||Sr(1,ll))}}function P3(n,e){n&1&&(p(0,"div",46)(1,"p",42),y(2,"No badges available."),m()())}function N3(n,e){if(n&1&&(p(0,"li",52)(1,"span",53),y(2,"\u2022"),m(),p(3,"span",23),y(4),m()()),n&2){let t=e.$implicit;C(4),Y(t)}}function O3(n,e){if(n&1&&(Qt(0),K(1,N3,5,1,"li",51),Yt()),n&2){let t=we(2);C(),j("ngForOf",(t.results==null?null:t.results.insights)||Sr(1,ll))}}function k3(n,e){n&1&&(p(0,"li",42),y(1,"No insights available."),m())}function F3(n,e){if(n&1&&(p(0,"li",52)(1,"span",53),y(2,"\u2022"),m(),p(3,"span",23),y(4),m()()),n&2){let t=e.$implicit;C(4),Y(t)}}function L3(n,e){if(n&1&&(Qt(0),K(1,F3,5,1,"li",51),Yt()),n&2){let t=we(2);C(),j("ngForOf",(t.results==null?null:t.results.recommendations)||Sr(1,ll))}}function V3(n,e){n&1&&(p(0,"li",42),y(1,"No recommendations available."),m())}function j3(n,e){if(n&1&&(Qt(0),p(1,"div",15)(2,"div",16)(3,"h1",17),y(4,"Your AI Fight Club Performance"),m(),p(5,"div",18),y(6),m(),p(7,"p",19),y(8,"Overall Score"),m()()(),p(9,"div",15)(10,"h2",20),y(11,"Focus Area"),m(),p(12,"div",21)(13,"h3",22),y(14),m(),p(15,"p",23),y(16),m()()(),p(17,"div",15)(18,"h2",24),y(19,"Round Performance"),m(),p(20,"div",25),K(21,x3,2,1,"ng-container",26)(22,A3,3,0,"ng-template",null,0,$a),m()(),p(24,"div",15)(25,"h2",24),y(26,"Your Badges"),m(),p(27,"div",25),K(28,M3,2,2,"ng-container",26)(29,P3,3,0,"ng-template",null,1,$a),m()(),p(31,"div",27)(32,"div",28)(33,"h2",20),y(34,"Key Insights"),m(),p(35,"ul",29),K(36,O3,2,2,"ng-container",26)(37,k3,2,0,"ng-template",null,2,$a),m()(),p(39,"div",28)(40,"h2",20),y(41,"Recommendations"),m(),p(42,"ul",29),K(43,L3,2,2,"ng-container",26)(44,V3,2,0,"ng-template",null,3,$a),m()()(),p(46,"div",30)(47,"button",31),y(48," Share Results "),m(),p(49,"button",32),y(50," View Dashboard "),m(),p(51,"button",33),y(52," Start New Challenge "),m()(),Yt()),n&2){let t=Ba(23),r=Ba(30),i=Ba(38),o=Ba(45),s=we();C(6),G("",(s.results==null?null:s.results.overallScore)||0,"%"),C(8),G("",(s.results==null||s.results.focusArea==null?null:s.results.focusArea.name)||"General Improvement"," "),C(2),Y((s.results==null||s.results.focusArea==null?null:s.results.focusArea.description)||"Focus on developing a balanced approach to all aspects of your responses."),C(5),j("ngIf",s.rounds.length>0)("ngIfElse",t),C(7),j("ngIf",s.results==null||s.results.badges==null?null:s.results.badges.length)("ngIfElse",r),C(8),j("ngIf",s.results==null||s.results.insights==null?null:s.results.insights.length)("ngIfElse",i),C(7),j("ngIf",s.results==null||s.results.recommendations==null?null:s.results.recommendations.length)("ngIfElse",o)}}var kx=(()=>{class n{resultsAnalysisService;route;results;rounds=[];loading=!0;error=!1;constructor(t,r){this.resultsAnalysisService=t,this.route=r}ngOnInit(){let t=localStorage.getItem("mereka_user_id"),r=localStorage.getItem("currentChallengeId");console.log("ResultsComponent - userId",t),console.log("ResultsComponent - challengeId",r),localStorage.removeItem("currentChallengeId"),t&&r?this.loadResults(t,r):(console.log("No userId or challengeId found"),this.error=!0,this.loading=!1)}loadResults(t,r){this.loading=!0,this.error=!1,console.log("ResultsComponent - Loading results for userId:",t,"challengeId:",r),this.resultsAnalysisService.analyzeResults(t,r).subscribe({next:i=>{console.log("ResultsComponent - Results loaded:",i),this.results=i,this.updateRoundsArray(),this.loading=!1},error:i=>{console.error("ResultsComponent - Error loading results:",i),this.error=!0,this.loading=!1}})}updateRoundsArray(){if(!this.results||!this.results.rounds){this.rounds=[];return}let t=Object.keys(this.results.rounds);this.rounds=t.sort((r,i)=>{let o=parseInt(r.replace("round","")),s=parseInt(i.replace("round",""));return o-s}),console.log("ResultsComponent - Updated rounds array:",this.rounds)}static \u0275fac=function(r){return new(r||n)(U(cf),U(ot))};static \u0275cmp=ne({type:n,selectors:[["app-results"]],standalone:!0,features:[re],decls:5,vars:3,consts:[["noRounds",""],["noBadges",""],["noInsights",""],["noRecommendations",""],[1,"min-h-screen","bg-gray-50","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-7xl","mx-auto"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-lg p-8 text-center",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center","h-64"],[1,"animate-spin","rounded-full","h-16","w-16","border-t-2","border-b-2","border-indigo-600"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-8","text-center"],[1,"text-2xl","font-bold","text-red-800","mb-4"],[1,"text-red-600","mb-6"],["routerLink","/dashboard",1,"bg-red-600","text-white","px-6","py-3","rounded-lg","font-semibold","hover:bg-red-700","transition-colors"],[1,"bg-white","rounded-lg","shadow-lg","p-8","mb-8"],[1,"text-center"],[1,"text-4xl","font-bold","text-gray-900","mb-4"],[1,"text-6xl","font-bold","text-indigo-600","mb-4"],[1,"text-xl","text-gray-600"],[1,"text-2xl","font-bold","text-gray-900","mb-4"],[1,"bg-indigo-50","rounded-lg","p-6"],[1,"text-xl","font-semibold","text-indigo-900","mb-2"],[1,"text-gray-700"],[1,"text-2xl","font-bold","text-gray-900","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[4,"ngIf","ngIfElse"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-8","mb-8"],[1,"bg-white","rounded-lg","shadow-lg","p-8"],[1,"space-y-4"],[1,"flex","justify-center","space-x-4"],["routerLink","/share",1,"bg-indigo-600","text-white","px-6","py-3","rounded-lg","font-semibold","hover:bg-indigo-700","transition-colors"],["routerLink","/dashboard",1,"bg-gray-200","text-gray-900","px-6","py-3","rounded-lg","font-semibold","hover:bg-gray-300","transition-colors"],["routerLink","/challenges",1,"bg-green-600","text-white","px-6","py-3","rounded-lg","font-semibold","hover:bg-green-700","transition-colors"],[4,"ngFor","ngForOf"],[1,"bg-gray-50","rounded-lg","p-6"],[1,"text-xl","font-semibold","text-gray-900","mb-4"],[1,"text-3xl","font-bold","text-indigo-600","mb-4"],[1,"font-medium","text-gray-900","mb-2"],[1,"list-disc","list-inside","text-gray-600"],[1,"border-t","pt-4"],[1,"flex","justify-between","items-center"],[1,"text-gray-600"],[1,"text-lg","font-semibold","text-indigo-600"],[1,"text-lg","font-semibold","text-gray-600"],[1,"text-sm","text-gray-500","mt-2"],[1,"col-span-3","bg-gray-50","rounded-lg","p-6","text-center"],["class","bg-gray-50 rounded-lg p-6 text-center",4,"ngFor","ngForOf"],[1,"bg-gray-50","rounded-lg","p-6","text-center"],[1,"text-4xl","mb-4"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],["class","flex items-start",4,"ngFor","ngForOf"],[1,"flex","items-start"],[1,"text-indigo-600","mr-2"]],template:function(r,i){r&1&&(p(0,"div",4)(1,"div",5),K(2,E3,2,0,"div",6)(3,C3,7,0,"div",7)(4,j3,53,11,"ng-container",8),m()()),r&2&&(C(2),j("ngIf",i.loading),C(),j("ngIf",i.error),C(),j("ngIf",!i.loading&&!i.error&&i.results))},dependencies:[ae,Je,ut,qe,Rt],styles:["[_nghost-%COMP%]{display:block}.badge-icon[_ngcontent-%COMP%]{font-size:2.5rem;line-height:1}.insight-bullet[_ngcontent-%COMP%]{color:var(--ai-purple)}.recommendation-bullet[_ngcontent-%COMP%]{color:var(--ai-blue)}@media (max-width: 768px){.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}return n})();var lf=(()=>{class n{http;roundData=new Map;profileId=null;apiUrl=ar.apiUrl;challenges={1:{id:"challenge-1",description:"Analyze the given scenario and identify potential patterns or trends that could impact decision-making."},2:{id:"challenge-2",description:"Based on the patterns identified in Round 1, propose innovative solutions that leverage both human insight and AI capabilities."},3:{id:"challenge-3",description:"Consider the ethical implications of your proposed solutions and how they balance efficiency with human values."}};responses={"challenge-1":"The AI analyzes the data and identifies several key patterns: increasing complexity in decision-making processes, growing importance of human intuition in uncertain scenarios, and the need for balanced human-AI collaboration.","challenge-2":"Based on the patterns, I recommend implementing a hybrid decision-making system that combines AI data analysis with human expertise. This approach ensures both efficiency and adaptability.","challenge-3":"While AI can process vast amounts of data quickly, human oversight remains crucial for ethical considerations and ensuring decisions align with societal values and cultural norms."};constructor(t){this.http=t}generateChallenge(t){return b(this,null,function*(){return this.challenges[t]||{id:`challenge-${t}`,description:"Default challenge description"}})}generateAIResponse(t){return b(this,null,function*(){return this.responses[t]||"AI response not available."})}getRoundData(t){return this.roundData.get(t)||{}}submitResponse(t){return b(this,null,function*(){this.roundData.set(t.round,{response:t.response});let r=yield this.evaluateResponse(t.round,t.response,t.challengeId,t.aiResponse);return this.roundData.set(t.round,pe(V({},this.roundData.get(t.round)),{evaluation:r})),r})}evaluateResponse(t,r,i,o){return b(this,null,function*(){let s=Math.floor(Math.random()*30)+70,a=Math.floor(Math.random()*30)+70,l=s>a?"user":s<a?"rival":"tie";return{metrics:{creativity:Math.floor(Math.random()*30)+70,practicality:Math.floor(Math.random()*30)+70,depth:Math.floor(Math.random()*30)+70,humanEdge:Math.floor(Math.random()*30)+70,overall:Math.floor(Math.random()*30)+70},feedback:["Excellent use of critical thinking","Strong consideration of multiple perspectives","Clear articulation of ideas"],strengths:["Creative problem-solving approach","Strong analytical skills","Clear communication"],improvements:["Consider more diverse scenarios","Expand on practical implementation details","Deepen analysis of long-term impacts"],comparison:{userScore:s,rivalScore:a,advantage:l,advantageReason:"Your response showed exceptional creativity and human insight."},badges:["Creative Thinker","Problem Solver","Strategic Mind"]}})}generateProfile(t){return b(this,null,function*(){return{id:"profile-"+Math.random().toString(36).substr(2,9),badges:["Strategic Thinker","Innovation Champion","Ethical Leader"],strengths:["Strong analytical capabilities","Creative problem-solving","Balanced decision-making"],weaknesses:["Could expand on implementation details","May need more diverse perspectives","Consider broader implications"],recommendations:["Focus on practical applications","Develop more comprehensive solutions","Strengthen ethical considerations"]}})}saveProfileId(t){return b(this,null,function*(){this.profileId=t})}getResults(){let t=this.getRoundData(1),r=this.getRoundData(2),i=this.getRoundData(3),o={overallScore:Math.floor(((t.evaluation?.metrics?.overall??0)+(r.evaluation?.metrics?.overall??0)+(i.evaluation?.metrics?.overall??0))/3),focusArea:{name:"Creative Problem Solving",description:"Your ability to approach problems with innovative and unique solutions"},rounds:{round1:{score:t.evaluation?.metrics.overall||0,strengths:t.evaluation?.strengths||[],areas:t.evaluation?.improvements||[],comparison:{humanScore:t.evaluation?.comparison.userScore||0,aiScore:t.evaluation?.comparison.rivalScore||0,difference:(t.evaluation?.comparison.userScore||0)-(t.evaluation?.comparison.rivalScore||0)}},round2:{score:r.evaluation?.metrics.overall||0,strengths:r.evaluation?.strengths||[],areas:r.evaluation?.improvements||[],comparison:{humanScore:r.evaluation?.comparison.userScore||0,aiScore:r.evaluation?.comparison.rivalScore||0,difference:(r.evaluation?.comparison.userScore||0)-(r.evaluation?.comparison.rivalScore||0)}},round3:{score:i.evaluation?.metrics.overall||0,strengths:i.evaluation?.strengths||[],areas:i.evaluation?.improvements||[],comparison:{humanScore:i.evaluation?.comparison.userScore||0,aiScore:i.evaluation?.comparison.rivalScore||0,difference:(i.evaluation?.comparison.userScore||0)-(i.evaluation?.comparison.rivalScore||0)}}},badges:[{id:"creative-master",name:"Creative Master",description:"Demonstrated exceptional creative problem-solving abilities",icon:"\u{1F3A8}"},{id:"analytical-genius",name:"Analytical Genius",description:"Showed outstanding analytical and logical thinking",icon:"\u{1F9E0}"},{id:"communication-pro",name:"Communication Pro",description:"Excellent communication and articulation skills",icon:"\u{1F4AC}"}],insights:["Your creative approach consistently outperformed AI solutions","You showed strong adaptability across different challenge types","Your communication skills helped convey complex ideas effectively"],recommendations:["Consider exploring more technical aspects in your solutions","Try incorporating more quantitative analysis in your approach","Continue developing your pattern recognition skills"]};return Z(o)}getDashboardData(){let t={level:3,overallProgress:75,challengesCompleted:12,totalBadges:5,streakDays:7,skillLevels:{"critical-thinking":4,"problem-solving":3,communication:5,creativity:4,analytical:3,strategic:4},recentChallenges:[{title:"AI vs Human Decision Making",score:85,focusArea:"Critical Thinking",date:"2023-05-15"},{title:"Ethical AI Implementation",score:92,focusArea:"Problem Solving",date:"2023-05-10"},{title:"Future of Work",score:78,focusArea:"Strategic",date:"2023-05-05"}],badges:[{name:"Critical Thinker",description:"Achieved high scores in critical thinking challenges",date:"2023-05-01"},{name:"Problem Solver",description:"Successfully completed 10 challenges",date:"2023-04-28"},{name:"Communication Pro",description:"Demonstrated excellent communication skills",date:"2023-04-25"},{name:"Creative Mind",description:"Showed exceptional creativity in solutions",date:"2023-04-20"},{name:"Strategic Planner",description:"Achieved high scores in strategic challenges",date:"2023-04-15"}]};return Promise.resolve(t)}static \u0275fac=function(r){return new(r||n)(F(Rr))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Lx=(()=>{class n{gameService;results;shareUrl="";constructor(t){this.gameService=t}ngOnInit(){this.results=this.gameService.getResults(),this.shareUrl=window.location.href}shareOnTwitter(){let t=`I scored ${this.results?.overallScore}% in the AI Fight Club! Can you beat my score?`,r=`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}&url=${encodeURIComponent(this.shareUrl)}`;window.open(r,"_blank")}shareOnLinkedIn(){let t=`I scored ${this.results?.overallScore}% in the AI Fight Club! Can you beat my score?`,r=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(this.shareUrl)}`;window.open(r,"_blank")}copyToClipboard(){return b(this,null,function*(){try{yield navigator.clipboard.writeText(this.shareUrl),alert("Link copied to clipboard!")}catch(t){console.error("Failed to copy text: ",t)}})}static \u0275fac=function(r){return new(r||n)(U(lf))};static \u0275cmp=ne({type:n,selectors:[["app-share"]],standalone:!0,features:[re],decls:34,vars:2,consts:[[1,"min-h-screen","bg-gray-50","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-3xl","mx-auto"],[1,"bg-white","rounded-lg","shadow-lg","p-8","mb-8"],[1,"text-center"],[1,"text-3xl","font-bold","text-gray-900","mb-4"],[1,"text-lg","text-gray-600","mb-8"],[1,"bg-indigo-50","rounded-lg","p-6","mb-8"],[1,"text-5xl","font-bold","text-indigo-600","mb-2"],[1,"text-xl","text-gray-600"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-8"],[1,"flex","items-center","justify-center","space-x-2","bg-[#1DA1F2]","text-white","px-6","py-3","rounded-lg","font-semibold","hover:bg-[#1a8cd8]","transition-colors",3,"click"],["fill","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["d","M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"],[1,"flex","items-center","justify-center","space-x-2","bg-[#0A66C2]","text-white","px-6","py-3","rounded-lg","font-semibold","hover:bg-[#094ea3]","transition-colors",3,"click"],["d","M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"],[1,"mb-8"],[1,"flex","items-center","space-x-2"],["type","text","readonly","",1,"flex-1","p-3","border","rounded-lg","bg-gray-50",3,"value"],[1,"bg-gray-200","text-gray-800","px-4","py-3","rounded-lg","font-semibold","hover:bg-gray-300","transition-colors",3,"click"],[1,"flex","justify-center","space-x-4"],["routerLink","/results",1,"bg-gray-200","text-gray-800","px-6","py-3","rounded-lg","font-semibold","hover:bg-gray-300","transition-colors"],["routerLink","/",1,"bg-indigo-600","text-white","px-6","py-3","rounded-lg","font-semibold","hover:bg-indigo-700","transition-colors"]],template:function(r,i){if(r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),y(5,"Share Your Results"),m(),p(6,"p",5),y(7,"Share your AI Fight Club performance with others!"),m(),p(8,"div",6)(9,"div",7),y(10),m(),p(11,"p",8),y(12,"Overall Score"),m()(),p(13,"div",9)(14,"button",10),te("click",function(){return i.shareOnTwitter()}),Va(),p(15,"svg",11),he(16,"path",12),m(),ja(),p(17,"span"),y(18,"Share on Twitter"),m()(),p(19,"button",13),te("click",function(){return i.shareOnLinkedIn()}),Va(),p(20,"svg",11),he(21,"path",14),m(),ja(),p(22,"span"),y(23,"Share on LinkedIn"),m()()(),p(24,"div",15)(25,"div",16),he(26,"input",17),p(27,"button",18),te("click",function(){return i.copyToClipboard()}),y(28," Copy Link "),m()()(),p(29,"div",19)(30,"button",20),y(31," Back to Results "),m(),p(32,"button",21),y(33," Start New Challenge "),m()()()()()()),r&2){let o;C(10),G("",(o=i.results==null?null:i.results.overallScore)!==null&&o!==void 0?o:0,"%"),C(16),j("value",i.shareUrl)}},dependencies:[ae,qe,Rt],styles:["[_nghost-%COMP%]{display:block}"]})}return n})();function U3(n,e){if(n&1&&(p(0,"div",24)(1,"div",25)(2,"h3",26),y(3),m(),p(4,"span",27),y(5),m()(),p(6,"div",28),he(7,"div",29),m()()),n&2){let t=e.$implicit;C(3),Y(t.name),C(2),G("Level ",t.level,""),C(2),br("width",t.progress,"%")}}function B3(n,e){if(n&1&&(p(0,"div",24)(1,"div",30)(2,"h3",26),y(3),m(),p(4,"span",31),y(5),m()(),p(6,"div",32),y(7),m(),p(8,"div",33),y(9),m()()),n&2){let t=e.$implicit,r=we();C(3),Y(t.title),C(2),G("",t.score,"%"),C(2),G("Focus: ",t.focusArea,""),C(2),Y(r.formatDate(t.date))}}function $3(n,e){if(n&1&&(p(0,"div",7)(1,"div",34),y(2,"\u{1F3C6}"),m(),p(3,"h3",35),y(4),m(),p(5,"p",32),y(6),m(),p(7,"div",33),y(8),m()()),n&2){let t=e.$implicit,r=we();C(4),Y(t.name),C(2),Y(t.description),C(2),G("Earned ",r.formatDate(t.date),"")}}var Vx=(()=>{class n{gameService;dashboardData={level:1,overallProgress:0,challengesCompleted:0,totalBadges:0,streakDays:0,skillLevels:[],recentChallenges:[],badges:[]};constructor(t){this.gameService=t}ngOnInit(){this.loadDashboardData()}loadDashboardData(){return b(this,null,function*(){try{let t=yield this.gameService.getDashboardData();this.dashboardData=pe(V({},t),{skillLevels:this.transformSkillLevels(t.skillLevels),recentChallenges:t.recentChallenges.map(r=>pe(V({},r),{date:new Date(r.date)})),badges:t.badges.map(r=>pe(V({},r),{date:new Date(r.date)}))})}catch(t){console.error("Error loading dashboard data:",t)}})}transformSkillLevels(t){return Object.entries(t).map(([r,i])=>({name:this.formatSkillName(r),level:i,progress:this.calculateSkillProgress(i)}))}formatSkillName(t){return t.split("-").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}calculateSkillProgress(t){return t/10*100}formatDate(t){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(t)}static \u0275fac=function(r){return new(r||n)(U(lf))};static \u0275cmp=ne({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[re],decls:57,vars:9,consts:[[1,"min-h-screen","bg-gray-50","p-6"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"bg-gradient-to-r","from-indigo-600","to-indigo-500","text-white","px-6","py-3","rounded-full","font-semibold"],[1,"text-xl"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-8"],[1,"bg-white","rounded-xl","shadow-sm","p-6","text-center"],[1,"relative","w-32","h-32","mx-auto","mb-4"],["viewBox","0 0 36 36",1,"w-full","h-full"],["d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","#E5E7EB","stroke-width","3"],["d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","#4F46E5","stroke-width","3"],[1,"absolute","top-1/2","left-1/2","transform","-translate-x-1/2","-translate-y-1/2","text-2xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"grid","grid-cols-2","gap-4"],[1,"block","text-3xl","font-bold","text-indigo-600","mb-2"],[1,"mb-8"],[1,"text-2xl","font-semibold","text-gray-900","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["class","bg-white rounded-xl shadow-sm p-6",4,"ngFor","ngForOf"],["class","bg-white rounded-xl shadow-sm p-6 text-center",4,"ngFor","ngForOf"],[1,"flex","justify-center","gap-4"],["routerLink","/focus",1,"bg-indigo-600","text-white","px-6","py-3","rounded-lg","font-semibold","hover:bg-indigo-700","transition-colors"],["routerLink","/results",1,"bg-gray-200","text-gray-900","px-6","py-3","rounded-lg","font-semibold","hover:bg-gray-300","transition-colors"],[1,"bg-white","rounded-xl","shadow-sm","p-6"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-indigo-600","font-semibold"],[1,"h-2","bg-gray-200","rounded-full","overflow-hidden"],[1,"h-full","bg-gradient-to-r","from-indigo-600","to-indigo-500"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-green-600","font-semibold"],[1,"text-gray-600","text-sm","mb-2"],[1,"text-gray-500","text-sm"],[1,"text-4xl","mb-4"],[1,"text-lg","font-semibold","text-gray-900","mb-2"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),y(4,"Dashboard"),m(),p(5,"p",3),y(6,"Track your progress and achievements"),m()(),p(7,"div",4),y(8," Level "),p(9,"span",5),y(10),m()()(),p(11,"div",6)(12,"div",7)(13,"div",8),Va(),p(14,"svg",9),he(15,"path",10)(16,"path",11),m(),ja(),p(17,"div",12),y(18),m()(),p(19,"h3",13),y(20,"Overall Progress"),m()(),p(21,"div",14)(22,"div",7)(23,"span",15),y(24),m(),p(25,"span",13),y(26,"Challenges Completed"),m()(),p(27,"div",7)(28,"span",15),y(29),m(),p(30,"span",13),y(31,"Badges Earned"),m()(),p(32,"div",7)(33,"span",15),y(34),m(),p(35,"span",13),y(36,"Day Streak"),m()()()(),p(37,"div",16)(38,"h2",17),y(39,"Skills Development"),m(),p(40,"div",18),K(41,U3,8,4,"div",19),m()(),p(42,"div",16)(43,"h2",17),y(44,"Recent Challenges"),m(),p(45,"div",18),K(46,B3,10,4,"div",19),m()(),p(47,"div",16)(48,"h2",17),y(49,"Earned Badges"),m(),p(50,"div",18),K(51,$3,9,3,"div",20),m()(),p(52,"div",21)(53,"button",22),y(54," Start New Challenge "),m(),p(55,"button",23),y(56," View Detailed Results "),m()()()),r&2&&(C(10),Y(i.dashboardData.level),C(6),ri("stroke-dasharray",i.dashboardData.overallProgress+", 100"),C(2),G(" ",i.dashboardData.overallProgress,"% "),C(6),Y(i.dashboardData.challengesCompleted),C(5),Y(i.dashboardData.totalBadges),C(5),Y(i.dashboardData.streakDays),C(7),j("ngForOf",i.dashboardData.skillLevels),C(5),j("ngForOf",i.dashboardData.recentChallenges),C(5),j("ngForOf",i.dashboardData.badges))},dependencies:[ae,Je,qe,Rt],styles:['.dashboard-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f9fafb;padding:2rem}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:1rem}}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.dashboard-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#111827;margin-bottom:.5rem}.dashboard-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:1.1rem}.dashboard-header[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#6366f1);padding:.75rem 1.5rem;border-radius:9999px;color:#fff;font-weight:600}.dashboard-header[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]   .level-number[_ngcontent-%COMP%]{font-size:1.1rem}.progress-overview[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;gap:2rem;margin-bottom:2rem}@media (max-width: 768px){.progress-overview[_ngcontent-%COMP%]{grid-template-columns:1fr}}.progress-overview[_ngcontent-%COMP%]   .overall-progress[_ngcontent-%COMP%]{text-align:center}.progress-overview[_ngcontent-%COMP%]   .overall-progress[_ngcontent-%COMP%]   .progress-circle[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;background:conic-gradient(#4f46e5 calc(var(--progress) * 1%),#e5e7eb 0);display:flex;align-items:center;justify-content:center;margin:0 auto 1rem;position:relative}.progress-overview[_ngcontent-%COMP%]   .overall-progress[_ngcontent-%COMP%]   .progress-circle[_ngcontent-%COMP%]:before{content:"";position:absolute;width:120px;height:120px;background:#fff;border-radius:50%}.progress-overview[_ngcontent-%COMP%]   .overall-progress[_ngcontent-%COMP%]   .progress-circle[_ngcontent-%COMP%]   .progress-value[_ngcontent-%COMP%]{position:relative;font-size:2rem;font-weight:700;color:#111827}.progress-overview[_ngcontent-%COMP%]   .overall-progress[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#6b7280;font-size:1.1rem}.progress-overview[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}@media (max-width: 768px){.progress-overview[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.progress-overview[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:.75rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:transform .2s ease-in-out;text-align:center}.progress-overview[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.progress-overview[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{display:block;font-size:2rem;font-weight:700;color:#4f46e5;margin-bottom:.5rem}.progress-overview[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#6b7280;font-size:.9rem}.skills-section[_ngcontent-%COMP%]{margin-bottom:2rem}.skills-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#111827;margin-bottom:1rem}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}@media (max-width: 768px){.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:.75rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:transform .2s ease-in-out}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#111827}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .skill-header[_ngcontent-%COMP%]   .skill-level[_ngcontent-%COMP%]{color:#4f46e5;font-weight:600}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:8px;background:#e5e7eb;border-radius:9999px;overflow:hidden}.skills-section[_ngcontent-%COMP%]   .skills-grid[_ngcontent-%COMP%]   .skill-card[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#4f46e5,#6366f1);transition:width .3s ease-in-out}.recent-challenges[_ngcontent-%COMP%]{margin-bottom:2rem}.recent-challenges[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#111827;margin-bottom:1rem}.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}@media (max-width: 768px){.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]   .challenge-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:.75rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:transform .2s ease-in-out}.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]   .challenge-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]   .challenge-card[_ngcontent-%COMP%]   .challenge-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]   .challenge-card[_ngcontent-%COMP%]   .challenge-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#111827}.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]   .challenge-card[_ngcontent-%COMP%]   .challenge-header[_ngcontent-%COMP%]   .challenge-score[_ngcontent-%COMP%]{color:#10b981;font-weight:600}.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]   .challenge-card[_ngcontent-%COMP%]   .challenge-focus[_ngcontent-%COMP%]{color:#6b7280;font-size:.9rem;margin-bottom:.5rem}.recent-challenges[_ngcontent-%COMP%]   .challenges-grid[_ngcontent-%COMP%]   .challenge-card[_ngcontent-%COMP%]   .challenge-date[_ngcontent-%COMP%]{color:#6b7280;font-size:.8rem}.badges-section[_ngcontent-%COMP%]{margin-bottom:2rem}.badges-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#111827;margin-bottom:1rem}.badges-section[_ngcontent-%COMP%]   .badges-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}@media (max-width: 768px){.badges-section[_ngcontent-%COMP%]   .badges-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.badges-section[_ngcontent-%COMP%]   .badges-grid[_ngcontent-%COMP%]   .badge-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:.75rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:transform .2s ease-in-out;text-align:center}.badges-section[_ngcontent-%COMP%]   .badges-grid[_ngcontent-%COMP%]   .badge-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.badges-section[_ngcontent-%COMP%]   .badges-grid[_ngcontent-%COMP%]   .badge-card[_ngcontent-%COMP%]   .badge-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:1rem}.badges-section[_ngcontent-%COMP%]   .badges-grid[_ngcontent-%COMP%]   .badge-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#111827;margin-bottom:.5rem}.badges-section[_ngcontent-%COMP%]   .badges-grid[_ngcontent-%COMP%]   .badge-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;font-size:.9rem;margin-bottom:.5rem}.badges-section[_ngcontent-%COMP%]   .badges-grid[_ngcontent-%COMP%]   .badge-card[_ngcontent-%COMP%]   .badge-date[_ngcontent-%COMP%]{color:#6b7280;font-size:.8rem}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:2rem}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:.5rem;font-weight:600;transition:all .2s ease-in-out}.action-buttons[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]{background:#4f46e5;color:#fff}.action-buttons[_ngcontent-%COMP%]   button.btn-primary[_ngcontent-%COMP%]:hover{background:#3a30e2}.action-buttons[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{background:#e5e7eb;color:#111827}.action-buttons[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover{background:#d7dae0}']})}return n})();var jx=(()=>{class n{email="";password="";rememberMe=!1;onSubmit(){console.log("Login submitted",{email:this.email,password:this.password,rememberMe:this.rememberMe})}loginWithGoogle(){console.log("Login with Google clicked")}loginWithGithub(){console.log("Login with GitHub clicked")}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ne({type:n,selectors:[["app-login"]],standalone:!0,features:[re],decls:46,vars:3,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-50"],[1,"max-w-md","w-full","space-y-8","p-8","bg-white","rounded-xl","shadow-lg"],[1,"text-center"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"mt-8","space-y-6",3,"ngSubmit"],[1,"space-y-4"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["id","email","name","email","type","email","required","","placeholder","Enter your email",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary",3,"ngModelChange","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","name","password","type","password","required","","placeholder","Enter your password",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],["id","remember-me","name","remember-me","type","checkbox",1,"h-4","w-4","text-primary","focus:ring-primary","border-gray-300","rounded",3,"ngModelChange","ngModel"],["for","remember-me",1,"ml-2","block","text-sm","text-gray-900"],[1,"text-sm"],["routerLink","/auth/forgot-password",1,"font-medium","text-primary","hover:text-primary-dark"],["type","submit",1,"w-full","flex","justify-center","py-2","px-4","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-primary","hover:bg-primary-dark","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary"],[1,"mt-6"],[1,"relative"],[1,"absolute","inset-0","flex","items-center"],[1,"w-full","border-t","border-gray-300"],[1,"relative","flex","justify-center","text-sm"],[1,"px-2","bg-white","text-gray-500"],[1,"mt-6","grid","grid-cols-2","gap-3"],["type","button",1,"w-full","flex","items-center","justify-center","px-4","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50",3,"click"],["src","assets/google-icon.svg","alt","Google logo",1,"h-5","w-5","mr-2"],["src","assets/github-icon.svg","alt","GitHub logo",1,"h-5","w-5","mr-2"],[1,"mt-6","text-center","text-sm","text-gray-600"],["routerLink","/auth/register",1,"font-medium","text-primary","hover:text-primary-dark"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),y(4,"Welcome back"),m(),p(5,"p",4),y(6," Please sign in to your account "),m()(),p(7,"form",5),te("ngSubmit",function(){return i.onSubmit()}),p(8,"div",6)(9,"div")(10,"label",7),y(11," Email address "),m(),p(12,"input",8),Ve("ngModelChange",function(s){return Be(i.email,s)||(i.email=s),s}),m()(),p(13,"div")(14,"label",9),y(15," Password "),m(),p(16,"input",10),Ve("ngModelChange",function(s){return Be(i.password,s)||(i.password=s),s}),m()()(),p(17,"div",11)(18,"div",12)(19,"input",13),Ve("ngModelChange",function(s){return Be(i.rememberMe,s)||(i.rememberMe=s),s}),m(),p(20,"label",14),y(21," Remember me "),m()(),p(22,"div",15)(23,"a",16),y(24," Forgot your password? "),m()()(),p(25,"div")(26,"button",17),y(27," Sign in "),m()()(),p(28,"div",18)(29,"div",19)(30,"div",20),he(31,"div",21),m(),p(32,"div",22)(33,"span",23),y(34," Or continue with "),m()()(),p(35,"div",24)(36,"button",25),te("click",function(){return i.loginWithGoogle()}),he(37,"img",26),y(38," Google "),m(),p(39,"button",25),te("click",function(){return i.loginWithGithub()}),he(40,"img",27),y(41," GitHub "),m()()(),p(42,"p",28),y(43," Don't have an account? "),p(44,"a",29),y(45," Sign up "),m()()()()),r&2&&(C(12),Le("ngModel",i.email),C(4),Le("ngModel",i.password),C(3),Le("ngModel",i.rememberMe))},dependencies:[ae,Ft,Ti,Sn,bo,Jt,Si,cr,zt,Vr,qe,Rt],encapsulation:2})}return n})();var Ux=(()=>{class n{name="";email="";password="";confirmPassword="";acceptTerms=!1;isFormValid(){return this.name.trim()!==""&&this.email.trim()!==""&&this.password.length>=8&&this.password===this.confirmPassword&&this.acceptTerms}onSubmit(){this.isFormValid()&&console.log("Register submitted",{name:this.name,email:this.email,password:this.password,acceptTerms:this.acceptTerms})}registerWithGoogle(){console.log("Register with Google clicked")}registerWithGithub(){console.log("Register with GitHub clicked")}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ne({type:n,selectors:[["app-register"]],standalone:!0,features:[re],decls:55,vars:6,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-50"],[1,"max-w-md","w-full","space-y-8","p-8","bg-white","rounded-xl","shadow-lg"],[1,"text-center"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"mt-8","space-y-6",3,"ngSubmit"],[1,"space-y-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700"],["id","name","name","name","type","text","required","","placeholder","Enter your full name",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary",3,"ngModelChange","ngModel"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["id","email","name","email","type","email","required","","placeholder","Enter your email",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary",3,"ngModelChange","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","name","password","type","password","required","","placeholder","Create a password",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary",3,"ngModelChange","ngModel"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700"],["id","confirmPassword","name","confirmPassword","type","password","required","","placeholder","Confirm your password",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary",3,"ngModelChange","ngModel"],[1,"flex","items-center"],["id","terms","name","terms","type","checkbox","required","",1,"h-4","w-4","text-primary","focus:ring-primary","border-gray-300","rounded",3,"ngModelChange","ngModel"],["for","terms",1,"ml-2","block","text-sm","text-gray-900"],["href","/terms",1,"text-primary","hover:text-primary-dark"],["href","/privacy",1,"text-primary","hover:text-primary-dark"],["type","submit",1,"w-full","flex","justify-center","py-2","px-4","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-primary","hover:bg-primary-dark","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"mt-6"],[1,"relative"],[1,"absolute","inset-0","flex","items-center"],[1,"w-full","border-t","border-gray-300"],[1,"relative","flex","justify-center","text-sm"],[1,"px-2","bg-white","text-gray-500"],[1,"mt-6","grid","grid-cols-2","gap-3"],["type","button",1,"w-full","flex","items-center","justify-center","px-4","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50",3,"click"],["src","assets/google-icon.svg","alt","Google logo",1,"h-5","w-5","mr-2"],["src","assets/github-icon.svg","alt","GitHub logo",1,"h-5","w-5","mr-2"],[1,"mt-6","text-center","text-sm","text-gray-600"],["routerLink","/auth/login",1,"font-medium","text-primary","hover:text-primary-dark"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),y(4,"Create your account"),m(),p(5,"p",4),y(6," Join AI Fight Club and start your journey "),m()(),p(7,"form",5),te("ngSubmit",function(){return i.onSubmit()}),p(8,"div",6)(9,"div")(10,"label",7),y(11," Full Name "),m(),p(12,"input",8),Ve("ngModelChange",function(s){return Be(i.name,s)||(i.name=s),s}),m()(),p(13,"div")(14,"label",9),y(15," Email address "),m(),p(16,"input",10),Ve("ngModelChange",function(s){return Be(i.email,s)||(i.email=s),s}),m()(),p(17,"div")(18,"label",11),y(19," Password "),m(),p(20,"input",12),Ve("ngModelChange",function(s){return Be(i.password,s)||(i.password=s),s}),m()(),p(21,"div")(22,"label",13),y(23," Confirm Password "),m(),p(24,"input",14),Ve("ngModelChange",function(s){return Be(i.confirmPassword,s)||(i.confirmPassword=s),s}),m()()(),p(25,"div",15)(26,"input",16),Ve("ngModelChange",function(s){return Be(i.acceptTerms,s)||(i.acceptTerms=s),s}),m(),p(27,"label",17),y(28," I agree to the "),p(29,"a",18),y(30,"Terms of Service"),m(),y(31," and "),p(32,"a",19),y(33,"Privacy Policy"),m()()(),p(34,"div")(35,"button",20),y(36," Create Account "),m()()(),p(37,"div",21)(38,"div",22)(39,"div",23),he(40,"div",24),m(),p(41,"div",25)(42,"span",26),y(43," Or continue with "),m()()(),p(44,"div",27)(45,"button",28),te("click",function(){return i.registerWithGoogle()}),he(46,"img",29),y(47," Google "),m(),p(48,"button",28),te("click",function(){return i.registerWithGithub()}),he(49,"img",30),y(50," GitHub "),m()()(),p(51,"p",31),y(52," Already have an account? "),p(53,"a",32),y(54," Sign in "),m()()()()),r&2&&(C(12),Le("ngModel",i.name),C(4),Le("ngModel",i.email),C(4),Le("ngModel",i.password),C(4),Le("ngModel",i.confirmPassword),C(2),Le("ngModel",i.acceptTerms),C(9),j("disabled",!i.isFormValid()))},dependencies:[ae,Ft,Ti,Sn,bo,Jt,Si,cr,s_,zt,Vr,qe,Rt],encapsulation:2})}return n})();function q3(n,e){if(n&1&&(p(0,"div",12)(1,"p"),y(2),m()()),n&2){let t=we();C(2),G("If an account exists for ",t.email,", you will receive password reset instructions.")}}var Bx=(()=>{class n{email="";submitted=!1;isEmailValid(){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)}onSubmit(){this.isEmailValid()&&(console.log("Password reset requested for:",this.email),this.submitted=!0)}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ne({type:n,selectors:[["app-forgot-password"]],standalone:!0,features:[re],decls:20,vars:3,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-50"],[1,"max-w-md","w-full","space-y-8","p-8","bg-white","rounded-xl","shadow-lg"],[1,"text-center"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"mt-8","space-y-6",3,"ngSubmit"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["id","email","name","email","type","email","required","","placeholder","Enter your email",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","flex","justify-center","py-2","px-4","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-primary","hover:bg-primary-dark","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","mt-4 p-4 rounded-md bg-green-50 text-green-700",4,"ngIf"],[1,"mt-6","text-center","text-sm","text-gray-600"],["routerLink","/auth/login",1,"font-medium","text-primary","hover:text-primary-dark"],[1,"mt-4","p-4","rounded-md","bg-green-50","text-green-700"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),y(4,"Reset your password"),m(),p(5,"p",4),y(6," Enter your email address and we'll send you a link to reset your password "),m()(),p(7,"form",5),te("ngSubmit",function(){return i.onSubmit()}),p(8,"div")(9,"label",6),y(10," Email address "),m(),p(11,"input",7),Ve("ngModelChange",function(s){return Be(i.email,s)||(i.email=s),s}),m()(),p(12,"div")(13,"button",8),y(14," Send Reset Link "),m()()(),K(15,q3,3,1,"div",9),p(16,"p",10),y(17," Remember your password? "),p(18,"a",11),y(19," Sign in "),m()()()()),r&2&&(C(11),Le("ngModel",i.email),C(2),j("disabled",!i.isEmailValid()),C(2),j("ngIf",i.submitted))},dependencies:[ae,ut,Ft,Ti,Sn,Jt,Si,cr,zt,Vr,qe,Rt],encapsulation:2})}return n})();function H3(n,e){if(n&1&&(p(0,"div",10)(1,"div",11)(2,"div",16)(3,"div",17)(4,"span",18),y(5),m()(),p(6,"div")(7,"h3",19),y(8),m(),p(9,"p",20),y(10),m(),p(11,"p",21),y(12),m()()()()()),n&2){let t=e.$implicit;C(5),Y(t.icon),C(3),Y(t.title),C(2),Y(t.description),C(2),Y(t.date)}}var $x=(()=>{class n{profileStats={totalChallenges:50,completedChallenges:35,winRate:75,averageScore:85,rank:"Master",experience:2500,level:5};achievements=[{id:"1",title:"Ethics Expert",description:"Completed 10 ethics challenges with perfect scores",date:"2024-03-15",icon:"\u{1F3C6}"},{id:"2",title:"Quick Thinker",description:"Solved a challenge in under 5 minutes",date:"2024-03-10",icon:"\u26A1"},{id:"3",title:"Tournament Champion",description:"Won first place in the AI Ethics Championship",date:"2024-02-28",icon:"\u{1F3AF}"}];static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ne({type:n,selectors:[["app-profile"]],standalone:!0,features:[re],decls:44,vars:8,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"flex","items-center","gap-6","mb-8"],[1,"w-24","h-24","rounded-full","bg-gray-200","flex","items-center","justify-center"],[1,"text-3xl"],[1,"text-3xl","font-bold"],[1,"text-gray-600"],[1,"flex","items-center","gap-2","mt-2"],[1,"badge","badge-primary"],[1,"text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],[1,"card"],[1,"card-body"],[1,"text-lg","font-semibold","mb-2"],[1,"text-2xl","font-bold","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","card",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","rounded-full","bg-primary/10","flex","items-center","justify-center"],[1,"text-2xl"],[1,"font-semibold"],[1,"text-sm","text-gray-600"],[1,"text-xs","text-gray-500","mt-1"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),y(4,"\u{1F464}"),m()(),p(5,"div")(6,"h1",4),y(7,"John Doe"),m(),p(8,"p",5),y(9,"AI Ethics Expert"),m(),p(10,"div",6)(11,"span",7),y(12),m(),p(13,"span",8),y(14),m()()()(),p(15,"div",9)(16,"div",10)(17,"div",11)(18,"h3",12),y(19,"Challenges"),m(),p(20,"p",4),y(21),m()()(),p(22,"div",10)(23,"div",11)(24,"h3",12),y(25,"Win Rate"),m(),p(26,"p",4),y(27),m()()(),p(28,"div",10)(29,"div",11)(30,"h3",12),y(31,"Average Score"),m(),p(32,"p",4),y(33),m()()(),p(34,"div",10)(35,"div",11)(36,"h3",12),y(37,"Rank"),m(),p(38,"p",4),y(39),m()()()(),p(40,"h2",13),y(41,"Achievements"),m(),p(42,"div",14),K(43,H3,13,4,"div",15),m()()),r&2&&(C(12),G("Level ",i.profileStats.level,""),C(2),G("",i.profileStats.experience," XP"),C(7),Qi("",i.profileStats.completedChallenges,"/",i.profileStats.totalChallenges,""),C(6),G("",i.profileStats.winRate,"%"),C(6),Y(i.profileStats.averageScore),C(6),Y(i.profileStats.rank),C(4),j("ngForOf",i.achievements))},dependencies:[ae,Je,qe],encapsulation:2})}return n})();function z3(n,e){if(n&1&&(p(0,"option",20),y(1),m()),n&2){let t=e.$implicit;j("value",t.value),C(),G(" ",t.title," ")}}function G3(n,e){if(n&1){let t=In();p(0,"div",6)(1,"div")(2,"h3",7),y(3),m(),p(4,"p",8),y(5),m()(),p(6,"label",11)(7,"input",12),Ve("ngModelChange",function(i){let o=nn(t).$implicit;return Be(o.enabled,i)||(o.enabled=i),rn(i)}),m(),he(8,"span",13),m()()}if(n&2){let t=e.$implicit;C(3),Y(t.title),C(2),Y(t.description),C(2),Le("ngModel",t.enabled)}}var qx=(()=>{class n{themes=[{id:"1",title:"Light",value:"light"},{id:"2",title:"Dark",value:"dark"},{id:"3",title:"System",value:"system"}];selectedTheme="light";darkMode=!1;profileVisibility="public";showOnlineStatus=!0;notificationSettings=[{id:"1",title:"Challenge Invitations",description:"Get notified when you receive new challenge invitations",enabled:!0},{id:"2",title:"Tournament Updates",description:"Receive updates about tournaments you're participating in",enabled:!0},{id:"3",title:"Achievement Unlocked",description:"Get notified when you unlock new achievements",enabled:!0},{id:"4",title:"Friend Activity",description:"See when friends complete challenges or join tournaments",enabled:!1}];static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ne({type:n,selectors:[["app-settings"]],standalone:!0,features:[re],decls:61,vars:6,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-3xl","font-bold","mb-8"],[1,"card","mb-8"],[1,"card-body"],[1,"text-xl","font-semibold","mb-4"],[1,"space-y-4"],[1,"flex","items-center","justify-between"],[1,"font-medium"],[1,"text-sm","text-gray-600"],[1,"select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"switch"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"slider"],["class","flex items-center justify-between",4,"ngFor","ngForOf"],["value","public"],["value","friends"],["value","private"],[1,"flex","justify-end"],[1,"btn","btn-primary"],[3,"value"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"h1",1),y(2,"Settings"),m(),p(3,"div",2)(4,"div",3)(5,"h2",4),y(6,"Theme"),m(),p(7,"div",5)(8,"div",6)(9,"div")(10,"h3",7),y(11,"Color Theme"),m(),p(12,"p",8),y(13,"Choose your preferred color theme"),m()(),p(14,"select",9),Ve("ngModelChange",function(s){return Be(i.selectedTheme,s)||(i.selectedTheme=s),s}),K(15,z3,2,2,"option",10),m()(),p(16,"div",6)(17,"div")(18,"h3",7),y(19,"Dark Mode"),m(),p(20,"p",8),y(21,"Toggle dark mode"),m()(),p(22,"label",11)(23,"input",12),Ve("ngModelChange",function(s){return Be(i.darkMode,s)||(i.darkMode=s),s}),m(),he(24,"span",13),m()()()()(),p(25,"div",2)(26,"div",3)(27,"h2",4),y(28,"Notifications"),m(),p(29,"div",5),K(30,G3,9,3,"div",14),m()()(),p(31,"div",2)(32,"div",3)(33,"h2",4),y(34,"Privacy"),m(),p(35,"div",5)(36,"div",6)(37,"div")(38,"h3",7),y(39,"Profile Visibility"),m(),p(40,"p",8),y(41,"Control who can see your profile"),m()(),p(42,"select",9),Ve("ngModelChange",function(s){return Be(i.profileVisibility,s)||(i.profileVisibility=s),s}),p(43,"option",15),y(44,"Public"),m(),p(45,"option",16),y(46,"Friends Only"),m(),p(47,"option",17),y(48,"Private"),m()()(),p(49,"div",6)(50,"div")(51,"h3",7),y(52,"Show Online Status"),m(),p(53,"p",8),y(54,"Display when you're active"),m()(),p(55,"label",11)(56,"input",12),Ve("ngModelChange",function(s){return Be(i.showOnlineStatus,s)||(i.showOnlineStatus=s),s}),m(),he(57,"span",13),m()()()()(),p(58,"div",18)(59,"button",19),y(60,"Save Changes"),m()()()),r&2&&(C(14),Le("ngModel",i.selectedTheme),C(),j("ngForOf",i.themes),C(8),Le("ngModel",i.darkMode),C(7),j("ngForOf",i.notificationSettings),C(12),Le("ngModel",i.profileVisibility),C(14),Le("ngModel",i.showOnlineStatus))},dependencies:[ae,Je,Ft,rf,of,bo,Ys,Jt,zt],styles:['.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:34px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:34px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.select[_ngcontent-%COMP%]{border-radius:.375rem;border-width:1px;padding:.5rem .75rem}']})}return n})();function W3(n,e){if(n&1&&(p(0,"div",15)(1,"div",8)(2,"h3",18),y(3),m(),p(4,"p",10),y(5),m()()()),n&2){let t=e.$implicit;C(3),Y(t.question),C(2),Y(t.answer)}}function K3(n,e){if(n&1&&(p(0,"span",21),y(1),m()),n&2){let t=e.$implicit;C(),G(" ",t," ")}}function Q3(n,e){if(n&1&&(p(0,"div",15)(1,"div",8)(2,"div",19),K(3,K3,2,1,"span",20),m(),p(4,"p",10),y(5),m()()()),n&2){let t=e.$implicit;C(3),j("ngForOf",t.keys),C(2),Y(t.description)}}var Hx=(()=>{class n{faqs=[{id:"1",question:"How do I start a challenge?",answer:"To start a challenge, navigate to the Challenges page and click on any available challenge. Follow the instructions provided to complete the challenge."},{id:"2",question:"How are scores calculated?",answer:"Scores are based on your performance in various aspects of the challenge, including accuracy, speed, and adherence to best practices."},{id:"3",question:"Can I participate in multiple tournaments?",answer:"Yes, you can participate in multiple tournaments simultaneously, as long as they don't have overlapping schedules."}];keyboardShortcuts=[{id:"1",keys:["\u2318","H"],description:"Navigate to home page"},{id:"2",keys:["\u2318","D"],description:"Navigate to dashboard"},{id:"3",keys:["\u2318","C"],description:"Navigate to challenges"},{id:"4",keys:["\u2318","T"],description:"Navigate to tournaments"},{id:"5",keys:["\u2318","R"],description:"Navigate to results"},{id:"6",keys:["\u2318","?"],description:"Open help center"}];static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ne({type:n,selectors:[["app-help"]],standalone:!0,features:[re],decls:45,vars:2,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-3xl","font-bold","mb-8"],[1,"mb-8"],[1,"relative"],["type","text","placeholder","Search for help...",1,"w-full","px-4","py-2","border","rounded-lg"],[1,"absolute","right-2","top-2"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-8"],[1,"card","cursor-pointer","hover:shadow-lg","transition-shadow"],[1,"card-body"],[1,"text-xl","font-semibold","mb-2"],[1,"text-gray-600"],[1,"text-2xl","font-bold","mb-4"],[1,"space-y-4"],["class","card",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"card"],[1,"text-gray-600","mb-4"],[1,"btn","btn-primary"],[1,"text-lg","font-semibold","mb-2"],[1,"flex","items-center","gap-2","mb-2"],["class","px-2 py-1 bg-gray-100 rounded",4,"ngFor","ngForOf"],[1,"px-2","py-1","bg-gray-100","rounded"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"h1",1),y(2,"Help Center"),m(),p(3,"div",2)(4,"div",3),he(5,"input",4),p(6,"button",5),y(7," \u{1F50D} "),m()()(),p(8,"div",6)(9,"div",7)(10,"div",8)(11,"h3",9),y(12,"Getting Started"),m(),p(13,"p",10),y(14,"Learn the basics of AI Fight Club"),m()()(),p(15,"div",7)(16,"div",8)(17,"h3",9),y(18,"Challenges"),m(),p(19,"p",10),y(20,"Understand how challenges work"),m()()(),p(21,"div",7)(22,"div",8)(23,"h3",9),y(24,"Tournaments"),m(),p(25,"p",10),y(26,"Learn about tournament rules"),m()()()(),p(27,"div",2)(28,"h2",11),y(29,"Frequently Asked Questions"),m(),p(30,"div",12),K(31,W3,6,2,"div",13),m()(),p(32,"div",2)(33,"h2",11),y(34,"Keyboard Shortcuts"),m(),p(35,"div",14),K(36,Q3,6,2,"div",13),m()(),p(37,"div",15)(38,"div",8)(39,"h2",11),y(40,"Still Need Help?"),m(),p(41,"p",16),y(42," Our support team is here to help you with any questions or issues you might have. "),m(),p(43,"button",17),y(44,"Contact Support"),m()()()()),r&2&&(C(31),j("ngForOf",i.faqs),C(5),j("ngForOf",i.keyboardShortcuts))},dependencies:[ae,Je,qe],encapsulation:2})}return n})();function Y3(n,e){if(n&1&&(p(0,"div",9)(1,"div",10)(2,"div",11)(3,"h3",12),y(4),m(),p(5,"span"),y(6),m()(),p(7,"p",13),y(8),m(),p(9,"div",14)(10,"div",15)(11,"span",16),y(12,"Category:"),m(),p(13,"span",17),y(14),m()(),p(15,"div",15)(16,"span",16),y(17,"Prize:"),m(),p(18,"span",17),y(19),m()(),p(20,"div",15)(21,"span",16),y(22,"Participants:"),m(),p(23,"span",17),y(24),m()(),p(25,"div",15)(26,"span",16),y(27,"Duration:"),m(),p(28,"span",17),y(29),m()()(),p(30,"div",18)(31,"button",3),y(32,"Join Tournament"),m()()()()),n&2){let t=e.$implicit,r=we();C(4),Y(t.title),C(),Cr("badge "+r.getStatusClass(t.status)),C(),G(" ",t.status," "),C(2),Y(t.description),C(6),Y(t.category),C(5),Y(t.prize),C(5),Y(t.participants),C(5),Qi("",t.startDate," - ",t.endDate,"")}}var zx=(()=>{class n{tournaments=[{id:"1",title:"AI Ethics Championship",description:"Compete in challenging scenarios focused on AI ethics and responsible AI development.",startDate:"2024-04-01",endDate:"2024-04-15",participants:128,status:"upcoming",prize:"$5,000",category:"Ethics"},{id:"2",title:"Machine Learning Masters",description:"Showcase your ML expertise in this competitive tournament.",startDate:"2024-03-15",endDate:"2024-03-30",participants:256,status:"active",prize:"$10,000",category:"Machine Learning"},{id:"3",title:"AI Safety Challenge",description:"Test your knowledge of AI safety principles and best practices.",startDate:"2024-02-01",endDate:"2024-02-15",participants:64,status:"completed",prize:"$3,000",category:"Safety"}];getStatusClass(t){switch(t){case"upcoming":return"badge upcoming";case"active":return"badge active";case"completed":return"badge completed";default:return"badge"}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ne({type:n,selectors:[["app-tournaments"]],standalone:!0,features:[re],decls:17,vars:1,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-3xl","font-bold"],[1,"btn","btn-primary"],[1,"flex","gap-4","mb-6"],[1,"btn","btn-outline","active"],[1,"btn","btn-outline"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-body"],[1,"flex","justify-between","items-start","mb-4"],[1,"text-xl","font-semibold"],[1,"text-gray-600","mb-4"],[1,"space-y-2","mb-4"],[1,"flex","justify-between"],[1,"text-gray-500"],[1,"font-medium"],[1,"flex","justify-end"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"h1",2),y(3,"Tournaments"),m(),p(4,"button",3),y(5,"Create Tournament"),m()(),p(6,"div",4)(7,"button",5),y(8,"All"),m(),p(9,"button",6),y(10,"Upcoming"),m(),p(11,"button",6),y(12,"Active"),m(),p(13,"button",6),y(14,"Completed"),m()(),p(15,"div",7),K(16,Y3,33,10,"div",8),m()()),r&2&&(C(16),j("ngForOf",i.tournaments))},dependencies:[ae,Je,qe],styles:[".badge[_ngcontent-%COMP%]{border-radius:9999px;padding:.25rem .5rem;font-size:.875rem;line-height:1.25rem;font-weight:500}.badge.upcoming[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.badge.active[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.badge.completed[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}"]})}return n})();var Gx=(()=>{class n{firestore;resultsAnalysisService;challengeService;LEADERBOARD_LIMIT=100;constructor(t,r,i){this.firestore=t,this.resultsAnalysisService=r,this.challengeService=i}getLeaderboard(t="all"){return b(this,null,function*(){try{let r=bi(this.firestore,"final_results"),i=Ci(r,tx("overallScore","desc"),ex(this.LEADERBOARD_LIMIT));if(t!=="all"){let a=new Date,l=new Date;switch(t){case"month":l.setMonth(a.getMonth()-1);break;case"week":l.setDate(a.getDate()-7);break;case"day":l.setDate(a.getDate()-1);break}i=Ci(i,Di("timestamp",">=",l.toISOString()))}let o=yield Io(i),s=[];for(let a=0;a<o.docs.length;a++){let u=o.docs[a].data(),h=Un(this.firestore,`users/${u.userId}`),g=yield Ei(h),_=g.exists()?g.data():null;console.log("userData",_);let I=bi(this.firestore,"challenges"),R=Ci(I,Di("userId","==",u.userId)),O=(yield Io(R)).size;s.push({rank:a+1,userId:u.userId,name:_?.name||"Anonymous User",score:u.overallScore,challenges:O,badges:u.badges.map(H=>H.name),focusArea:u.focusArea?.name||"General",recentScore:u.overallScore})}return s}catch(r){return console.error("Error fetching leaderboard data:",r),[]}})}static \u0275fac=function(r){return new(r||n)(F(_t),F(cf),F(ea))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function X3(n,e){n&1&&(p(0,"div",12)(1,"div",13),y(2,"Loading leaderboard data..."),m()())}function Z3(n,e){n&1&&(p(0,"div",14)(1,"div",15),y(2,"Failed to load leaderboard data. Please try again later."),m()())}function eB(n,e){if(n&1&&(p(0,"span",32),y(1),m()),n&2){let t=e.$implicit;C(),G(" ",t," ")}}function tB(n,e){if(n&1&&(p(0,"tr",22)(1,"td",23)(2,"div",24),y(3),m()(),p(4,"td",23)(5,"div",25)(6,"div",26)(7,"div",27),y(8),m()(),p(9,"div",28)(10,"div",24),y(11),m()()()(),p(12,"td",23)(13,"div",29),y(14),m()(),p(15,"td",23)(16,"div",29),y(17),m()(),p(18,"td",23)(19,"div",29),y(20),m()(),p(21,"td",23)(22,"div",30),K(23,eB,2,1,"span",31),m()()()),n&2){let t=e.$implicit;C(3),Y(t.rank),C(5),G(" ",t.name.charAt(0)," "),C(3),Y(t.name),C(3),G("",t.score,"%"),C(3),Y(t.challenges),C(3),Y(t.focusArea),C(3),j("ngForOf",t.badges)}}function nB(n,e){if(n&1&&(p(0,"div",16)(1,"table",17)(2,"thead",18)(3,"tr")(4,"th",19),y(5," Rank "),m(),p(6,"th",19),y(7," Player "),m(),p(8,"th",19),y(9," Score "),m(),p(10,"th",19),y(11," Challenges "),m(),p(12,"th",19),y(13," Focus Area "),m(),p(14,"th",19),y(15," Badges "),m()()(),p(16,"tbody",20),K(17,tB,24,7,"tr",21),m()()()),n&2){let t=we();C(17),j("ngForOf",t.leaderboardData)}}var Wx=(()=>{class n{leaderboardService;leaderboardData=[];loading=!0;error=!1;selectedTimeFrame="all";constructor(t){this.leaderboardService=t}ngOnInit(){this.loadLeaderboard()}loadLeaderboard(){return b(this,null,function*(){this.loading=!0,this.error=!1;try{this.leaderboardData=yield this.leaderboardService.getLeaderboard(this.selectedTimeFrame)}catch(t){console.error("Error loading leaderboard:",t),this.error=!0}finally{this.loading=!1}})}static \u0275fac=function(r){return new(r||n)(U(Gx))};static \u0275cmp=ne({type:n,selectors:[["app-leaderboard"]],standalone:!0,features:[re],decls:17,vars:4,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900"],[1,"flex","space-x-4"],[1,"border","rounded-md","px-3","py-2",3,"ngModelChange","change","ngModel"],["value","all"],["value","month"],["value","week"],["value","day"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-lg p-4 mb-8",4,"ngIf"],["class","bg-white rounded-lg shadow overflow-hidden",4,"ngIf"],[1,"flex","justify-center","items-center","py-12"],[1,"text-gray-600"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","mb-8"],[1,"text-red-600"],[1,"bg-white","rounded-lg","shadow","overflow-hidden"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"flex","items-center"],[1,"flex-shrink-0","h-10","w-10"],[1,"h-10","w-10","rounded-full","bg-gray-200","flex","items-center","justify-center"],[1,"ml-4"],[1,"text-sm","text-gray-900"],[1,"flex","space-x-1"],["class","px-2 py-1 text-xs font-medium rounded-full bg-indigo-100 text-indigo-800",4,"ngFor","ngForOf"],[1,"px-2","py-1","text-xs","font-medium","rounded-full","bg-indigo-100","text-indigo-800"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"h1",2),y(3,"Leaderboard"),m(),p(4,"div",3)(5,"select",4),Ve("ngModelChange",function(s){return Be(i.selectedTimeFrame,s)||(i.selectedTimeFrame=s),s}),te("change",function(){return i.loadLeaderboard()}),p(6,"option",5),y(7,"All Time"),m(),p(8,"option",6),y(9,"This Month"),m(),p(10,"option",7),y(11,"This Week"),m(),p(12,"option",8),y(13,"Today"),m()()()(),K(14,X3,3,0,"div",9)(15,Z3,3,0,"div",10)(16,nB,18,1,"div",11),m()),r&2&&(C(5),Le("ngModel",i.selectedTimeFrame),C(9),j("ngIf",i.loading),C(),j("ngIf",i.error),C(),j("ngIf",!i.loading&&!i.error))},dependencies:[ae,Je,ut,qe,Ft,rf,of,Ys,Jt,zt],encapsulation:2})}return n})();function rB(n,e){if(n&1){let t=In();p(0,"button",25),te("click",function(){nn(t);let i=we().$implicit,o=we();return rn(o.startChallenge(i))}),y(1," Start Challenge "),m()}}function iB(n,e){if(n&1&&(p(0,"div",26)(1,"span",27),y(2,"Completed"),m(),p(3,"span",28),y(4),m()()),n&2){let t=we().$implicit;C(4),G("Score: ",t.score,"")}}function oB(n,e){if(n&1&&(p(0,"div",15)(1,"div",16)(2,"div",17)(3,"h3",18),y(4),m(),p(5,"span",19),y(6),m()(),p(7,"p",20),y(8),m(),p(9,"div",21)(10,"span"),y(11),m(),p(12,"span"),y(13),m(),p(14,"span"),y(15),m()(),p(16,"div",22),K(17,rB,2,0,"button",23)(18,iB,5,1,"div",24),m()()()),n&2){let t=e.$implicit,r=we();C(4),Y(t.title),C(),Cr(r.getDifficultyClass(t.difficulty)),C(),G(" ",t.difficulty," "),C(2),Y(t.description),C(3),Y(t.category),C(2),G("",t.timeLimit," minutes"),C(2),G("",t.points," points"),C(2),j("ngIf",!t.completed),C(),j("ngIf",t.completed)}}var Kx=(()=>{class n{challenges=[{id:"1",title:"Ethical Decision Making",description:"Navigate complex ethical scenarios and make decisions that balance multiple stakeholders.",difficulty:"Hard",category:"Ethics",points:100,timeLimit:30,completed:!1},{id:"2",title:"Creative Problem Solving",description:"Generate innovative solutions to open-ended problems using creative thinking techniques.",difficulty:"Medium",category:"Creativity",points:75,timeLimit:20,completed:!0,score:85},{id:"3",title:"Data Analysis Challenge",description:"Analyze complex datasets and draw meaningful insights to solve business problems.",difficulty:"Hard",category:"Analysis",points:100,timeLimit:45,completed:!1},{id:"4",title:"Communication Strategy",description:"Develop effective communication strategies for different audiences and contexts.",difficulty:"Medium",category:"Communication",points:75,timeLimit:25,completed:!1},{id:"5",title:"Quick Ethics Quiz",description:"Test your knowledge of ethical principles and decision-making frameworks.",difficulty:"Easy",category:"Ethics",points:50,timeLimit:15,completed:!0,score:90},{id:"6",title:"Innovation Workshop",description:"Practice creative thinking techniques to generate innovative ideas and solutions.",difficulty:"Easy",category:"Creativity",points:50,timeLimit:20,completed:!1}];constructor(){}ngOnInit(){}getDifficultyClass(t){switch(t){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}startChallenge(t){console.log("Starting challenge:",t.id)}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ne({type:n,selectors:[["app-challenges"]],standalone:!0,features:[re],decls:27,vars:1,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900"],[1,"flex","space-x-4"],[1,"border","rounded-md","px-3","py-2"],["value","all"],["value","ethics"],["value","creativity"],["value","analysis"],["value","communication"],["value","easy"],["value","medium"],["value","hard"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-200",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow-md","overflow-hidden","hover:shadow-lg","transition-shadow","duration-200"],[1,"p-6"],[1,"flex","justify-between","items-start","mb-4"],[1,"text-xl","font-semibold","text-gray-900"],[1,"px-2","py-1","text-xs","font-medium","rounded-full"],[1,"text-gray-600","mb-4"],[1,"flex","items-center","justify-between","text-sm","text-gray-500","mb-4"],[1,"flex","justify-between","items-center"],["class","bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors duration-200",3,"click",4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-md","hover:bg-indigo-700","transition-colors","duration-200",3,"click"],[1,"flex","items-center","space-x-2"],[1,"text-green-600","font-medium"],[1,"text-gray-600"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"h1",2),y(3,"Challenges"),m(),p(4,"div",3)(5,"select",4)(6,"option",5),y(7,"All Categories"),m(),p(8,"option",6),y(9,"Ethics"),m(),p(10,"option",7),y(11,"Creativity"),m(),p(12,"option",8),y(13,"Analysis"),m(),p(14,"option",9),y(15,"Communication"),m()(),p(16,"select",4)(17,"option",5),y(18,"All Difficulties"),m(),p(19,"option",10),y(20,"Easy"),m(),p(21,"option",11),y(22,"Medium"),m(),p(23,"option",12),y(24,"Hard"),m()()()(),p(25,"div",13),K(26,oB,19,10,"div",14),m()()),r&2&&(C(26),j("ngForOf",i.challenges))},dependencies:[ae,Je,ut,qe],encapsulation:2})}return n})();var hn=(()=>{class n{userService;router;loadingService;constructor(t,r,i){this.userService=t,this.router=r,this.loadingService=i}canActivate(t,r){return b(this,null,function*(){this.loadingService.show();let i=this.userService.getCurrentUserId();console.log("RouteGuard - User ID:",i);let o=r.url.split("?")[0];if(console.log("RouteGuard - Target path:",o),!i)return console.log("RouteGuard - No user ID, redirecting to welcome"),this.router.navigate(["/welcome"]),this.loadingService.hide(),!1;try{let s=yield this.userService.getUser(i);if(console.log("RouteGuard - User data:",s),!s)return console.log("User not found, redirecting to context"),this.router.navigate(["/context"]),this.loadingService.hide(),!1;if(s&&s.currentRoute===void 0&&(console.log("RouteGuard - Setting empty currentRoute"),yield this.userService.updateUserRoute(i,"")),o==="/challenges")return console.log("RouteGuard - Handling challenges page"),this.loadingService.hide(),!0;if(s?.currentRoute==="/results"&&!o.includes("/round/"))return console.log("RouteGuard - Resetting from results page"),yield this.userService.updateUserRoute(i,""),this.loadingService.hide(),!0;if(o.includes("/round/")){let a=parseInt(o.split("/").pop()||"0");if(console.log("RouteGuard - Round number:",a),s?.currentRoute&&!s.currentRoute.includes("/round/"))return console.log("RouteGuard - Redirecting to current route:",s.currentRoute),this.router.navigate([s.currentRoute]),this.loadingService.hide(),!1;if(s?.currentRoute){let l=s.currentRoute.match(/\/round\/(\d+)/);if(l){let u=parseInt(l[1]);if(a!==u)return console.log("RouteGuard - Redirecting to current round:",u),this.router.navigate([s.currentRoute]),this.loadingService.hide(),!1}}}return s?.traits&&s?.attitudes&&["/context","/traits","/attitudes"].includes(o)?(console.log("RouteGuard - Redirecting to focus page"),this.router.navigate(["/focus"]),this.loadingService.hide(),!1):s?.currentRoute&&o!==s.currentRoute?(console.log("RouteGuard - Redirecting to current route:",s.currentRoute),this.router.navigate([s.currentRoute]),this.loadingService.hide(),!1):(console.log("RouteGuard - Allowing navigation to:",o),this.loadingService.hide(),!0)}catch(s){return console.error("RouteGuard - Error:",s),this.router.navigate(["/welcome"]),this.loadingService.hide(),!1}})}isChallengeFlowRoute(t){let r=["focus","results"];return t.startsWith("round/")?!0:r.includes(t)}static \u0275fac=function(r){return new(r||n)(F(Ze),F($e),F(lr))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Qx=[{path:"",component:e_},{path:"welcome",component:e_},{path:"auth",children:[{path:"login",component:jx},{path:"register",component:Ux},{path:"forgot-password",component:Bx}]},{path:"context",component:Sx,data:{next:"traits"}},{path:"traits",component:xx,data:{next:"attitudes"},canActivate:[hn]},{path:"attitudes",component:Ax,data:{next:"focus"},canActivate:[hn]},{path:"focus",component:Px,data:{previous:"attitudes",next:"round/1"},canActivate:[hn]},{path:"round/:round",component:Nx,canActivate:[hn],data:{title:"Round"}},{path:"results",component:kx,data:{next:"dashboard"},canActivate:[hn]},{path:"dashboard",component:Vx,canActivate:[hn]},{path:"share",component:Lx,canActivate:[hn]},{path:"profile",component:$x,canActivate:[hn]},{path:"settings",component:qx,canActivate:[hn]},{path:"help",component:Hx},{path:"tournaments",component:zx,canActivate:[hn]},{path:"leaderboard",component:Wx,canActivate:[hn]},{path:"challenges",component:Kx,canActivate:[hn]}];var Yx={providers:[Ym({eventCoalescing:!0}),eD(Qx),iC(),pm(ND(()=>OD(ar.firebase)),XT(()=>ZT()))]};function sB(n,e){n&1&&(Qt(0),p(1,"a",14),y(2," Login "),m(),p(3,"a",15),y(4," Register "),m(),Yt())}function aB(n,e){if(n&1){let t=In();Qt(0),p(1,"a",16),y(2," Profile "),m(),p(3,"a",17),y(4," Settings "),m(),p(5,"button",18),te("click",function(){nn(t);let i=we();return rn(i.logout())}),y(6," Logout "),m(),Yt()}}var Jx=(()=>{class n{router;isAuthenticated=!0;constructor(t){this.router=t}logout(){this.isAuthenticated=!1,this.router.navigate(["/"])}resetGame(){confirm("Are you sure you want to reset the game? All progress will be lost.")&&(console.log("Game reset requested by user"),this.router.navigate(["/"]))}static \u0275fac=function(r){return new(r||n)(U($e))};static \u0275cmp=ne({type:n,selectors:[["app-app-header"]],standalone:!0,features:[re],decls:22,vars:2,consts:[[1,"bg-white","dark:bg-gray-800","border-b","border-gray-200","dark:border-gray-700"],[1,"container","mx-auto","px-4","py-3"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],["routerLink","/",1,"text-xl","font-bold","text-gray-800","dark:text-white"],[1,"hidden","md:flex","items-center","space-x-6"],["routerLink","/dashboard",1,"text-gray-600","dark:text-gray-300","hover:text-gray-900","dark:hover:text-white"],["routerLink","/challenges",1,"text-gray-600","dark:text-gray-300","hover:text-gray-900","dark:hover:text-white"],["routerLink","/leaderboard",1,"text-gray-600","dark:text-gray-300","hover:text-gray-900","dark:hover:text-white"],["routerLink","/tournaments",1,"text-gray-600","dark:text-gray-300","hover:text-gray-900","dark:hover:text-white"],["routerLink","/help",1,"text-gray-600","dark:text-gray-300","hover:text-gray-900","dark:hover:text-white"],[1,"flex","items-center","space-x-4"],[1,"text-gray-600","dark:text-gray-300","hover:text-gray-900","dark:hover:text-white","border","border-gray-300","dark:border-gray-600","px-3","py-1","rounded-md",3,"click"],[4,"ngIf"],["routerLink","/auth/login",1,"text-gray-600","dark:text-gray-300","hover:text-gray-900","dark:hover:text-white"],["routerLink","/auth/register",1,"bg-blue-600","text-white","px-4","py-2","rounded-md","hover:bg-blue-700","transition-colors"],["routerLink","/profile",1,"text-gray-600","dark:text-gray-300","hover:text-gray-900","dark:hover:text-white"],["routerLink","/settings",1,"text-gray-600","dark:text-gray-300","hover:text-gray-900","dark:hover:text-white"],[1,"text-gray-600","dark:text-gray-300","hover:text-gray-900","dark:hover:text-white",3,"click"]],template:function(r,i){r&1&&(p(0,"header",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"a",4),y(5," AI Fight Club "),m()(),p(6,"div",5)(7,"a",6),y(8," Dashboard "),m(),p(9,"a",7),y(10," Challenges "),m(),p(11,"a",8),y(12," Leaderboard "),m(),p(13,"a",9),y(14," Tournaments "),m(),p(15,"a",10),y(16," Help "),m()(),p(17,"div",11)(18,"button",12),te("click",function(){return i.resetGame()}),y(19," Reset Game "),m(),K(20,sB,5,0,"ng-container",13)(21,aB,7,0,"ng-container",13),m()()()()),r&2&&(C(20),j("ngIf",!i.isAuthenticated),C(),j("ngIf",i.isAuthenticated))},dependencies:[ae,ut,qe,Rt]})}return n})();var Xx=(()=>{class n{currentYear=new Date().getFullYear();static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ne({type:n,selectors:[["app-app-layout"]],standalone:!0,features:[re],decls:7,vars:1,consts:[[1,"min-h-screen","flex","flex-col","bg-gray-50","dark:bg-gray-900"],[1,"flex-grow","container","mx-auto","p-4"],[1,"bg-white","dark:bg-gray-800","border-t","border-gray-200","dark:border-gray-700"],[1,"container","mx-auto","p-4","text-center","text-sm","text-gray-600","dark:text-gray-400"]],template:function(r,i){r&1&&(p(0,"div",0),he(1,"app-app-header"),p(2,"main",1),he(3,"router-outlet"),m(),p(4,"footer",2)(5,"div",3),y(6),m()()()),r&2&&(C(6),G(" \xA9 ",i.currentYear," AI Fight Club - Human Edge Competitive Analysis "))},dependencies:[ae,pc,Jx]})}return n})();function cB(n,e){n&1&&(p(0,"div",1)(1,"div",2),he(2,"div",3),p(3,"p",4),y(4,"Loading..."),m()()())}var Zx=(()=>{class n{loadingService;isLoading=!1;constructor(t){this.loadingService=t}ngOnInit(){this.loadingService.loading$.subscribe(t=>{this.isLoading=t})}static \u0275fac=function(r){return new(r||n)(U(lr))};static \u0275cmp=ne({type:n,selectors:[["app-loading"]],standalone:!0,features:[re],decls:1,vars:1,consts:[["class","fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",4,"ngIf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","justify-center","items-center","z-50"],[1,"bg-white","p-6","rounded-lg","shadow-lg","text-center"],[1,"w-12","h-12","border-4","border-gray-200","border-t-blue-500","rounded-full","animate-spin","mx-auto","mb-4"],[1,"text-gray-700","font-medium"]],template:function(r,i){r&1&&K(0,cB,5,0,"div",0),r&2&&j("ngIf",i.isLoading)},dependencies:[ae,ut],encapsulation:2})}return n})();var eA=(()=>{class n{userService;router;loadingService;title="mereka-ai-game";constructor(t,r,i){this.userService=t,this.router=r,this.loadingService=i}ngOnInit(){return b(this,null,function*(){this.loadingService.show();let t=this.userService.getCurrentUserId();if(t)try{let r=yield this.userService.getUser(t);if(r){let i=window.location.pathname;i==="/"||i==="/welcome"?(console.log("Redirecting registered user to dashboard"),this.router.navigate(["/dashboard"])):r.currentRoute==="/results"?(console.log("Resetting results route on app load"),yield this.userService.updateUserRoute(t,""),i==="/results"&&this.router.navigate(["/dashboard"])):i!==r.currentRoute&&i!=="/results"&&this.router.navigate([r.currentRoute])}}catch(r){console.error("Error checking user route:",r)}this.loadingService.hide()})}static \u0275fac=function(r){return new(r||n)(U(Ze),U($e),U(lr))};static \u0275cmp=ne({type:n,selectors:[["app-root"]],standalone:!0,features:[re],decls:3,vars:0,template:function(r,i){r&1&&(he(0,"app-loading"),p(1,"app-app-layout"),he(2,"router-outlet"),m())},dependencies:[pc,Xx,Zx]})}return n})();hC(eA,Yx).catch(n=>console.error(n));
